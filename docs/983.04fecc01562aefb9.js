"use strict";(self.webpackChunkprueba=self.webpackChunkprueba||[]).push([[983],{4983:(P,c,a)=>{a.r(c),a.d(c,{NuevoArtistaModule:()=>M});var p=a(9808),d=a(6115),g=a(7407),v=a(3385),r=a(2382),h=a(520),f=a(5861),b=a(5226),Z=a.n(b),e=a(5e3),A=a(629),C=a(3632),N=a(1597),y=a(2368),T=a(1962);function I(n,l){1&n&&(e.TgZ(0,"p",38),e._uU(1," Introduzca un nombre "),e.qZA())}function U(n,l){1&n&&(e.TgZ(0,"p",38),e._uU(1," Introduzca un nombre de usuario "),e.qZA())}function _(n,l){if(1&n&&(e.TgZ(0,"option",39),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.Oqu(t.code)}}function x(n,l){1&n&&(e.TgZ(0,"p",38),e._uU(1," Introduzca un email "),e.qZA())}function O(n,l){1&n&&(e.TgZ(0,"p",38),e._uU(1," Introduzca una contrase\xf1a m\xednimo 6 car\xe1cteres "),e.qZA())}function w(n,l){1&n&&(e.TgZ(0,"p",38),e._uU(1," La contrase\xf1a no coincide "),e.qZA())}const F=[{path:"",component:(()=>{class n{constructor(t,o,i,m,s,u,q){this.formBuilder=t,this.authSrv=o,this.usuarioSrv=i,this.rolSrv=m,this.genreSrv=s,this.storageSrv=u,this.router=q,this.imagenes=[]}ngOnInit(){localStorage.getItem("usuario")&&this.router.navigate(["/"]),this.rolSrv.getByCode("ARTISTA").subscribe(t=>{this.rol=t}),this.genreSrv.getAll().subscribe(t=>{this.genre=t}),this.avatar="https://firebasestorage.googleapis.com/v0/b/samesouls-a0c25.appspot.com/o/user-photo.png?alt=media&token=04f07362-f1be-4501-a038-fdd7cec3bb2a",this.form=this.formBuilder.group({foto:"",username:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(50)]],email:["",[r.kI.required,r.kI.pattern("^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5})$")]],nombre:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(50)]],apellidos:["",[r.kI.minLength(3),r.kI.maxLength(50)]],password:["",[r.kI.required,r.kI.minLength(6)]],description:[""],genre:["",[r.kI.required]],repeat_password:["",r.kI.required]})}onUploadImg(t){let o=t.target.files[0],i=new FileReader;i.readAsDataURL(o),i.onloadend=()=>{this.avatar=i.result}}submit(){var t=this;return(0,f.Z)(function*(){try{yield t.authSrv.register(t.form.value.email,t.form.value.password).then(function(){var o=(0,f.Z)(function*(i){i&&(i.user.updateProfile({displayName:t.form.value.username}),t.storageSrv.uploadImg("avatar",t.form.value.email,t.avatar).then(function(){var m=(0,f.Z)(function*(s){console.log("urlImagen",s),s||(s="https://firebasestorage.googleapis.com/v0/b/samesouls-a0c25.appspot.com/o/user-photo.png?alt=media&token=04f07362-f1be-4501-a038-fdd7cec3bb2a");let u={id:i.user.uid,username:t.form.value.username,nombre:t.form.value.nombre,apellidos:t.form.value.apellidos,description:t.form.value.description,genre:t.form.value.genre,email:t.form.value.email,foto:s,rol:t.rol[0],enabled:1,created_at:Date.now()};console.log("usuario",u),yield t.usuarioSrv.create(u),t.router.navigate([""])});return function(s){return m.apply(this,arguments)}}()))});return function(i){return o.apply(this,arguments)}}())}catch(o){Z().fire({icon:"error",title:"El correo ya est\xe1 en uso"})}})()}goTo(t){this.router.navigate([t])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu),e.Y36(A.e),e.Y36(C.L),e.Y36(N.f),e.Y36(y.S),e.Y36(T.V),e.Y36(d.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-nuevo-artista"]],decls:57,vars:9,consts:[[1,"form-back","bg-dark"],[1,"form-signin","needs-validation",3,"formGroup","submit"],[1,"row","col-10","mx-auto","mt-4","g-2"],[1,"h3","mb-3","fw-normal"],[1,"text-pink"],[1,"ms-1","col-lg-2","d-flex","align-items-center","justify-content-center"],["formControlName","foto","type","file","accept",".png, .jpg,.jpeg","multiple","","id","inputFile",3,"change"],["for","inputFile",1,"labelInputFile"],["alt","",3,"src"],[1,"ml-na","row","col-lg-10","d-flex","align-items-center","justify-content-center"],[1,"col-lg-6"],["for","firstName",1,"form-label"],["formControlName","nombre","type","text","id","firstName","placeholder","","value","",1,"form-control"],["class","invalid-error",4,"ngIf"],["for","lastName",1,"form-label"],["formControlName","apellidos","type","text","id","lastName","placeholder","","value","",1,"form-control"],[1,"col-lg-12"],["for","description"],["formControlName","description","placeholder","","rows","3","id","description",1,"form-control"],[1,"col-sm-4","mt-3"],["for","username",1,"form-label"],[1,"input-group","has-validation"],[1,"input-group-text"],["formControlName","username","type","text","id","username","placeholder","Username",1,"form-control"],[1,"col-4","mt-3"],["for","genre",1,"form-label"],["formControlName","genre","aria-label","Default select example","id","genre",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],["for","email",1,"form-label"],["formControlName","email","type","email","id","email","placeholder","you@example.com",1,"form-control"],[1,"col-sm-6","mt-3"],["for","password",1,"form-label"],["formControlName","password","type","password","id","address",1,"form-control"],["for","address",1,"form-label"],["formControlName","repeat_password","type","password","id","address",1,"form-control"],[1,"col-12","d-flex","justify-content-end","mt-5"],[1,"btn","btn-outline-light","me-3",3,"disabled","click"],["type","submit",1,"btn","btn-light","me-3"],[1,"invalid-error"],[3,"ngValue"]],template:function(t,o){1&t&&(e.TgZ(0,"main",0)(1,"form",1),e.NdJ("submit",function(){return o.submit()}),e.TgZ(2,"div",2)(3,"h1",3),e._uU(4,"NUEVO ARTISTA"),e.qZA(),e._UZ(5,"hr",4),e.TgZ(6,"div",5)(7,"input",6),e.NdJ("change",function(m){return o.onUploadImg(m)}),e.qZA(),e.TgZ(8,"label",7),e._UZ(9,"img",8),e.qZA()(),e.TgZ(10,"div",9)(11,"div",10)(12,"label",11),e._uU(13,"Nombre"),e.qZA(),e._UZ(14,"input",12),e.YNc(15,I,2,0,"p",13),e.qZA(),e.TgZ(16,"div",10)(17,"label",14),e._uU(18,"Apellido (Opcional)"),e.qZA(),e._UZ(19,"input",15),e.qZA(),e.TgZ(20,"div",16)(21,"label",17),e._uU(22,"Descripci\xf3n"),e.qZA(),e._UZ(23,"textarea",18),e.qZA()(),e.TgZ(24,"div",19)(25,"label",20),e._uU(26,"Nombre de usuario"),e.qZA(),e.TgZ(27,"div",21)(28,"span",22),e._uU(29,"@"),e.qZA(),e._UZ(30,"input",23),e.qZA(),e.YNc(31,U,2,0,"p",13),e.qZA(),e.TgZ(32,"div",24)(33,"label",25),e._uU(34,"G\xe9nero musical"),e.qZA(),e.TgZ(35,"select",26),e.YNc(36,_,2,2,"option",27),e.qZA()(),e.TgZ(37,"div",24)(38,"label",28),e._uU(39,"Email"),e.qZA(),e._UZ(40,"input",29),e.YNc(41,x,2,0,"p",13),e.qZA(),e.TgZ(42,"div",30)(43,"label",31),e._uU(44,"Contrase\xf1a"),e.qZA(),e._UZ(45,"input",32),e.YNc(46,O,2,0,"p",13),e.qZA(),e.TgZ(47,"div",30)(48,"label",33),e._uU(49,"Repita la contrase\xf1a"),e.qZA(),e._UZ(50,"input",34),e.YNc(51,w,2,0,"p",13),e.qZA(),e.TgZ(52,"div",35)(53,"button",36),e.NdJ("click",function(){return o.goTo("")}),e._uU(54,"Cancelar"),e.qZA(),e.TgZ(55,"button",37),e._uU(56,"A\xf1adir artista"),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(8),e.s9C("src",o.avatar,e.LSH),e.xp6(6),e.Q6J("ngIf",o.form.get("nombre").invalid&&(o.form.get("nombre").dirty||o.form.get("nombre").touched)),e.xp6(16),e.Q6J("ngIf",o.form.get("username").invalid&&(o.form.get("username").dirty||o.form.get("username").touched)),e.xp6(5),e.Q6J("ngForOf",o.genre),e.xp6(5),e.Q6J("ngIf",o.form.get("email").invalid&&(o.form.get("email").dirty||o.form.get("email").touched)),e.xp6(5),e.Q6J("ngIf",o.form.get("password").invalid&&(o.form.get("password").dirty||o.form.get("password").touched)),e.xp6(5),e.Q6J("ngIf",o.form.get("repeat_password").value!=o.form.get("password").value&&(o.form.get("repeat_password").dirty||o.form.get("repeat_password").touched)),e.xp6(2),e.Q6J("disabled",o.form.invalid||o.form.get("repeat_password").value!=o.form.get("password").value))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,p.O5,r.EJ,p.sg,r.YN,r.Kr],styles:[".form-back[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;color:#f2ebdc}.container[_ngcontent-%COMP%]{max-width:960px}.form-img[_ngcontent-%COMP%]{display:flex;justify-content:center}.form-signin[_ngcontent-%COMP%]{width:100%;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.btn-back[_ngcontent-%COMP%]{background-color:#f2ebdc;color:#0d0d0d}.text-pink[_ngcontent-%COMP%]{color:#f2ebdc;margin-left:5px;text-decoration:none}.invalid-error[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#dc3545}.link-pointer[_ngcontent-%COMP%]{cursor:pointer}#inputFile[_ngcontent-%COMP%]{display:none}.labelInputFile[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:100%;padding:1rem;box-shadow:0 0 10px -1px gray;display:flex;justify-content:center;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none}.labelInputFile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:100%}.labelInputFile[_ngcontent-%COMP%]:active{transform:scale(.9)}.ml-na[_ngcontent-%COMP%]{margin-left:8px}"]}),n})(),children:[]}];let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,d.Bz.forChild(F),r.u5,r.UX,g.yb,v.ww,h.JF],d.Bz]}),n})()}}]);