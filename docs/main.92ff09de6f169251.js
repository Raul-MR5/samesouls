"use strict";(self.webpackChunkprueba=self.webpackChunkprueba||[]).push([[179],{440:(Dt,Te,L)=>{L.d(Te,{nm:()=>bi});var M=L(6351);L(5e3),L(5867);var Qe=L(5861),je=L(9681),Re=L(4859),Mt=L(2090),pt=L(1877);const se=new Map,we={activated:!1,tokenObservers:[]},Ee={initialized:!1,enabled:!1};function ke(ve){return se.get(ve)||we}function Ne(ve,pe){se.set(ve,pe)}function et(){return Ee}class mn{constructor(pe,Le,st,vt,Zt){if(this.operation=pe,this.retryPolicy=Le,this.getWaitDuration=st,this.lowerBound=vt,this.upperBound=Zt,this.pending=null,this.nextErrorWaitInterval=vt,vt>Zt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(pe){var Le=this;return(0,Qe.Z)(function*(){Le.stop();try{Le.pending=new Mt.BH,yield function qt(ve){return new Promise(pe=>{setTimeout(pe,ve)})}(Le.getNextRun(pe)),Le.pending.resolve(),yield Le.pending.promise,Le.pending=new Mt.BH,yield Le.operation(),Le.pending.resolve(),yield Le.pending.promise,Le.process(!0).catch(()=>{})}catch(st){Le.retryPolicy(st)?Le.process(!1).catch(()=>{}):Le.stop()}})()}getNextRun(pe){if(pe)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Le=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Le}}}const Gt=new Mt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Tn(ve){if(!ke(ve).activated)throw Gt.create("use-before-activation",{appName:ve.name})}function Cr(ve,pe){return sr.apply(this,arguments)}function sr(){return(sr=(0,Qe.Z)(function*({url:ve,body:pe},Le){const st={"Content-Type":"application/json"},vt=Le.getImmediate({optional:!0});if(vt){const ts=yield vt.getHeartbeatsHeader();ts&&(st["X-Firebase-Client"]=ts)}const Zt={method:"POST",body:JSON.stringify(pe),headers:st};let Qn,Jr;try{Qn=yield fetch(ve,Zt)}catch(ts){throw Gt.create("fetch-network-error",{originalErrorMessage:ts.message})}if(200!==Qn.status)throw Gt.create("fetch-status-error",{httpStatus:Qn.status});try{Jr=yield Qn.json()}catch(ts){throw Gt.create("fetch-parse-error",{originalErrorMessage:ts.message})}const Gn=Jr.ttl.match(/^([\d.]+)(s)$/);if(!Gn||!Gn[2]||isNaN(Number(Gn[1])))throw Gt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Jr.ttl}`});const Bi=1e3*Number(Gn[1]),Hi=Date.now();return{token:Jr.attestationToken,expireTimeMillis:Hi+Bi,issuedAtTimeMillis:Hi}})).apply(this,arguments)}function zn(ve,pe){const{projectId:Le,appId:st,apiKey:vt}=ve.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${Le}/apps/${st}:exchangeDebugToken?key=${vt}`,body:{debug_token:pe}}}const Yr="firebase-app-check-store";let Er=null;function fi(){return Er||(Er=new Promise((ve,pe)=>{try{const Le=indexedDB.open("firebase-app-check-database",1);Le.onsuccess=st=>{ve(st.target.result)},Le.onerror=st=>{var vt;pe(Gt.create("storage-open",{originalErrorMessage:null===(vt=st.target.error)||void 0===vt?void 0:vt.message}))},Le.onupgradeneeded=st=>{0===st.oldVersion&&st.target.result.createObjectStore(Yr,{keyPath:"compositeKey"})}}catch(Le){pe(Gt.create("storage-open",{originalErrorMessage:Le.message}))}}),Er)}function Je(){return(Je=(0,Qe.Z)(function*(ve,pe){const st=(yield fi()).transaction(Yr,"readwrite"),Zt=st.objectStore(Yr).put({compositeKey:ve,value:pe});return new Promise((Qn,Jr)=>{Zt.onsuccess=Gn=>{Qn()},st.onerror=Gn=>{var Bi;Jr(Gt.create("storage-set",{originalErrorMessage:null===(Bi=Gn.target.error)||void 0===Bi?void 0:Bi.message}))}})})).apply(this,arguments)}const ln=new pt.Yd("@firebase/app-check");function Wn(ve,pe){return(0,Mt.hl)()?function Ye(ve,pe){return function Ue(ve,pe){return Je.apply(this,arguments)}(function En(ve){return`${ve.options.appId}-${ve.name}`}(ve),pe)}(ve,pe).catch(Le=>{ln.warn(`Failed to write token to IndexedDB. Error: ${Le}`)}):Promise.resolve()}function An(){return et().enabled}function hn(){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,Qe.Z)(function*(){const ve=et();if(ve.enabled&&ve.token)return ve.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Bt={error:"UNKNOWN_ERROR"};function Lt(ve){return Mt.US.encodeString(JSON.stringify(ve),!1)}function fn(ve){return wn.apply(this,arguments)}function wn(){return(wn=(0,Qe.Z)(function*(ve,pe=!1){const Le=ve.app;Tn(Le);const st=ke(Le);let Zt,vt=st.token;if(!vt){const Gn=yield st.cachedTokenPromise;Gn&&Et(Gn)&&(vt=Gn)}if(!pe&&vt&&Et(vt))return{token:vt.token};let Jr,Qn=!1;if(An()){st.exchangeTokenPromise||(st.exchangeTokenPromise=Cr(zn(Le,yield hn()),ve.heartbeatServiceProvider).then(Bi=>(st.exchangeTokenPromise=void 0,Bi)),Qn=!0);const Gn=yield st.exchangeTokenPromise;return yield Wn(Le,Gn),Ne(Le,Object.assign(Object.assign({},st),{token:Gn})),{token:Gn.token}}try{st.exchangeTokenPromise||(st.exchangeTokenPromise=st.provider.getToken().then(Gn=>(st.exchangeTokenPromise=void 0,Gn)),Qn=!0),vt=yield st.exchangeTokenPromise}catch(Gn){"appCheck/throttled"===Gn.code?ln.warn(Gn.message):ln.error(Gn),Zt=Gn}return vt?(Jr={token:vt.token},Ne(Le,Object.assign(Object.assign({},st),{token:vt})),yield Wn(Le,vt)):Jr=Kt(Zt),Qn&&xe(Le,Jr),Jr})).apply(this,arguments)}function ne(ve,pe){const Le=ke(ve),st=Le.tokenObservers.filter(vt=>vt.next!==pe);0===st.length&&Le.tokenRefresher&&Le.tokenRefresher.isRunning()&&Le.tokenRefresher.stop(),Ne(ve,Object.assign(Object.assign({},Le),{tokenObservers:st}))}function be(ve){const{app:pe}=ve,Le=ke(pe);let st=Le.tokenRefresher;st||(st=function ze(ve){const{app:pe}=ve;return new mn((0,Qe.Z)(function*(){let st;if(st=ke(pe).token?yield fn(ve,!0):yield fn(ve),st.error)throw st.error}),()=>!0,()=>{const Le=ke(pe);if(Le.token){let st=Le.token.issuedAtTimeMillis+.5*(Le.token.expireTimeMillis-Le.token.issuedAtTimeMillis)+3e5;return st=Math.min(st,Le.token.expireTimeMillis-3e5),Math.max(0,st-Date.now())}return 0},3e4,96e4)}(ve),Ne(pe,Object.assign(Object.assign({},Le),{tokenRefresher:st}))),!st.isRunning()&&Le.isTokenAutoRefreshEnabled&&st.start()}function xe(ve,pe){const Le=ke(ve).tokenObservers;for(const st of Le)try{"EXTERNAL"===st.type&&null!=pe.error?st.error(pe.error):st.next(pe)}catch(vt){}}function Et(ve){return ve.expireTimeMillis-Date.now()>0}function Kt(ve){return{token:Lt(Bt),error:ve}}class Nt{constructor(pe,Le){this.app=pe,this.heartbeatServiceProvider=Le}_delete(){const{tokenObservers:pe}=ke(this.app);for(const Le of pe)ne(this.app,Le.next);return Promise.resolve()}}const Ci="app-check-internal";!function ir(){(0,je._registerComponent)(new Re.wA("app-check",ve=>function kr(ve,pe){return new Nt(ve,pe)}(ve.getProvider("app").getImmediate(),ve.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ve,pe,Le)=>{ve.getProvider(Ci).initialize()})),(0,je._registerComponent)(new Re.wA(Ci,ve=>function Bn(ve){return{getToken:pe=>fn(ve,pe),addTokenListener:pe=>function fe(ve,pe,Le,st){const{app:vt}=ve,Zt=ke(vt),Qn={next:Le,error:st,type:pe};if(Ne(vt,Object.assign(Object.assign({},Zt),{tokenObservers:[...Zt.tokenObservers,Qn]})),Zt.token&&Et(Zt.token)){const Jr=Zt.token;Promise.resolve().then(()=>{Le({token:Jr.token}),be(ve)}).catch(()=>{})}Zt.cachedTokenPromise.then(()=>be(ve))}(ve,"INTERNAL",pe),removeTokenListener:pe=>ne(ve.app,pe)}}(ve.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,je.registerVersion)("@firebase/app-check","0.5.5")}();class bi{constructor(){return(0,M.vb)("app-check")}}"undefined"!=typeof window&&window},3385:(Dt,Te,L)=>{L.d(Te,{zQ:()=>ke,ww:()=>Ne,rT:()=>pt,f7:()=>we,L6:()=>Re,_Q:()=>Mt,lh:()=>se,Qv:()=>je,nw:()=>Ee});var M=L(5e3),A=L(7579),Z=L(9646),de=L(8306),ce=L(8996),_e=L(6451),ue=L(3900),he=L(576);function ie(et,Fe){return(0,he.m)(Fe)?(0,ue.w)(()=>et,Fe):(0,ue.w)(()=>et)}var X=L(5363),q=L(4004),le=L(3151),ot=L(590),qe=L(9468),rt=L(9300),ft=L(6351),Pe=L(2011),$e=L(9808),Me=L(440),it=L(127);const je=new M.OlP("angularfire2.auth.use-emulator"),Re=new M.OlP("angularfire2.auth.settings"),Mt=new M.OlP("angularfire2.auth.tenant-id"),pt=new M.OlP("angularfire2.auth.langugage-code"),se=new M.OlP("angularfire2.auth.use-device-language"),we=new M.OlP("angularfire.auth.persistence"),Ee=(et,Fe,It,un,ur,Vt,Pt,mn)=>(0,Pe.cc)(`${et.name}.auth`,"AngularFireAuth",et.name,()=>{const qt=Fe.runOutsideAngular(()=>et.auth());if(It&&qt.useEmulator(...It),un&&(qt.tenantId=un),qt.languageCode=ur,Vt&&qt.useDeviceLanguage(),Pt)for(const[dr,Gt]of Object.entries(Pt))qt.settings[dr]=Gt;return mn&&qt.setPersistence(mn),qt},[It,un,ur,Vt,Pt,mn]);let ke=(()=>{class et{constructor(It,un,ur,Vt,Pt,mn,qt,dr,Gt,mr,Tn,an){const Xn=new A.x,yr=(0,Z.of)(void 0).pipe((0,X.Q)(Pt.outsideAngular),(0,ue.w)(()=>Vt.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,4087)))),(0,q.U)(()=>(0,Pe.on)(It,Vt,un)),(0,q.U)(Cr=>Ee(Cr,Vt,mn,dr,Gt,mr,qt,Tn)),(0,le.d)({bufferSize:1,refCount:!1}));if((0,$e.PM)(ur))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Z.of)(null);else{yr.pipe((0,ot.P)()).subscribe();const sr=yr.pipe((0,ue.w)(zn=>zn.getRedirectResult().then(Hn=>Hn,()=>null)),ft.iC,(0,le.d)({bufferSize:1,refCount:!1})),qr=yr.pipe((0,ue.w)(zn=>new de.y(Hn=>({unsubscribe:Vt.runOutsideAngular(()=>zn.onAuthStateChanged(Ht=>Hn.next(Ht),Ht=>Hn.error(Ht),()=>Hn.complete()))})))),$n=yr.pipe((0,ue.w)(zn=>new de.y(Hn=>({unsubscribe:Vt.runOutsideAngular(()=>zn.onIdTokenChanged(Ht=>Hn.next(Ht),Ht=>Hn.error(Ht),()=>Hn.complete()))}))));this.authState=sr.pipe(ie(qr),(0,qe.R)(Pt.outsideAngular),(0,X.Q)(Pt.insideAngular)),this.user=sr.pipe(ie($n),(0,qe.R)(Pt.outsideAngular),(0,X.Q)(Pt.insideAngular)),this.idToken=this.user.pipe((0,ue.w)(zn=>zn?(0,ce.D)(zn.getIdToken()):(0,Z.of)(null))),this.idTokenResult=this.user.pipe((0,ue.w)(zn=>zn?(0,ce.D)(zn.getIdTokenResult()):(0,Z.of)(null))),this.credential=(0,_e.T)(sr,Xn,this.authState.pipe((0,rt.h)(zn=>!zn))).pipe((0,q.U)(zn=>(null==zn?void 0:zn.user)?zn:null),(0,qe.R)(Pt.outsideAngular),(0,X.Q)(Pt.insideAngular))}return(0,Pe.pX)(this,yr,Vt,{spy:{apply:(Cr,sr,qr)=>{(Cr.startsWith("signIn")||Cr.startsWith("createUser"))&&qr.then($n=>Xn.next($n))}}})}}return et.\u0275fac=function(It){return new(It||et)(M.LFG(Pe.Dh),M.LFG(Pe.xv,8),M.LFG(M.Lbi),M.LFG(M.R0b),M.LFG(ft.HU),M.LFG(je,8),M.LFG(Re,8),M.LFG(Mt,8),M.LFG(pt,8),M.LFG(se,8),M.LFG(we,8),M.LFG(Me.nm,8))},et.\u0275prov=M.Yz7({token:et,factory:et.\u0275fac,providedIn:"any"}),et})(),Ne=(()=>{class et{constructor(){it.Z.registerVersion("angularfire",ft.q4.full,"auth-compat")}}return et.\u0275fac=function(It){return new(It||et)},et.\u0275mod=M.oAB({type:et}),et.\u0275inj=M.cJS({providers:[ke]}),et})()},7407:(Dt,Te,L)=>{L.d(Te,{ST:()=>bh,yb:()=>my});var M=L(5e3),A=L(4986),Z=L(8306),de=L(8996),ce=L(9646),_e=L(6351),ue=L(4482),he=L(5403);function ie(){return(0,ue.e)((i,e)=>{let t,o=!1;i.subscribe((0,he.x)(e,l=>{const p=t;t=l,o&&e.next([p,l]),o=!0}))})}var se,X=L(8675),q=L(4004),le=L(5026),ot=L(1884),qe=L(9300),rt=L(2011),ft=L(9808),$e=(L(4087),L(3942)),Me=L(5861),it=L(9681),Qe=L(4859),je=L(1877),Re=L(2090),Mt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},pt={},we=we||{},Ee=Mt||self;function ke(){}function Ne(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function et(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var It="closure_uid_"+(1e9*Math.random()>>>0),un=0;function ur(i,e,t){return i.call.apply(i.bind,arguments)}function Vt(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var l=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(l,o),i.apply(e,l)}}return function(){return i.apply(e,arguments)}}function Pt(i,e,t){return(Pt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ur:Vt).apply(null,arguments)}function mn(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function qt(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,l,p){for(var C=Array(arguments.length-2),x=2;x<arguments.length;x++)C[x-2]=arguments[x];return e.prototype[l].apply(o,C)}}function dr(){this.s=this.s,this.o=this.o}var mr={};dr.prototype.s=!1,dr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Fe(i){return Object.prototype.hasOwnProperty.call(i,It)&&i[It]||(i[It]=++un)}(this);delete mr[i]}},dr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Tn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},an=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,l="string"==typeof i?i.split(""):i;for(let p=0;p<o;p++)p in l&&e.call(t,l[p],p,i)};function yr(i){return Array.prototype.concat.apply([],arguments)}function Cr(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function sr(i){return/^[\s\xa0]*$/.test(i)}var Hn,qr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function $n(i,e){return-1!=i.indexOf(e)}function zn(i,e){return i<e?-1:i>e?1:0}e:{var Ht=Ee.navigator;if(Ht){var Yr=Ht.userAgent;if(Yr){Hn=Yr;break e}}Hn=""}function Tr(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function Er(i){const e={};for(const t in i)e[t]=i[t];return e}var fi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ds(i,e){let t,o;for(let l=1;l<arguments.length;l++){for(t in o=arguments[l],o)i[t]=o[t];for(let p=0;p<fi.length;p++)t=fi[p],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function Ye(i){return Ye[" "](i),i}Ye[" "]=ke;var Xt,i,Ce=$n(Hn,"Opera"),Ue=$n(Hn,"Trident")||$n(Hn,"MSIE"),Je=$n(Hn,"Edge"),lt=Je||Ue,St=$n(Hn,"Gecko")&&!($n(Hn.toLowerCase(),"webkit")&&!$n(Hn,"Edge"))&&!($n(Hn,"Trident")||$n(Hn,"MSIE"))&&!$n(Hn,"Edge"),En=$n(Hn.toLowerCase(),"webkit")&&!$n(Hn,"Edge");function ln(){var i=Ee.document;return i?i.documentMode:void 0}e:{var Zr="",Wn=(i=Hn,St?/rv:([^\);]+)(\)|;)/.exec(i):Je?/Edge\/([\d\.]+)/.exec(i):Ue?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):En?/WebKit\/(\S+)/.exec(i):Ce?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Wn&&(Zr=Wn?Wn[1]:""),Ue){var hr=ln();if(null!=hr&&hr>parseFloat(Zr)){Xt=String(hr);break e}}Xt=Zr}var Ot={};var Ze=Ee.document&&Ue&&(ln()||parseInt(Xt,10))||void 0,Bt=function(){if(!Ee.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Ee.addEventListener("test",ke,e),Ee.removeEventListener("test",ke,e)}catch(t){}return i}();function Lt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function fn(i,e){if(Lt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(St){e:{try{Ye(e.nodeName);var l=!0;break e}catch(p){}l=!1}l||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:wn[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&fn.Z.h.call(this)}}Lt.prototype.h=function(){this.defaultPrevented=!0},qt(fn,Lt);var wn={2:"touch",3:"pen",4:"mouse"};fn.prototype.h=function(){fn.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),ne=0;function be(i,e,t,o,l){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=l,this.key=++ne,this.ca=this.fa=!1}function ze(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function xe(i){this.src=i,this.g={},this.h=0}function Et(i,e){var t=e.type;if(t in i.g){var p,o=i.g[t],l=Tn(o,e);(p=0<=l)&&Array.prototype.splice.call(o,l,1),p&&(ze(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Kt(i,e,t,o){for(var l=0;l<i.length;++l){var p=i[l];if(!p.ca&&p.listener==e&&p.capture==!!t&&p.ia==o)return l}return-1}xe.prototype.add=function(i,e,t,o,l){var p=i.toString();(i=this.g[p])||(i=this.g[p]=[],this.h++);var C=Kt(i,e,o,l);return-1<C?(e=i[C],t||(e.fa=!1)):((e=new be(e,this.src,p,!!o,l)).fa=t,i.push(e)),e};var Nt="closure_lm_"+(1e6*Math.random()|0),kr={};function Bn(i,e,t,o,l){if(o&&o.once)return er(i,e,t,o,l);if(Array.isArray(e)){for(var p=0;p<e.length;p++)Bn(i,e[p],t,o,l);return null}return t=Hr(t),i&&i[fe]?i.N(e,t,et(o)?!!o.capture:!!o,l):fr(i,e,t,!1,o,l)}function fr(i,e,t,o,l,p){if(!e)throw Error("Invalid event type");var C=et(l)?!!l.capture:!!l,x=ti(i);if(x||(i[Nt]=x=new xe(i)),(t=x.add(e,t,o,C,p)).proxy)return t;if(o=function Mn(){var e=Ui;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)Bt||(l=C),void 0===l&&(l=!1),i.addEventListener(e.toString(),o,l);else if(i.attachEvent)i.attachEvent(Pi(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function er(i,e,t,o,l){if(Array.isArray(e)){for(var p=0;p<e.length;p++)er(i,e[p],t,o,l);return null}return t=Hr(t),i&&i[fe]?i.O(e,t,et(o)?!!o.capture:!!o,l):fr(i,e,t,!0,o,l)}function Un(i,e,t,o,l){if(Array.isArray(e))for(var p=0;p<e.length;p++)Un(i,e[p],t,o,l);else o=et(o)?!!o.capture:!!o,t=Hr(t),i&&i[fe]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Kt(p=i.g[e],t,o,l))&&(ze(p[t]),Array.prototype.splice.call(p,t,1),0==p.length&&(delete i.g[e],i.h--))):i&&(i=ti(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Kt(e,t,o,l)),(t=-1<i?e[i]:null)&&tr(t))}function tr(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[fe])Et(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(Pi(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=ti(e))?(Et(t,i),0==t.h&&(t.src=null,e[Nt]=null)):ze(i)}}}function Pi(i){return i in kr?kr[i]:kr[i]="on"+i}function Ui(i,e){if(i.ca)i=!0;else{e=new fn(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&tr(i),i=t.call(o,e)}return i}function ti(i){return(i=i[Nt])instanceof xe?i:null}var rr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hr(i){return"function"==typeof i?i:(i[rr]||(i[rr]=function(e){return i.handleEvent(e)}),i[rr])}function Zn(){dr.call(this),this.i=new xe(this),this.P=this,this.I=null}function ct(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new Lt(e,i);else if(e instanceof Lt)e.target=e.target||i;else{var l=e;ds(e=new Lt(o,i),l)}if(l=!0,t)for(var p=t.length-1;0<=p;p--){var C=e.g=t[p];l=_n(C,o,!0,e)&&l}if(l=_n(C=e.g=i,o,!0,e)&&l,l=_n(C,o,!1,e)&&l,t)for(p=0;p<t.length;p++)l=_n(C=e.g=t[p],o,!1,e)&&l}function _n(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var l=!0,p=0;p<e.length;++p){var C=e[p];if(C&&!C.ca&&C.capture==t){var x=C.listener,j=C.ia||C.src;C.fa&&Et(i.i,C),l=!1!==x.call(j,o)&&l}}return l&&!o.defaultPrevented}qt(Zn,dr),Zn.prototype[fe]=!0,Zn.prototype.removeEventListener=function(i,e,t,o){Un(this,i,e,t,o)},Zn.prototype.M=function(){if(Zn.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)ze(t[o]);delete i.g[e],i.h--}}this.I=null},Zn.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Zn.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var Vn=Ee.JSON.stringify;function Qr(){var i=Ms;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var mi,Nr=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new gi,i=>i.reset());class gi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _r(i){Ee.setTimeout(()=>{throw i},0)}function or(i,e){mi||function On(){var i=Ee.Promise.resolve(void 0);mi=function(){i.then(Os)}}(),es||(mi(),es=!0),Ms.add(i,e)}var es=!1,Ms=new class pi{constructor(){this.h=this.g=null}add(e,t){const o=Nr.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Os(){for(var i;i=Qr();){try{i.h.call(i.g)}catch(t){_r(t)}var e=Nr;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}es=!1}function Ci(i,e){Zn.call(this),this.h=i||1,this.g=e||Ee,this.j=Pt(this.kb,this),this.l=Date.now()}function ir(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function pr(i,e,t){if("function"==typeof i)t&&(i=Pt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Pt(i.handleEvent,i)}return 2147483647<Number(e)?-1:Ee.setTimeout(i,e||0)}function Si(i){i.g=pr(()=>{i.g=null,i.i&&(i.i=!1,Si(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}qt(Ci,Zn),(se=Ci.prototype).da=!1,se.S=null,se.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ct(this,"tick"),this.da&&(ir(this),this.start()))}},se.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},se.M=function(){Ci.Z.M.call(this),ir(this),delete this.g};class bi extends dr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Si(this)}M(){super.M(),this.g&&(Ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rn(i){dr.call(this),this.h=i,this.g={}}qt(Rn,dr);var Ti=[];function Vi(i,e,t,o){Array.isArray(t)||(t&&(Ti[0]=t.toString()),t=Ti);for(var l=0;l<t.length;l++){var p=Bn(e,t[l],o||i.handleEvent,!1,i.h||i);if(!p)break;i.g[p.key]=p}}function Fr(i){Tr(i.g,function(e,t){this.g.hasOwnProperty(t)&&tr(e)},i),i.g={}}function ni(){this.g=!0}function hs(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function lo(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var l=o[1];if(Array.isArray(l)&&!(1>l.length)){var p=l[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var C=1;C<l.length;C++)l[C]=""}}}return Vn(t)}catch(x){return e}}(i,t)+(o?" "+o:"")})}Rn.prototype.M=function(){Rn.Z.M.call(this),Fr(this)},Rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ni.prototype.Aa=function(){this.g=!1},ni.prototype.info=function(){};var fs={},Is=null;function Lr(){return Is=Is||new Zn}function qo(i){Lt.call(this,fs.Ma,i)}function Ro(i){const e=Lr();ct(e,new qo(e,i))}function ve(i,e){Lt.call(this,fs.STAT_EVENT,i),this.stat=e}function pe(i){const e=Lr();ct(e,new ve(e,i))}function Le(i,e){Lt.call(this,fs.Na,i),this.size=e}function st(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Ee.setTimeout(function(){i()},e)}fs.Ma="serverreachability",qt(qo,Lt),fs.STAT_EVENT="statevent",qt(ve,Lt),fs.Na="timingevent",qt(Le,Lt);var vt={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Zt={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Qn(){}function Gn(){}Qn.prototype.h=null;var Js,Bi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Hi(){Lt.call(this,"d")}function ts(){Lt.call(this,"c")}function Gi(){}function Eo(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new Rn(this),this.P=ps,this.W=new Ci(i=lt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new wo}function wo(){this.i=null,this.g="",this.h=!1}qt(Hi,Lt),qt(ts,Lt),qt(Gi,Qn),Gi.prototype.g=function(){return new XMLHttpRequest},Gi.prototype.i=function(){return{}},Js=new Gi;var ps=45e3,Ei={},xs={};function gs(i,e,t){i.K=1,i.v=He(Kn(e)),i.s=t,i.U=!0,js(i,null)}function js(i,e){i.F=Date.now(),Ki(i),i.A=Kn(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),Mo(t.h,"t",o),i.C=0,t=i.l.H,i.h=new wo,i.g=go(i.l,t?e:null,!i.s),0<i.O&&(i.L=new bi(Pt(i.Ia,i,i.g),i.O)),Vi(i.V,i.g,"readystatechange",i.gb),e=i.H?Er(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),Ro(1),function Ao(i,e,t,o,l,p){i.info(function(){if(i.g)if(p)for(var C="",x=p.split("&"),j=0;j<x.length;j++){var H=x[j].split("=");if(1<H.length){var re=H[0];H=H[1];var me=re.split("_");C=2<=me.length&&"type"==me[1]?C+(re+"=")+H+"&":C+(re+"=redacted&")}}else C=null;else C=p;return"XMLHTTP REQ ("+o+") [attempt "+l+"]: "+e+"\n"+t+"\n"+C})}(i.j,i.u,i.A,i.m,i.X,i.s)}function ms(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function ka(i,e,t){let l,o=!0;for(;!i.I&&i.C<t.length;){if(l=Wi(i,t),l==xs){4==e&&(i.o=4,pe(14),o=!1),hs(i.j,i.m,null,"[Incomplete Response]");break}if(l==Ei){i.o=4,pe(15),hs(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}hs(i.j,i.m,l,null),Dr(i,l)}ms(i)&&l!=xs&&l!=Ei&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,pe(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Lo(e),e.L=!0,pe(11))):(hs(i.j,i.m,t,"[Invalid Chunked Response]"),Ar(i),$s(i))}function Wi(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?xs:(t=Number(e.substring(t,o)),isNaN(t)?Ei:(o+=1)+t>e.length?xs:(e=e.substr(o,t),i.C=o+t,e))}function Ki(i){i.Y=Date.now()+i.P,wi(i,i.P)}function wi(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=st(Pt(i.eb,i),e)}function Xs(i){i.B&&(Ee.clearTimeout(i.B),i.B=null)}function $s(i){0==i.l.G||i.I||Za(i.l,i)}function Ar(i){Xs(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,ir(i.W),Fr(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Dr(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Ur(t.i,i)))if(t.I=i.N,!i.J&&Ur(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(H){o=null}if(Array.isArray(o)&&3==o.length){var l=o;if(0==l[0])e:if(t.u)t.ta=l[1],0<t.ta-t.U&&37500>l[2]&&t.N&&0==t.A&&!t.v&&(t.v=st(Pt(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;ya(t),fo(t)}po(t),pe(18)}if(1>=Oo(t.i)&&t.ka){try{t.ka()}catch(H){}t.ka=void 0}}else is(t,11)}else if((i.J||t.g==i)&&ya(t),!sr(e))for(l=t.Ca.g.parse(e),e=0;e<l.length;e++){let H=l[e];if(t.U=H[0],H=H[1],2==t.G)if("c"==H[0]){t.J=H[1],t.la=H[2];const re=H[3];null!=re&&(t.ma=re,t.h.info("VER="+t.ma));const me=H[4];null!=me&&(t.za=me,t.h.info("SVER="+t.za));const Be=H[5];null!=Be&&"number"==typeof Be&&0<Be&&(t.K=o=1.5*Be,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const ht=i.g;if(ht){const _t=ht.g?ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_t){var p=o.i;!p.g&&($n(_t,"spdy")||$n(_t,"quic")||$n(_t,"h2"))&&(p.j=p.l,p.g=new Set,p.h&&(to(p,p.h),p.h=null))}if(o.D){const en=ht.g?ht.g.getResponseHeader("X-HTTP-Session-Id"):null;en&&(o.sa=en,oe(o.F,o.D,en))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var C=i;if((o=t).oa=na(o,o.H?o.la:null,o.W),C.J){Zo(o.i,C);var x=C,j=o.K;j&&x.setTimeout(j),x.B&&(Xs(x),Ki(x)),o.g=C}else ai(o);0<t.l.length&&Ya(t)}else"stop"!=H[0]&&"close"!=H[0]||is(t,7);else 3==t.G&&("stop"==H[0]||"close"==H[0]?"stop"==H[0]?is(t,7):Ri(t):"noop"!=H[0]&&t.j&&t.j.wa(H),t.A=0)}Ro(4)}catch(H){}}function qi(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ne(i)||"string"==typeof i)an(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(Ne(i)||"string"==typeof i){t=[];for(var o=i.length,l=0;l<o;l++)t.push(l)}else for(l in t=[],o=0,i)t[o++]=l;o=function da(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Ne(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),l=o.length;for(var p=0;p<l;p++)e.call(void 0,o[p],t&&t[p],i)}}function zs(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof zs)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function Hs(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];ns(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var l={};for(t=e=0;e<i.g.length;)ns(l,o=i.g[e])||(i.g[t++]=o,l[o]=1),e++;i.g.length=t}}function ns(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(se=Eo.prototype).setTimeout=function(i){this.P=i},se.gb=function(i){i=i.target;const e=this.L;e&&3==Ai(i)?e.l():this.Ia(i)},se.Ia=function(i){try{if(i==this.g)e:{const re=Ai(this.g);var e=this.g.Da();const me=this.g.ba();if(!(3>re)&&(3!=re||lt||this.g&&(this.h.h||this.g.ga()||ga(this.g)))){this.I||4!=re||7==e||Ro(8==e||0>=me?3:2),Xs(this);var t=this.g.ba();this.N=t;t:if(ms(this)){var o=ga(this.g);i="";var l=o.length,p=4==Ai(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ar(this),$s(this);var C="";break t}this.h.i=new Ee.TextDecoder}for(e=0;e<l;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:p&&e==l-1});o.splice(0,l),this.h.g+=i,this.C=0,C=this.h.g}else C=this.g.ga();if(this.i=200==t,function zi(i,e,t,o,l,p,C){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+l+"]: "+e+"\n"+t+"\n"+p+" "+C})}(this.j,this.u,this.A,this.m,this.X,re,t),this.i){if(this.$&&!this.J){t:{if(this.g){var x,j=this.g;if((x=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sr(x)){var H=x;break t}}H=null}if(!(t=H)){this.i=!1,this.o=3,pe(12),Ar(this),$s(this);break e}hs(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Dr(this,t)}this.U?(ka(this,re,C),lt&&this.i&&3==re&&(Vi(this.V,this.W,"tick",this.fb),this.W.start())):(hs(this.j,this.m,C,null),Dr(this,C)),4==re&&Ar(this),this.i&&!this.I&&(4==re?Za(this.l,this):(this.i=!1,Ki(this)))}else 400==t&&0<C.indexOf("Unknown SID")?(this.o=3,pe(12)):(this.o=0,pe(13)),Ar(this),$s(this)}}}catch(re){}},se.fb=function(){if(this.g){var i=Ai(this.g),e=this.g.ga();this.C<e.length&&(Xs(this),ka(this,i,e),this.i&&4!=i&&Ki(this))}},se.cancel=function(){this.I=!0,Ar(this)},se.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function si(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ro(3),pe(17)),Ar(this),this.o=2,$s(this)):wi(this,this.Y-i)},(se=zs.prototype).R=function(){Hs(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},se.T=function(){return Hs(this),this.g.concat()},se.get=function(i,e){return ns(this.h,i)?this.h[i]:e},se.set=function(i,e){ns(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},se.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var l=t[o],p=this.get(l);i.call(e,p,l,this)}};var ys=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ds(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Ds){this.g=void 0!==e?e:i.g,R(this,i.j),this.s=i.s,G(this,i.i),k(this,i.m),this.l=i.l,e=i.h;var t=new yi;t.i=e.i,e.g&&(t.g=new zs(e.g),t.h=e.h),Y(this,t),this.o=i.o}else i&&(t=String(i).match(ys))?(this.g=!!e,R(this,t[1]||"",!0),this.s=Dn(t[2]||""),G(this,t[3]||"",!0),k(this,t[4]),this.l=Dn(t[5]||"",!0),Y(this,t[6]||"",!0),this.o=Dn(t[7]||"")):(this.g=!!e,this.h=new yi(null,this.g))}function Kn(i){return new Ds(i)}function R(i,e,t){i.j=t?Dn(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function G(i,e,t){i.i=t?Dn(e,!0):e}function k(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Y(i,e,t){e instanceof yi?(i.h=e,function Yo(i,e){e&&!i.j&&(Yt(i),i.i=null,i.g.forEach(function(t,o){var l=o.toLowerCase();o!=l&&(eo(this,o),Mo(this,l,t))},i)),i.j=e}(i.h,i.g)):(t||(e=kn(e,ar)),i.h=new yi(e,i.g))}function oe(i,e,t){i.h.set(e,t)}function He(i){return oe(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Dn(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function kn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Nn),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Nn(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Ds.prototype.toString=function(){var i=[],e=this.j;e&&i.push(kn(e,Fn,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(kn(e,Fn,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(kn(t,"/"==t.charAt(0)?wr:Mr,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",kn(t,Ps)),i.join("")};var Fn=/[#\/\?@]/g,Mr=/[#\?:]/g,wr=/[#\?]/g,ar=/[#\?@]/g,Ps=/#/g;function yi(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Yt(i){i.g||(i.g=new zs,i.h=0,i.i&&function co(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),l=null;if(0<=o){var p=i[t].substring(0,o);l=i[t].substring(o+1)}else p=i[t];e(p,l?decodeURIComponent(l.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function eo(i,e){Yt(i),e=Yi(i,e),ns(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,ns((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Hs(i)))}function uo(i,e){return Yt(i),e=Yi(i,e),ns(i.g.h,e)}function Mo(i,e,t){eo(i,e),0<t.length&&(i.i=null,i.g.set(Yi(i,e),Cr(t)),i.h+=t.length)}function Yi(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ko(i){this.l=i||dt,i=Ee.PerformanceNavigationTiming?0<(i=Ee.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Ee.g&&Ee.g.Ea&&Ee.g.Ea()&&Ee.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(se=yi.prototype).add=function(i,e){Yt(this),this.i=null,i=Yi(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},se.forEach=function(i,e){Yt(this),this.g.forEach(function(t,o){an(t,function(l){i.call(e,l,o,this)},this)},this)},se.T=function(){Yt(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var l=i[o],p=0;p<l.length;p++)t.push(e[o]);return t},se.R=function(i){Yt(this);var e=[];if("string"==typeof i)uo(this,i)&&(e=yr(e,this.g.get(Yi(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=yr(e,i[t])}return e},se.set=function(i,e){return Yt(this),this.i=null,uo(this,i=Yi(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},se.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},se.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],l=encodeURIComponent(String(o));o=this.R(o);for(var p=0;p<o.length;p++){var C=l;""!==o[p]&&(C+="="+encodeURIComponent(String(o[p]))),i.push(C)}}return this.i=i.join("&")};var dt=10;function qn(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Oo(i){return i.h?1:i.g?i.g.size:0}function Ur(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function to(i,e){i.g?i.g.add(e):i.h=e}function Zo(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Zi(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Cr(i.i)}function Xr(){}function Ha(){this.g=new Xr}function pl(i,e,t){const o=t||"";try{qi(i,function(l,p){let C=l;et(l)&&(C=Vn(l)),e.push(o+p+"="+encodeURIComponent(C))})}catch(l){throw e.push(o+"type="+encodeURIComponent("_badmap")),l}}function Qo(i,e,t,o,l){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,l(o)}catch(p){}}function Ss(i){this.l=i.$b||null,this.j=i.ib||!1}function Mi(i,e){Zn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=rs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ko.prototype.cancel=function(){if(this.i=Zi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Xr.prototype.stringify=function(i){return Ee.JSON.stringify(i,void 0)},Xr.prototype.parse=function(i){return Ee.JSON.parse(i,void 0)},qt(Ss,Qn),Ss.prototype.g=function(){return new Mi(this.l,this.j)},Ss.prototype.i=function(i){return function(){return i}}({}),qt(Mi,Zn);var rs=0;function No(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Ts(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Oi(i)}function Oi(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(se=Mi.prototype).open=function(i,e){if(this.readyState!=rs)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Oi(this)},se.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Ee).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},se.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ts(this)),this.readyState=rs},se.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ee.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;No(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},se.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Ts(this):Oi(this),3==this.readyState&&No(this)}},se.Ua=function(i){this.g&&(this.response=this.responseText=i,Ts(this))},se.Ta=function(i){this.g&&(this.response=i,Ts(this))},se.ha=function(){this.g&&Ts(this)},se.setRequestHeader=function(i,e){this.v.append(i,e)},se.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},se.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Mi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Fa=Ee.JSON.parse;function Gr(i){Zn.call(this),this.headers=new zs,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ha,this.K=this.L=!1}qt(Gr,Zn);var ha="",Wa=/^https?$/i,fa=["POST","PUT"];function Ka(i){return"content-type"==i.toLowerCase()}function pa(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Jo(i),Gs(i)}function Jo(i){i.D||(i.D=!0,ct(i,"complete"),ct(i,"error"))}function Xo(i){if(i.h&&void 0!==we&&(!i.C[1]||4!=Ai(i)||2!=i.ba()))if(i.v&&4==Ai(i))pr(i.Fa,0,i);else if(ct(i,"readystatechange"),4==Ai(i)){i.h=!1;try{const x=i.ba();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===x){var l=String(i.H).match(ys)[1]||null;if(!l&&Ee.self&&Ee.self.location){var p=Ee.self.location.protocol;l=p.substr(0,p.length-1)}o=!Wa.test(l?l.toLowerCase():"")}t=o}if(t)ct(i,"complete"),ct(i,"success");else{i.m=6;try{var C=2<Ai(i)?i.g.statusText:""}catch(j){C=""}i.j=C+" ["+i.ba()+"]",Jo(i)}}finally{Gs(i)}}}function Gs(i,e){if(i.g){ea(i);const t=i.g,o=i.C[0]?ke:null;i.g=null,i.C=null,e||ct(i,"ready");try{t.onreadystatechange=o}catch(l){}}}function ea(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Ee.clearTimeout(i.A),i.A=null)}function Ai(i){return i.g?i.g.readyState:0}function ga(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case ha:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ho(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function qa(i){let e="";return Tr(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):oe(i,e,t))}function ma(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Fo(i){this.za=0,this.l=[],this.h=new ni,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ma("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ma("baseRetryDelayMs",5e3,i),this.$a=ma("retryDelaySeedMs",1e4,i),this.Ya=ma("forwardChannelMaxRetries",2,i),this.ra=ma("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new ko(i&&i.concurrentRequestLimit),this.Ca=new Ha,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Ri(i){if(oi(i),3==i.G){var e=i.V++,t=Kn(i.F);oe(t,"SID",i.J),oe(t,"RID",e),oe(t,"TYPE","terminate"),nn(i,t),(e=new Eo(i,i.h,e,void 0)).K=2,e.v=He(Kn(t)),t=!1,Ee.navigator&&Ee.navigator.sendBeacon&&(t=Ee.navigator.sendBeacon(e.v.toString(),"")),!t&&Ee.Image&&((new Image).src=e.v,t=!0),t||(e.g=go(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ki(e)}ki(i)}function fo(i){i.g&&(Lo(i),i.g.cancel(),i.g=null)}function oi(i){fo(i),i.u&&(Ee.clearTimeout(i.u),i.u=null),ya(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Ee.clearTimeout(i.m),i.m=null)}function ta(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Ya(i)}function Ya(i){qn(i.i)||i.m||(i.m=!0,or(i.Ha,i),i.C=0)}function La(i,e){var t;t=e?e.m:i.V++;const o=Kn(i.F);oe(o,"SID",i.J),oe(o,"RID",t),oe(o,"AID",i.U),nn(i,o),i.o&&i.s&&ho(o,i.o,i.s),t=new Eo(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=Pr(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),to(i.i,t),gs(t,o,e)}function nn(i,e){i.j&&qi({},function(t,o){oe(e,o,t)})}function Pr(i,e,t){t=Math.min(i.l.length,t);var o=i.j?Pt(i.j.Oa,i.j,i):null;e:{var l=i.l;let p=-1;for(;;){const C=["count="+t];-1==p?0<t?(p=l[0].h,C.push("ofs="+p)):p=0:C.push("ofs="+p);let x=!0;for(let j=0;j<t;j++){let H=l[j].h;const re=l[j].g;if(H-=p,0>H)p=Math.max(0,l[j].h-100),x=!1;else try{pl(re,C,"req"+H+"_")}catch(me){o&&o(re)}}if(x){o=C.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function ai(i){i.g||i.u||(i.Y=1,or(i.Ga,i),i.A=0)}function po(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=st(Pt(i.Ga,i),_s(i,i.A)),i.A++,0))}function Lo(i){null!=i.B&&(Ee.clearTimeout(i.B),i.B=null)}function lr(i){i.g=new Eo(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=Kn(i.oa);oe(e,"RID","rpc"),oe(e,"SID",i.J),oe(e,"CI",i.N?"0":"1"),oe(e,"AID",i.U),nn(i,e),oe(e,"TYPE","xmlhttp"),i.o&&i.s&&ho(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=He(Kn(e)),t.s=null,t.U=!0,js(t,i)}function ya(i){null!=i.v&&(Ee.clearTimeout(i.v),i.v=null)}function Za(i,e){var t=null;if(i.g==e){ya(i),Lo(i),i.g=null;var o=2}else{if(!Ur(i.i,e))return;t=e.D,Zo(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var l=i.C;ct(o=Lr(),new Le(o,t,e,l)),Ya(i)}else ai(i);else if(3==(l=e.o)||0==l&&0<i.I||!(1==o&&function uc(i,e){return!(Oo(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=st(Pt(i.Ha,i,e),_s(i,i.C)),i.C++,0)))}(i,e)||2==o&&po(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),l){case 1:is(i,5);break;case 4:is(i,10);break;case 3:is(i,6);break;default:is(i,2)}}function _s(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function is(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=Pt(i.jb,i);t||(t=new Ds("//www.google.com/images/cleardot.gif"),Ee.location&&"http"==Ee.location.protocol||R(t,"https"),He(t)),function Ga(i,e){const t=new ni;if(Ee.Image){const o=new Image;o.onload=mn(Qo,t,o,"TestLoadImage: loaded",!0,e),o.onerror=mn(Qo,t,o,"TestLoadImage: error",!1,e),o.onabort=mn(Qo,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=mn(Qo,t,o,"TestLoadImage: timeout",!1,e),Ee.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else pe(2);i.G=0,i.j&&i.j.va(e),ki(i),oi(i)}function ki(i){i.G=0,i.I=-1,i.j&&((0!=Zi(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Cr(i.l),i.l.length=0),i.j.ua())}function na(i,e,t){let o=function ut(i){return i instanceof Ds?Kn(i):new Ds(i,void 0)}(t);if(""!=o.i)e&&G(o,e+"."+o.i),k(o,o.m);else{const l=Ee.location;o=function At(i,e,t,o){var l=new Ds(null,void 0);return i&&R(l,i),e&&G(l,e),t&&k(l,t),o&&(l.l=o),l}(l.protocol,e?e+"."+l.hostname:l.hostname,+l.port,t)}return i.aa&&Tr(i.aa,function(l,p){oe(o,p,l)}),t=i.sa,(e=i.D)&&t&&oe(o,e,t),oe(o,"VER",i.ma),nn(i,o),o}function go(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Gr(t&&i.Ba&&!i.qa?new Ss({ib:!0}):i.qa)).L=i.H,e}function ra(){}function _a(){if(Ue&&!(10<=Number(Ze)))throw Error("Environmental error: no available transport.")}function ss(i,e){Zn.call(this),this.g=new Fo(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!sr(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!sr(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new no(this)}function gl(i){Hi.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function ri(){ts.call(this),this.status=1}function no(i){this.g=i}(se=Gr.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Js.g(),this.C=function Jr(i){return i.h||(i.h=i.i())}(this.u?this.u:Js),this.g.onreadystatechange=Pt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(p){return void pa(this,p)}i=t||"";const l=new zs(this.headers);o&&qi(o,function(p,C){l.set(C,p)}),o=function Xn(i){e:{var e=Ka;const t=i.length,o="string"==typeof i?i.split(""):i;for(let l=0;l<t;l++)if(l in o&&e.call(void 0,o[l],l,i)){e=l;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(l.T()),t=Ee.FormData&&i instanceof Ee.FormData,!(0<=Tn(fa,e))||o||t||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),l.forEach(function(p,C){this.g.setRequestHeader(C,p)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ea(this),0<this.B&&((this.K=function Io(i){return Ue&&function An(){return function ge(i){var e=Ot;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=qr(String(Xt)).split("."),t=qr("9").split("."),o=Math.max(e.length,t.length);for(let C=0;0==i&&C<o;C++){var l=e[C]||"",p=t[C]||"";do{if(l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],0==l[0].length&&0==p[0].length)break;i=zn(0==l[1].length?0:parseInt(l[1],10),0==p[1].length?0:parseInt(p[1],10))||zn(0==l[2].length,0==p[2].length)||zn(l[2],p[2]),l=l[3],p=p[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pt(this.pa,this)):this.A=pr(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(p){pa(this,p)}},se.pa=function(){void 0!==we&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ct(this,"timeout"),this.abort(8))},se.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,ct(this,"complete"),ct(this,"abort"),Gs(this))},se.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Gs(this,!0)),Gr.Z.M.call(this)},se.Fa=function(){this.s||(this.F||this.v||this.l?Xo(this):this.cb())},se.cb=function(){Xo(this)},se.ba=function(){try{return 2<Ai(this)?this.g.status:-1}catch(i){return-1}},se.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},se.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Fa(e)}},se.Da=function(){return this.m},se.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(se=Fo.prototype).ma=8,se.G=1,se.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},se.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const l=new Eo(this,this.h,i,void 0);let p=this.s;if(this.P&&(p?(p=Er(p),ds(p,this.P)):p=this.P),null===this.o&&(l.H=p),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Pr(this,l,e),oe(t=Kn(this.F),"RID",i),oe(t,"CVER",22),this.D&&oe(t,"X-HTTP-Session-Id",this.D),nn(this,t),this.o&&p&&ho(t,this.o,p),to(this.i,l),this.Ra&&oe(t,"TYPE","init"),this.ja?(oe(t,"$req",e),oe(t,"SID","null"),l.$=!0,gs(l,t,null)):gs(l,t,e),this.G=2}}else 3==this.G&&(i?La(this,i):0==this.l.length||qn(this.i)||La(this))},se.Ga=function(){if(this.u=null,lr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=st(Pt(this.bb,this),i)}},se.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,pe(10),fo(this),lr(this))},se.ab=function(){null!=this.v&&(this.v=null,fo(this),po(this),pe(19))},se.jb=function(i){i?(this.h.info("Successfully pinged google.com"),pe(2)):(this.h.info("Failed to ping google.com"),pe(1))},(se=ra.prototype).xa=function(){},se.wa=function(){},se.va=function(){},se.ua=function(){},se.Oa=function(){},_a.prototype.g=function(i,e){return new ss(i,e)},qt(ss,Zn),ss.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),or(Pt(i.hb,i,e))),pe(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=na(i,null,i.W),Ya(i)},ss.prototype.close=function(){Ri(this.g)},ss.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,ta(this.g,e)}else this.v?((e={}).__data__=Vn(i),ta(this.g,e)):ta(this.g,i)},ss.prototype.M=function(){this.g.j=null,delete this.j,Ri(this.g),delete this.g,ss.Z.M.call(this)},qt(gl,Hi),qt(ri,ts),qt(no,ra),no.prototype.xa=function(){ct(this.g,"a")},no.prototype.wa=function(i){ct(this.g,new gl(i))},no.prototype.va=function(i){ct(this.g,new ri(i))},no.prototype.ua=function(){ct(this.g,"b")},_a.prototype.createWebChannel=_a.prototype.g,ss.prototype.send=ss.prototype.u,ss.prototype.open=ss.prototype.m,ss.prototype.close=ss.prototype.close,vt.NO_ERROR=0,vt.TIMEOUT=8,vt.HTTP_ERROR=6,Zt.COMPLETE="complete",Gn.EventType=Bi,Bi.OPEN="a",Bi.CLOSE="b",Bi.ERROR="c",Bi.MESSAGE="d",Zn.prototype.listen=Zn.prototype.N,Gr.prototype.listenOnce=Gr.prototype.O,Gr.prototype.getLastError=Gr.prototype.La,Gr.prototype.getLastErrorCode=Gr.prototype.Da,Gr.prototype.getStatus=Gr.prototype.ba,Gr.prototype.getResponseJson=Gr.prototype.Qa,Gr.prototype.getResponseText=Gr.prototype.ga,Gr.prototype.send=Gr.prototype.ea;var Qi=pt.createWebChannelTransport=function(){return new _a},ia=pt.getStatEventTarget=function(){return Lr()},ro=pt.ErrorCode=vt,va=pt.EventType=Zt,ml=pt.Event=fs,Or=pt.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Fl=pt.FetchXmlHttpFactory=Ss,vs=pt.WebChannel=Gn,Ua=pt.XhrIo=Gr;const io="@firebase/firestore";class ji{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ji.UNAUTHENTICATED=new ji(null),ji.GOOGLE_CREDENTIALS=new ji("google-credentials-uid"),ji.FIRST_PARTY=new ji("first-party-uid"),ji.MOCK_USER=new ji("mock-user");let Uo="9.6.10";const Cs=new je.Yd("@firebase/firestore");function sa(){return Cs.logLevel}function yt(i,...e){if(Cs.logLevel<=je.in.DEBUG){const t=e.map(I);Cs.debug(`Firestore (${Uo}): ${i}`,...t)}}function Ir(i,...e){if(Cs.logLevel<=je.in.ERROR){const t=e.map(I);Cs.error(`Firestore (${Uo}): ${i}`,...t)}}function mo(i,...e){if(Cs.logLevel<=je.in.WARN){const t=e.map(I);Cs.warn(`Firestore (${Uo}): ${i}`,...t)}}function I(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function E(i="Unexpected state"){const e=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: `+i;throw Ir(e),new Error(e)}function b(i,e){i||E()}function N(i,e){return i}const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Re.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ae{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Xe{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ft{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ji.UNAUTHENTICATED))}shutdown(){}}class dn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Qt{constructor(e){this.t=e,this.currentUser=ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let l=this.i;const p=H=>this.i!==l?(l=this.i,t(H)):Promise.resolve();let C=new ae;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new ae,e.enqueueRetryable(()=>p(this.currentUser))};const x=()=>{const H=C;e.enqueueRetryable((0,Me.Z)(function*(){yield H.promise,yield p(o.currentUser)}))},j=H=>{yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=H,this.auth.addAuthTokenListener(this.o),x()};this.t.onInit(H=>j(H)),setTimeout(()=>{if(!this.auth){const H=this.t.getImmediate({optional:!0});H?j(H):(yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new ae)}},0),x()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(b("string"==typeof o.accessToken),new Xe(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return b(null===e||"string"==typeof e),new ji(e)}}class cr{constructor(e,t,o){this.type="FirstParty",this.user=ji.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const l=e.auth.getAuthHeaderValueForFirstParty([]);l&&this.headers.set("Authorization",l),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class gr{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new cr(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ji.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ii{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ws{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=p=>{null!=p.error&&yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const C=p.token!==this.p;return this.p=p.token,yt("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?t(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>o(p))};const l=p=>{yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.g.onInit(p=>l(p)),setTimeout(()=>{if(!this.appCheck){const p=this.g.getImmediate({optional:!0});p?l(p):yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(b("string"==typeof t.token),this.p=t.token,new ii(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ni{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function os(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}Ni.A=-1;class xo{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const l=os(40);for(let p=0;p<l.length;++p)o.length<20&&l[p]<t&&(o+=e.charAt(l[p]%e.length))}return o}}function vn(i,e){return i<e?-1:i>e?1:0}function Ca(i,e,t){return i.length===e.length&&i.every((o,l)=>t(o,e[l]))}function yl(i){return i+"\0"}class Vr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new W(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new W(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new W(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vr.fromMillis(Date.now())}static fromDate(e){return Vr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Vr(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?vn(this.nanoseconds,e.nanoseconds):vn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new rn(e)}static min(){return new rn(new Vr(0,0))}static max(){return new rn(new Vr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Gc(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function jr(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Pu(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class dc{constructor(e,t,o){void 0===t?t=0:t>e.length&&E(),void 0===o?o=e.length-t:o>e.length-t&&E(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===dc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dc?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let l=0;l<o;l++){const p=e.get(l),C=t.get(l);if(p<C)return-1;if(p>C)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nr extends dc{construct(e,t,o){return new nr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new W(U.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(l=>l.length>0))}return new nr(t)}static emptyPath(){return new nr([])}}const Ll=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class li extends dc{construct(e,t,o){return new li(e,t,o)}static isValidIdentifier(e){return Ll.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),li.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new li(["__name__"])}static fromServerFormat(e){const t=[];let o="",l=0;const p=()=>{if(0===o.length)throw new W(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let C=!1;for(;l<e.length;){const x=e[l];if("\\"===x){if(l+1===e.length)throw new W(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const j=e[l+1];if("\\"!==j&&"."!==j&&"`"!==j)throw new W(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=j,l+=2}else"`"===x?(C=!C,l++):"."!==x||C?(o+=x,l++):(p(),l++)}if(p(),C)throw new W(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new li(t)}static emptyPath(){return new li([])}}class Va{constructor(e){this.fields=e,e.sort(li.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ca(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class $r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new $r(t)}static fromUint8Array(e){const t=function(o){let l="";for(let p=0;p<o.length;++p)l+=String.fromCharCode(o[p]);return l}(e);return new $r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$r.EMPTY_BYTE_STRING=new $r("");const Kc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ln(i){if(b(!!i),"string"==typeof i){let e=0;const t=Kc.exec(i);if(b(!!t),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:ei(i.seconds),nanos:ei(i.nanos)}}function ei(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function so(i){return"string"==typeof i?$r.fromBase64String(i):$r.fromUint8Array(i)}function Qa(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Br(i){const e=i.mapValue.fields.__previous_value__;return Qa(e)?Br(e):e}function Cn(i){const e=Ln(i.mapValue.fields.__local_write_time__.timestampValue);return new Vr(e.seconds,e.nanos)}class As{constructor(e,t,o,l,p,C,x,j){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=l,this.ssl=p,this.forceLongPolling=C,this.autoDetectLongPolling=x,this.useFetchStreams=j}}class oo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new oo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof oo&&e.projectId===this.projectId&&e.database===this.database}}function Rs(i){return null==i}function bs(i){return 0===i&&1/i==-1/0}function oa(i){return"number"==typeof i&&Number.isInteger(i)&&!bs(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Rt{constructor(e){this.path=e}static fromPath(e){return new Rt(nr.fromString(e))}static fromName(e){return new Rt(nr.fromString(e).popFirst(5))}static empty(){return new Rt(nr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Rt(new nr(e.slice()))}}const qc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Yc={nullValue:"NULL_VALUE"};function aa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Qa(i)?4:P(i)?9:10:E()}function tt(i,e){if(i===e)return!0;const t=aa(i);if(t!==aa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Cn(i).isEqual(Cn(e));case 3:return function(o,l){if("string"==typeof o.timestampValue&&"string"==typeof l.timestampValue&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const p=Ln(o.timestampValue),C=Ln(l.timestampValue);return p.seconds===C.seconds&&p.nanos===C.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return l=e,so(i.bytesValue).isEqual(so(l.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,l){return ei(o.geoPointValue.latitude)===ei(l.geoPointValue.latitude)&&ei(o.geoPointValue.longitude)===ei(l.geoPointValue.longitude)}(i,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return ei(o.integerValue)===ei(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const p=ei(o.doubleValue),C=ei(l.doubleValue);return p===C?bs(p)===bs(C):isNaN(p)&&isNaN(C)}return!1}(i,e);case 9:return Ca(i.arrayValue.values||[],e.arrayValue.values||[],tt);case 10:return function(o,l){const p=o.mapValue.fields||{},C=l.mapValue.fields||{};if(Gc(p)!==Gc(C))return!1;for(const x in p)if(p.hasOwnProperty(x)&&(void 0===C[x]||!tt(p[x],C[x])))return!1;return!0}(i,e);default:return E()}var l}function _i(i,e){return void 0!==(i.values||[]).find(t=>tt(t,e))}function ao(i,e){if(i===e)return 0;const t=aa(i),o=aa(e);if(t!==o)return vn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return vn(i.booleanValue,e.booleanValue);case 2:return function(l,p){const C=ei(l.integerValue||l.doubleValue),x=ei(p.integerValue||p.doubleValue);return C<x?-1:C>x?1:C===x?0:isNaN(C)?isNaN(x)?0:-1:1}(i,e);case 3:return ba(i.timestampValue,e.timestampValue);case 4:return ba(Cn(i),Cn(e));case 5:return vn(i.stringValue,e.stringValue);case 6:return function(l,p){const C=so(l),x=so(p);return C.compareTo(x)}(i.bytesValue,e.bytesValue);case 7:return function(l,p){const C=l.split("/"),x=p.split("/");for(let j=0;j<C.length&&j<x.length;j++){const H=vn(C[j],x[j]);if(0!==H)return H}return vn(C.length,x.length)}(i.referenceValue,e.referenceValue);case 8:return function(l,p){const C=vn(ei(l.latitude),ei(p.latitude));return 0!==C?C:vn(ei(l.longitude),ei(p.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(l,p){const C=l.values||[],x=p.values||[];for(let j=0;j<C.length&&j<x.length;++j){const H=ao(C[j],x[j]);if(H)return H}return vn(C.length,x.length)}(i.arrayValue,e.arrayValue);case 10:return function(l,p){const C=l.fields||{},x=Object.keys(C),j=p.fields||{},H=Object.keys(j);x.sort(),H.sort();for(let re=0;re<x.length&&re<H.length;++re){const me=vn(x[re],H[re]);if(0!==me)return me;const Be=ao(C[x[re]],j[H[re]]);if(0!==Be)return Be}return vn(x.length,H.length)}(i.mapValue,e.mapValue);default:throw E()}}function ba(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return vn(i,e);const t=Ln(i),o=Ln(e),l=vn(t.seconds,o.seconds);return 0!==l?l:vn(t.nanos,o.nanos)}function ks(i){return jo(i)}function jo(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const l=Ln(o);return`time(${l.seconds},${l.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?so(i.bytesValue).toBase64():"referenceValue"in i?Rt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let l="[",p=!0;for(const C of o.values||[])p?p=!1:l+=",",l+=jo(C);return l+"]"}(i.arrayValue):"mapValue"in i?function(o){const l=Object.keys(o.fields||{}).sort();let p="{",C=!0;for(const x of l)C?C=!1:p+=",",p+=`${x}:${jo(o.fields[x])}`;return p+"}"}(i.mapValue):E();var e}function Ns(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ul(i){return!!i&&"integerValue"in i}function $o(i){return!!i&&"arrayValue"in i}function Ea(i){return!!i&&"nullValue"in i}function Vl(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function wa(i){return!!i&&"mapValue"in i}function Ma(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return jr(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=Ma(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ma(i.arrayValue.values[t]);return e}return Object.assign({},i)}function P(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function F(i,e){return void 0===i?e:void 0===e||ao(i,e)>0?i:e}function K(i,e){return void 0===i?e:void 0===e||ao(i,e)<0?i:e}class ee{constructor(e){this.value=e}static empty(){return new ee({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!wa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ma(t)}setAll(e){let t=li.emptyPath(),o={},l=[];e.forEach((C,x)=>{if(!t.isImmediateParentOf(x)){const j=this.getFieldsMap(t);this.applyChanges(j,o,l),o={},l=[],t=x.popLast()}C?o[x.lastSegment()]=Ma(C):l.push(x.lastSegment())});const p=this.getFieldsMap(t);this.applyChanges(p,o,l)}delete(e){const t=this.field(e.popLast());wa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return tt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let l=t.mapValue.fields[e.get(o)];wa(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,o){jr(t,(l,p)=>e[l]=p);for(const l of o)delete e[l]}clone(){return new ee(Ma(this.value))}}function De(i){const e=[];return jr(i.fields,(t,o)=>{const l=new li([t]);if(wa(o)){const p=De(o.mapValue).fields;if(0===p.length)e.push(l);else for(const C of p)e.push(l.child(C))}else e.push(l)}),new Va(e)}class Se{constructor(e,t,o,l,p,C){this.key=e,this.documentType=t,this.version=o,this.readTime=l,this.data=p,this.documentState=C}static newInvalidDocument(e){return new Se(e,0,rn.min(),rn.min(),ee.empty(),0)}static newFoundDocument(e,t,o){return new Se(e,1,t,rn.min(),o,0)}static newNoDocument(e,t){return new Se(e,2,t,rn.min(),ee.empty(),0)}static newUnknownDocument(e,t){return new Se(e,3,t,rn.min(),ee.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ee.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ee.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Se&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Se(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mt{constructor(e,t,o,l){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=l}}function Wt(i){return i.fields.find(e=>2===e.kind)}function pn(i){return i.fields.filter(e=>2!==e.kind)}mt.UNKNOWN_ID=-1;class gn{constructor(e,t){this.fieldPath=e,this.kind=t}}class jn{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new jn(0,Sn.min())}}function Pn(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,l=rn.fromTimestamp(1e9===o?new Vr(t+1,0):new Vr(t,o));return new Sn(l,Rt.empty(),e)}function Es(i){return new Sn(i.readTime,i.key,-1)}class Sn{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Sn(rn.min(),Rt.empty(),-1)}static max(){return new Sn(rn.max(),Rt.empty(),-1)}}function Oa(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Rt.comparator(i.documentKey,e.documentKey),0!==t?t:vn(i.largestBatchId,e.largestBatchId))}class Ja{constructor(e,t=null,o=[],l=[],p=null,C=null,x=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=l,this.limit=p,this.startAt=C,this.endAt=x,this.P=null}}function la(i,e=null,t=[],o=[],l=null,p=null,C=null){return new Ja(i,e,t,o,l,p,C)}function ci(i){const e=N(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(l=o).field.canonicalString()+l.op.toString()+ks(l.value);var l}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(l=o).field.canonicalString()+l.dir;var l}).join(","),Rs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>ks(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>ks(o)).join(",")),e.P=t}return e.P}function Do(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let l=0;l<i.orderBy.length;l++)if(!jl(i.orderBy[l],e.orderBy[l]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let l=0;l<i.filters.length;l++)if((t=i.filters[l]).op!==(o=e.filters[l]).op||!t.field.isEqual(o.field)||!tt(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!gc(i.startAt,e.startAt)&&gc(i.endAt,e.endAt)}function Xa(i){return Rt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Ia(i,e){return i.filters.filter(t=>t instanceof ui&&t.field.isEqual(e))}class ui extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new hc(e,t,o):"array-contains"===t?new Bl(e,o):"in"===t?new _l(e,o):"not-in"===t?new Zc(e,o):"array-contains-any"===t?new Mh(e,o):new ui(e,t,o)}static V(e,t,o){return"in"===t?new el(e,o):new fc(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ao(t,this.value)):null!==t&&aa(this.value)===aa(t)&&this.v(ao(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return E()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class hc extends ui{constructor(e,t,o){super(e,t,o),this.key=Rt.fromName(o.referenceValue)}matches(e){const t=Rt.comparator(e.key,this.key);return this.v(t)}}class el extends ui{constructor(e,t){super(e,"in",t),this.keys=pc(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fc extends ui{constructor(e,t){super(e,"not-in",t),this.keys=pc(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function pc(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Rt.fromName(o.referenceValue))}class Bl extends ui{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $o(t)&&_i(t.arrayValue,this.value)}}class _l extends ui{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_i(this.value.arrayValue,t)}}class Zc extends ui{constructor(e,t){super(e,"not-in",t)}matches(e){if(_i(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_i(this.value.arrayValue,t)}}class Mh extends ui{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$o(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>_i(this.value.arrayValue,o))}}class Ba{constructor(e,t){this.position=e,this.inclusive=t}}class Fs{constructor(e,t="asc"){this.field=e,this.dir=t}}function jl(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Qc(i,e,t){let o=0;for(let l=0;l<i.position.length;l++){const p=e[l],C=i.position[l];if(o=p.field.isKeyField()?Rt.comparator(Rt.fromName(C.referenceValue),t.key):ao(C,t.data.field(p.field)),"desc"===p.dir&&(o*=-1),0!==o)break}return o}function gc(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!tt(i.position[t],e.position[t]))return!1;return!0}class zo{constructor(e,t=null,o=[],l=[],p=null,C="F",x=null,j=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=l,this.limit=p,this.limitType=C,this.startAt=x,this.endAt=j,this.D=null,this.C=null}}function vl(i,e,t,o,l,p,C,x){return new zo(i,e,t,o,l,p,C,x)}function Cl(i){return new zo(i)}function mc(i){return!Rs(i.limit)&&"F"===i.limitType}function yc(i){return!Rs(i.limit)&&"L"===i.limitType}function Fi(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function bl(i){for(const e of i.filters)if(e.S())return e.field;return null}function $l(i){return null!==i.collectionGroup}function Po(i){const e=N(i);if(null===e.D){e.D=[];const t=bl(e),o=Fi(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new Fs(t)),e.D.push(new Fs(li.keyField(),"asc"));else{let l=!1;for(const p of e.explicitOrderBy)e.D.push(p),p.field.isKeyField()&&(l=!0);if(!l){const p=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Fs(li.keyField(),p))}}}return e.D}function _o(i){const e=N(i);if(!e.C)if("F"===e.limitType)e.C=la(e.path,e.collectionGroup,Po(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const p of Po(e))t.push(new Fs(p.field,"desc"===p.dir?"asc":"desc"));const o=e.endAt?new Ba(e.endAt.position,!e.endAt.inclusive):null,l=e.startAt?new Ba(e.startAt.position,!e.startAt.inclusive):null;e.C=la(e.path,e.collectionGroup,t,e.filters,e.limit,o,l)}return e.C}function zl(i,e,t){return new zo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Hl(i,e){return Do(_o(i),_o(e))&&i.limitType===e.limitType}function Gl(i){return`${ci(_o(i))}|lt:${i.limitType}`}function Wl(i){return`Query(target=${function yo(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${ks(o.value)}`;var o}).join(", ")}]`),Rs(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>ks(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>ks(t)).join(",")),`Target(${e})`}(_o(i))}; limitType=${i.limitType})`}function _c(i,e){return e.isFoundDocument()&&function(t,o){const l=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(l):Rt.isDocumentKey(t.path)?t.path.isEqual(l):t.path.isImmediateParentOf(l)}(i,e)&&function(t,o){for(const l of t.explicitOrderBy)if(!l.field.isKeyField()&&null===o.data.field(l.field))return!1;return!0}(i,e)&&function(t,o){for(const l of t.filters)if(!l.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(l,p,C){const x=Qc(l,p,C);return l.inclusive?x<=0:x<0}(t.startAt,Po(t),o)||t.endAt&&!function(l,p,C){const x=Qc(l,p,C);return l.inclusive?x>=0:x>0}(t.endAt,Po(t),o)));var t,o}function Jc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Xc(i){return(e,t)=>{let o=!1;for(const l of Po(i)){const p=yd(l,e,t);if(0!==p)return p;o=o||l.field.isKeyField()}return 0}}function yd(i,e,t){const o=i.field.isKeyField()?Rt.comparator(e.key,t.key):function(l,p,C){const x=p.data.field(l),j=C.data.field(l);return null!==x&&null!==j?ao(x,j):E()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return E()}}function _d(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bs(e)?"-0":e}}function Su(i){return{integerValue:""+i}}function Tu(i,e){return oa(e)?Su(e):_d(i,e)}class El{constructor(){this._=void 0}}function vd(i,e,t){return i instanceof tl?function(o,l){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&(p.fields.__previous_value__=l),{mapValue:p}}(t,e):i instanceof nl?eu(i,e):i instanceof ql?Au(i,e):function(o,l){const p=Kl(o,l),C=tu(p)+tu(o.k);return Ul(p)&&Ul(o.k)?Su(C):_d(o.M,C)}(i,e)}function xa(i,e,t){return i instanceof nl?eu(i,e):i instanceof ql?Au(i,e):t}function Kl(i,e){return i instanceof wl?Ul(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class tl extends El{}class nl extends El{constructor(e){super(),this.elements=e}}function eu(i,e){const t=Cd(e);for(const o of i.elements)t.some(l=>tt(l,o))||t.push(o);return{arrayValue:{values:t}}}class ql extends El{constructor(e){super(),this.elements=e}}function Au(i,e){let t=Cd(e);for(const o of i.elements)t=t.filter(l=>!tt(l,o));return{arrayValue:{values:t}}}class wl extends El{constructor(e,t){super(),this.M=e,this.k=t}}function tu(i){return ei(i.integerValue||i.doubleValue)}function Cd(i){return $o(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class vc{constructor(e,t){this.field=e,this.transform=t}}class Ml{constructor(e,t){this.version=e,this.transformResults=t}}class as{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new as}static exists(e){return new as(void 0,e)}static updateTime(e){return new as(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nu(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class ja{}function bd(i,e,t){i instanceof g?function(o,l,p){const C=o.value.clone(),x=S(o.fieldTransforms,l,p.transformResults);C.setAll(x),l.convertToFoundDocument(p.version,C).setHasCommittedMutations()}(i,e,t):i instanceof u?function(o,l,p){if(!nu(o.precondition,l))return void l.convertToUnknownDocument(p.version);const C=S(o.fieldTransforms,l,p.transformResults),x=l.data;x.setAll(_(o)),x.setAll(C),l.convertToFoundDocument(p.version,x).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function vo(i,e,t){var l;i instanceof g?function(o,l,p){if(!nu(o.precondition,l))return;const C=o.value.clone(),x=$(o.fieldTransforms,p,l);C.setAll(x),l.convertToFoundDocument(m(l),C).setHasLocalMutations()}(i,e,t):i instanceof u?function(o,l,p){if(!nu(o.precondition,l))return;const C=$(o.fieldTransforms,p,l),x=l.data;x.setAll(_(o)),x.setAll(C),l.convertToFoundDocument(m(l),x).setHasLocalMutations()}(i,e,t):nu(i.precondition,l=e)&&l.convertToNoDocument(rn.min())}function Yl(i,e){let t=null;for(const o of i.fieldTransforms){const l=e.data.field(o.field),p=Kl(o.transform,l||null);null!=p&&(null==t&&(t=ee.empty()),t.set(o.field,p))}return t||null}function ru(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Ca(t,o,(l,p)=>function zf(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof nl&&o instanceof nl||t instanceof ql&&o instanceof ql?Ca(t.elements,o.elements,tt):t instanceof wl&&o instanceof wl?tt(t.k,o.k):t instanceof tl&&o instanceof tl);var t,o}(l,p))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function m(i){return i.isFoundDocument()?i.version:rn.min()}class g extends ja{constructor(e,t,o,l=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=l,this.type=0}}class u extends ja{constructor(e,t,o,l,p=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=l,this.fieldTransforms=p,this.type=1}}function _(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function S(i,e,t){const o=new Map;b(i.length===t.length);for(let l=0;l<t.length;l++){const p=i[l],C=p.transform,x=e.data.field(p.field);o.set(p.field,xa(C,x,t[l]))}return o}function $(i,e,t){const o=new Map;for(const l of i){const p=l.transform,C=t.data.field(l.field);o.set(l.field,vd(p,C,e))}return o}class te extends ja{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Oe extends ja{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Ge{constructor(e){this.count=e}}var We,Ve;function Ut(i){switch(i){default:return E();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function xn(i){if(void 0===i)return Ir("GRPC error has no .code"),U.UNKNOWN;switch(i){case We.OK:return U.OK;case We.CANCELLED:return U.CANCELLED;case We.UNKNOWN:return U.UNKNOWN;case We.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case We.INTERNAL:return U.INTERNAL;case We.UNAVAILABLE:return U.UNAVAILABLE;case We.UNAUTHENTICATED:return U.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case We.NOT_FOUND:return U.NOT_FOUND;case We.ALREADY_EXISTS:return U.ALREADY_EXISTS;case We.PERMISSION_DENIED:return U.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case We.ABORTED:return U.ABORTED;case We.OUT_OF_RANGE:return U.OUT_OF_RANGE;case We.UNIMPLEMENTED:return U.UNIMPLEMENTED;case We.DATA_LOSS:return U.DATA_LOSS;default:return E()}}(Ve=We||(We={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";class vr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[l,p]of o)if(this.equalsFn(l,e))return p}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),l=this.inner[o];if(void 0===l)return this.inner[o]=[[e,t]],void this.innerSize++;for(let p=0;p<l.length;p++)if(this.equalsFn(l[p][0],e))return void(l[p]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return 1===o.length?delete this.inner[t]:o.splice(l,1),this.innerSize--,!0;return!1}forEach(e){jr(this.inner,(t,o)=>{for(const[l,p]of o)e(l,p)})}isEmpty(){return Pu(this.inner)}size(){return this.innerSize}}class sn{constructor(e,t){this.comparator=e,this.root=t||wt.EMPTY}insert(e,t){return new sn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new sn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const l=this.comparator(e,o.key);if(0===l)return t+o.left.size;l<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wr(this.root,e,this.comparator,!0)}}class Wr{constructor(e,t,o,l){this.isReverse=l,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=t?o(e.key,t):1,t&&l&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,t,o,l,p){this.key=e,this.value=t,this.color=null!=o?o:wt.RED,this.left=null!=l?l:wt.EMPTY,this.right=null!=p?p:wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,l,p){return new wt(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=l?l:this.left,null!=p?p:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let l=this;const p=o(e,l.key);return l=p<0?l.copy(null,null,null,l.left.insert(e,t,o),null):0===p?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,o)),l.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),0===t(e,l.key)){if(l.right.isEmpty())return wt.EMPTY;o=l.right.min(),l=l.copy(o.key,o.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw E();const e=this.left.check();if(e!==this.right.check())throw E();return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1,wt.EMPTY=new class{constructor(){this.size=0}get key(){throw E()}get value(){throw E()}get color(){throw E()}get left(){throw E()}get right(){throw E()}copy(i,e,t,o,l){return this}insert(i,e,t){return new wt(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bt{constructor(e){this.comparator=e,this.data=new sn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const l=o.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jt(this.data.getIterator())}getIteratorFrom(e){return new jt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,p=o.getNext().key;if(0!==this.comparator(l,p))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bt(this.comparator);return t.data=e,t}}class jt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function kt(i){return i.hasNext()?i.getNext():void 0}const zt=new sn(Rt.comparator);function on(){return zt}const Rr=new sn(Rt.comparator);function vi(){return Rr}function Ls(){return new vr(i=>i.toString(),(i,e)=>i.isEqual(e))}const rl=new sn(Rt.comparator),Cc=new bt(Rt.comparator);function zr(...i){let e=Cc;for(const t of i)e=e.add(t);return e}const Oh=new bt(vn);function Ru(){return Oh}class ku{constructor(e,t,o,l,p){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=l,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,t)),new ku(rn.min(),o,Ru(),on(),zr())}}class Nu{constructor(e,t,o,l,p){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=l,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Nu($r.EMPTY_BYTE_STRING,t,zr(),zr(),zr())}}class Ol{constructor(e,t,o,l){this.O=e,this.removedTargetIds=t,this.key=o,this.F=l}}class Ks{constructor(e,t){this.targetId=e,this.$=t}}class bc{constructor(e,t,o=$r.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=l}}class iu{constructor(){this.B=0,this.L=Il(),this.U=$r.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=zr(),t=zr(),o=zr();return this.L.forEach((l,p)=>{switch(p){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:o=o.add(l);break;default:E()}}),new Nu(this.U,this.q,e,t,o)}J(){this.G=!1,this.L=Il()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class Ed{constructor(e){this.nt=e,this.st=new Map,this.it=on(),this.rt=qs(),this.ot=new bt(vn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.K||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.K||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:E()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,l)=>{this.ft(l)&&t(l)})}_t(e){const t=e.targetId,o=e.$.count,l=this.wt(t);if(l){const p=l.target;if(Xa(p))if(0===o){const C=new Rt(p.path);this.ct(t,C,Se.newNoDocument(C,rn.min()))}else b(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((p,C)=>{const x=this.wt(C);if(x){if(p.current&&Xa(x.target)){const j=new Rt(x.target.path);null!==this.it.get(j)||this.It(C,j)||this.ct(C,j,Se.newNoDocument(j,e))}p.j&&(t.set(C,p.H()),p.J())}});let o=zr();this.rt.forEach((p,C)=>{let x=!0;C.forEachWhile(j=>{const H=this.wt(j);return!H||2===H.purpose||(x=!1,!1)}),x&&(o=o.add(p))}),this.it.forEach((p,C)=>C.setReadTime(e));const l=new ku(e,t,this.ot,this.it,o);return this.it=on(),this.rt=qs(),this.ot=new bt(vn),l}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const l=this.lt(e);this.It(e,t)?l.Y(t,1):l.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new iu,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new bt(vn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||yt("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new iu),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function qs(){return new sn(Rt.comparator)}function Il(){return new sn(Rt.comparator)}const wd={asc:"ASCENDING",desc:"DESCENDING"},Ho={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class su{constructor(e,t){this.databaseId=e,this.N=t}}function Zl(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ih(i,e){return i.N?e.toBase64():e.toUint8Array()}function Fu(i,e){return Zl(i,e.toTimestamp())}function ls(i){return b(!!i),rn.fromTimestamp(function(e){const t=Ln(e);return new Vr(t.seconds,t.nanos)}(i))}function Lu(i,e){return(t=i,new nr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Md(i){const e=nr.fromString(i);return b(V(e)),e}function ou(i,e){return Lu(i.databaseId,e.path)}function ws(i,e){const t=Md(e);if(t.get(1)!==i.databaseId.projectId)throw new W(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new W(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Rt(Dh(t))}function Uu(i,e){return Lu(i.databaseId,e)}function xh(i){const e=Md(i);return 4===e.length?nr.emptyPath():Dh(e)}function Ql(i){return new nr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Dh(i){return b(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Od(i,e,t){return{name:ou(i,e),fields:t.value.mapValue.fields}}function Us(i,e,t){const o=ws(i,e.name),l=ls(e.updateTime),p=new ee({mapValue:{fields:e.fields}}),C=Se.newFoundDocument(o,l,p);return t&&C.setHasCommittedMutations(),t?C.setHasCommittedMutations():C}function au(i,e){let t;if(e instanceof g)t={update:Od(i,e.key,e.value)};else if(e instanceof te)t={delete:ou(i,e.key)};else if(e instanceof u)t={update:Od(i,e.key,e.data),updateMask:w(e.fieldMask)};else{if(!(e instanceof Oe))return E();t={verify:ou(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(l,p){const C=p.transform;if(C instanceof tl)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof nl)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof ql)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof wl)return{fieldPath:p.field.canonicalString(),increment:C.k};throw E()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(l=e.precondition).updateTime?{updateTime:Fu(i,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:E()),t;var l}function Da(i,e){const t=e.currentDocument?void 0!==(l=e.currentDocument).updateTime?as.updateTime(ls(l.updateTime)):void 0!==l.exists?as.exists(l.exists):as.none():as.none(),o=e.updateTransforms?e.updateTransforms.map(l=>function(p,C){let x=null;"setToServerValue"in C?(b("REQUEST_TIME"===C.setToServerValue),x=new tl):"appendMissingElements"in C?x=new nl(C.appendMissingElements.values||[]):"removeAllFromArray"in C?x=new ql(C.removeAllFromArray.values||[]):"increment"in C?x=new wl(p,C.increment):E();const j=li.fromServerFormat(C.fieldPath);return new vc(j,x)}(i,l)):[];var l;if(e.update){const l=ws(i,e.update.name),p=new ee({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new Va((e.updateMask.fieldPaths||[]).map(H=>li.fromServerFormat(H)));return new u(l,p,C,t,o)}return new g(l,p,t,o)}if(e.delete){const l=ws(i,e.delete);return new te(l,t)}if(e.verify){const l=ws(i,e.verify);return new Oe(l,t)}return E()}function Vu(i,e){return{documents:[Uu(i,e.path)]}}function Dd(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Uu(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Uu(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const l=function(j){if(0===j.length)return;const H=j.map(re=>function(me){if("=="===me.op){if(Vl(me.value))return{unaryFilter:{field:Ec(me.field),op:"IS_NAN"}};if(Ea(me.value))return{unaryFilter:{field:Ec(me.field),op:"IS_NULL"}}}else if("!="===me.op){if(Vl(me.value))return{unaryFilter:{field:Ec(me.field),op:"IS_NOT_NAN"}};if(Ea(me.value))return{unaryFilter:{field:Ec(me.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ec(me.field),op:Gf(me.op),value:me.value}}}(re));return 1===H.length?H[0]:{compositeFilter:{op:"AND",filters:H}}}(e.filters);l&&(t.structuredQuery.where=l);const p=function(j){if(0!==j.length)return j.map(H=>{return{field:Ec((re=H).field),direction:Hf(re.dir)};var re})}(e.orderBy);p&&(t.structuredQuery.orderBy=p);const C=(H=e.limit,i.N||Rs(H)?H:{value:H});var H,x,j;return null!==C&&(t.structuredQuery.limit=C),e.startAt&&(t.structuredQuery.startAt={before:(x=e.startAt).inclusive,values:x.position}),e.endAt&&(t.structuredQuery.endAt={before:!(j=e.endAt).inclusive,values:j.position}),t}function Ph(i){let e=xh(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let l=null;if(o>0){b(1===o);const re=t.from[0];re.allDescendants?l=re.collectionId:e=e.child(re.collectionId)}let p=[];t.where&&(p=Sh(t.where));let C=[];t.orderBy&&(C=t.orderBy.map(re=>{return new Fs(y((me=re).field),function(Be){switch(Be){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(me.direction));var me}));let x=null;t.limit&&(x=function(re){let me;return me="object"==typeof re?re.value:re,Rs(me)?null:me}(t.limit));let j=null;var re;t.startAt&&(j=new Ba((re=t.startAt).values||[],!!re.before));let H=null;return t.endAt&&(H=function(re){return new Ba(re.values||[],!re.before)}(t.endAt)),vl(e,l,C,p,x,"F",j,H)}function Sh(i){return i?void 0!==i.unaryFilter?[f(i)]:void 0!==i.fieldFilter?[d(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>Sh(e)).reduce((e,t)=>e.concat(t)):E():[]}function Hf(i){return wd[i]}function Gf(i){return Ho[i]}function Ec(i){return{fieldPath:i.canonicalString()}}function y(i){return li.fromServerFormat(i.fieldPath)}function d(i){return ui.create(y(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return E()}}(i.fieldFilter.op),i.fieldFilter.value)}function f(i){switch(i.unaryFilter.op){case"IS_NAN":const e=y(i.unaryFilter.field);return ui.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=y(i.unaryFilter.field);return ui.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=y(i.unaryFilter.field);return ui.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=y(i.unaryFilter.field);return ui.create(l,"!=",{nullValue:"NULL_VALUE"});default:return E()}}function w(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function V(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Q(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Ke(e)),e=Ie(i.get(t),e);return Ke(e)}function Ie(i,e){let t=e;const o=i.length;for(let l=0;l<o;l++){const p=i.charAt(l);switch(p){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=p}}return t}function Ke(i){return i+"\x01\x01"}function xt(i){const e=i.length;if(b(e>=2),2===e)return b("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),nr.emptyPath();const t=e-2,o=[];let l="";for(let p=0;p<e;){const C=i.indexOf("\x01",p);switch((C<0||C>t)&&E(),i.charAt(C+1)){case"\x01":const x=i.substring(p,C);let j;0===l.length?j=x:(l+=x,j=l,l=""),o.push(j);break;case"\x10":l+=i.substring(p,C),l+="\0";break;case"\x11":l+=i.substring(p,C+1);break;default:E()}p=C+2}return new nr(o)}const Jt=["userId","batchId"];function yn(i,e){return[i,Q(e)]}function cn(i,e,t){return[i,Q(e),t]}const Li={},ca=["prefixPath","collectionGroup","readTime","documentId"],cu=["prefixPath","collectionGroup","documentId"],Bu=["collectionGroup","readTime","prefixPath","documentId"],uu=["canonicalId","targetId"],Sd=["targetId","path"],Wf=["path","targetId"],xl=["collectionId","parent"],ju=["indexId","uid"],Td=["uid","sequenceNumber"],Ad=["indexId","uid","arrayValue","directionalValue","documentKey"],$u=["indexId","uid","documentKey"],Kf=["userId","collectionPath","documentId"],Rd=["userId","collectionPath","largestBatchId"],qf=["userId","collectionGroup","largestBatchId"],Ug=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Iy=[...Ug,"documentOverlays"],Vg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Bg=[...Vg,"indexConfiguration","indexState","indexEntries"],Th="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Yf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class nt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&E(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new nt((o,l)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(o,l)},this.catchCallback=p=>{this.wrapFailure(t,p).next(o,l)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof nt?t:nt.resolve(t)}catch(t){return nt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):nt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):nt.reject(t)}static resolve(e){return new nt((t,o)=>{t(e)})}static reject(e){return new nt((t,o)=>{o(e)})}static waitFor(e){return new nt((t,o)=>{let l=0,p=0,C=!1;e.forEach(x=>{++l,x.next(()=>{++p,C&&p===l&&t()},j=>o(j))}),C=!0,p===l&&t()})}static or(e){let t=nt.resolve(!1);for(const o of e)t=t.next(l=>l?nt.resolve(l):o());return t}static forEach(e,t){const o=[];return e.forEach((l,p)=>{o.push(t.call(this,l,p))}),this.waitFor(o)}}class Ah{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new ae,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new zu(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const l=Hu(o.target.error);this.At.reject(new zu(e,l))}}static open(e,t,o,l){try{return new Ah(t,e.transaction(l,o))}catch(p){throw new zu(t,p)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(yt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $g(t)}}class il{constructor(e,t,o){this.name=e,this.version=t,this.Pt=o,12.2===il.Vt((0,Re.z$)())&&Ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return yt("SimpleDb","Removing database:",e),wc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Re.hl)())return!1;if(il.St())return!0;const e=(0,Re.z$)(),t=il.Vt(e),o=0<t&&t<10,l=il.Dt(e),p=0<l&&l<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||p)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,Me.Z)(function*(){return t.db||(yt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,l)=>{const p=indexedDB.open(t.name,t.version);p.onsuccess=C=>{o(C.target.result)},p.onblocked=()=>{l(new zu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=C=>{const x=C.target.error;l("VersionError"===x.name?new W(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===x.name?new W(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+x):new zu(e,x))},p.onupgradeneeded=C=>{yt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',C.oldVersion),t.Pt.kt(C.target.result,p.transaction,C.oldVersion,t.version).next(()=>{yt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,l){var p=this;return(0,Me.Z)(function*(){const C="readonly"===t;let x=0;for(;;){++x;try{p.db=yield p.Nt(e);const j=Ah.open(p.db,e,C?"readonly":"readwrite",o),H=l(j).next(re=>(j.bt(),re)).catch(re=>(j.abort(re),nt.reject(re))).toPromise();return H.catch(()=>{}),yield j.Rt,H}catch(j){const H="FirebaseError"!==j.name&&x<3;if(yt("SimpleDb","Transaction failed with error:",j.message,"Retrying:",H),p.close(),!H)return Promise.reject(j)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class jg{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return wc(this.Ft.delete())}}class zu extends W{constructor(e,t){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Pa(i){return"IndexedDbTransactionError"===i.name}class $g{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(yt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(yt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),wc(o)}add(e){return yt("SimpleDb","ADD",this.store.name,e,e),wc(this.store.add(e))}get(e){return wc(this.store.get(e)).next(t=>(void 0===t&&(t=null),yt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return yt("SimpleDb","DELETE",this.store.name,e),wc(this.store.delete(e))}count(){return yt("SimpleDb","COUNT",this.store.name),wc(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const l=this.cursor(o),p=[];return this.Gt(l,(C,x)=>{p.push(x)}).next(()=>p)}{const l=this.store.getAll(o.range);return new nt((p,C)=>{l.onerror=x=>{C(x.target.error)},l.onsuccess=x=>{p(x.target.result)}})}}Kt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new nt((l,p)=>{o.onerror=C=>{p(C.target.error)},o.onsuccess=C=>{l(C.target.result)}})}Qt(e,t){yt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const l=this.cursor(o);return this.Gt(l,(p,C,x)=>x.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const l=this.cursor(o);return this.Gt(l,t)}zt(e){const t=this.cursor({});return new nt((o,l)=>{t.onerror=p=>{const C=Hu(p.target.error);l(C)},t.onsuccess=p=>{const C=p.target.result;C?e(C.primaryKey,C.value).next(x=>{x?C.continue():o()}):o()}})}Gt(e,t){const o=[];return new nt((l,p)=>{e.onerror=C=>{p(C.target.error)},e.onsuccess=C=>{const x=C.target.result;if(!x)return void l();const j=new jg(x),H=t(x.primaryKey,x.value,j);if(H instanceof nt){const re=H.catch(me=>(j.done(),nt.reject(me)));o.push(re)}j.isDone?l():null===j.Lt?x.continue():x.continue(j.Lt)}}).next(()=>nt.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function wc(i){return new nt((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const l=Hu(o.target.error);t(l)}})}let zg=!1;function Hu(i){const e=il.Vt((0,Re.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new W("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zg||(zg=!0,setTimeout(()=>{throw o},0)),o}}return i}class Hg extends Yf{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Ys(i,e){const t=N(i);return il.xt(t.Ht,e)}class Rh{constructor(e,t,o,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=l}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const p=this.mutations[l];p.key.isEqual(e.key)&&bd(p,e,o[l])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&vo(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&vo(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),l=o;this.applyToLocalView(l),o.isValidDocument()||l.convertToNoDocument(rn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),zr())}isEqual(e){return this.batchId===e.batchId&&Ca(this.mutations,e.mutations,(t,o)=>ru(t,o))&&Ca(this.baseMutations,e.baseMutations,(t,o)=>ru(t,o))}}class kh{constructor(e,t,o,l){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=l}static from(e,t,o){b(e.mutations.length===o.length);let l=rl;const p=e.mutations;for(let C=0;C<p.length;C++)l=l.insert(p[C].key,o[C].version);return new kh(e,t,o,l)}}class kd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Jl{constructor(e,t,o,l,p=rn.min(),C=rn.min(),x=$r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=l,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=x}withSequenceNumber(e){return new Jl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Nd{constructor(e){this.Jt=e}}function Zf(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Gu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:ou(l=i.Jt,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:Zl(l,p.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Mc(e.version)};else{if(!e.isUnknownDocument())return E();o.unknownDocument={path:t.path.toArray(),version:Mc(e.version)}}var l,p;return o}function Gu(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Mc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xl(i){const e=new Vr(i.seconds,i.nanoseconds);return rn.fromTimestamp(e)}function Dl(i,e){const t=(e.baseMutations||[]).map(p=>Da(i.Jt,p));for(let p=0;p<e.mutations.length-1;++p){const C=e.mutations[p];p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(C.updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p)}const o=e.mutations.map(p=>Da(i.Jt,p)),l=Vr.fromMillis(e.localWriteTimeMs);return new Rh(e.batchId,l,t,o)}function Fd(i){const e=Xl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Xl(i.lastLimboFreeSnapshotVersion):rn.min();let o;var l;return void 0!==i.query.documents?(b(1===(l=i.query).documents.length),o=_o(Cl(xh(l.documents[0])))):o=_o(Ph(i.query)),new Jl(o,i.targetId,0,i.lastListenSequenceNumber,e,t,$r.fromBase64String(i.resumeToken))}function Qf(i,e){const t=Mc(e.snapshotVersion),o=Mc(e.lastLimboFreeSnapshotVersion);let l;l=Xa(e.target)?Vu(i.Jt,e.target):Dd(i.Jt,e.target);const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ci(e.target),readTime:t,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:l}}function Jf(i){const e=Ph({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?zl(e,e.limit,"L"):e}function Xf(i,e){return new kd(e.largestBatchId,Da(i.Jt,e.overlayMutation))}function ep(i,e){const t=e.path.lastSegment();return[i,Q(e.path.popLast()),t]}class tp{getBundleMetadata(e,t){return np(e).get(t).next(o=>{if(o)return{id:(l=o).bundleId,createTime:Xl(l.createTime),version:l.version};var l})}saveBundleMetadata(e,t){return np(e).put({bundleId:(o=t).id,createTime:Mc(ls(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return xy(e).get(t).next(o=>{if(o)return{name:(l=o).name,query:Jf(l.bundledQuery),readTime:Xl(l.readTime)};var l})}saveNamedQuery(e,t){return xy(e).put({name:(o=t).name,readTime:Mc(ls(o.readTime)),bundledQuery:o.bundledQuery});var o}}function np(i){return Ys(i,"bundles")}function xy(i){return Ys(i,"namedQueries")}class Fh{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Fh(e,t.uid||"")}getOverlay(e,t){return Ld(e).get(ep(this.userId,t)).next(o=>o?Xf(this.M,o):null)}saveOverlays(e,t,o){const l=[];return o.forEach((p,C)=>{const x=new kd(t,C);l.push(this.Xt(e,x))}),nt.waitFor(l)}removeOverlaysForBatchId(e,t,o){const l=new Set;t.forEach(C=>l.add(Q(C.getCollectionPath())));const p=[];return l.forEach(C=>{const x=IDBKeyRange.bound([this.userId,C,o],[this.userId,C,o+1],!1,!0);p.push(Ld(e).Qt("collectionPathOverlayIndex",x))}),nt.waitFor(p)}getOverlaysForCollection(e,t,o){const l=Ls(),p=Q(t),C=IDBKeyRange.bound([this.userId,p,o],[this.userId,p,Number.POSITIVE_INFINITY],!0);return Ld(e).qt("collectionPathOverlayIndex",C).next(x=>{for(const j of x){const H=Xf(this.M,j);l.set(H.getKey(),H)}return l})}getOverlaysForCollectionGroup(e,t,o,l){const p=Ls();let C;const x=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ld(e).Wt({index:"collectionGroupOverlayIndex",range:x},(j,H,re)=>{const me=Xf(this.M,H);p.size()<l||me.largestBatchId===C?(p.set(me.getKey(),me),C=me.largestBatchId):re.done()}).next(()=>p)}Xt(e,t){return Ld(e).put(function(o,l,p){const[C,x,j]=ep(l,p.mutation.key);return{userId:l,collectionPath:x,documentId:j,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:au(o.Jt,p.mutation)}}(this.M,this.userId,t))}}function Ld(i){return Ys(i,"documentOverlays")}class du{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(ei(e.integerValue));else if("doubleValue"in e){const o=ei(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),bs(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(so(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?P(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):E()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const l of Object.keys(o))this.re(l,t),this.te(o[l],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const l of o)this.te(l,t)}ae(e,t){this.ne(t,37),Rt.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Dy(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Gg(i){const e=64-function(t){let o=0;for(let l=0;l<8;++l){const p=Dy(255&t[l]);if(o+=p,8!==p)break}return o}(i);return Math.ceil(e/8)}du.fe=new du;class sl{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const l=t.codePointAt(0);this._e(240|l>>>18),this._e(128|63&l>>>12),this._e(128|63&l>>>6),this._e(128|63&l)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const l=t.codePointAt(0);this.ge(240|l>>>18),this.ge(128|63&l>>>12),this.ge(128|63&l>>>6),this.ge(128|63&l)}}this.ye()}Te(e){const t=this.Ee(e),o=Gg(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let l=t.length-o;l<t.length;++l)this.buffer[this.position++]=255&t[l]}Re(e){const t=this.Ee(e),o=Gg(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let l=t.length-o;l<t.length;++l)this.buffer[this.position++]=~(255&t[l])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(l){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,l,!1),new Uint8Array(p.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let l=1;l<t.length;++l)t[l]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const l=new Uint8Array(o);l.set(this.buffer),this.buffer=l}}class Py{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Wg{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Lh{constructor(){this.De=new sl,this.Ce=new Py(this.De),this.xe=new Wg(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Oc{constructor(e,t,o,l){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=l}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Oc(this.indexId,this.documentKey,this.arrayValue,o)}}function hu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Kg(i.arrayValue,e.arrayValue),0!==t?t:(t=Kg(i.directionalValue,e.directionalValue),0!==t?t:Rt.comparator(i.documentKey,e.documentKey)))}function Kg(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class qg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=Wt(e);if(void 0!==t&&!this.Be(t))return!1;const o=pn(e);let l=0,p=0;for(;l<o.length&&this.Be(o[l]);++l);if(l===o.length)return!0;if(void 0!==this.Fe){const C=o[l];if(!this.Le(this.Fe,C)||!this.Ue(this.Me[p++],C))return!1;++l}for(;l<o.length;++l){const C=o[l];if(p>=this.Me.length||!this.Ue(this.Me[p++],C))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Sy{constructor(){this.qe=new rp}addToCollectionParentIndex(e,t){return this.qe.add(t),nt.resolve()}getCollectionParents(e,t){return nt.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return nt.resolve()}deleteFieldIndex(e,t){return nt.resolve()}getDocumentsMatchingTarget(e,t){return nt.resolve(null)}getFieldIndex(e,t){return nt.resolve(null)}getFieldIndexes(e,t){return nt.resolve([])}getNextCollectionGroupToUpdate(e){return nt.resolve(null)}updateCollectionGroup(e,t,o){return nt.resolve()}updateIndexEntries(e,t){return nt.resolve()}}class rp{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),l=this.index[t]||new bt(nr.comparator),p=!l.has(o);return this.index[t]=l.add(o),p}has(e){const t=e.lastSegment(),o=e.popLast(),l=this.index[t];return l&&l.has(o)}getEntries(e){return(this.index[e]||new bt(nr.comparator)).toArray()}}const Uh=new Uint8Array(0);class Jn{constructor(e){this.user=e,this.Ge=new rp,this.Ke=new vr(t=>ci(t),(t,o)=>Do(t,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const o=t.lastSegment(),l=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const p={collectionId:o,parent:Q(l)};return ip(e).put(p)}return nt.resolve()}getCollectionParents(e,t){const o=[],l=IDBKeyRange.bound([t,""],[yl(t),""],!1,!0);return ip(e).qt(l).next(p=>{for(const C of p){if(C.collectionId!==t)break;o.push(xt(C.parent))}return o})}addFieldIndex(e,t){const o=Ud(e),l={indexId:(p=t).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(C=>[C.fieldPath.canonicalString(),C.kind])};var p;return delete l.indexId,o.add(l).next()}deleteFieldIndex(e,t){const o=Ud(e),l=fu(e),p=Wu(e);return o.delete(t.indexId).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Wu(e);let l=!0;const p=new Map;return nt.forEach(this.Qe(t),C=>this.getFieldIndex(e,C).next(x=>{l&&(l=!!x),p.set(C,x)})).next(()=>{if(l){let C=zr();return nt.forEach(p,(x,j)=>{var H;yt("IndexedDbIndexManager",`Using index ${H=x,`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map(br=>`${br.fieldPath}:${br.kind}`).join(",")}`} to execute ${ci(t)}`);const re=function(br,Bs){const di=Wt(Bs);if(void 0===di)return null;for(const Di of Ia(br,di.fieldPath))switch(Di.op){case"array-contains-any":return Di.value.arrayValue.values||[];case"array-contains":return[Di.value]}return null}(j,x),me=function(br,Bs){const di=new Map;for(const Di of pn(Bs))for(const Kr of Ia(br,Di.fieldPath))switch(Kr.op){case"==":case"in":di.set(Di.fieldPath.canonicalString(),Kr.value);break;case"not-in":case"!=":return di.set(Di.fieldPath.canonicalString(),Kr.value),Array.from(di.values())}return null}(j,x),Be=function(br,Bs){const di=[];let Di=!0;for(const hl of pn(Bs)){let bo,Du=!0;for(const Qs of Ia(br,hl.fieldPath)){let Xi,md=!0;switch(Qs.op){case"<":case"<=":Xi="nullValue"in(Kr=Qs.value)?Yc:"booleanValue"in Kr?{booleanValue:!1}:"integerValue"in Kr||"doubleValue"in Kr?{doubleValue:NaN}:"timestampValue"in Kr?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Kr?{stringValue:""}:"bytesValue"in Kr?{bytesValue:""}:"referenceValue"in Kr?Ns(oo.empty(),Rt.empty()):"geoPointValue"in Kr?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Kr?{arrayValue:{}}:"mapValue"in Kr?{mapValue:{}}:E();break;case"==":case"in":case">=":Xi=Qs.value;break;case">":Xi=Qs.value,md=!1;break;case"!=":case"not-in":Xi=Yc}F(bo,Xi)===Xi&&(bo=Xi,Du=md)}if(null!==br.startAt)for(let Qs=0;Qs<br.orderBy.length;++Qs)if(br.orderBy[Qs].field.isEqual(hl.fieldPath)){const Xi=br.startAt.position[Qs];F(bo,Xi)===Xi&&(bo=Xi,Du=br.startAt.inclusive);break}if(void 0===bo)return null;di.push(bo),Di&&(Di=Du)}var Kr;return new Ba(di,Di)}(j,x),ht=function(br,Bs){const di=[];let Di=!0;for(const hl of pn(Bs)){let bo,Du=!0;for(const Qs of Ia(br,hl.fieldPath)){let Xi,md=!0;switch(Qs.op){case">=":case">":Xi="nullValue"in(Kr=Qs.value)?{booleanValue:!1}:"booleanValue"in Kr?{doubleValue:NaN}:"integerValue"in Kr||"doubleValue"in Kr?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Kr?{stringValue:""}:"stringValue"in Kr?{bytesValue:""}:"bytesValue"in Kr?Ns(oo.empty(),Rt.empty()):"referenceValue"in Kr?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Kr?{arrayValue:{}}:"arrayValue"in Kr?{mapValue:{}}:"mapValue"in Kr?qc:E(),md=!1;break;case"==":case"in":case"<=":Xi=Qs.value;break;case"<":Xi=Qs.value,md=!1;break;case"!=":case"not-in":Xi=qc}K(bo,Xi)===Xi&&(bo=Xi,Du=md)}if(null!==br.endAt)for(let Qs=0;Qs<br.orderBy.length;++Qs)if(br.orderBy[Qs].field.isEqual(hl.fieldPath)){const Xi=br.endAt.position[Qs];K(bo,Xi)===Xi&&(bo=Xi,Du=br.endAt.inclusive);break}if(void 0===bo)return null;di.push(bo),Di&&(Di=Du)}var Kr;return new Ba(di,Di)}(j,x),_t=this.je(x,j,Be),en=this.je(x,j,ht),Yn=this.We(x,j,me),Ji=this.ze(x.indexId,re,_t,!!Be&&Be.inclusive,en,!!ht&&ht.inclusive,Yn);return nt.forEach(Ji,br=>o.Kt(br,t.limit).next(Bs=>{Bs.forEach(di=>{C=C.add(new Rt(xt(di.documentKey)))})}))}).next(()=>C)}return nt.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,o,l,p,C,x){const j=(null!=t?t.length:1)*Math.max(null!=o?o.length:1,null!=p?p.length:1),H=j/(null!=t?t.length:1),re=[];for(let me=0;me<j;++me){const Be=t?this.He(t[me/H]):Uh,ht=o?this.Je(e,Be,o[me%H],l):this.Ye(e),_t=p?this.Xe(e,Be,p[me%H],C):this.Ye(e+1);re.push(...this.createRange(ht,_t,x.map(en=>this.Je(e,Be,en,!0))))}return re}Je(e,t,o,l){const p=new Oc(e,Rt.empty(),t,o);return l?p:p.ke()}Xe(e,t,o,l){const p=new Oc(e,Rt.empty(),t,o);return l?p.ke():p}Ye(e){return new Oc(e,Rt.empty(),Uh,Uh)}getFieldIndex(e,t){const o=new qg(t),l=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,l).next(p=>{const C=p.filter(x=>o.$e(x));return C.sort((x,j)=>j.fields.length-x.fields.length),C.length>0?C[0]:null})}Ze(e,t){const o=new Lh;for(const l of pn(e)){const p=t.data.field(l.fieldPath);if(null==p)return null;const C=o.Ne(l.kind);du.fe.Zt(p,C)}return o.Se()}He(e){const t=new Lh;return du.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,o){if(null===o)return[];let l=[];l.push(new Lh);let p=0;for(const C of pn(e)){const x=o[p++];for(const j of l)if(this.tn(t,C.fieldPath)&&$o(x))l=this.en(l,C,x);else{const H=j.Ne(C.kind);du.fe.Zt(x,H)}}return this.nn(l)}je(e,t,o){return null==o?null:this.We(e,t,o.position)}nn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}en(e,t,o){const l=[...e],p=[];for(const C of o.arrayValue.values||[])for(const x of l){const j=new Lh;j.seed(x.Se()),du.fe.Zt(C,j.Ne(t.kind)),p.push(j)}return p}tn(e,t){return!!e.filters.find(o=>o instanceof ui&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Ud(e),l=fu(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(p=>{const C=[];return nt.forEach(p,x=>l.get([x.indexId,this.uid]).next(j=>{C.push(function(H,re){const me=re?new jn(re.sequenceNumber,new Sn(Xl(re.readTime),new Rt(xt(re.documentKey)),re.largestBatchId)):jn.empty(),Be=H.fields.map(([ht,_t])=>new gn(li.fromServerFormat(ht),_t));return new mt(H.indexId,H.collectionGroup,Be,me)}(x,j))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,l)=>{const p=o.indexState.sequenceNumber-l.indexState.sequenceNumber;return 0!==p?p:vn(o.collectionGroup,l.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const l=Ud(e),p=fu(e);return this.sn(e).next(C=>l.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(x=>nt.forEach(x,j=>{return p.put({indexId:j.indexId,uid:this.user.uid||"",sequenceNumber:C,readTime:Mc((Be=o).readTime),documentKey:Q(Be.documentKey.path),largestBatchId:Be.largestBatchId});var Be})))}updateIndexEntries(e,t){const o=new Map;return nt.forEach(t,(l,p)=>{const C=o.get(l.collectionGroup);return(C?nt.resolve(C):this.getFieldIndexes(e,l.collectionGroup)).next(x=>(o.set(l.collectionGroup,x),nt.forEach(x,j=>this.rn(e,l,j).next(H=>{const re=this.on(p,j);return H.isEqual(re)?nt.resolve():this.un(e,p,H,re)}))))})}an(e,t,o){return Wu(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,documentKey:Q(t.key.path)})}cn(e,t,o){return Wu(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,Q(t.key.path)])}rn(e,t,o){const l=Wu(e);let p=new bt(hu);return l.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,Q(t.path)])},(C,x)=>{p=p.add(new Oc(o.indexId,t,x.arrayValue,x.directionalValue))}).next(()=>p)}on(e,t){let o=new bt(hu);const l=this.Ze(t,e);if(null==l)return o;const p=Wt(t);if(null!=p){const C=e.data.field(p.fieldPath);if($o(C))for(const x of C.arrayValue.values||[])o=o.add(new Oc(t.indexId,e.key,this.He(x),l))}else o=o.add(new Oc(t.indexId,e.key,Uh,l));return o}un(e,t,o,l){yt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const p=[];return function(C,x,j,H,re){const me=C.getIterator(),Be=x.getIterator();let ht=kt(me),_t=kt(Be);for(;ht||_t;){let en=!1,Yn=!1;if(ht&&_t){const Ji=j(ht,_t);Ji<0?Yn=!0:Ji>0&&(en=!0)}else null!=ht?Yn=!0:en=!0;en?(H(_t),_t=kt(Be)):Yn?(re(ht),ht=kt(me)):(ht=kt(me),_t=kt(Be))}}(o,l,hu,C=>{p.push(this.an(e,t,C))},C=>{p.push(this.cn(e,t,C))}),nt.waitFor(p)}sn(e){let t=1;return fu(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,l,p)=>{p.done(),t=l.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((C,x)=>hu(C,x)).filter((C,x,j)=>!x||0!==hu(C,j[x-1]));const l=[];l.push(e);for(const C of o){const x=hu(C,e),j=hu(C,t);if(0===x)l[0]=e.ke();else if(x>0&&j<0)l.push(C),l.push(C.ke());else if(j>0)break}l.push(t);const p=[];for(let C=0;C<l.length;C+=2)p.push(IDBKeyRange.bound([l[C].indexId,this.uid,l[C].arrayValue,l[C].directionalValue,""],[l[C+1].indexId,this.uid,l[C+1].arrayValue,l[C+1].directionalValue,""]));return p}}function ip(i){return Ys(i,"collectionParents")}function Wu(i){return Ys(i,"indexEntries")}function Ud(i){return Ys(i,"indexConfiguration")}function fu(i){return Ys(i,"indexState")}const $a={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Go{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Go(e,Go.DEFAULT_COLLECTION_PERCENTILE,Go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Yg(i,e,t){const o=i.store("mutations"),l=i.store("documentMutations"),p=[],C=IDBKeyRange.only(t.batchId);let x=0;const j=o.Wt({range:C},(re,me,Be)=>(x++,Be.delete()));p.push(j.next(()=>{b(1===x)}));const H=[];for(const re of t.mutations){const me=cn(e,re.key.path,t.batchId);p.push(l.delete(me)),H.push(re.key)}return nt.waitFor(p).next(()=>H)}function Ku(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw E();e=i.noDocument}return JSON.stringify(e).length}Go.DEFAULT_COLLECTION_PERCENTILE=10,Go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Go.DEFAULT=new Go(41943040,Go.DEFAULT_COLLECTION_PERCENTILE,Go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Go.DISABLED=new Go(-1,0,0);class ol{constructor(e,t,o,l){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=l,this.hn={}}static Yt(e,t,o,l){b(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new ol(p,t,o,l)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ec(e).Wt({index:"userMutationsIndex",range:o},(l,p,C)=>{t=!1,C.done()}).next(()=>t)}addMutationBatch(e,t,o,l){const p=Ic(e),C=ec(e);return C.add({}).next(x=>{b("number"==typeof x);const j=new Rh(x,t,o,l),H=function(Be,ht,_t){const en=_t.baseMutations.map(Ji=>au(Be.Jt,Ji)),Yn=_t.mutations.map(Ji=>au(Be.Jt,Ji));return{userId:ht,batchId:_t.batchId,localWriteTimeMs:_t.localWriteTime.toMillis(),baseMutations:en,mutations:Yn}}(this.M,this.userId,j),re=[];let me=new bt((Be,ht)=>vn(Be.canonicalString(),ht.canonicalString()));for(const Be of l){const ht=cn(this.userId,Be.key.path,x);me=me.add(Be.key.path.popLast()),re.push(C.put(H)),re.push(p.put(ht,Li))}return me.forEach(Be=>{re.push(this.indexManager.addToCollectionParentIndex(e,Be))}),e.addOnCommittedListener(()=>{this.hn[x]=j.keys()}),nt.waitFor(re).next(()=>j)})}lookupMutationBatch(e,t){return ec(e).get(t).next(o=>o?(b(o.userId===this.userId),Dl(this.M,o)):null)}ln(e,t){return this.hn[t]?nt.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const l=o.keys();return this.hn[t]=l,l}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,l=IDBKeyRange.lowerBound([this.userId,o]);let p=null;return ec(e).Wt({index:"userMutationsIndex",range:l},(C,x,j)=>{x.userId===this.userId&&(b(x.batchId>=o),p=Dl(this.M,x)),j.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return ec(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(l,p,C)=>{o=p.batchId,C.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ec(e).qt("userMutationsIndex",t).next(o=>o.map(l=>Dl(this.M,l)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=yn(this.userId,t.path),l=IDBKeyRange.lowerBound(o),p=[];return Ic(e).Wt({range:l},(C,x,j)=>{const[H,re,me]=C,Be=xt(re);if(H===this.userId&&t.path.isEqual(Be))return ec(e).get(me).next(ht=>{if(!ht)throw E();b(ht.userId===this.userId),p.push(Dl(this.M,ht))});j.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new bt(vn);const l=[];return t.forEach(p=>{const C=yn(this.userId,p.path),x=IDBKeyRange.lowerBound(C),j=Ic(e).Wt({range:x},(H,re,me)=>{const[Be,ht,_t]=H,en=xt(ht);Be===this.userId&&p.path.isEqual(en)?o=o.add(_t):me.done()});l.push(j)}),nt.waitFor(l).next(()=>this.fn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,l=o.length+1,p=yn(this.userId,o),C=IDBKeyRange.lowerBound(p);let x=new bt(vn);return Ic(e).Wt({range:C},(j,H,re)=>{const[me,Be,ht]=j,_t=xt(Be);me===this.userId&&o.isPrefixOf(_t)?_t.length===l&&(x=x.add(ht)):re.done()}).next(()=>this.fn(e,x))}fn(e,t){const o=[],l=[];return t.forEach(p=>{l.push(ec(e).get(p).next(C=>{if(null===C)throw E();b(C.userId===this.userId),o.push(Dl(this.M,C))}))}),nt.waitFor(l).next(()=>o)}removeMutationBatch(e,t){return Yg(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),nt.forEach(o,l=>this.referenceDelegate.markPotentiallyOrphaned(e,l))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return nt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),l=[];return Ic(e).Wt({range:o},(p,C,x)=>{if(p[0]===this.userId){const j=xt(p[1]);l.push(j)}else x.done()}).next(()=>{b(0===l.length)})})}containsKey(e,t){return Vh(e,this.userId,t)}_n(e){return Ty(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Vh(i,e,t){const o=yn(e,t.path),l=o[1],p=IDBKeyRange.lowerBound(o);let C=!1;return Ic(i).Wt({range:p,jt:!0},(x,j,H)=>{const[re,me,Be]=x;re===e&&me===l&&(C=!0),H.done()}).next(()=>C)}function ec(i){return Ys(i,"mutations")}function Ic(i){return Ys(i,"documentMutations")}function Ty(i){return Ys(i,"mutationQueues")}class xc{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new xc(0)}static gn(){return new xc(-1)}}class kv{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const o=new xc(t.highestTargetId);return t.highestTargetId=o.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>rn.fromTimestamp(new Vr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.yn(e).next(l=>(l.highestListenSequenceNumber=t,o&&(l.lastRemoteSnapshotVersion=o.toTimestamp()),t>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=t),this.pn(e,l)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(o=>(o.targetCount+=1,this.Tn(t,o),this.pn(e,o))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>tc(e).delete(t.targetId)).next(()=>this.yn(e)).next(o=>(b(o.targetCount>0),o.targetCount-=1,this.pn(e,o)))}removeTargets(e,t,o){let l=0;const p=[];return tc(e).Wt((C,x)=>{const j=Fd(x);j.sequenceNumber<=t&&null===o.get(j.targetId)&&(l++,p.push(this.removeTargetData(e,j)))}).next(()=>nt.waitFor(p)).next(()=>l)}forEachTarget(e,t){return tc(e).Wt((o,l)=>{const p=Fd(l);t(p)})}yn(e){return Vd(e).get("targetGlobalKey").next(t=>(b(null!==t),t))}pn(e,t){return Vd(e).put("targetGlobalKey",t)}In(e,t){return tc(e).put(Qf(this.M,t))}Tn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=ci(t),l=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let p=null;return tc(e).Wt({range:l,index:"queryTargetsIndex"},(C,x,j)=>{const H=Fd(x);Do(t,H.target)&&(p=H,j.done())}).next(()=>p)}addMatchingKeys(e,t,o){const l=[],p=Pl(e);return t.forEach(C=>{const x=Q(C.path);l.push(p.put({targetId:o,path:x})),l.push(this.referenceDelegate.addReference(e,o,C))}),nt.waitFor(l)}removeMatchingKeys(e,t,o){const l=Pl(e);return nt.forEach(t,p=>{const C=Q(p.path);return nt.waitFor([l.delete([o,C]),this.referenceDelegate.removeReference(e,o,p)])})}removeMatchingKeysForTargetId(e,t){const o=Pl(e),l=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(l)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),l=Pl(e);let p=zr();return l.Wt({range:o,jt:!0},(C,x,j)=>{const H=xt(C[1]),re=new Rt(H);p=p.add(re)}).next(()=>p)}containsKey(e,t){const o=Q(t.path),l=IDBKeyRange.bound([o],[yl(o)],!1,!0);let p=0;return Pl(e).Wt({index:"documentTargetsIndex",jt:!0,range:l},([C,x],j,H)=>{0!==C&&(p++,H.done())}).next(()=>p>0)}Et(e,t){return tc(e).get(t).next(o=>o?Fd(o):null)}}function tc(i){return Ys(i,"targets")}function Vd(i){return Ys(i,"targetGlobal")}function Pl(i){return Ys(i,"targetDocuments")}function nc(i){return Bd.apply(this,arguments)}function Bd(){return Bd=(0,Me.Z)(function*(i){if(i.code!==U.FAILED_PRECONDITION||i.message!==Th)throw i;yt("LocalStore","Unexpectedly lost primary lease")}),Bd.apply(this,arguments)}function Ay([i,e],[t,o]){const l=vn(i,t);return 0===l?vn(e,o):l}class Ry{constructor(e){this.En=e,this.buffer=new bt(Ay),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Ay(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ky{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const o=this.Pn?3e5:6e4;yt("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,Me.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(l){Pa(l)?yt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",l):yield nc(l)}yield t.vn(e)}))}}class Ny{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return nt.resolve(Ni.A);const o=new Ry(t);return this.Sn.forEachTarget(e,l=>o.bn(l.sequenceNumber)).next(()=>this.Sn.Cn(e,l=>o.bn(l))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Sn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(yt("LruGarbageCollector","Garbage collection skipped; disabled"),nt.resolve($a)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(yt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$a):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let o,l,p,C,x,j,H;const re=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(me=>(me>this.params.maximumSequenceNumbersToCollect?(yt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${me}`),l=this.params.maximumSequenceNumbersToCollect):l=me,C=Date.now(),this.nthSequenceNumber(e,l))).next(me=>(o=me,x=Date.now(),this.removeTargets(e,o,t))).next(me=>(p=me,j=Date.now(),this.removeOrphanedDocuments(e,o))).next(me=>(H=Date.now(),sa()<=je.in.DEBUG&&yt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-re}ms\n\tDetermined least recently used ${l} in `+(x-C)+`ms\n\tRemoved ${p} targets in `+(j-x)+`ms\n\tRemoved ${me} documents in `+(H-j)+`ms\nTotal Duration: ${H-re}ms`),nt.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:p,documentsRemoved:me})))}}class Fy{constructor(e,t){this.db=e,this.garbageCollector=new Ny(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(l=>o+l))}Nn(e){let t=0;return this.Cn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(o,l)=>t(l))}addReference(e,t,o){return jd(e,o)}removeReference(e,t,o){return jd(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return jd(e,t)}Mn(e,t){return function(o,l){let p=!1;return Ty(o).zt(C=>Vh(o,C,l).next(x=>(x&&(p=!0),nt.resolve(!x)))).next(()=>p)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let p=0;return this.kn(e,(C,x)=>{if(x<=t){const j=this.Mn(e,C).next(H=>{if(!H)return p++,o.getEntry(e,C).next(()=>(o.removeEntry(C,rn.min()),Pl(e).delete([0,Q(C.path)])))});l.push(j)}}).next(()=>nt.waitFor(l)).next(()=>o.apply(e)).next(()=>p)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return jd(e,t)}kn(e,t){const o=Pl(e);let l,p=Ni.A;return o.Wt({index:"documentTargetsIndex"},([C,x],{path:j,sequenceNumber:H})=>{0===C?(p!==Ni.A&&t(new Rt(xt(l)),p),p=H,l=j):p=Ni.A}).next(()=>{p!==Ni.A&&t(new Rt(xt(l)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jd(i,e){return Pl(i).put((o=i.currentSequenceNumber,{targetId:0,path:Q(e.path),sequenceNumber:o}));var o}class Ly{constructor(){this.changes=new vr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Se.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?nt.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Uy{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Dc(e).put(o)}removeEntry(e,t,o){return Dc(e).delete(function(l,p){const C=l.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],Gu(p),C[C.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.On(e,o)))}getEntry(e,t){let o=Se.newInvalidDocument(t);return Dc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only($d(t))},(l,p)=>{o=this.Fn(t,p)}).next(()=>o)}$n(e,t){let o={size:0,document:Se.newInvalidDocument(t)};return Dc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only($d(t))},(l,p)=>{o={document:this.Fn(t,p),size:Ku(p)}}).next(()=>o)}getEntries(e,t){let o=on();return this.Bn(e,t,(l,p)=>{const C=this.Fn(l,p);o=o.insert(l,C)}).next(()=>o)}Ln(e,t){let o=on(),l=new sn(Rt.comparator);return this.Bn(e,t,(p,C)=>{const x=this.Fn(p,C);o=o.insert(p,x),l=l.insert(p,Ku(C))}).next(()=>({documents:o,Un:l}))}Bn(e,t,o){if(t.isEmpty())return nt.resolve();let l=new bt(Vy);t.forEach(j=>l=l.add(j));const p=IDBKeyRange.bound($d(l.first()),$d(l.last())),C=l.getIterator();let x=C.getNext();return Dc(e).Wt({index:"documentKeyIndex",range:p},(j,H,re)=>{const me=Rt.fromSegments([...H.prefixPath,H.collectionGroup,H.documentId]);for(;x&&Vy(x,me)<0;)o(x,null),x=C.getNext();x&&x.isEqual(me)&&(o(x,H),x=C.hasNext()?C.getNext():null),x?re.Ut($d(x)):re.done()}).next(()=>{for(;x;)o(x,null),x=C.hasNext()?C.getNext():null})}getAllFromCollection(e,t,o){const l=[t.popLast().toArray(),t.lastSegment(),Gu(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],p=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Dc(e).qt(IDBKeyRange.bound(l,p,!0)).next(C=>{let x=on();for(const j of C){const H=this.Fn(Rt.fromSegments(j.prefixPath.concat(j.collectionGroup,j.documentId)),j);x=x.insert(H.key,H)}return x})}getAllFromCollectionGroup(e,t,o,l){let p=on();const C=Bh(t,o),x=Bh(t,Sn.max());return Dc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,x,!0)},(j,H,re)=>{const me=this.Fn(Rt.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);p=p.insert(me.key,me),p.size===l&&re.done()}).next(()=>p)}newChangeBuffer(e){return new Nv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return sp(e).get("remoteDocumentGlobalKey").next(t=>(b(!!t),t))}On(e,t){return sp(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const o=function Nh(i,e){let t;if(e.document)t=Us(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Rt.fromSegments(e.noDocument.path),l=Xl(e.noDocument.readTime);t=Se.newNoDocument(o,l),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return E();{const o=Rt.fromSegments(e.unknownDocument.path),l=Xl(e.unknownDocument.version);t=Se.newUnknownDocument(o,l)}}return e.readTime&&t.setReadTime(function(o){const l=new Vr(o[0],o[1]);return rn.fromTimestamp(l)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(rn.min()))return o}return Se.newInvalidDocument(e)}}class Nv extends Ly{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new vr(o=>o.toString(),(o,l)=>o.isEqual(l))}applyChanges(e){const t=[];let o=0,l=new bt((p,C)=>vn(p.canonicalString(),C.canonicalString()));return this.changes.forEach((p,C)=>{const x=this.Gn.get(p);if(t.push(this.qn.removeEntry(e,p,x.readTime)),C.isValidDocument()){const j=Zf(this.qn.M,C);l=l.add(p.path.popLast()),o+=Ku(j)-x.size,t.push(this.qn.addEntry(e,p,j))}else if(o-=x.size,this.trackRemovals){const j=Zf(this.qn.M,C.convertToNoDocument(rn.min()));t.push(this.qn.addEntry(e,p,j))}}),l.forEach(p=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,p))}),t.push(this.qn.updateMetadata(e,o)),nt.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:o,Un:l})=>(l.forEach((p,C)=>{this.Gn.set(p,{size:C,readTime:o.get(p).readTime})}),o))}}function sp(i){return Ys(i,"remoteDocumentGlobal")}function Dc(i){return Ys(i,"remoteDocumentsV14")}function $d(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Bh(i,e){const t=e.documentKey.path.toArray();return[i,Gu(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Vy(i,e){const t=i.path.length-e.path.length;return 0!==t?t:Rt.comparator(i,e)}class Fv{constructor(e){this.M=e}kt(e,t,o,l){const p=new Ah("createOrUpgrade",t);var x;o<1&&l>=1&&(e.createObjectStore("owner"),(x=e).createObjectStore("mutationQueues",{keyPath:"userId"}),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Jt,{unique:!0}),x.createObjectStore("documentMutations"),By(e),function(x){x.createObjectStore("remoteDocuments")}(e));let C=nt.resolve();return o<3&&l>=3&&(0!==o&&(function(x){x.deleteObjectStore("targetDocuments"),x.deleteObjectStore("targets"),x.deleteObjectStore("targetGlobal")}(e),By(e)),C=C.next(()=>function(x){const j=x.store("targetGlobal"),H={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:rn.min().toTimestamp(),targetCount:0};return j.put("targetGlobalKey",H)}(p))),o<4&&l>=4&&(0!==o&&(C=C.next(()=>function(x,j){return j.store("mutations").qt().next(H=>{x.deleteObjectStore("mutations"),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Jt,{unique:!0});const re=j.store("mutations"),me=H.map(Be=>re.put(Be));return nt.waitFor(me)})}(e,p))),C=C.next(()=>{!function(x){x.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&l>=5&&(C=C.next(()=>this.Kn(p))),o<6&&l>=6&&(C=C.next(()=>(function(x){x.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(p)))),o<7&&l>=7&&(C=C.next(()=>this.jn(p))),o<8&&l>=8&&(C=C.next(()=>this.Wn(e,p))),o<9&&l>=9&&(C=C.next(()=>{!function(x){x.objectStoreNames.contains("remoteDocumentChanges")&&x.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&l>=10&&(C=C.next(()=>this.zn(p))),o<11&&l>=11&&(C=C.next(()=>{(function(x){x.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(x){x.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&l>=12&&(C=C.next(()=>{!function(x){const j=x.createObjectStore("documentOverlays",{keyPath:Kf});j.createIndex("collectionPathOverlayIndex",Rd,{unique:!1}),j.createIndex("collectionGroupOverlayIndex",qf,{unique:!1})}(e)})),o<13&&l>=13&&(C=C.next(()=>function(x){const j=x.createObjectStore("remoteDocumentsV14",{keyPath:ca});j.createIndex("documentKeyIndex",cu),j.createIndex("collectionGroupIndex",Bu)}(e)).next(()=>this.Hn(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&l>=14&&(C=C.next(()=>{!function(x){x.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),x.createObjectStore("indexState",{keyPath:ju}).createIndex("sequenceNumberIndex",Td,{unique:!1}),x.createObjectStore("indexEntries",{keyPath:Ad}).createIndex("documentKeyIndex",$u,{unique:!1})}(e)})),C}Qn(e){let t=0;return e.store("remoteDocuments").Wt((o,l)=>{t+=Ku(l)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Kn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(l=>nt.forEach(l,p=>{const C=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",C).next(x=>nt.forEach(x,j=>{b(j.userId===p.userId);const H=Dl(this.M,j);return Yg(e,p.userId,H).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(l=>{const p=[];return o.Wt((C,x)=>{const j=new nr(C),H=[0,Q(j)];p.push(t.get(H).next(re=>re?nt.resolve():t.put({targetId:0,path:Q(j),sequenceNumber:l.highestListenSequenceNumber})))}).next(()=>nt.waitFor(p))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:xl});const o=t.store("collectionParents"),l=new rp,p=C=>{if(l.add(C)){const x=C.lastSegment(),j=C.popLast();return o.put({collectionId:x,parent:Q(j)})}};return t.store("remoteDocuments").Wt({jt:!0},(C,x)=>{const j=new nr(C);return p(j.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([C,x,j],H)=>{const re=xt(x);return p(re.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((o,l)=>{const p=Fd(l),C=Qf(this.M,p);return t.put(C)})}Hn(e,t){const o=t.store("remoteDocuments"),l=[];return o.Wt((p,C)=>{const x=t.store("remoteDocumentsV14"),j=(H=C,H.document?new Rt(nr.fromString(H.document.name).popFirst(5)):H.noDocument?Rt.fromSegments(H.noDocument.path):H.unknownDocument?Rt.fromSegments(H.unknownDocument.path):E()).path.toArray();var H;const re={prefixPath:j.slice(0,j.length-2),collectionGroup:j[j.length-2],documentId:j[j.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};l.push(x.put(re))}).next(()=>nt.waitFor(l))}}function By(i){i.createObjectStore("targetDocuments",{keyPath:Sd}).createIndex("documentTargetsIndex",Wf,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uu,{unique:!0}),i.createObjectStore("targetGlobal")}const Zg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qg{constructor(e,t,o,l,p,C,x,j,H,re,me=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Jn=p,this.window=C,this.document=x,this.Yn=H,this.Xn=re,this.Zn=me,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=Be=>Promise.resolve(),!Qg.vt())throw new W(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Fy(this,l),this.cs=t+"main",this.M=new Nd(j),this.hs=new il(this.cs,this.Zn,new Fv(this.M)),this.ls=new kv(this.referenceDelegate,this.M),this.fs=new Uy(this.M),this.ds=new tp,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===re&&Ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new W(U.FAILED_PRECONDITION,Zg);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new Ni(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var o=(0,Me.Z)(function*(l){if(t.started)return e(l)});return function(l){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,Me.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,Me.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>op(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Pa(e))return yt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return yt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return jh(e).get("owner").next(t=>nt.resolve(this.bs(t)))}Ps(e){return op(e).delete(this.clientId)}Vs(){var e=this;return(0,Me.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const l=Ys(o,"clientMetadata");return l.qt().next(p=>{const C=e.Ss(p,18e5),x=p.filter(j=>-1===C.indexOf(j));return nt.forEach(x,j=>l.delete(j.clientId)).next(()=>x)})}).catch(()=>[]);if(e._s)for(const o of t)e._s.removeItem(e.Ds(o.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?nt.resolve(!0):jh(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new W(U.FAILED_PRECONDITION,Zg);return!1}}return!(!this.networkEnabled||!this.inForeground)||op(e).qt().next(o=>void 0===this.Ss(o,5e3).find(l=>{if(this.clientId!==l.clientId){const C=!this.inForeground&&l.inForeground,x=this.networkEnabled===l.networkEnabled;if(!this.networkEnabled&&l.networkEnabled||C&&x)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&yt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Me.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new Hg(t,Ni.A);return e.As(o).next(()=>e.Ps(o))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(o=>this.vs(o.updateTimeMs,t)&&!this.Cs(o.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>op(e).qt().next(t=>this.Ss(t,18e5).map(o=>o.clientId)))}get started(){return this.es}getMutationQueue(e,t){return ol.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new Jn(e)}getDocumentOverlayCache(e){return Fh.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,o){yt("IndexedDbPersistence","Starting transaction:",e);const l="readonly"===t?"readonly":"readwrite",p=14===(C=this.Zn)?Bg:13===C?Vg:12===C?Iy:11===C?Ug:void E();var C;let x;return this.hs.runTransaction(e,l,p,j=>(x=new Hg(j,this.ts?this.ts.next():Ni.A),"readwrite-primary"===t?this.Ts(x).next(H=>!!H||this.Es(x)).next(H=>{if(!H)throw Ir(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new W(U.FAILED_PRECONDITION,Th);return o(x)}).next(H=>this.Rs(x).next(()=>H)):this.Fs(x).next(()=>o(x)))).then(j=>(x.raiseOnCommittedEvent(),j))}Fs(e){return jh(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new W(U.FAILED_PRECONDITION,Zg)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jh(e).put("owner",t)}static vt(){return il.vt()}As(e){const t=jh(e);return t.get("owner").next(o=>this.bs(o)?(yt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):nt.resolve())}vs(e,t){const o=Date.now();return!(e<o-t||e>o&&(Ir(`Detected an update time that is in the future: ${e} > ${o}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,Re.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const o=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return yt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Ir("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){Ir("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function jh(i){return Ys(i,"owner")}function op(i){return Ys(i,"clientMetadata")}function Jg(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Lv{constructor(e,t,o){this.fs=e,this.$s=t,this.indexManager=o}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Ls(e,t,o))}Ls(e,t,o){return this.fs.getEntry(e,t).next(l=>{for(const p of o)p.applyToLocalView(l);return l})}Us(e,t){e.forEach((o,l)=>{for(const p of t)p.applyToLocalView(l)})}qs(e,t){return this.fs.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.Us(t,o))}Ks(e,t,o){return Rt.isDocumentKey((l=t).path)&&null===l.collectionGroup&&0===l.filters.length?this.Qs(e,t.path):$l(t)?this.js(e,t,o):this.Ws(e,t,o);var l}Qs(e,t){return this.Bs(e,new Rt(t)).next(o=>{let l=vi();return o.isFoundDocument()&&(l=l.insert(o.key,o)),l})}js(e,t,o){const l=t.collectionGroup;let p=vi();return this.indexManager.getCollectionParents(e,l).next(C=>nt.forEach(C,x=>{const j=(H=t,re=x.child(l),new zo(re,null,H.explicitOrderBy.slice(),H.filters.slice(),H.limit,H.limitType,H.startAt,H.endAt));var H,re;return this.Ws(e,j,o).next(H=>{H.forEach((re,me)=>{p=p.insert(re,me)})})}).next(()=>p))}Ws(e,t,o){let l;return this.fs.getAllFromCollection(e,t.path,o).next(p=>(l=p,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(p=>{for(const C of p)for(const x of C.mutations){const j=x.key;let H=l.get(j);null==H&&(H=Se.newInvalidDocument(j),l=l.insert(j,H)),vo(x,H,C.localWriteTime),H.isFoundDocument()||(l=l.remove(j))}}).next(()=>(l.forEach((p,C)=>{_c(t,C)||(l=l.remove(p))}),l))}}class Xg{constructor(e,t,o,l){this.targetId=e,this.fromCache=t,this.zs=o,this.Hs=l}static Js(e,t){let o=zr(),l=zr();for(const p of t.docChanges)switch(p.type){case 0:o=o.add(p.doc.key);break;case 1:l=l.add(p.doc.key)}return new Xg(e,t.fromCache,o,l)}}class rc{Ys(e){this.Xs=e}Ks(e,t,o,l){return 0===(p=t).filters.length&&null===p.limit&&null==p.startAt&&null==p.endAt&&(0===p.explicitOrderBy.length||1===p.explicitOrderBy.length&&p.explicitOrderBy[0].field.isKeyField())||o.isEqual(rn.min())?this.Zs(e,t):this.Xs.qs(e,l).next(p=>{const C=this.ti(t,p);return(mc(t)||yc(t))&&this.ei(t.limitType,C,l,o)?this.Zs(e,t):(sa()<=je.in.DEBUG&&yt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Wl(t)),this.Xs.Ks(e,t,Pn(o,-1)).next(x=>(C.forEach(j=>{x=x.insert(j.key,j)}),x)))});var p}ti(e,t){let o=new bt(Xc(e));return t.forEach((l,p)=>{_c(e,p)&&(o=o.add(p))}),o}ei(e,t,o,l){if(o.size!==t.size)return!0;const p="F"===e?t.last():t.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(l)>0)}Zs(e,t){return sa()<=je.in.DEBUG&&yt("QueryEngine","Using full collection scan to execute query:",Wl(t)),this.Xs.Ks(e,t,Sn.min())}}class ap{constructor(e,t,o,l){this.persistence=e,this.ni=t,this.M=l,this.si=new sn(vn),this.ii=new vr(p=>ci(p),Do),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(o)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new Lv(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function em(i,e,t,o){return new ap(i,e,t,o)}function lp(i,e){return zd.apply(this,arguments)}function zd(){return zd=(0,Me.Z)(function*(i,e){const t=N(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let l;return t.$s.getAllMutationBatches(o).next(p=>(l=p,t.ui(e),t.$s.getAllMutationBatches(o))).next(p=>{const C=[],x=[];let j=zr();for(const H of l){C.push(H.batchId);for(const re of H.mutations)j=j.add(re.key)}for(const H of p){x.push(H.batchId);for(const re of H.mutations)j=j.add(re.key)}return t.ai.qs(o,j).next(H=>({ci:H,removedBatchIds:C,addedBatchIds:x}))})})}),zd.apply(this,arguments)}function tm(i,e){const t=N(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const l=e.batch.keys(),p=t.oi.newChangeBuffer({trackRemovals:!0});return function(C,x,j,H){const re=j.batch,me=re.keys();let Be=nt.resolve();return me.forEach(ht=>{Be=Be.next(()=>H.getEntry(x,ht)).next(_t=>{const en=j.docVersions.get(ht);b(null!==en),_t.version.compareTo(en)<0&&(re.applyToRemoteDocument(_t,j),_t.isValidDocument()&&(_t.setReadTime(j.commitVersion),H.addEntry(_t)))})}),Be.next(()=>C.$s.removeMutationBatch(x,re))}(t,o,e,p).next(()=>p.apply(o)).next(()=>t.$s.performConsistencyCheck(o)).next(()=>t.ai.qs(o,l))})}function $h(i){const e=N(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function jy(i,e){const t=N(i),o=e.snapshotVersion;let l=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const C=t.oi.newChangeBuffer({trackRemovals:!0});l=t.si;const x=[];e.targetChanges.forEach((H,re)=>{const me=l.get(re);if(!me)return;x.push(t.ls.removeMatchingKeys(p,H.removedDocuments,re).next(()=>t.ls.addMatchingKeys(p,H.addedDocuments,re)));let Be=me.withSequenceNumber(p.currentSequenceNumber);var ht,_t,en;e.targetMismatches.has(re)?Be=Be.withResumeToken($r.EMPTY_BYTE_STRING,rn.min()).withLastLimboFreeSnapshotVersion(rn.min()):H.resumeToken.approximateByteSize()>0&&(Be=Be.withResumeToken(H.resumeToken,o)),l=l.insert(re,Be),_t=Be,en=H,(0===(ht=me).resumeToken.approximateByteSize()||_t.snapshotVersion.toMicroseconds()-ht.snapshotVersion.toMicroseconds()>=3e8||en.addedDocuments.size+en.modifiedDocuments.size+en.removedDocuments.size>0)&&x.push(t.ls.updateTargetData(p,Be))});let j=on();if(e.documentUpdates.forEach(H=>{e.resolvedLimboDocuments.has(H)&&x.push(t.persistence.referenceDelegate.updateLimboDocument(p,H))}),x.push(ic(p,C,e.documentUpdates).next(H=>{j=H})),!o.isEqual(rn.min())){const H=t.ls.getLastRemoteSnapshotVersion(p).next(re=>t.ls.setTargetsMetadata(p,p.currentSequenceNumber,o));x.push(H)}return nt.waitFor(x).next(()=>C.apply(p)).next(()=>t.ai.Gs(p,j)).next(()=>j)}).then(p=>(t.si=l,p))}function ic(i,e,t){let o=zr();return t.forEach(l=>o=o.add(l)),e.getEntries(i,o).next(l=>{let p=on();return t.forEach((C,x)=>{const j=l.get(C);x.isNoDocument()&&x.version.isEqual(rn.min())?(e.removeEntry(C,x.readTime),p=p.insert(C,x)):!j.isValidDocument()||x.version.compareTo(j.version)>0||0===x.version.compareTo(j.version)&&j.hasPendingWrites?(e.addEntry(x),p=p.insert(C,x)):yt("LocalStore","Ignoring outdated watch update for ",C,". Current version:",j.version," Watch version:",x.version)}),p})}function nm(i,e){const t=N(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(o,e)))}function qu(i,e){const t=N(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let l;return t.ls.getTargetData(o,e).next(p=>p?(l=p,nt.resolve(l)):t.ls.allocateTargetId(o).next(C=>(l=new Jl(e,C,0,o.currentSequenceNumber),t.ls.addTargetData(o,l).next(()=>l))))}).then(o=>{const l=t.si.get(o.targetId);return(null===l||o.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.si=t.si.insert(o.targetId,o),t.ii.set(e,o.targetId)),o})}function Pc(i,e,t){return cp.apply(this,arguments)}function cp(){return cp=(0,Me.Z)(function*(i,e,t){const o=N(i),l=o.si.get(e),p=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",p,C=>o.persistence.referenceDelegate.removeTarget(C,l)))}catch(C){if(!Pa(C))throw C;yt("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}o.si=o.si.remove(e),o.ii.delete(l.target)}),cp.apply(this,arguments)}function Hd(i,e,t){const o=N(i);let l=rn.min(),p=zr();return o.persistence.runTransaction("Execute query","readonly",C=>function(x,j,H){const re=N(x),me=re.ii.get(H);return void 0!==me?nt.resolve(re.si.get(me)):re.ls.getTargetData(j,H)}(o,C,_o(e)).next(x=>{if(x)return l=x.lastLimboFreeSnapshotVersion,o.ls.getMatchingKeysForTargetId(C,x.targetId).next(j=>{p=j})}).next(()=>o.ni.Ks(C,e,t?l:rn.min(),t?p:zr())).next(x=>(Yu(o,Jc(e),x),{documents:x,hi:p})))}function rm(i,e){const t=N(i),o=N(t.ls),l=t.si.get(e);return l?Promise.resolve(l.target):t.persistence.runTransaction("Get target data","readonly",p=>o.Et(p,e).next(C=>C?C.target:null))}function im(i,e){const t=N(i),o=t.ri.get(e)||rn.min();return t.persistence.runTransaction("Get new document changes","readonly",l=>t.oi.getAllFromCollectionGroup(l,e,Pn(o,-1),Number.MAX_SAFE_INTEGER)).then(l=>(Yu(t,e,l),l))}function Yu(i,e,t){let o=rn.min();t.forEach((l,p)=>{p.readTime.compareTo(o)>0&&(o=p.readTime)}),i.ri.set(e,o)}function Gd(){return Gd=(0,Me.Z)(function*(i,e,t,o){const l=N(i);let p=zr(),C=on();for(const H of t){const re=e.li(H.metadata.name);H.document&&(p=p.add(re));const me=e.fi(H);me.setReadTime(e.di(H.metadata.readTime)),C=C.insert(re,me)}const x=l.oi.newChangeBuffer({trackRemovals:!0}),j=yield qu(l,(H=o,_o(Cl(nr.fromString(`__bundle__/docs/${H}`)))));var H;return l.persistence.runTransaction("Apply bundle documents","readwrite",H=>ic(H,x,C).next(re=>(x.apply(H),re)).next(re=>l.ls.removeMatchingKeysForTargetId(H,j.targetId).next(()=>l.ls.addMatchingKeys(H,p,j.targetId)).next(()=>l.ai.Gs(H,re)).next(()=>re)))}),Gd.apply(this,arguments)}function Qu(i,e){return pu.apply(this,arguments)}function pu(){return pu=(0,Me.Z)(function*(i,e,t=zr()){const o=yield qu(i,_o(Jf(e.bundledQuery))),l=N(i);return l.persistence.runTransaction("Save named query","readwrite",p=>{const C=ls(e.readTime);if(o.snapshotVersion.compareTo(C)>=0)return l.ds.saveNamedQuery(p,e);const x=o.withResumeToken($r.EMPTY_BYTE_STRING,C);return l.si=l.si.insert(x.targetId,x),l.ls.updateTargetData(p,x).next(()=>l.ls.removeMatchingKeysForTargetId(p,o.targetId)).next(()=>l.ls.addMatchingKeys(p,t,o.targetId)).next(()=>l.ds.saveNamedQuery(p,e))})}),pu.apply(this,arguments)}class Ju{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return nt.resolve(this._i.get(t))}saveBundleMetadata(e,t){var o;return this._i.set(t.id,{id:(o=t).id,version:o.version,createTime:ls(o.createTime)}),nt.resolve()}getNamedQuery(e,t){return nt.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(o=t).name,query:Jf(o.bundledQuery),readTime:ls(o.readTime)}),nt.resolve();var o}}class $y{constructor(){this.overlays=new sn(Rt.comparator),this.mi=new Map}getOverlay(e,t){return nt.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((l,p)=>{this.Xt(e,t,p)}),nt.resolve()}removeOverlaysForBatchId(e,t,o){const l=this.mi.get(o);return void 0!==l&&(l.forEach(p=>this.overlays=this.overlays.remove(p)),this.mi.delete(o)),nt.resolve()}getOverlaysForCollection(e,t,o){const l=Ls(),p=t.length+1,C=new Rt(t.child("")),x=this.overlays.getIteratorFrom(C);for(;x.hasNext();){const j=x.getNext().value,H=j.getKey();if(!t.isPrefixOf(H.path))break;H.path.length===p&&j.largestBatchId>o&&l.set(j.getKey(),j)}return nt.resolve(l)}getOverlaysForCollectionGroup(e,t,o,l){let p=new sn((H,re)=>H-re);const C=this.overlays.getIterator();for(;C.hasNext();){const H=C.getNext().value;if(H.getKey().getCollectionGroup()===t&&H.largestBatchId>o){let re=p.get(H.largestBatchId);null===re&&(re=Ls(),p=p.insert(H.largestBatchId,re)),re.set(H.getKey(),H)}}const x=Ls(),j=p.getIterator();for(;j.hasNext()&&(j.getNext().value.forEach((H,re)=>x.set(H,re)),!(x.size()>=l)););return nt.resolve(x)}Xt(e,t,o){if(null===o)return;const l=this.overlays.get(o.key);if(null!==l){const C=this.mi.get(l.largestBatchId).delete(o.key);this.mi.set(l.largestBatchId,C)}this.overlays=this.overlays.insert(o.key,new kd(t,o));let p=this.mi.get(t);void 0===p&&(p=zr(),this.mi.set(t,p)),this.mi.set(t,p.add(o.key))}}class zh{constructor(){this.gi=new bt(Zs.yi),this.pi=new bt(Zs.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const o=new Zs(e,t);this.gi=this.gi.add(o),this.pi=this.pi.add(o)}Ti(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Ei(new Zs(e,t))}Ai(e,t){e.forEach(o=>this.removeReference(o,t))}Ri(e){const t=new Rt(new nr([])),o=new Zs(t,e),l=new Zs(t,e+1),p=[];return this.pi.forEachInRange([o,l],C=>{this.Ei(C),p.push(C.key)}),p}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Rt(new nr([])),o=new Zs(t,e),l=new Zs(t,e+1);let p=zr();return this.pi.forEachInRange([o,l],C=>{p=p.add(C.key)}),p}containsKey(e){const t=new Zs(e,0),o=this.gi.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Zs{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Rt.comparator(e.key,t.key)||vn(e.Vi,t.Vi)}static Ii(e,t){return vn(e.Vi,t.Vi)||Rt.comparator(e.key,t.key)}}class up{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new bt(Zs.yi)}checkEmpty(e){return nt.resolve(0===this.$s.length)}addMutationBatch(e,t,o,l){const p=this.vi;this.vi++;const C=new Rh(p,t,o,l);this.$s.push(C);for(const x of l)this.Si=this.Si.add(new Zs(x.key,p)),this.indexManager.addToCollectionParentIndex(e,x.key.path.popLast());return nt.resolve(C)}lookupMutationBatch(e,t){return nt.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const l=this.Ci(t+1),p=l<0?0:l;return nt.resolve(this.$s.length>p?this.$s[p]:null)}getHighestUnacknowledgedBatchId(){return nt.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return nt.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Zs(t,0),l=new Zs(t,Number.POSITIVE_INFINITY),p=[];return this.Si.forEachInRange([o,l],C=>{const x=this.Di(C.Vi);p.push(x)}),nt.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new bt(vn);return t.forEach(l=>{const p=new Zs(l,0),C=new Zs(l,Number.POSITIVE_INFINITY);this.Si.forEachInRange([p,C],x=>{o=o.add(x.Vi)})}),nt.resolve(this.xi(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,l=o.length+1;let p=o;Rt.isDocumentKey(p)||(p=p.child(""));const C=new Zs(new Rt(p),0);let x=new bt(vn);return this.Si.forEachWhile(j=>{const H=j.key.path;return!!o.isPrefixOf(H)&&(H.length===l&&(x=x.add(j.Vi)),!0)},C),nt.resolve(this.xi(x))}xi(e){const t=[];return e.forEach(o=>{const l=this.Di(o);null!==l&&t.push(l)}),t}removeMutationBatch(e,t){b(0===this.Ni(t.batchId,"removed")),this.$s.shift();let o=this.Si;return nt.forEach(t.mutations,l=>{const p=new Zs(l.key,t.batchId);return o=o.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.Si=o})}dn(e){}containsKey(e,t){const o=new Zs(t,0),l=this.Si.firstAfterOrEqual(o);return nt.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return nt.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class dp{constructor(e){this.ki=e,this.docs=new sn(Rt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,l=this.docs.get(o),p=l?l.size:0,C=this.ki(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:C}),this.size+=C-p,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return nt.resolve(o?o.document.mutableCopy():Se.newInvalidDocument(t))}getEntries(e,t){let o=on();return t.forEach(l=>{const p=this.docs.get(l);o=o.insert(l,p?p.document.mutableCopy():Se.newInvalidDocument(l))}),nt.resolve(o)}getAllFromCollection(e,t,o){let l=on();const p=new Rt(t.child("")),C=this.docs.getIteratorFrom(p);for(;C.hasNext();){const{key:x,value:{document:j}}=C.getNext();if(!t.isPrefixOf(x.path))break;x.path.length>t.length+1||Oa(Es(j),o)<=0||(l=l.insert(j.key,j.mutableCopy()))}return nt.resolve(l)}getAllFromCollectionGroup(e,t,o,l){E()}Mi(e,t){return nt.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new sm(this)}getSize(e){return nt.resolve(this.size)}}class sm extends Ly{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((o,l)=>{l.isValidDocument()?t.push(this.qn.addEntry(e,l)):this.qn.removeEntry(o)}),nt.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class Hh{constructor(e){this.persistence=e,this.Oi=new vr(t=>ci(t),Do),this.lastRemoteSnapshotVersion=rn.min(),this.highestTargetId=0,this.Fi=0,this.$i=new zh,this.targetCount=0,this.Bi=xc.mn()}forEachTarget(e,t){return this.Oi.forEach((o,l)=>t(l)),nt.resolve()}getLastRemoteSnapshotVersion(e){return nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nt.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),nt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.Fi&&(this.Fi=t),nt.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new xc(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,nt.resolve()}updateTargetData(e,t){return this.In(t),nt.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,nt.resolve()}removeTargets(e,t,o){let l=0;const p=[];return this.Oi.forEach((C,x)=>{x.sequenceNumber<=t&&null===o.get(x.targetId)&&(this.Oi.delete(C),p.push(this.removeMatchingKeysForTargetId(e,x.targetId)),l++)}),nt.waitFor(p).next(()=>l)}getTargetCount(e){return nt.resolve(this.targetCount)}getTargetData(e,t){const o=this.Oi.get(t)||null;return nt.resolve(o)}addMatchingKeys(e,t,o){return this.$i.Ti(t,o),nt.resolve()}removeMatchingKeys(e,t,o){this.$i.Ai(t,o);const l=this.persistence.referenceDelegate,p=[];return l&&t.forEach(C=>{p.push(l.markPotentiallyOrphaned(e,C))}),nt.waitFor(p)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),nt.resolve()}getMatchingKeysForTargetId(e,t){const o=this.$i.Pi(t);return nt.resolve(o)}containsKey(e,t){return nt.resolve(this.$i.containsKey(t))}}class zy{constructor(e,t){this.Li={},this.overlays={},this.ts=new Ni(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new Hh(this),this.indexManager=new Sy,this.fs=new dp(o=>this.referenceDelegate.Ui(o)),this.M=new Nd(t),this.ds=new Ju(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $y,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Li[e.toKey()];return o||(o=new up(t,this.referenceDelegate),this.Li[e.toKey()]=o),o}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,o){yt("MemoryPersistence","Starting transaction:",e);const l=new om(this.ts.next());return this.referenceDelegate.qi(),o(l).next(p=>this.referenceDelegate.Gi(l).next(()=>p)).toPromise().then(p=>(l.raiseOnCommittedEvent(),p))}Ki(e,t){return nt.or(Object.values(this.Li).map(o=>()=>o.containsKey(e,t)))}}class om extends Yf{constructor(e){super(),this.currentSequenceNumber=e}}class am{constructor(e){this.persistence=e,this.Qi=new zh,this.ji=null}static Wi(e){return new am(e)}get zi(){if(this.ji)return this.ji;throw E()}addReference(e,t,o){return this.Qi.addReference(o,t),this.zi.delete(o.toString()),nt.resolve()}removeReference(e,t,o){return this.Qi.removeReference(o,t),this.zi.add(o.toString()),nt.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),nt.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(l=>this.zi.add(l.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(l=>{l.forEach(p=>this.zi.add(p.toString()))}).next(()=>o.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nt.forEach(this.zi,o=>{const l=Rt.fromPath(o);return this.Hi(e,l).next(p=>{p||t.removeEntry(l,rn.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(o=>{o?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return nt.or([()=>nt.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function hp(i,e){return`firestore_clients_${i}_${e}`}function fp(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function pp(i,e){return`firestore_targets_${i}_${e}`}class Wd{constructor(e,t,o,l){this.user=e,this.batchId=t,this.state=o,this.error=l}static Ji(e,t,o){const l=JSON.parse(o);let p,C="object"==typeof l&&-1!==["pending","acknowledged","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return C&&l.error&&(C="string"==typeof l.error.message&&"string"==typeof l.error.code,C&&(p=new W(l.error.code,l.error.message))),C?new Wd(e,t,l.state,p):(Ir("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kd{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Ji(e,t){const o=JSON.parse(t);let l,p="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return p&&o.error&&(p="string"==typeof o.error.message&&"string"==typeof o.error.code,p&&(l=new W(o.error.code,o.error.message))),p?new Kd(e,o.state,l):(Ir("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const o=JSON.parse(t);let l="object"==typeof o&&o.activeTargetIds instanceof Array,p=Ru();for(let C=0;l&&C<o.activeTargetIds.length;++C)l=oa(o.activeTargetIds[C]),p=p.add(o.activeTargetIds[C]);return l?new Gh(e,p):(Ir("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Wo{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Wo(t.clientId,t.onlineState):(Ir("SharedClientState",`Failed to parse online state: ${e}`),null)}}class gp{constructor(){this.activeTargetIds=Ru()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mp{constructor(e,t,o,l,p){this.window=e,this.Jn=t,this.persistenceKey=o,this.tr=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new sn(vn),this.started=!1,this.ir=[];const C=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=p,this.rr=hp(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new gp),this.ar=new RegExp(`^firestore_clients_${C}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${C}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${C}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(x){return`firestore_bundle_loaded_v2_${x}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Me.Z)(function*(){const t=yield e.syncEngine.Os();for(const l of t){if(l===e.tr)continue;const p=e.getItem(hp(e.persistenceKey,l));if(p){const C=Gh.Ji(l,p);C&&(e.sr=e.sr.insert(C.clientId,C))}}e._r();const o=e.storage.getItem(e.lr);if(o){const l=e.wr(o);l&&e.mr(l)}for(const l of e.ir)e.nr(l);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((o,l)=>{l.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,o){this.yr(e,t,o),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(pp(this.persistenceKey,e));if(o){const l=Kd.Ji(e,o);l&&(t=l.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pp(this.persistenceKey,e))}updateQueryState(e,t,o){this.Tr(e,t,o)}handleUserChange(e,t,o){t.forEach(l=>{this.pr(l)}),this.currentUser=e,o.forEach(l=>{this.addPendingMutation(l)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return yt("SharedClientState","READ",e,t),t}setItem(e,t){yt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){yt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(yt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.rr)return void Ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,Me.Z)(function*(){if(t.started){if(null!==o.key)if(t.ar.test(o.key)){if(null==o.newValue){const l=t.Rr(o.key);return t.br(l,null)}{const l=t.Pr(o.key,o.newValue);if(l)return t.br(l.clientId,l)}}else if(t.cr.test(o.key)){if(null!==o.newValue){const l=t.Vr(o.key,o.newValue);if(l)return t.vr(l)}}else if(t.hr.test(o.key)){if(null!==o.newValue){const l=t.Sr(o.key,o.newValue);if(l)return t.Dr(l)}}else if(o.key===t.lr){if(null!==o.newValue){const l=t.wr(o.newValue);if(l)return t.mr(l)}}else if(o.key===t.ur){const l=function(p){let C=Ni.A;if(null!=p)try{const x=JSON.parse(p);b("number"==typeof x),C=x}catch(x){Ir("SharedClientState","Failed to read sequence number from WebStorage",x)}return C}(o.newValue);l!==Ni.A&&t.sequenceNumberHandler(l)}else if(o.key===t.dr){const l=t.Cr(o.newValue);yield Promise.all(l.map(p=>t.syncEngine.Nr(p)))}}else t.ir.push(o)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,o){const l=new Wd(this.currentUser,e,t,o),p=fp(this.persistenceKey,this.currentUser,e);this.setItem(p,l.Yi())}pr(e){const t=fp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,o){const l=pp(this.persistenceKey,e),p=new Kd(e,t,o);this.setItem(l,p.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const o=this.Rr(e);return Gh.Ji(o,t)}Vr(e,t){const o=this.cr.exec(e),l=Number(o[1]);return Wd.Ji(new ji(void 0!==o[2]?o[2]:null),l,t)}Sr(e,t){const o=this.hr.exec(e),l=Number(o[1]);return Kd.Ji(l,t)}wr(e){return Wo.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,Me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);yt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const o=t?this.sr.insert(e,t):this.sr.remove(e),l=this.gr(this.sr),p=this.gr(o),C=[],x=[];return p.forEach(j=>{l.has(j)||C.push(j)}),l.forEach(j=>{p.has(j)||x.push(j)}),this.syncEngine.Or(C,x).then(()=>{this.sr=o})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Ru();return e.forEach((o,l)=>{t=t.unionWith(l.activeTargetIds)}),t}}class Hy{constructor(){this.Fr=new gp,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,o){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new gp,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Uv{Br(e){}shutdown(){}}class yp{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){yt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){yt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Vv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Gy{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class _p extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,o,l,p){const C=this.oo(e,t);yt("RestConnection","Sending: ",C,o);const x={};return this.uo(x,l,p),this.ao(e,C,x,o).then(j=>(yt("RestConnection","Received: ",j),j),j=>{throw mo("RestConnection",`${e} failed with error: `,j,"url: ",C,"request:",o),j})}co(e,t,o,l,p){return this.ro(e,t,o,l,p)}uo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+Uo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((l,p)=>e[p]=l),o&&o.headers.forEach((l,p)=>e[p]=l)}oo(e,t){return`${this.so}/v1/${t}:${Vv[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,o,l){return new Promise((p,C)=>{const x=new Ua;x.listenOnce(va.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case ro.NO_ERROR:const H=x.getResponseJson();yt("Connection","XHR received:",JSON.stringify(H)),p(H);break;case ro.TIMEOUT:yt("Connection",'RPC "'+e+'" timed out'),C(new W(U.DEADLINE_EXCEEDED,"Request time out"));break;case ro.HTTP_ERROR:const re=x.getStatus();if(yt("Connection",'RPC "'+e+'" failed with status:',re,"response text:",x.getResponseText()),re>0){const me=x.getResponseJson().error;if(me&&me.status&&me.message){const Be=function(ht){const _t=ht.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(_t)>=0?_t:U.UNKNOWN}(me.status);C(new W(Be,me.message))}else C(new W(U.UNKNOWN,"Server responded with status "+x.getStatus()))}else C(new W(U.UNAVAILABLE,"Connection failed."));break;default:E()}}finally{yt("Connection",'RPC "'+e+'" completed.')}});const j=JSON.stringify(l);x.send(t,"POST",j,o,15)})}ho(e,t,o){const l=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=Qi(),C=ia(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(x.xmlHttpFactory=new Fl({})),this.uo(x.initMessageHeaders,t,o),(0,Re.uI)()||(0,Re.b$)()||(0,Re.d)()||(0,Re.w1)()||(0,Re.Mn)()||(0,Re.ru)()||(x.httpHeadersOverwriteParam="$httpHeaders");const j=l.join("");yt("Connection","Creating WebChannel: "+j,x);const H=p.createWebChannel(j,x);let re=!1,me=!1;const Be=new Gy({jr:_t=>{me?yt("Connection","Not sending because WebChannel is closed:",_t):(re||(yt("Connection","Opening WebChannel transport."),H.open(),re=!0),yt("Connection","WebChannel sending:",_t),H.send(_t))},Wr:()=>H.close()}),ht=(_t,en,Yn)=>{_t.listen(en,Ji=>{try{Yn(Ji)}catch(br){setTimeout(()=>{throw br},0)}})};return ht(H,vs.EventType.OPEN,()=>{me||yt("Connection","WebChannel transport opened.")}),ht(H,vs.EventType.CLOSE,()=>{me||(me=!0,yt("Connection","WebChannel transport closed"),Be.eo())}),ht(H,vs.EventType.ERROR,_t=>{me||(me=!0,mo("Connection","WebChannel transport errored:",_t),Be.eo(new W(U.UNAVAILABLE,"The operation could not be completed")))}),ht(H,vs.EventType.MESSAGE,_t=>{var en;if(!me){const Yn=_t.data[0];b(!!Yn);const Ji=Yn,br=Ji.error||(null===(en=Ji[0])||void 0===en?void 0:en.error);if(br){yt("Connection","WebChannel received error:",br);const Bs=br.status;let di=function(Kr){const hl=We[Kr];if(void 0!==hl)return xn(hl)}(Bs),Di=br.message;void 0===di&&(di=U.INTERNAL,Di="Unknown error status: "+Bs+" with message "+br.message),me=!0,Be.eo(new W(di,Di)),H.close()}else yt("Connection","WebChannel received:",Yn),Be.no(Yn)}}),ht(C,ml.STAT_EVENT,_t=>{_t.stat===Or.PROXY?yt("Connection","Detected buffering proxy"):_t.stat===Or.NOPROXY&&yt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Be.Zr()},0),Be}}function vp(){return"undefined"!=typeof window?window:null}function Wh(){return"undefined"!=typeof document?document:null}function qd(i){return new su(i,!0)}class Cp{constructor(e,t,o=1e3,l=1.5,p=6e4){this.Jn=e,this.timerId=t,this.lo=o,this.fo=l,this._o=p,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),o=Math.max(0,Date.now()-this.yo),l=Math.max(0,t-o);l>0&&yt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,l,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class bp{constructor(e,t,o,l,p,C,x,j){this.Jn=e,this.Ao=o,this.Ro=l,this.bo=p,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=x,this.listener=j,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Cp(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Me.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,Me.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var o=this;return(0,Me.Z)(function*(){o.Fo(),o.$o(),o.So.cancel(),o.Po++,4!==e?o.So.reset():t&&t.code===U.RESOURCE_EXHAUSTED?(Ir(t.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),o.So.po()):t&&t.code===U.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Bo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,l])=>{this.Po===t&&this.Uo(o,l)},o=>{e(()=>{const l=new W(U.UNKNOWN,"Fetching auth token failed: "+o.message);return this.qo(l)})})}Uo(e,t){const o=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{o(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(l=>{o(()=>this.qo(l))}),this.stream.onMessage(l=>{o(()=>this.onMessage(l))})}xo(){var e=this;this.state=5,this.So.Io((0,Me.Z)(function*(){e.state=0,e.start()}))}qo(e){return yt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(yt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wy extends bp{constructor(e,t,o,l,p,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,l,C),this.M=p}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function xd(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(j=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===j?1:"REMOVE"===j?2:"CURRENT"===j?3:"RESET"===j?4:E(),l=e.targetChange.targetIds||[],p=function(j,H){return j.N?(b(void 0===H||"string"==typeof H),$r.fromBase64String(H||"")):(b(void 0===H||H instanceof Uint8Array),$r.fromUint8Array(H||new Uint8Array))}(i,e.targetChange.resumeToken),C=e.targetChange.cause,x=C&&function(j){const H=void 0===j.code?U.UNKNOWN:xn(j.code);return new W(H,j.message||"")}(C);t=new bc(o,l,p,x||null)}else if("documentChange"in e){const o=e.documentChange,l=ws(i,o.document.name),p=ls(o.document.updateTime),C=new ee({mapValue:{fields:o.document.fields}}),x=Se.newFoundDocument(l,p,C);t=new Ol(o.targetIds||[],o.removedTargetIds||[],x.key,x)}else if("documentDelete"in e){const o=e.documentDelete,l=ws(i,o.document),p=o.readTime?ls(o.readTime):rn.min(),C=Se.newNoDocument(l,p);t=new Ol([],o.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const o=e.documentRemove,l=ws(i,o.document);t=new Ol([],o.removedTargetIds||[],l,null)}else{if(!("filter"in e))return E();{const o=e.filter,p=new Ge(o.count||0);t=new Ks(o.targetId,p)}}var j;return t}(this.M,e),o=function(l){if(!("targetChange"in l))return rn.min();const p=l.targetChange;return p.targetIds&&p.targetIds.length?rn.min():p.readTime?ls(p.readTime):rn.min()}(e);return this.listener.Ko(t,o)}Qo(e){const t={};t.database=Ql(this.M),t.addTarget=function(l,p){let C;const x=p.target;return C=Xa(x)?{documents:Vu(l,x)}:{query:Dd(l,x)},C.targetId=p.targetId,p.resumeToken.approximateByteSize()>0?C.resumeToken=Ih(l,p.resumeToken):p.snapshotVersion.compareTo(rn.min())>0&&(C.readTime=Zl(l,p.snapshotVersion.toTimestamp())),C}(this.M,e);const o=function Pd(i,e){const t=function(o,l){switch(l){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return E()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Oo(t)}jo(e){const t={};t.database=Ql(this.M),t.removeTarget=e,this.Oo(t)}}class lm extends bp{constructor(e,t,o,l,p,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,l,C),this.M=p,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(b(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function lu(i,e){return i&&i.length>0?(b(void 0!==e),i.map(t=>function(o,l){let p=ls(o.updateTime?o.updateTime:l);return p.isEqual(rn.min())&&(p=ls(l)),new Ml(p,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=ls(e.commitTime);return this.listener.Jo(o,t)}return b(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Ql(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>au(this.M,o))};this.Oo(t)}}class Ky extends class{}{constructor(e,t,o,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=o,this.M=l,this.Zo=!1}tu(){if(this.Zo)throw new W(U.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,p])=>this.bo.ro(e,t,o,l,p)).catch(l=>{throw"FirebaseError"===l.name?(l.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new W(U.UNKNOWN,l.toString())})}co(e,t,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,p])=>this.bo.co(e,t,o,l,p)).catch(l=>{throw"FirebaseError"===l.name?(l.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new W(U.UNKNOWN,l.toString())})}terminate(){this.Zo=!0}}class qy{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Ir(t),this.su=!1):yt("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class cm{constructor(e,t,o,l,p){var C=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=p,this.du.Br(x=>{o.enqueueAndForget((0,Me.Z)(function*(){var j;Sc(C)&&(yt("RemoteStore","Restarting streams for network reachability change."),yield(j=(0,Me.Z)(function*(H){const re=N(H);re.lu.add(4),yield Ko(re),re._u.set("Unknown"),re.lu.delete(4),yield Xu(re)}),function(H){return j.apply(this,arguments)})(C))}))}),this._u=new qy(o,l)}}function Xu(i){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,Me.Z)(function*(i){if(Sc(i))for(const e of i.fu)yield e(!0)}),Ep.apply(this,arguments)}function Ko(i){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,Me.Z)(function*(i){for(const e of i.fu)yield e(!1)}),Yd.apply(this,arguments)}function Kh(i,e){const t=N(i);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),Op(t)?Mp(t):nd(t).Co()&&um(t,e))}function Zd(i,e){const t=N(i),o=nd(t);t.hu.delete(e),o.Co()&&wp(t,e),0===t.hu.size&&(o.Co()?o.ko():Sc(t)&&t._u.set("Unknown"))}function um(i,e){i.wu.Z(e.targetId),nd(i).Qo(e)}function wp(i,e){i.wu.Z(e),nd(i).jo(e)}function Mp(i){i.wu=new Ed({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.hu.get(e)||null}),nd(i).start(),i._u.iu()}function Op(i){return Sc(i)&&!nd(i).Do()&&i.hu.size>0}function Sc(i){return 0===N(i).lu.size}function qh(i){i.wu=void 0}function Yy(i){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,Me.Z)(function*(i){i.hu.forEach((e,t)=>{um(i,e)})}),Ip.apply(this,arguments)}function Yh(i,e){return Qd.apply(this,arguments)}function Qd(){return Qd=(0,Me.Z)(function*(i,e){qh(i),Op(i)?(i._u.uu(e),Mp(i)):i._u.set("Unknown")}),Qd.apply(this,arguments)}function Zy(i,e,t){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,Me.Z)(function*(i,e,t){if(i._u.set("Online"),e instanceof bc&&2===e.state&&e.cause)try{yield(o=(0,Me.Z)(function*(l,p){const C=p.cause;for(const x of p.targetIds)l.hu.has(x)&&(yield l.remoteSyncer.rejectListen(x,C),l.hu.delete(x),l.wu.removeTarget(x))}),function(l,p){return o.apply(this,arguments)})(i,e)}catch(o){yt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield ed(i,o)}else if(e instanceof Ol?i.wu.ut(e):e instanceof Ks?i.wu._t(e):i.wu.ht(e),!t.isEqual(rn.min()))try{const o=yield $h(i.localStore);t.compareTo(o)>=0&&(yield function(l,p){const C=l.wu.yt(p);return C.targetChanges.forEach((x,j)=>{if(x.resumeToken.approximateByteSize()>0){const H=l.hu.get(j);H&&l.hu.set(j,H.withResumeToken(x.resumeToken,p))}}),C.targetMismatches.forEach(x=>{const j=l.hu.get(x);if(!j)return;l.hu.set(x,j.withResumeToken($r.EMPTY_BYTE_STRING,j.snapshotVersion)),wp(l,x);const H=new Jl(j.target,x,1,j.sequenceNumber);um(l,H)}),l.remoteSyncer.applyRemoteEvent(C)}(i,t))}catch(o){yt("RemoteStore","Failed to raise snapshot:",o),yield ed(i,o)}var o}),Jd.apply(this,arguments)}function ed(i,e,t){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,Me.Z)(function*(i,e,t){if(!Pa(e))throw e;i.lu.add(1),yield Ko(i),i._u.set("Offline"),t||(t=()=>$h(i.localStore)),i.asyncQueue.enqueueRetryable((0,Me.Z)(function*(){yt("RemoteStore","Retrying IndexedDB access"),yield t(),i.lu.delete(1),yield Xu(i)}))}),Zh.apply(this,arguments)}function dm(i,e){return e().catch(t=>ed(i,t,e))}function td(i){return Xd.apply(this,arguments)}function Xd(){return Xd=(0,Me.Z)(function*(i){const e=N(i),t=Sl(e);let o=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;Bv(e);)try{const l=yield nm(e.localStore,o);if(null===l){0===e.cu.length&&t.ko();break}o=l.batchId,Qy(e,l)}catch(l){yield ed(e,l)}xp(e)&&Dp(e)}),Xd.apply(this,arguments)}function Bv(i){return Sc(i)&&i.cu.length<10}function Qy(i,e){i.cu.push(e);const t=Sl(i);t.Co()&&t.zo&&t.Ho(e.mutations)}function xp(i){return Sc(i)&&!Sl(i).Do()&&i.cu.length>0}function Dp(i){Sl(i).start()}function hm(i){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,Me.Z)(function*(i){Sl(i).Xo()}),Qh.apply(this,arguments)}function fm(i){return al.apply(this,arguments)}function al(){return al=(0,Me.Z)(function*(i){const e=Sl(i);for(const t of i.cu)e.Ho(t.mutations)}),al.apply(this,arguments)}function Jh(i,e,t){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,Me.Z)(function*(i,e,t){const o=i.cu.shift(),l=kh.from(o,e,t);yield dm(i,()=>i.remoteSyncer.applySuccessfulWrite(l)),yield td(i)}),Pp.apply(this,arguments)}function Jy(i,e){return pm.apply(this,arguments)}function pm(){return pm=(0,Me.Z)(function*(i,e){var t;e&&Sl(i).zo&&(yield(t=(0,Me.Z)(function*(o,l){if(Ut(p=l.code)&&p!==U.ABORTED){const C=o.cu.shift();Sl(o).No(),yield dm(o,()=>o.remoteSyncer.rejectFailedWrite(C.batchId,l)),yield td(o)}var p}),function(o,l){return t.apply(this,arguments)})(i,e)),xp(i)&&Dp(i)}),pm.apply(this,arguments)}function Xh(i,e){return ef.apply(this,arguments)}function ef(){return ef=(0,Me.Z)(function*(i,e){const t=N(i);t.asyncQueue.verifyOperationInProgress(),yt("RemoteStore","RemoteStore received new credentials");const o=Sc(t);t.lu.add(3),yield Ko(t),o&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Xu(t)}),ef.apply(this,arguments)}function eh(i,e){return gu.apply(this,arguments)}function gu(){return gu=(0,Me.Z)(function*(i,e){const t=N(i);e?(t.lu.delete(2),yield Xu(t)):e||(t.lu.add(2),yield Ko(t),t._u.set("Unknown"))}),gu.apply(this,arguments)}function nd(i){return i.mu||(i.mu=function(e,t,o){const l=N(e);return l.tu(),new Wy(t,l.bo,l.authCredentials,l.appCheckCredentials,l.M,o)}(i.datastore,i.asyncQueue,{zr:Yy.bind(null,i),Jr:Yh.bind(null,i),Ko:Zy.bind(null,i)}),i.fu.push(function(){var e=(0,Me.Z)(function*(t){t?(i.mu.No(),Op(i)?Mp(i):i._u.set("Unknown")):(yield i.mu.stop(),qh(i))});return function(t){return e.apply(this,arguments)}}())),i.mu}function Sl(i){return i.gu||(i.gu=function(e,t,o){const l=N(e);return l.tu(),new lm(t,l.bo,l.authCredentials,l.appCheckCredentials,l.M,o)}(i.datastore,i.asyncQueue,{zr:hm.bind(null,i),Jr:Jy.bind(null,i),Yo:fm.bind(null,i),Jo:Jh.bind(null,i)}),i.fu.push(function(){var e=(0,Me.Z)(function*(t){t?(i.gu.No(),yield td(i)):(yield i.gu.stop(),i.cu.length>0&&(yt("RemoteStore",`Stopping write stream with ${i.cu.length} pending writes`),i.cu=[]))});return function(t){return e.apply(this,arguments)}}())),i.gu}class tf{constructor(e,t,o,l,p){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=l,this.removalCallback=p,this.deferred=new ae,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,t,o,l,p){const C=Date.now()+o,x=new tf(e,t,C,l,p);return x.start(o),x}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new W(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mu(i,e){if(Ir("AsyncQueue",`${e}: ${i}`),Pa(i))return new W(U.UNAVAILABLE,`${e}: ${i}`);throw i}class yu{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Rt.comparator(t.key,o.key):(t,o)=>Rt.comparator(t.key,o.key),this.keyedMap=vi(),this.sortedSet=new sn(this.comparator)}static emptySet(e){return new yu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,p=o.getNext().key;if(!l.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new yu;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class gm{constructor(){this.yu=new sn(Rt.comparator)}track(e){const t=e.doc.key,o=this.yu.get(t);o?0!==e.type&&3===o.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==o.type?this.yu=this.yu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.yu=this.yu.remove(t):1===e.type&&2===o.type?this.yu=this.yu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):E():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Tc{constructor(e,t,o,l,p,C,x,j){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=l,this.mutatedKeys=p,this.fromCache=C,this.syncStateChanged=x,this.excludesMetadataChanges=j}static fromInitialDocuments(e,t,o,l){const p=[];return t.forEach(C=>{p.push({type:0,doc:C})}),new Tc(e,t,yu.emptySet(t),p,o,l,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==o[l].type||!t[l].doc.isEqual(o[l].doc))return!1;return!0}}class Xy{constructor(){this.Iu=void 0,this.listeners=[]}}class e_{constructor(){this.queries=new vr(e=>Gl(e),Hl),this.onlineState="Unknown",this.Tu=new Set}}function nf(i,e){return Ac.apply(this,arguments)}function Ac(){return Ac=(0,Me.Z)(function*(i,e){const t=N(i),o=e.query;let l=!1,p=t.queries.get(o);if(p||(l=!0,p=new Xy),l)try{p.Iu=yield t.onListen(o)}catch(C){const x=mu(C,`Initialization of query '${Wl(e.query)}' failed`);return void e.onError(x)}t.queries.set(o,p),p.listeners.push(e),e.Eu(t.onlineState),p.Iu&&e.Au(p.Iu)&&Tp(t)}),Ac.apply(this,arguments)}function rf(i,e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,Me.Z)(function*(i,e){const t=N(i),o=e.query;let l=!1;const p=t.queries.get(o);if(p){const C=p.listeners.indexOf(e);C>=0&&(p.listeners.splice(C,1),l=0===p.listeners.length)}if(l)return t.queries.delete(o),t.onUnlisten(o)}),Sp.apply(this,arguments)}function t_(i,e){const t=N(i);let o=!1;for(const l of e){const C=t.queries.get(l.query);if(C){for(const x of C.listeners)x.Au(l)&&(o=!0);C.Iu=l}}o&&Tp(t)}function rd(i,e,t){const o=N(i),l=o.queries.get(e);if(l)for(const p of l.listeners)p.onError(t);o.queries.delete(e)}function Tp(i){i.Tu.forEach(e=>{e.next()})}class Ap{constructor(e,t,o){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=o||{}}Au(e){if(!this.options.includeMetadataChanges){const o=[];for(const l of e.docChanges)3!==l.type&&o.push(l);e=new Tc(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Tc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class n_{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class mm{constructor(e){this.M=e}li(e){return ws(this.M,e)}fi(e){return e.metadata.exists?Us(this.M,e.document,!1):Se.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return ls(e)}}class ll{constructor(e,t,o){this.xu=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=sf(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=nr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,o=new mm(this.M);for(const l of e)if(l.metadata.queries){const p=o.li(l.metadata.name);for(const C of l.metadata.queries){const x=(t.get(C)||zr()).add(p);t.set(C,x)}}return t}complete(){var e=this;return(0,Me.Z)(function*(){const t=yield function Zu(i,e,t,o){return Gd.apply(this,arguments)}(e.localStore,new mm(e.M),e.documents,e.xu.id),o=e.ku(e.documents);for(const l of e.queries)yield Qu(e.localStore,l,o.get(l.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function sf(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Rp{constructor(e){this.key=e}}class kp{constructor(e){this.key=e}}class Np{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=zr(),this.mutatedKeys=zr(),this.Lu=Xc(e),this.Uu=new yu(this.Lu)}get qu(){return this.Fu}Gu(e,t){const o=t?t.Ku:new gm,l=t?t.Uu:this.Uu;let p=t?t.mutatedKeys:this.mutatedKeys,C=l,x=!1;const j=mc(this.query)&&l.size===this.query.limit?l.last():null,H=yc(this.query)&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((re,me)=>{const Be=l.get(re),ht=_c(this.query,me)?me:null,_t=!!Be&&this.mutatedKeys.has(Be.key),en=!!ht&&(ht.hasLocalMutations||this.mutatedKeys.has(ht.key)&&ht.hasCommittedMutations);let Yn=!1;Be&&ht?Be.data.isEqual(ht.data)?_t!==en&&(o.track({type:3,doc:ht}),Yn=!0):this.Qu(Be,ht)||(o.track({type:2,doc:ht}),Yn=!0,(j&&this.Lu(ht,j)>0||H&&this.Lu(ht,H)<0)&&(x=!0)):!Be&&ht?(o.track({type:0,doc:ht}),Yn=!0):Be&&!ht&&(o.track({type:1,doc:Be}),Yn=!0,(j||H)&&(x=!0)),Yn&&(ht?(C=C.add(ht),p=en?p.add(re):p.delete(re)):(C=C.delete(re),p=p.delete(re)))}),mc(this.query)||yc(this.query))for(;C.size>this.query.limit;){const re=mc(this.query)?C.last():C.first();C=C.delete(re.key),p=p.delete(re.key),o.track({type:1,doc:re})}return{Uu:C,Ku:o,ei:x,mutatedKeys:p}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const l=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const p=e.Ku.pu();p.sort((H,re)=>function(me,Be){const ht=_t=>{switch(_t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return E()}};return ht(me)-ht(Be)}(H.type,re.type)||this.Lu(H.doc,re.doc)),this.ju(o);const C=t?this.Wu():[],x=0===this.Bu.size&&this.current?1:0,j=x!==this.$u;return this.$u=x,0!==p.length||j?{snapshot:new Tc(this.query,e.Uu,l,p,e.mutatedKeys,0===x,j,!1),zu:C}:{zu:C}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new gm,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=zr(),this.Uu.forEach(o=>{this.Hu(o.key)&&(this.Bu=this.Bu.add(o.key))});const t=[];return e.forEach(o=>{this.Bu.has(o)||t.push(new kp(o))}),this.Bu.forEach(o=>{e.has(o)||t.push(new Rp(o))}),t}Ju(e){this.Fu=e.hi,this.Bu=zr();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Tc.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class ym{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class r_{constructor(e){this.key=e,this.Xu=!1}}class i_{constructor(e,t,o,l,p,C){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=l,this.currentUser=p,this.maxConcurrentLimboResolutions=C,this.Zu={},this.ta=new vr(x=>Gl(x),Hl),this.ea=new Map,this.na=new Set,this.sa=new sn(Rt.comparator),this.ia=new Map,this.ra=new zh,this.oa={},this.ua=new Map,this.aa=xc.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function s_(i,e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,Me.Z)(function*(i,e){const t=kc(i);let o,l;const p=t.ta.get(e);if(p)o=p.targetId,t.sharedClientState.addLocalQueryTarget(o),l=p.view.Yu();else{const C=yield qu(t.localStore,_o(e));t.isPrimaryClient&&Kh(t.remoteStore,C);const x=t.sharedClientState.addLocalQueryTarget(C.targetId);o=C.targetId,l=yield af(t,e,o,"current"===x)}return l}),Fp.apply(this,arguments)}function af(i,e,t,o){return _m.apply(this,arguments)}function _m(){return _m=(0,Me.Z)(function*(i,e,t,o){i.ha=(re,me,Be)=>{return(ht=(0,Me.Z)(function*(_t,en,Yn,Ji){let br=en.view.Gu(Yn);br.ei&&(br=yield Hd(_t.localStore,en.query,!1).then(({documents:Di})=>en.view.Gu(Di,br)));const Bs=Ji&&Ji.targetChanges.get(en.targetId),di=en.view.applyChanges(br,_t.isPrimaryClient,Bs);return rh(_t,en.targetId,di.zu),di.snapshot}),function(_t,en,Yn,Ji){return ht.apply(this,arguments)})(i,re,me,Be);var ht};const l=yield Hd(i.localStore,e,!0),p=new Np(e,l.hi),C=p.Gu(l.documents),x=Nu.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),j=p.applyChanges(C,i.isPrimaryClient,x);rh(i,t,j.zu);const H=new ym(e,t,p);return i.ta.set(e,H),i.ea.has(t)?i.ea.get(t).push(e):i.ea.set(t,[e]),j.snapshot}),_m.apply(this,arguments)}function vm(i,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,Me.Z)(function*(i,e){const t=N(i),o=t.ta.get(e),l=t.ea.get(o.targetId);if(l.length>1)return t.ea.set(o.targetId,l.filter(p=>!Hl(p,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Pc(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Zd(t.remoteStore,o.targetId),nh(t,o.targetId)}).catch(nc))):(nh(t,o.targetId),yield Pc(t.localStore,o.targetId,!0))}),Lp.apply(this,arguments)}function Cm(){return Cm=(0,Me.Z)(function*(i,e,t){const o=Nc(i);try{const l=yield function(p,C){const x=N(p),j=Vr.now(),H=C.reduce((me,Be)=>me.add(Be.key),zr());let re;return x.persistence.runTransaction("Locally write mutations","readwrite",me=>x.ai.qs(me,H).next(Be=>{re=Be;const ht=[];for(const _t of C){const en=Yl(_t,re.get(_t.key));null!=en&&ht.push(new u(_t.key,en,De(en.value.mapValue),as.exists(!0)))}return x.$s.addMutationBatch(me,j,ht,C)})).then(me=>(me.applyToLocalDocumentSet(re),{batchId:me.batchId,changes:re}))}(o.localStore,e);o.sharedClientState.addPendingMutation(l.batchId),function(p,C,x){let j=p.oa[p.currentUser.toKey()];j||(j=new sn(vn)),j=j.insert(C,x),p.oa[p.currentUser.toKey()]=j}(o,l.batchId,t),yield sc(o,l.changes),yield td(o.remoteStore)}catch(l){const p=mu(l,"Failed to persist write");t.reject(p)}}),Cm.apply(this,arguments)}function a_(i,e){return th.apply(this,arguments)}function th(){return th=(0,Me.Z)(function*(i,e){const t=N(i);try{const o=yield jy(t.localStore,e);e.targetChanges.forEach((l,p)=>{const C=t.ia.get(p);C&&(b(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?C.Xu=!0:l.modifiedDocuments.size>0?b(C.Xu):l.removedDocuments.size>0&&(b(C.Xu),C.Xu=!1))}),yield sc(t,o,e)}catch(o){yield nc(o)}}),th.apply(this,arguments)}function bm(i,e,t){const o=N(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const l=[];o.ta.forEach((p,C)=>{const x=C.view.Eu(e);x.snapshot&&l.push(x.snapshot)}),function(p,C){const x=N(p);x.onlineState=C;let j=!1;x.queries.forEach((H,re)=>{for(const me of re.listeners)me.Eu(C)&&(j=!0)}),j&&Tp(x)}(o.eventManager,e),l.length&&o.Zu.Ko(l),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Em(i,e,t){return lf.apply(this,arguments)}function lf(){return lf=(0,Me.Z)(function*(i,e,t){const o=N(i);o.sharedClientState.updateQueryState(e,"rejected",t);const l=o.ia.get(e),p=l&&l.key;if(p){let C=new sn(Rt.comparator);C=C.insert(p,Se.newNoDocument(p,rn.min()));const x=zr().add(p),j=new ku(rn.min(),new Map,new bt(vn),C,x);yield a_(o,j),o.sa=o.sa.remove(p),o.ia.delete(e),ih(o)}else yield Pc(o.localStore,e,!1).then(()=>nh(o,e,t)).catch(nc)}),lf.apply(this,arguments)}function jv(i,e){return Sa.apply(this,arguments)}function Sa(){return Sa=(0,Me.Z)(function*(i,e){const t=N(i),o=e.batch.batchId;try{const l=yield tm(t.localStore,e);Up(t,o,null),uf(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield sc(t,l)}catch(l){yield nc(l)}}),Sa.apply(this,arguments)}function $v(i,e,t){return wm.apply(this,arguments)}function wm(){return wm=(0,Me.Z)(function*(i,e,t){const o=N(i);try{const l=yield function(p,C){const x=N(p);return x.persistence.runTransaction("Reject batch","readwrite-primary",j=>{let H;return x.$s.lookupMutationBatch(j,C).next(re=>(b(null!==re),H=re.keys(),x.$s.removeMutationBatch(j,re))).next(()=>x.$s.performConsistencyCheck(j)).next(()=>x.ai.qs(j,H))})}(o.localStore,e);Up(o,e,t),uf(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield sc(o,l)}catch(l){yield nc(l)}}),wm.apply(this,arguments)}function cf(){return cf=(0,Me.Z)(function*(i,e){const t=N(i);Sc(t.remoteStore)||yt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(p){const C=N(p);return C.persistence.runTransaction("Get highest unacknowledged batch id","readonly",x=>C.$s.getHighestUnacknowledgedBatchId(x))}(t.localStore);if(-1===o)return void e.resolve();const l=t.ua.get(o)||[];l.push(e),t.ua.set(o,l)}catch(o){const l=mu(o,"Initialization of waitForPendingWrites() operation failed");e.reject(l)}}),cf.apply(this,arguments)}function uf(i,e){(i.ua.get(e)||[]).forEach(t=>{t.resolve()}),i.ua.delete(e)}function Up(i,e,t){const o=N(i);let l=o.oa[o.currentUser.toKey()];if(l){const p=l.get(e);p&&(t?p.reject(t):p.resolve(),l=l.remove(e)),o.oa[o.currentUser.toKey()]=l}}function nh(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ea.get(e))i.ta.delete(o),t&&i.Zu.la(o,t);i.ea.delete(e),i.isPrimaryClient&&i.ra.Ri(e).forEach(o=>{i.ra.containsKey(o)||Vp(i,o)})}function Vp(i,e){i.na.delete(e.path.canonicalString());const t=i.sa.get(e);null!==t&&(Zd(i.remoteStore,t),i.sa=i.sa.remove(e),i.ia.delete(t),ih(i))}function rh(i,e,t){for(const o of t)o instanceof Rp?(i.ra.addReference(o.key,e),l_(i,o)):o instanceof kp?(yt("SyncEngine","Document no longer in limbo: "+o.key),i.ra.removeReference(o.key,e),i.ra.containsKey(o.key)||Vp(i,o.key)):E()}function l_(i,e){const t=e.key,o=t.path.canonicalString();i.sa.get(t)||i.na.has(o)||(yt("SyncEngine","New document in limbo: "+t),i.na.add(o),ih(i))}function ih(i){for(;i.na.size>0&&i.sa.size<i.maxConcurrentLimboResolutions;){const e=i.na.values().next().value;i.na.delete(e);const t=new Rt(nr.fromString(e)),o=i.aa.next();i.ia.set(o,new r_(t)),i.sa=i.sa.insert(t,o),Kh(i.remoteStore,new Jl(_o(Cl(t.path)),o,2,Ni.A))}}function sc(i,e,t){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,Me.Z)(function*(i,e,t){const o=N(i),l=[],p=[],C=[];var x;o.ta.isEmpty()||(o.ta.forEach((x,j)=>{C.push(o.ha(j,e,t).then(H=>{if(H){o.isPrimaryClient&&o.sharedClientState.updateQueryState(j.targetId,H.fromCache?"not-current":"current"),l.push(H);const re=Xg.Js(j.targetId,H);p.push(re)}}))}),yield Promise.all(C),o.Zu.Ko(l),yield(x=(0,Me.Z)(function*(j,H){const re=N(j);try{yield re.persistence.runTransaction("notifyLocalViewChanges","readwrite",me=>nt.forEach(H,Be=>nt.forEach(Be.zs,ht=>re.persistence.referenceDelegate.addReference(me,Be.targetId,ht)).next(()=>nt.forEach(Be.Hs,ht=>re.persistence.referenceDelegate.removeReference(me,Be.targetId,ht)))))}catch(me){if(!Pa(me))throw me;yt("LocalStore","Failed to update sequence numbers: "+me)}for(const me of H){const Be=me.targetId;if(!me.fromCache){const ht=re.si.get(Be),en=ht.withLastLimboFreeSnapshotVersion(ht.snapshotVersion);re.si=re.si.insert(Be,en)}}}),function(j,H){return x.apply(this,arguments)})(o.localStore,p))}),Bp.apply(this,arguments)}function c_(i,e){return jp.apply(this,arguments)}function jp(){return jp=(0,Me.Z)(function*(i,e){const t=N(i);if(!t.currentUser.isEqual(e)){yt("SyncEngine","User change. New user:",e.toKey());const o=yield lp(t.localStore,e);t.currentUser=e,(l=t).ua.forEach(C=>{C.forEach(x=>{x.reject(new W(U.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.ua.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield sc(t,o.ci)}var l}),jp.apply(this,arguments)}function u_(i,e){const t=N(i),o=t.ia.get(e);if(o&&o.Xu)return zr().add(o.key);{let l=zr();const p=t.ea.get(e);if(!p)return l;for(const C of p){const x=t.ta.get(C);l=l.unionWith(x.view.qu)}return l}}function d_(i,e){return id.apply(this,arguments)}function id(){return id=(0,Me.Z)(function*(i,e){const t=N(i),o=yield Hd(t.localStore,e.query,!0),l=e.view.Ju(o);return t.isPrimaryClient&&rh(t,e.targetId,l.zu),l}),id.apply(this,arguments)}function sd(i,e){return $p.apply(this,arguments)}function $p(){return $p=(0,Me.Z)(function*(i,e){const t=N(i);return im(t.localStore,e).then(o=>sc(t,o))}),$p.apply(this,arguments)}function sh(i,e,t,o){return zp.apply(this,arguments)}function zp(){return zp=(0,Me.Z)(function*(i,e,t,o){const l=N(i),p=yield function(C,x){const j=N(C),H=N(j.$s);return j.persistence.runTransaction("Lookup mutation documents","readonly",re=>H.ln(re,x).next(me=>me?j.ai.qs(re,me):nt.resolve(null)))}(l.localStore,e);var x;null!==p?("pending"===t?yield td(l.remoteStore):"acknowledged"===t||"rejected"===t?(Up(l,e,o||null),uf(l,e),x=e,N(N(l.localStore).$s).dn(x)):E(),yield sc(l,p)):yt("SyncEngine","Cannot apply mutation batch with id: "+e)}),zp.apply(this,arguments)}function oh(){return oh=(0,Me.Z)(function*(i,e){const t=N(i);if(kc(t),Nc(t),!0===e&&!0!==t.ca){const o=t.sharedClientState.getAllActiveQueryTargets(),l=yield cl(t,o.toArray());t.ca=!0,yield eh(t.remoteStore,!0);for(const p of l)Kh(t.remoteStore,p)}else if(!1===e&&!1!==t.ca){const o=[];let l=Promise.resolve();t.ea.forEach((p,C)=>{t.sharedClientState.isLocalQueryTarget(C)?o.push(C):l=l.then(()=>(nh(t,C),Pc(t.localStore,C,!0))),Zd(t.remoteStore,C)}),yield l,yield cl(t,o),function(p){const C=N(p);C.ia.forEach((x,j)=>{Zd(C.remoteStore,j)}),C.ra.bi(),C.ia=new Map,C.sa=new sn(Rt.comparator)}(t),t.ca=!1,yield eh(t.remoteStore,!1)}}),oh.apply(this,arguments)}function cl(i,e,t){return _u.apply(this,arguments)}function _u(){return _u=(0,Me.Z)(function*(i,e,t){const o=N(i),l=[],p=[];for(const C of e){let x;const j=o.ea.get(C);if(j&&0!==j.length){x=yield qu(o.localStore,_o(j[0]));for(const H of j){const re=o.ta.get(H),me=yield d_(o,re);me.snapshot&&p.push(me.snapshot)}}else{const H=yield rm(o.localStore,C);x=yield qu(o.localStore,H),yield af(o,Co(H),C,!1)}l.push(x)}return o.Zu.Ko(p),l}),_u.apply(this,arguments)}function Co(i){return vl(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function vu(i){const e=N(i);return N(N(e.localStore).persistence).Os()}function df(i,e,t,o){return ua.apply(this,arguments)}function ua(){return ua=(0,Me.Z)(function*(i,e,t,o){const l=N(i);if(l.ca)return void yt("SyncEngine","Ignoring unexpected query state notification.");const p=l.ea.get(e);if(p&&p.length>0)switch(t){case"current":case"not-current":{const C=yield im(l.localStore,Jc(p[0])),x=ku.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield sc(l,C,x);break}case"rejected":yield Pc(l.localStore,e,!0),nh(l,e,o);break;default:E()}}),ua.apply(this,arguments)}function Hp(i,e,t){return Rc.apply(this,arguments)}function Rc(){return Rc=(0,Me.Z)(function*(i,e,t){const o=kc(i);if(o.ca){for(const l of e){if(o.ea.has(l)){yt("SyncEngine","Adding an already active target "+l);continue}const p=yield rm(o.localStore,l),C=yield qu(o.localStore,p);yield af(o,Co(p),C.targetId,!1),Kh(o.remoteStore,C)}for(const l of t)o.ea.has(l)&&(yield Pc(o.localStore,l,!1).then(()=>{Zd(o.remoteStore,l),nh(o,l)}).catch(nc))}}),Rc.apply(this,arguments)}function kc(i){const e=N(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=a_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=u_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Em.bind(null,e),e.Zu.Ko=t_.bind(null,e.eventManager),e.Zu.la=rd.bind(null,e.eventManager),e}function Nc(i){const e=N(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$v.bind(null,e),e}class Cu{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Me.Z)(function*(){t.M=qd(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return em(this.persistence,new rc,e.initialUser,this.M)}_a(e){return new zy(am.Wi,this.M)}da(e){return new Hy}terminate(){var e=this;return(0,Me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class bu extends Cu{constructor(e,t,o){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,Me.Z)(function*(){yield t().call(o,e),yield o.ga.initialize(o,e),yield Nc(o.ga.syncEngine),yield td(o.ga.remoteStore),yield o.persistence.Is(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}ma(e){return em(this.persistence,new rc,e.initialUser,this.M)}wa(e){return new ky(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=Jg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Go.withCacheSize(this.cacheSizeBytes):Go.DEFAULT;return new Qg(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,vp(),Wh(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new Hy}}class ad extends bu{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,Me.Z)(function*(){yield t().call(o,e);const l=o.ga.syncEngine;o.sharedClientState instanceof mp&&(o.sharedClientState.syncEngine={kr:sh.bind(null,l),Mr:df.bind(null,l),Or:Hp.bind(null,l),Os:vu.bind(null,l),Nr:sd.bind(null,l)},yield o.sharedClientState.start()),yield o.persistence.Is(function(){var p=(0,Me.Z)(function*(C){yield function h_(i,e){return oh.apply(this,arguments)}(o.ga.syncEngine,C),o.gcScheduler&&(C&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):C||o.gcScheduler.stop())});return function(C){return p.apply(this,arguments)}}())})()}da(e){const t=vp();if(!mp.vt(t))throw new W(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Jg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new mp(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class Fc{initialize(e,t){var o=this;return(0,Me.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=l=>bm(o.syncEngine,l,1),o.remoteStore.remoteSyncer.handleCredentialChange=c_.bind(null,o.syncEngine),yield eh(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new e_}createDatastore(e){const t=qd(e.databaseInfo.databaseId),o=new _p(e.databaseInfo);return new Ky(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,l=e.asyncQueue,p=x=>bm(this.syncEngine,x,0),C=yp.vt()?new yp:new Uv,new cm(t,o,l,p,C);var t,o,l,p,C}createSyncEngine(e,t){return function(o,l,p,C,x,j,H){const re=new i_(o,l,p,C,x,j);return H&&(re.ca=!0),re}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Me.Z)(function*(t){const o=N(t);yt("RemoteStore","RemoteStore shutting down."),o.lu.add(5),yield Ko(o),o.du.shutdown(),o._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Eu(i,e=10240){let t=0;return{read:()=>(0,Me.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,Me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ld{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Om{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new ae,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(o=>{o&&o.Cu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,Me.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,Me.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,Me.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const o=e.Ta.decode(t),l=Number(o);isNaN(l)&&e.Ra(`length string (${o}) is not valid number`);const p=yield e.ba(l);return new n_(JSON.parse(p),t.length+l)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,Me.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}ba(e){var t=this;return(0,Me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const o=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,Me.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class Im{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new W(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(l=(0,Me.Z)(function*(p,C){const x=N(p),j=Ql(x.M)+"/documents",H={documents:C.map(ht=>ou(x.M,ht))},re=yield x.co("BatchGetDocuments",j,H),me=new Map;re.forEach(ht=>{const _t=function Id(i,e){return"found"in e?function(t,o){b(!!o.found);const l=ws(t,o.found.name),p=ls(o.found.updateTime),C=new ee({mapValue:{fields:o.found.fields}});return Se.newFoundDocument(l,p,C)}(i,e):"missing"in e?function(t,o){b(!!o.missing),b(!!o.readTime);const l=ws(t,o.missing),p=ls(o.readTime);return Se.newNoDocument(l,p)}(i,e):E()}(x.M,ht);me.set(_t.key.toString(),_t)});const Be=[];return C.forEach(ht=>{const _t=me.get(ht.toString());b(!!_t),Be.push(_t)}),Be}),function(p,C){return l.apply(this,arguments)})(t.datastore,e);var l;return o.forEach(l=>t.recordVersion(l)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new te(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,l)=>{const p=Rt.fromPath(l);e.mutations.push(new Oe(p,e.precondition(p)))}),yield(o=(0,Me.Z)(function*(l,p){const C=N(l),x=Ql(C.M)+"/documents",j={writes:p.map(H=>au(C.M,H))};yield C.ro("Commit",x,j)}),function(l,p){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw E();t=rn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new W(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?as.updateTime(t):as.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(rn.min()))throw new W(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return as.updateTime(t)}return as.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class xm{constructor(e,t,o,l){this.asyncQueue=e,this.datastore=t,this.updateFunction=o,this.deferred=l,this.va=5,this.So=new Cp(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,Me.Z)(function*(){const t=new Im(e.datastore),o=e.Da(t);o&&o.then(l=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(l)}).catch(p=>{e.Ca(p)}))}).catch(l=>{e.Ca(l)})}))}Da(e){try{const t=this.updateFunction(e);return!Rs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Ut(t)}return!1}}class Dm{constructor(e,t,o,l){var p=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=l,this.user=ji.UNAUTHENTICATED,this.clientId=xo.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var C=(0,Me.Z)(function*(x){yt("FirestoreClient","Received user=",x.uid),yield p.authCredentialListener(x),p.user=x});return function(x){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(o,C=>(yt("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,Me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new W(U.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ae;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const l=mu(o,"Failed to shutdown persistence");t.reject(l)}})),t.promise}}function Gp(i,e){return hf.apply(this,arguments)}function hf(){return hf=(0,Me.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),yt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var l=(0,Me.Z)(function*(p){o.isEqual(p)||(yield lp(e.localStore,p),o=p)});return function(p){return l.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),hf.apply(this,arguments)}function Wp(i,e){return ff.apply(this,arguments)}function ff(){return ff=(0,Me.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Kp(i);yt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(l=>Xh(e.remoteStore,l)),i.setAppCheckTokenChangeListener((l,p)=>Xh(e.remoteStore,p)),i.onlineComponents=e}),ff.apply(this,arguments)}function Kp(i){return pf.apply(this,arguments)}function pf(){return pf=(0,Me.Z)(function*(i){return i.offlineComponents||(yt("FirestoreClient","Using default OfflineComponentProvider"),yield Gp(i,new Cu)),i.offlineComponents}),pf.apply(this,arguments)}function gf(i){return qp.apply(this,arguments)}function qp(){return qp=(0,Me.Z)(function*(i){return i.onlineComponents||(yt("FirestoreClient","Using default OnlineComponentProvider"),yield Wp(i,new Fc)),i.onlineComponents}),qp.apply(this,arguments)}function Yp(i){return Kp(i).then(e=>e.persistence)}function Zp(i){return Kp(i).then(e=>e.localStore)}function Pm(i){return gf(i).then(e=>e.remoteStore)}function mf(i){return gf(i).then(e=>e.syncEngine)}function cd(i){return yf.apply(this,arguments)}function yf(){return yf=(0,Me.Z)(function*(i){const e=yield gf(i),t=e.eventManager;return t.onListen=s_.bind(null,e.syncEngine),t.onUnlisten=vm.bind(null,e.syncEngine),t}),yf.apply(this,arguments)}function Sm(i,e,t={}){const o=new ae;return i.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function(l,p,C,x,j){const H=new ld({next:me=>{p.enqueueAndForget(()=>rf(l,re));const Be=me.docs.has(C);!Be&&me.fromCache?j.reject(new W(U.UNAVAILABLE,"Failed to get document because the client is offline.")):Be&&me.fromCache&&x&&"server"===x.source?j.reject(new W(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):j.resolve(me)},error:me=>j.reject(me)}),re=new Ap(Cl(C.path),H,{includeMetadataChanges:!0,Du:!0});return nf(l,re)}(yield cd(i),i.asyncQueue,e,t,o)})),o.promise}function _f(i,e,t={}){const o=new ae;return i.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function(l,p,C,x,j){const H=new ld({next:me=>{p.enqueueAndForget(()=>rf(l,re)),me.fromCache&&"server"===x.source?j.reject(new W(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):j.resolve(me)},error:me=>j.reject(me)}),re=new Ap(C,H,{includeMetadataChanges:!0,Du:!0});return nf(l,re)}(yield cd(i),i.asyncQueue,e,t,o)})),o.promise}const Tm=new Map;function vf(i,e,t){if(!t)throw new W(U.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function m_(i,e,t,o){if(!0===e&&!0===o)throw new W(U.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Am(i){if(!Rt.isDocumentKey(i))throw new W(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function wu(i){if(Rt.isDocumentKey(i))throw new W(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Cf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":E()}function xr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new W(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cf(i);throw new W(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Rm(i,e){if(e<=0)throw new W(U.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Jp{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new W(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new W(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,m_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lc{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jp({}),this._settingsFrozen=!1,e instanceof oo?this._databaseId=e:(this._app=e,this._databaseId=function(l){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new W(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oo(l.options.projectId)}(e))}get app(){if(!this._app)throw new W(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new W(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jp(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ft;switch(t.type){case"gapi":const o=t.client;return b(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new gr(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new W(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Tm.get(e);t&&(yt("ComponentProvider","Removing Datastore"),Tm.delete(e),t.terminate())}(this),Promise.resolve()}}class Ii{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ii(this.firestore,e,this._key)}}class So{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new So(this.firestore,e,this._query)}}class Tl extends So{constructor(e,t,o){super(e,t,Cl(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ii(this.firestore,null,new Rt(e))}withConverter(e){return new Tl(this.firestore,e,this._path)}}function km(i,e,...t){if(i=(0,Re.m9)(i),vf("collection","path",e),i instanceof Lc){const o=nr.fromString(e,...t);return wu(o),new Tl(i,null,o)}{if(!(i instanceof Ii||i instanceof Tl))throw new W(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(nr.fromString(e,...t));return wu(o),new Tl(i.firestore,null,o)}}function bf(i,e,...t){if(i=(0,Re.m9)(i),1===arguments.length&&(e=xo.R()),vf("doc","path",e),i instanceof Lc){const o=nr.fromString(e,...t);return Am(o),new Ii(i,null,new Rt(o))}{if(!(i instanceof Ii||i instanceof Tl))throw new W(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(nr.fromString(e,...t));return Am(o),new Ii(i.firestore,i instanceof Tl?i.converter:null,new Rt(o))}}function Xp(i,e){return i=(0,Re.m9)(i),e=(0,Re.m9)(e),(i instanceof Ii||i instanceof Tl)&&(e instanceof Ii||e instanceof Tl)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Nm(i,e){return i=(0,Re.m9)(i),e=(0,Re.m9)(e),i instanceof So&&e instanceof So&&i.firestore===e.firestore&&Hl(i._query,e._query)&&i.converter===e.converter}class Fm{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Cp(this,"async_queue_retry"),this.Ua=()=>{const t=Wh();t&&yt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Wh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=Wh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new ae;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,Me.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!Pa(t))throw t;yt("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(o=>{throw this.Fa=o,this.$a=!1,Ir("INTERNAL UNHANDLED ERROR: ",function(p){let C=p.message||"";return p.stack&&(C=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),C}(o)),o}).then(o=>(this.$a=!1,o))));return this.Na=t,t}enqueueAfterDelay(e,t,o){this.qa(),this.La.indexOf(e)>-1&&(t=0);const l=tf.createAndSchedule(this,e,t,o,p=>this.Qa(p));return this.Oa.push(l),l}qa(){this.Fa&&E()}verifyOperationInProgress(){}ja(){var e=this;return(0,Me.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function Ef(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const l of["next","error","complete"])if(l in o&&"function"==typeof o[l])return!0;return!1}(i)}class eg{constructor(){this._progressObserver={},this._taskCompletionResolver=new ae,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class xi extends Lc{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new Fm,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||tg(this),this._firestoreClient.terminate()}}function $i(i){return i._firestoreClient||tg(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function tg(i){var e;const t=i._freezeSettings(),o=(p=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new As(i._databaseId,p,i._persistenceKey,(x=t).host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,x.useFetchStreams));var p,x;i._firestoreClient=new Dm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Lm(i,e,t){const o=new ae;return i.asyncQueue.enqueue((0,Me.Z)(function*(){try{yield Gp(i,t),yield Wp(i,e),o.resolve()}catch(l){if(!("FirebaseError"===(p=l).name?p.code===U.FAILED_PRECONDITION||p.code===U.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&p instanceof DOMException)||22===p.code||20===p.code||11===p.code))throw l;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+l),o.reject(l)}var p})).then(()=>o.promise)}function ag(i){if(i._initialized||i._terminated)throw new W(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Al{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new W(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new li(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ul{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ul($r.fromBase64String(e))}catch(t){throw new W(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ul($r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Uc{constructor(e){this._methodName=e}}class ud{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new W(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new W(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return vn(this._lat,e._lat)||vn(this._long,e._long)}}const Vm=/^__.*__$/;class v_{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new u(e,this.data,this.fieldMask,t,this.fieldTransforms):new g(e,this.data,t,this.fieldTransforms)}}class lg{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new u(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw E()}}class dd{constructor(e,t,o,l,p,C){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=l,void 0===p&&this.Ja(),this.fieldTransforms=p||[],this.fieldMask=C||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new dd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),l=this.Xa({path:o,tc:!1});return l.ec(e),l}nc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),l=this.Xa({path:o,tc:!1});return l.Ja(),l}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return cs(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(cg(this.Ya)&&Vm.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class Bm{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||qd(e)}uc(e,t,o,l=!1){return new dd({Ya:e,methodName:t,oc:o,path:li.emptyPath(),tc:!1,rc:l},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Mu(i){const e=i._freezeSettings(),t=qd(i._databaseId);return new Bm(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Of(i,e,t,o,l,p={}){const C=i.uc(p.merge||p.mergeFields?2:0,e,t,l);hg("Data must be an object, but it was:",C,o);const x=dg(o,C);let j,H;if(p.merge)j=new Va(C.fieldMask),H=C.fieldTransforms;else if(p.mergeFields){const re=[];for(const me of p.mergeFields){const Be=fg(e,me,t);if(!C.contains(Be))throw new W(U.INVALID_ARGUMENT,`Field '${Be}' is specified in your field mask but missing from your input data.`);pg(re,Be)||re.push(Be)}j=new Va(re),H=C.fieldTransforms.filter(me=>j.covers(me.field))}else j=null,H=C.fieldTransforms;return new v_(new ee(x),j,H)}class ah extends Uc{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ah}}function If(i,e,t){return new dd({Ya:3,oc:e.settings.oc,methodName:i._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class lh extends Uc{_toFieldTransform(e){return new vc(e.path,new tl)}isEqual(e){return e instanceof lh}}class jm extends Uc{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=If(this,e,!0),o=this.ac.map(p=>Vc(p,t)),l=new nl(o);return new vc(e.path,l)}isEqual(e){return this===e}}class $m extends Uc{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=If(this,e,!0),o=this.ac.map(p=>Vc(p,t)),l=new ql(o);return new vc(e.path,l)}isEqual(e){return this===e}}class zm extends Uc{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new wl(e.M,Tu(e.M,this.cc));return new vc(e.path,t)}isEqual(e){return this===e}}function xf(i,e,t,o){const l=i.uc(1,e,t);hg("Data must be an object, but it was:",l,o);const p=[],C=ee.empty();jr(o,(j,H)=>{const re=Pf(e,j,t);H=(0,Re.m9)(H);const me=l.nc(re);if(H instanceof ah)p.push(re);else{const Be=Vc(H,me);null!=Be&&(p.push(re),C.set(re,Be))}});const x=new Va(p);return new lg(C,x,l.fieldTransforms)}function Df(i,e,t,o,l,p){const C=i.uc(1,e,t),x=[fg(e,o,t)],j=[l];if(p.length%2!=0)throw new W(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Be=0;Be<p.length;Be+=2)x.push(fg(e,p[Be])),j.push(p[Be+1]);const H=[],re=ee.empty();for(let Be=x.length-1;Be>=0;--Be)if(!pg(H,x[Be])){const ht=x[Be];let _t=j[Be];_t=(0,Re.m9)(_t);const en=C.nc(ht);if(_t instanceof ah)H.push(ht);else{const Yn=Vc(_t,en);null!=Yn&&(H.push(ht),re.set(ht,Yn))}}const me=new Va(H);return new lg(re,me,C.fieldTransforms)}function ug(i,e,t,o=!1){return Vc(t,i.uc(o?4:3,e))}function Vc(i,e){if(C_(i=(0,Re.m9)(i)))return hg("Unsupported field value:",e,i),dg(i,e);if(i instanceof Uc)return function(t,o){if(!cg(o.Ya))throw o.ic(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ic(`${t._methodName}() is not currently supported inside arrays`);const l=t._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,o){const l=[];let p=0;for(const C of t){let x=Vc(C,o.sc(p));null==x&&(x={nullValue:"NULL_VALUE"}),l.push(x),p++}return{arrayValue:{values:l}}}(i,e)}return function(t,o){if(null===(t=(0,Re.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Tu(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const l=Vr.fromDate(t);return{timestampValue:Zl(o.M,l)}}if(t instanceof Vr){const l=new Vr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Zl(o.M,l)}}if(t instanceof ud)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ul)return{bytesValue:Ih(o.M,t._byteString)};if(t instanceof Ii){const l=o.databaseId,p=t.firestore._databaseId;if(!p.isEqual(l))throw o.ic(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Lu(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ic(`Unsupported field value: ${Cf(t)}`)}(i,e)}function dg(i,e){const t={};return Pu(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jr(i,(o,l)=>{const p=Vc(l,e.Za(o));null!=p&&(t[o]=p)}),{mapValue:{fields:t}}}function C_(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Vr||i instanceof ud||i instanceof ul||i instanceof Ii||i instanceof Uc)}function hg(i,e,t){if(!C_(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Cf(t);throw e.ic("an object"===o?i+" a custom object":i+" "+o)}var o}function fg(i,e,t){if((e=(0,Re.m9)(e))instanceof Al)return e._internalPath;if("string"==typeof e)return Pf(i,e);throw cs("Field path arguments must be of type string or ",i,!1,void 0,t)}const Hm=new RegExp("[~\\*/\\[\\]]");function Pf(i,e,t){if(e.search(Hm)>=0)throw cs(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Al(...e.split("."))._internalPath}catch(o){throw cs(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function cs(i,e,t,o,l){const p=o&&!o.isEmpty(),C=void 0!==l;let x=`Function ${e}() called with invalid data`;t&&(x+=" (via `toFirestore()`)"),x+=". ";let j="";return(p||C)&&(j+=" (found",p&&(j+=` in field ${o}`),C&&(j+=` in document ${l}`),j+=")"),new W(U.INVALID_ARGUMENT,x+i+j)}function pg(i,e){return i.some(t=>t.isEqual(e))}class ch{constructor(e,t,o,l,p){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=l,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new Ii(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new b_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class b_ extends ch{data(){return super.data()}}function uh(i,e){return"string"==typeof e?Pf(i,e):e instanceof Al?e._internalPath:e._delegate._internalPath}class Ou{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rl extends ch{constructor(e,t,o,l,p,C){super(e,t,o,l,C),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(uh("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class hd extends Rl{data(e={}){return super.data(e)}}class Ta{constructor(e,t,o,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new Ou(l.hasPendingWrites,l.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new hd(this._firestore,this._userDataWriter,o.key,o,new Ou(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new W(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let p=0;return o._snapshot.docChanges.map(C=>({type:"added",doc:new hd(o._firestore,o._userDataWriter,C.doc.key,C.doc,new Ou(o._snapshot.mutatedKeys.has(C.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:p++}))}{let p=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(C=>l||3!==C.type).map(C=>{const x=new hd(o._firestore,o._userDataWriter,C.doc.key,C.doc,new Ou(o._snapshot.mutatedKeys.has(C.doc.key),o._snapshot.fromCache),o.query.converter);let j=-1,H=-1;return 0!==C.type&&(j=p.indexOf(C.doc.key),p=p.delete(C.doc.key)),1!==C.type&&(p=p.add(C.doc),H=p.indexOf(C.doc.key)),{type:E_(C.type),doc:x,oldIndex:j,newIndex:H}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function E_(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return E()}}function Gm(i,e){return i instanceof Rl&&e instanceof Rl?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Ta&&e instanceof Ta&&i._firestore===e._firestore&&Nm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function gg(i){if(yc(i)&&0===i.explicitOrderBy.length)throw new W(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dh{}function oc(i,...e){for(const t of e)i=t._apply(i);return i}class Qv extends dh{constructor(e,t,o){super(),this.hc=e,this.lc=t,this.fc=o,this.type="where"}_apply(e){const t=Mu(e.firestore),o=function(l,p,C,x,j,H,re){let me;if(j.isKeyField()){if("array-contains"===H||"array-contains-any"===H)throw new W(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${H}' queries on documentId().`);if("in"===H||"not-in"===H){Sf(re,H);const ht=[];for(const _t of re)ht.push(Qm(x,l,_t));me={arrayValue:{values:ht}}}else me=Qm(x,l,re)}else"in"!==H&&"not-in"!==H&&"array-contains-any"!==H||Sf(re,H),me=ug(C,"where",re,"in"===H||"not-in"===H);const Be=ui.create(j,H,me);return function(ht,_t){if(_t.S()){const Yn=bl(ht);if(null!==Yn&&!Yn.isEqual(_t.field))throw new W(U.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Yn.toString()}' and '${_t.field.toString()}'`);const Ji=Fi(ht);null!==Ji&&fd(0,_t.field,Ji)}const en=function(Yn,Ji){for(const br of Yn.filters)if(Ji.indexOf(br.op)>=0)return br.op;return null}(ht,function(Yn){switch(Yn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(_t.op));if(null!==en)throw new W(U.INVALID_ARGUMENT,en===_t.op?`Invalid query. You cannot use more than one '${_t.op.toString()}' filter.`:`Invalid query. You cannot use '${_t.op.toString()}' filters with '${en.toString()}' filters.`)}(l,Be),Be}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new So(e.firestore,e.converter,function(l,p){const C=l.filters.concat([p]);return new zo(l.path,l.collectionGroup,l.explicitOrderBy.slice(),C,l.limit,l.limitType,l.startAt,l.endAt)}(e._query,o))}}class mg extends dh{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(o,l,p){if(null!==o.startAt)throw new W(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new W(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new Fs(l,p);return function(x,j){if(null===Fi(x)){const H=bl(x);null!==H&&fd(0,H,j.field)}}(o,C),C}(e._query,this.hc,this.dc);return new So(e.firestore,e.converter,function(o,l){const p=o.explicitOrderBy.concat([l]);return new zo(o.path,o.collectionGroup,p,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class Km extends dh{constructor(e,t,o){super(),this.type=e,this._c=t,this.wc=o}_apply(e){return new So(e.firestore,e.converter,zl(e._query,this._c,this.wc))}}class za extends dh{constructor(e,t,o){super(),this.type=e,this.mc=t,this.gc=o}_apply(e){const t=Zm(e,this.type,this.mc,this.gc);return new So(e.firestore,e.converter,(l=t,new zo((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,l,o.endAt)));var o,l}}class yg extends dh{constructor(e,t,o){super(),this.type=e,this.mc=t,this.gc=o}_apply(e){const t=Zm(e,this.type,this.mc,this.gc);return new So(e.firestore,e.converter,(l=t,new zo((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,l)));var o,l}}function Zm(i,e,t,o){if(t[0]=(0,Re.m9)(t[0]),t[0]instanceof ch)return function(l,p,C,x,j){if(!x)throw new W(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const H=[];for(const re of Po(l))if(re.field.isKeyField())H.push(Ns(p,x.key));else{const me=x.data.field(re.field);if(Qa(me))throw new W(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+re.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===me){const Be=re.field.canonicalString();throw new W(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Be}' (used as the orderBy) does not exist.`)}H.push(me)}return new Ba(H,j)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const l=Mu(i.firestore);return function(p,C,x,j,H,re){const me=p.explicitOrderBy;if(H.length>me.length)throw new W(U.INVALID_ARGUMENT,`Too many arguments provided to ${j}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Be=[];for(let ht=0;ht<H.length;ht++){const _t=H[ht];if(me[ht].field.isKeyField()){if("string"!=typeof _t)throw new W(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${j}(), but got a ${typeof _t}`);if(!$l(p)&&-1!==_t.indexOf("/"))throw new W(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${j}() must be a plain document ID, but '${_t}' contains a slash.`);const en=p.path.child(nr.fromString(_t));if(!Rt.isDocumentKey(en))throw new W(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${j}() must result in a valid document path, but '${en}' is not because it contains an odd number of segments.`);const Yn=new Rt(en);Be.push(Ns(C,Yn))}else{const en=ug(x,j,_t);Be.push(en)}}return new Ba(Be,re)}(i._query,i.firestore._databaseId,l,e,t,o)}}function Qm(i,e,t){if("string"==typeof(t=(0,Re.m9)(t))){if(""===t)throw new W(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$l(e)&&-1!==t.indexOf("/"))throw new W(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(nr.fromString(t));if(!Rt.isDocumentKey(o))throw new W(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ns(i,new Rt(o))}if(t instanceof Ii)return Ns(i,t._key);throw new W(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cf(t)}.`)}function Sf(i,e){if(!Array.isArray(i)||0===i.length)throw new W(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new W(U.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function fd(i,e,t){if(!t.isEqual(e))throw new W(U.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class _g{convertValue(e,t="none"){switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ei(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(so(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw E()}}convertObject(e,t){const o={};return jr(e.fields,(l,p)=>{o[l]=this.convertValue(p,t)}),o}convertGeoPoint(e){return new ud(ei(e.latitude),ei(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Br(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Cn(e));default:return null}}convertTimestamp(e){const t=Ln(e);return new Vr(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=nr.fromString(e);b(V(o));const l=new oo(o.get(1),o.get(3)),p=new Rt(o.popFirst(5));return l.isEqual(t)||Ir(`Document ${p} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),p}}function hh(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class O_ extends _g{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ii(this.firestore,null,t)}}class vg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mu(e)}set(e,t,o){this._verifyNotCommitted();const l=ac(e,this._firestore),p=hh(l.converter,t,o),C=Of(this._dataReader,"WriteBatch.set",l._key,p,null!==l.converter,o);return this._mutations.push(C.toMutation(l._key,as.none())),this}update(e,t,o,...l){this._verifyNotCommitted();const p=ac(e,this._firestore);let C;return C="string"==typeof(t=(0,Re.m9)(t))||t instanceof Al?Df(this._dataReader,"WriteBatch.update",p._key,t,o,l):xf(this._dataReader,"WriteBatch.update",p._key,t),this._mutations.push(C.toMutation(p._key,as.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ac(e,this._firestore);return this._mutations=this._mutations.concat(new te(t._key,as.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ac(i,e){if((i=(0,Re.m9)(i)).firestore!==e)throw new W(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Iu extends _g{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ii(this.firestore,null,t)}}function bg(i,e,t){i=xr(i,Ii);const o=xr(i.firestore,xi),l=hh(i.converter,e,t);return xu(o,[Of(Mu(o),"setDoc",i._key,l,null!==i.converter,t).toMutation(i._key,as.none())])}function Eg(i,e,t,...o){i=xr(i,Ii);const l=xr(i.firestore,xi),p=Mu(l);let C;return C="string"==typeof(e=(0,Re.m9)(e))||e instanceof Al?Df(p,"updateDoc",i._key,e,t,o):xf(p,"updateDoc",i._key,e),xu(l,[C.toMutation(i._key,as.exists(!0))])}function wg(i,...e){var t,o,l;i=(0,Re.m9)(i);let p={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||Ef(e[C])||(p=e[C],C++);const x={includeMetadataChanges:p.includeMetadataChanges};if(Ef(e[C])){const me=e[C];e[C]=null===(t=me.next)||void 0===t?void 0:t.bind(me),e[C+1]=null===(o=me.error)||void 0===o?void 0:o.bind(me),e[C+2]=null===(l=me.complete)||void 0===l?void 0:l.bind(me)}let j,H,re;if(i instanceof Ii)H=xr(i.firestore,xi),re=Cl(i._key.path),j={next:me=>{e[C]&&e[C](Rf(H,i,me))},error:e[C+1],complete:e[C+2]};else{const me=xr(i,So);H=xr(me.firestore,xi),re=me._query;const Be=new Iu(H);j={next:ht=>{e[C]&&e[C](new Ta(H,Be,me,ht))},error:e[C+1],complete:e[C+2]},gg(i._query)}return function(me,Be,ht,_t){const en=new ld(_t),Yn=new Ap(Be,en,ht);return me.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return nf(yield cd(me),Yn)})),()=>{en.pa(),me.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return rf(yield cd(me),Yn)}))}}($i(H),re,x,j)}function xu(i,e){return function(t,o){const l=new ae;return t.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function o_(i,e,t){return Cm.apply(this,arguments)}(yield mf(t),o,l)})),l.promise}($i(i),e)}function Rf(i,e,t){const o=t.docs.get(e._key),l=new Iu(i);return new Rl(i,l,e._key,o,new Ou(t.hasPendingWrites,t.fromCache),e.converter)}class I_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mu(e)}get(e){const t=ac(e,this._firestore),o=new O_(this._firestore);return this._transaction.lookup([t._key]).then(l=>{if(!l||1!==l.length)return E();const p=l[0];if(p.isFoundDocument())return new ch(this._firestore,o,p.key,p,t.converter);if(p.isNoDocument())return new ch(this._firestore,o,t._key,null,t.converter);throw E()})}set(e,t,o){const l=ac(e,this._firestore),p=hh(l.converter,t,o),C=Of(this._dataReader,"Transaction.set",l._key,p,null!==l.converter,o);return this._transaction.set(l._key,C),this}update(e,t,o,...l){const p=ac(e,this._firestore);let C;return C="string"==typeof(t=(0,Re.m9)(t))||t instanceof Al?Df(this._dataReader,"Transaction.update",p._key,t,o,l):xf(this._dataReader,"Transaction.update",p._key,t),this._transaction.update(p._key,C),this}delete(e){const t=ac(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ac(e,this._firestore),o=new Iu(this._firestore);return super.get(e).then(l=>new Rl(this._firestore,o,t._key,l._document,new Ou(!1,!1),t.converter))}}function Mg(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new W("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function sy(){if("undefined"==typeof Uint8Array)throw new W("unimplemented","Uint8Arrays are not available in this environment.")}function oy(){if(!function Wc(){return"undefined"!=typeof atob}())throw new W("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Uo=it.SDK_VERSION,(0,it._registerComponent)(new Qe.wA("firestore",(t,{options:o})=>{const l=t.getProvider("app").getImmediate(),p=new xi(l,new Qt(t.getProvider("auth-internal")),new Ws(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),p._setSettings(o),p},"PUBLIC")),(0,it.registerVersion)(io,"3.4.7",i),(0,it.registerVersion)(io,"3.4.7","esm2017")}();class fh{constructor(e){this._delegate=e}static fromBase64String(e){return oy(),new fh(ul.fromBase64String(e))}static fromUint8Array(e){return sy(),new fh(ul.fromUint8Array(e))}toBase64(){return oy(),this._delegate.toBase64()}toUint8Array(){return sy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Og(i){return function ay(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class ly{enableIndexedDbPersistence(e,t){return function ng(i,e){ag(i=xr(i,xi));const t=$i(i),o=i._freezeSettings(),l=new Fc;return Lm(t,l,new bu(l,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function rg(i){ag(i=xr(i,xi));const e=$i(i),t=i._freezeSettings(),o=new Fc;return Lm(e,o,new ad(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function wf(i){if(i._initialized&&!i._terminated)throw new W(U.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ae;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Me.Z)(function*(){try{yield(t=(0,Me.Z)(function*(o){if(!il.vt())return Promise.resolve();const l=o+"main";yield il.delete(l)}),function(o){return t.apply(this,arguments)})(Jg(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ig{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof oo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function y_(i,e,t,o={}){var l;const p=(i=xr(i,Lc))._getSettings();if("firestore.googleapis.com"!==p.host&&p.host!==e&&mo("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},p),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let C,x;if("string"==typeof o.mockUserToken)C=o.mockUserToken,x=ji.MOCK_USER;else{C=(0,Re.Sg)(o.mockUserToken,null===(l=i._app)||void 0===l?void 0:l.options.projectId);const j=o.mockUserToken.sub||o.mockUserToken.user_id;if(!j)throw new W(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new ji(j)}i._authCredentials=new dn(new Xe(C,x))}}(this._delegate,e,t,o)}enableNetwork(){return function ig(i){return function f_(i){return i.asyncQueue.enqueue((0,Me.Z)(function*(){const e=yield Yp(i),t=yield Pm(i);return e.setNetworkEnabled(!0),function(o){const l=N(o);return l.lu.delete(0),Xu(l)}(t)}))}($i(i=xr(i,xi)))}(this._delegate)}disableNetwork(){return function Yv(i){return function p_(i){return i.asyncQueue.enqueue((0,Me.Z)(function*(){const e=yield Yp(i),t=yield Pm(i);return e.setNetworkEnabled(!1),(o=(0,Me.Z)(function*(l){const p=N(l);p.lu.add(0),yield Ko(p),p._u.set("Offline")}),function(l){return o.apply(this,arguments)})(t);var o}))}($i(i=xr(i,xi)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,m_("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Mf(i){return function(e){const t=new ae;return e.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function Mm(i,e){return cf.apply(this,arguments)}(yield mf(e),t)})),t.promise}($i(i=xr(i,xi)))}(this._delegate)}onSnapshotsInSync(e){return function ry(i,e){return function g_(i,e){const t=new ld(e);return i.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return o=yield cd(i),l=t,N(o).Tu.add(l),void l.next();var o,l})),()=>{t.pa(),i.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return o=yield cd(i),l=t,void N(o).Tu.delete(l);var o,l}))}}($i(i=xr(i,xi)),Ef(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new W("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _h(this,km(this._delegate,e))}catch(t){throw To(t,"collection()","Firestore.collection()")}}doc(e){try{return new Aa(this,bf(this._delegate,e))}catch(t){throw To(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vs(this,function __(i,e){if(i=xr(i,Lc),vf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new W(U.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new So(i,null,(t=e,new zo(nr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw To(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function x_(i,e){return function Hv(i,e){const t=new ae;return i.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){const o=yield(l=i,gf(l).then(p=>p.datastore));var l;new xm(i.asyncQueue,o,e,t).run()})),t.promise}($i(i=xr(i,xi)),t=>e(new I_(i,t)))}(this._delegate,t=>e(new xg(this,t)))}batch(){return $i(this._delegate),new Dg(new vg(this._delegate,e=>xu(this._delegate,e)))}loadBundle(e){return function sg(i,e){const t=$i(i=xr(i,xi)),o=new eg;return function Gv(i,e,t,o){const l=function(p,C){let x;return x="string"==typeof p?(new TextEncoder).encode(p):p,j=function(j,H){if(j instanceof Uint8Array)return Eu(j,H);if(j instanceof ArrayBuffer)return Eu(new Uint8Array(j),H);if(j instanceof ReadableStream)return j.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(x),new Om(j,C);var j}(t,qd(e));i.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){!function od(i,e,t){const o=N(i);var l;(l=(0,Me.Z)(function*(p,C,x){try{const j=yield C.getMetadata();if(yield function(Be,ht){const _t=N(Be),en=ls(ht.createTime);return _t.persistence.runTransaction("hasNewerBundle","readonly",Yn=>_t.ds.getBundleMetadata(Yn,ht.id)).then(Yn=>!!Yn&&Yn.createTime.compareTo(en)>=0)}(p.localStore,j))return yield C.close(),x._completeWith({taskState:"Success",documentsLoaded:(Be=j).totalDocuments,bytesLoaded:Be.totalBytes,totalDocuments:Be.totalDocuments,totalBytes:Be.totalBytes}),Promise.resolve(new Set);x._updateProgress(sf(j));const H=new ll(j,p.localStore,C.M);let re=yield C.fa();for(;re;){const Be=yield H.Nu(re);Be&&x._updateProgress(Be),re=yield C.fa()}const me=yield H.complete();return yield sc(p,me.Ou,void 0),yield function(Be,ht){const _t=N(Be);return _t.persistence.runTransaction("Save bundle","readwrite",en=>_t.ds.saveBundleMetadata(en,ht))}(p.localStore,j),x._completeWith(me.progress),Promise.resolve(me.Mu)}catch(j){return mo("SyncEngine",`Loading bundle failed with ${j}`),x._failWith(j),Promise.resolve(new Set)}var Be}),function(p,C,x){return l.apply(this,arguments)})(o,e,t).then(l=>{o.sharedClientState.notifyBundleLoaded(l)})}(yield mf(i),l,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function og(i,e){return function Wv(i,e){return i.asyncQueue.enqueue((0,Me.Z)(function*(){return function(t,o){const l=N(t);return l.persistence.runTransaction("Get named query","readonly",p=>l.ds.getNamedQuery(p,o))}(yield Zp(i),e)}))}($i(i=xr(i,xi)),e).then(t=>t?new So(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Vs(this,t):null)}}class ph extends _g{constructor(e){super(),this.firestore=e}convertBytes(e){return new fh(new ul(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Aa.forKey(t,this.firestore,null)}}class xg{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ph(e)}get(e){const t=$c(e);return this._delegate.get(t).then(o=>new gh(this._firestore,new Rl(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const l=$c(e);return o?(Mg("Transaction.set",o),this._delegate.set(l,t,o)):this._delegate.set(l,t),this}update(e,t,o,...l){const p=$c(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,o,...l),this}delete(e){const t=$c(e);return this._delegate.delete(t),this}}class Dg{constructor(e){this._delegate=e}set(e,t,o){const l=$c(e);return o?(Mg("WriteBatch.set",o),this._delegate.set(l,t,o)):this._delegate.set(l,t),this}update(e,t,o,...l){const p=$c(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,o,...l),this}delete(e){const t=$c(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Bc{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new hd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mh(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Bc.INSTANCES;let l=o.get(e);l||(l=new WeakMap,o.set(e,l));let p=l.get(t);return p||(p=new Bc(e,new ph(e),t),l.set(t,p)),p}}Bc.INSTANCES=new WeakMap;class Aa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ph(e)}static forPath(e,t,o){if(e.length%2!=0)throw new W("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Aa(t,new Ii(t._delegate,o,new Rt(e)))}static forKey(e,t,o){return new Aa(t,new Ii(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new _h(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _h(this.firestore,km(this._delegate,e))}catch(t){throw To(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Re.m9)(e))instanceof Ii&&Xp(this._delegate,e)}set(e,t){t=Mg("DocumentReference.set",t);try{return t?bg(this._delegate,e,t):bg(this._delegate,e)}catch(o){throw To(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?Eg(this._delegate,e):Eg(this._delegate,e,t,...o)}catch(l){throw To(l,"updateDoc()","DocumentReference.update()")}}delete(){return function ty(i){return xu(xr(i.firestore,xi),[new te(i._key,as.none())])}(this._delegate)}onSnapshot(...e){const t=Pg(e),o=jc(e,l=>new gh(this.firestore,new Rl(this.firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,this._delegate.converter)));return wg(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Jm(i){i=xr(i,Ii);const e=xr(i.firestore,xi),t=$i(e),o=new Iu(e);return function zv(i,e){const t=new ae;return i.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return(o=(0,Me.Z)(function*(l,p,C){try{const x=yield function(j,H){const re=N(j);return re.persistence.runTransaction("read document","readonly",me=>re.ai.Bs(me,H))}(l,p);x.isFoundDocument()?C.resolve(x):x.isNoDocument()?C.resolve(null):C.reject(new W(U.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(x){const j=mu(x,`Failed to get document '${p} from cache`);C.reject(j)}}),function(l,p,C){return o.apply(this,arguments)})(yield Zp(i),e,t);var o})),t.promise}(t,i._key).then(l=>new Rl(e,o,i._key,l,new Ou(null!==l&&l.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Xm(i){i=xr(i,Ii);const e=xr(i.firestore,xi);return Sm($i(e),i._key,{source:"server"}).then(t=>Rf(e,i,t))}(this._delegate):function Tf(i){i=xr(i,Ii);const e=xr(i.firestore,xi);return Sm($i(e),i._key).then(t=>Rf(e,i,t))}(this._delegate),t.then(o=>new gh(this.firestore,new Rl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Aa(this.firestore,this._delegate.withConverter(e?Bc.getInstance(this.firestore,e):null))}}function To(i,e,t){return i.message=i.message.replace(e,t),i}function Pg(i){for(const e of i)if("object"==typeof e&&!Og(e))return e;return{}}function jc(i,e){var t,o;let l;return l=Og(i[0])?i[0]:Og(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:p=>{l.next&&l.next(e(p))},error:null===(t=l.error)||void 0===t?void 0:t.bind(l),complete:null===(o=l.complete)||void 0===o?void 0:o.bind(l)}}class gh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Aa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Gm(this._delegate,e._delegate)}}class mh extends gh{data(e){const t=this._delegate.data(e);return function T(i,e){i||E()}(void 0!==t),t}}class Vs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ph(e)}where(e,t,o){try{return new Vs(this.firestore,oc(this._delegate,function Wm(i,e,t){const o=e,l=uh("where",i);return new Qv(l,o,t)}(e,t,o)))}catch(l){throw To(l,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Vs(this.firestore,oc(this._delegate,function kl(i,e="asc"){const t=e,o=uh("orderBy",i);return new mg(o,t)}(e,t)))}catch(o){throw To(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Vs(this.firestore,oc(this._delegate,function qm(i){return Rm("limit",i),new Km("limit",i,"F")}(e)))}catch(t){throw To(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Vs(this.firestore,oc(this._delegate,function Nl(i){return Rm("limitToLast",i),new Km("limitToLast",i,"L")}(e)))}catch(t){throw To(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Vs(this.firestore,oc(this._delegate,function dl(...i){return new za("startAt",i,!0)}(...e)))}catch(t){throw To(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Vs(this.firestore,oc(this._delegate,function Ym(...i){return new za("startAfter",i,!1)}(...e)))}catch(t){throw To(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Vs(this.firestore,oc(this._delegate,function w_(...i){return new yg("endBefore",i,!1)}(...e)))}catch(t){throw To(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Vs(this.firestore,oc(this._delegate,function M_(...i){return new yg("endAt",i,!0)}(...e)))}catch(t){throw To(t,"endAt()","Query.endAt()")}}isEqual(e){return Nm(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Af(i){i=xr(i,So);const e=xr(i.firestore,xi),t=$i(e),o=new Iu(e);return function Qp(i,e){const t=new ae;return i.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return(o=(0,Me.Z)(function*(l,p,C){try{const x=yield Hd(l,p,!0),j=new Np(p,x.hi),H=j.Gu(x.documents),re=j.applyChanges(H,!1);C.resolve(re.snapshot)}catch(x){const j=mu(x,`Failed to execute query '${p} against cache`);C.reject(j)}}),function(l,p,C){return o.apply(this,arguments)})(yield Zp(i),e,t);var o})),t.promise}(t,i._query).then(l=>new Ta(e,o,i,l))}(this._delegate):"server"===(null==e?void 0:e.source)?function ey(i){i=xr(i,So);const e=xr(i.firestore,xi),t=$i(e),o=new Iu(e);return _f(t,i._query,{source:"server"}).then(l=>new Ta(e,o,i,l))}(this._delegate):function Cg(i){i=xr(i,So);const e=xr(i.firestore,xi),t=$i(e),o=new Iu(e);return gg(i._query),_f(t,i._query).then(l=>new Ta(e,o,i,l))}(this._delegate),t.then(o=>new yh(this.firestore,new Ta(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=Pg(e),o=jc(e,l=>new yh(this.firestore,new Ta(this.firestore._delegate,this._userDataWriter,this._delegate,l._snapshot)));return wg(this._delegate,t,o)}withConverter(e){return new Vs(this.firestore,this._delegate.withConverter(e?Bc.getInstance(this.firestore,e):null))}}class e0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new mh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yh{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Vs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new mh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new e0(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new mh(this._firestore,o))})}isEqual(e){return Gm(this._delegate,e._delegate)}}class _h extends Vs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Aa(this.firestore,e):null}doc(e){try{return new Aa(this.firestore,void 0===e?bf(this._delegate):bf(this._delegate,e))}catch(t){throw To(t,"doc()","CollectionReference.doc()")}}add(e){return function ny(i,e){const t=xr(i.firestore,xi),o=bf(i),l=hh(i.converter,e);return xu(t,[Of(Mu(i.firestore),"addDoc",o._key,l,null!==i.converter,{}).toMutation(o._key,as.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Aa(this.firestore,t))}isEqual(e){return Xp(this._delegate,e._delegate)}withConverter(e){return new _h(this.firestore,this._delegate.withConverter(e?Bc.getInstance(this.firestore,e):null))}}function $c(i){return xr(i,Ii)}class kf{constructor(...e){this._delegate=new Al(...e)}static documentId(){return new kf(li.keyField().canonicalString())}isEqual(e){return(e=(0,Re.m9)(e))instanceof Al&&this._delegate._internalPath.isEqual(e._internalPath)}}class pd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function P_(){return new lh("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new pd(e)}static delete(){const e=function D_(){return new ah("deleteField")}();return e._methodName="FieldValue.delete",new pd(e)}static arrayUnion(...e){const t=function S_(...i){return new jm("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new pd(t)}static arrayRemove(...e){const t=function T_(...i){return new $m("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new pd(t)}static increment(e){const t=function A_(i){return new zm("increment",i)}(e);return t._methodName="FieldValue.increment",new pd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const In={Firestore:Ig,GeoPoint:ud,Timestamp:Vr,Blob:fh,Transaction:xg,WriteBatch:Dg,DocumentReference:Aa,DocumentSnapshot:gh,Query:Vs,QueryDocumentSnapshot:mh,QuerySnapshot:yh,CollectionReference:_h,FieldPath:kf,FieldValue:pd,setLogLevel:function cy(i){!function Vo(i){Cs.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function F_(i){(function N_(i,e){i.INTERNAL.registerComponent(new Qe.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),l=t.getProvider("firestore").getImmediate();return e(o,l)},"PUBLIC").setServiceProps(Object.assign({},In)))})(i,(e,t)=>new Ig(e,t,new ly)),i.registerVersion("@firebase/firestore-compat","0.1.16")}($e.Z);var zc=L(3385),Nf=L(440),L_=L(127);function vh(i,e){return function Ff(i,e=A.z){return new Z.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function uy(i,e){return vh(i,e).pipe((0,q.U)(t=>({payload:t,type:"query"})))}function Ch(i,e){return uy(i,e).pipe((0,X.O)(void 0),ie(),(0,q.U)(([t,o])=>{const l=o.payload.docChanges(),p=l.map(C=>({type:C.type,payload:C}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((C,x)=>{const j=l.find(re=>re.doc.ref.isEqual(C.ref)),H=null==t?void 0:t.payload.docs.find(re=>re.ref.isEqual(C.ref));j&&JSON.stringify(j.doc.metadata)===JSON.stringify(C.metadata)||!j&&H&&JSON.stringify(H.metadata)===JSON.stringify(C.metadata)||p.push({type:"modified",payload:{oldIndex:x,newIndex:x,type:"modified",doc:C}})}),p}))}function dy(i,e,t){return Ch(i,t).pipe((0,le.R)((o,l)=>function U_(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function hy(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Lf(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Lf(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Lf(i,e.oldIndex,1)}return i}(i,o))}),i}(o,l.map(p=>p.payload),e),[]),(0,ot.x)(),(0,q.U)(o=>o.map(l=>({type:l.type,payload:l}))))}function Lf(i,e,t,...o){const l=i.slice();return l.splice(e,t,...o),l}function Sg(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Tg{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=Ch(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,q.U)(o=>o.filter(l=>e.indexOf(l.type)>-1)))),t.pipe((0,X.O)(void 0),ie(),(0,qe.h)(([o,l])=>l.length>0||!o),(0,q.U)(([o,l])=>l),_e.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,le.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Sg(e);return dy(this.query,t,this.afs.schedulers.outsideAngular).pipe(_e.iC)}valueChanges(e={}){return uy(this.query,this.afs.schedulers.outsideAngular).pipe((0,q.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),_e.iC)}get(e){return(0,de.D)(this.query.get(e)).pipe(_e.iC)}add(e){return this.ref.add(e)}doc(e){return new fy(this.ref.doc(e),this.afs)}}class fy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:l,query:p}=gy(o,t);return new Tg(l,p,this.afs)}snapshotChanges(){return function us(i,e){return vh(i,e).pipe((0,X.O)(void 0),ie(),(0,q.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(_e.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,q.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,de.D)(this.ref.get(e)).pipe(_e.iC)}}class V_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ch(this.query,this.afs.schedulers.outsideAngular).pipe((0,q.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,qe.h)(t=>t.length>0),_e.iC):Ch(this.query,this.afs.schedulers.outsideAngular).pipe(_e.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,le.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Sg(e);return dy(this.query,t,this.afs.schedulers.outsideAngular).pipe(_e.iC)}valueChanges(e={}){return uy(this.query,this.afs.schedulers.outsideAngular).pipe((0,q.U)(o=>o.payload.docs.map(l=>e.idField?Object.assign({[e.idField]:l.id},l.data()):l.data())),_e.iC)}get(e){return(0,de.D)(this.query.get(e)).pipe(_e.iC)}}const py=new M.OlP("angularfire2.enableFirestorePersistence"),gd=new M.OlP("angularfire2.firestore.persistenceSettings"),B_=new M.OlP("angularfire2.firestore.settings"),j_=new M.OlP("angularfire2.firestore.use-emulator");function gy(i,e=(t=>t)){return{query:e(i),ref:i}}let bh=(()=>{class i{constructor(t,o,l,p,C,x,j,H,re,me,Be,ht,_t,en,Yn,Ji,br){this.schedulers=j;const Bs=(0,rt.on)(t,x,o),di=re;me&&(0,zc.nw)(Bs,x,Be,_t,en,Yn,ht,Ji),[this.firestore,this.persistenceEnabled$]=(0,rt.cc)(`${Bs.name}.firestore`,"AngularFirestore",Bs.name,()=>{const Di=x.runOutsideAngular(()=>Bs.firestore());if(p&&Di.settings(p),di&&Di.useEmulator(...di),l&&!(0,ft.PM)(C)){const Kr=()=>{try{return(0,de.D)(Di.enablePersistence(H||void 0).then(()=>!0,()=>!1))}catch(hl){return"undefined"!=typeof console&&console.warn(hl),(0,ce.of)(!1)}};return[Di,x.runOutsideAngular(Kr)]}return[Di,(0,ce.of)(!1)]},[p,di,l])}collection(t,o){let l;l="string"==typeof t?this.firestore.collection(t):t;const{ref:p,query:C}=gy(l,o),x=this.schedulers.ngZone.run(()=>p);return new Tg(x,C,this)}collectionGroup(t,o){const l=o||(C=>C),p=this.firestore.collectionGroup(t);return new V_(l(p),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const l=this.schedulers.ngZone.run(()=>o);return new fy(l,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(M.LFG(rt.Dh),M.LFG(rt.xv,8),M.LFG(py,8),M.LFG(B_,8),M.LFG(M.Lbi),M.LFG(M.R0b),M.LFG(_e.HU),M.LFG(gd,8),M.LFG(j_,8),M.LFG(zc.zQ,8),M.LFG(zc.Qv,8),M.LFG(zc.L6,8),M.LFG(zc._Q,8),M.LFG(zc.rT,8),M.LFG(zc.lh,8),M.LFG(zc.f7,8),M.LFG(Nf.nm,8))},i.\u0275prov=M.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),my=(()=>{class i{constructor(){L_.Z.registerVersion("angularfire",_e.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:py,useValue:!0},{provide:gd,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=M.oAB({type:i}),i.\u0275inj=M.cJS({providers:[bh]}),i})()},2011:(Dt,Te,L)=>{L.d(Te,{hO:()=>ot,xv:()=>ie,Dh:()=>he,GT:()=>_e,cc:()=>qe,on:()=>X,pX:()=>ce});var M=L(5e3),A=L(127),Z=L(6351);Dt=L.hmd(Dt);const de=["ngOnDestroy"],ce=($e,Me,it,Qe={})=>new Proxy($e,{get:(je,Re)=>it.runOutsideAngular(()=>{var Mt;if($e[Re])return(null===(Mt=null==Qe?void 0:Qe.spy)||void 0===Mt?void 0:Mt.get)&&Qe.spy.get(Re,$e[Re]),$e[Re];if(de.indexOf(Re)>-1)return()=>{};const pt=Me.toPromise().then(se=>{const we=se&&se[Re];return"function"==typeof we?we.bind(se):we&&we.then?we.then(Ee=>it.run(()=>Ee)):it.run(()=>we)});return new Proxy(()=>{},{get:(se,we)=>pt[we],apply:(se,we,Ee)=>pt.then(ke=>{var Ne;const et=ke&&ke(...Ee);return(null===(Ne=null==Qe?void 0:Qe.spy)||void 0===Ne?void 0:Ne.apply)&&Qe.spy.apply(Re,Ee,et),et})})})}),_e=($e,Me)=>{Me.forEach(it=>{Object.getOwnPropertyNames(it.prototype||it).forEach(Qe=>{Object.defineProperty($e.prototype,Qe,Object.getOwnPropertyDescriptor(it.prototype||it,Qe))})})};class ue{constructor(Me){return Me}}const he=new M.OlP("angularfire2.app.options"),ie=new M.OlP("angularfire2.app.name");function X($e,Me,it){const je="object"==typeof it&&it||{};je.name=je.name||"string"==typeof it&&it||"[DEFAULT]";const Mt=A.Z.apps.filter(pt=>pt&&pt.name===je.name)[0]||Me.runOutsideAngular(()=>A.Z.initializeApp($e,je));try{JSON.stringify($e)!==JSON.stringify(Mt.options)&&q("error",`${Mt.name} Firebase App already initialized with different options${Dt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(pt){}return new ue(Mt)}const q=($e,...Me)=>{(0,M.X6Q)()&&"undefined"!=typeof console&&console[$e](...Me)},le={provide:ue,useFactory:X,deps:[he,M.R0b,[new M.FiY,ie]]};let ot=(()=>{class $e{constructor(it){A.Z.registerVersion("angularfire",Z.q4.full,"core"),A.Z.registerVersion("angularfire",Z.q4.full,"app-compat"),A.Z.registerVersion("angular",M.q4F.full,it.toString())}static initializeApp(it,Qe){return{ngModule:$e,providers:[{provide:he,useValue:it},{provide:ie,useValue:Qe}]}}}return $e.\u0275fac=function(it){return new(it||$e)(M.LFG(M.Lbi))},$e.\u0275mod=M.oAB({type:$e}),$e.\u0275inj=M.cJS({providers:[le]}),$e})();function qe($e,Me,it,Qe,je){const[,Re,Mt]=globalThis.\u0275AngularfireInstanceCache.find(pt=>pt[0]===$e)||[];if(Re)return function rt($e,Me){try{return $e.toString()===Me.toString()}catch(it){return $e===Me}}(je,Mt)||(Pe("error",`${Me} was already initialized on the ${it} Firebase App with different settings.${ft?" You may need to reload as Firebase is not HMR aware.":""}`),Pe("warn",{is:je,was:Mt})),Re;{const pt=Qe();return globalThis.\u0275AngularfireInstanceCache.push([$e,pt,je]),pt}}const ft=!!Dt.hot,Pe=($e,...Me)=>{(0,M.X6Q)()&&"undefined"!=typeof console&&console[$e](...Me)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:(Dt,Te,L)=>{L.d(Te,{q4:()=>so,iC:()=>Ea,HU:()=>ba,vb:()=>aa,JM:()=>Yc});var M=L(5e3),A=L(5867),Z=L(5861),de=L(9681),ce=L(2090),_e=L(4859),ue=L(1877);const he="@firebase/installations",q="w:0.5.7",le="FIS_v2",$e=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Me(P){return P instanceof ce.ZR&&P.code.includes("request-failed")}function it({projectId:P}){return`https://firebaseinstallations.googleapis.com/v1/projects/${P}/installations`}function Qe(P){return{token:P.token,requestStatus:2,expiresIn:Ee(P.expiresIn),creationTime:Date.now()}}function je(P,F){return Re.apply(this,arguments)}function Re(){return(Re=(0,Z.Z)(function*(P,F){const ee=(yield F.json()).error;return $e.create("request-failed",{requestName:P,serverCode:ee.code,serverMessage:ee.message,serverStatus:ee.status})})).apply(this,arguments)}function Mt({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function pt(P,{refreshToken:F}){const K=Mt(P);return K.append("Authorization",function ke(P){return`${le} ${P}`}(F)),K}function se(P){return we.apply(this,arguments)}function we(){return(we=(0,Z.Z)(function*(P){const F=yield P();return F.status>=500&&F.status<600?P():F})).apply(this,arguments)}function Ee(P){return Number(P.replace("s","000"))}function Ne(P,F){return et.apply(this,arguments)}function et(){return(et=(0,Z.Z)(function*({appConfig:P,heartbeatServiceProvider:F},{fid:K}){const ee=it(P),De=Mt(P),Se=F.getImmediate({optional:!0});if(Se){const gn=yield Se.getHeartbeatsHeader();gn&&De.append("x-firebase-client",gn)}const Wt={method:"POST",headers:De,body:JSON.stringify({fid:K,authVersion:le,appId:P.appId,sdkVersion:q})},pn=yield se(()=>fetch(ee,Wt));if(pn.ok){const gn=yield pn.json();return{fid:gn.fid||K,registrationStatus:2,refreshToken:gn.refreshToken,authToken:Qe(gn.authToken)}}throw yield je("Create Installation",pn)})).apply(this,arguments)}function Fe(P){return new Promise(F=>{setTimeout(F,P)})}const un=/^[cdef][\w-]{21}$/;function Vt(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const K=function Pt(P){return function It(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return un.test(K)?K:""}catch(P){return""}}function mn(P){return`${P.appName}!${P.appId}`}const qt=new Map;function dr(P,F){const K=mn(P);Tn(K,F),function an(P,F){const K=function yr(){return!Xn&&"BroadcastChannel"in self&&(Xn=new BroadcastChannel("[Firebase] FID Change"),Xn.onmessage=P=>{Tn(P.data.key,P.data.fid)}),Xn}();K&&K.postMessage({key:P,fid:F}),function Cr(){0===qt.size&&Xn&&(Xn.close(),Xn=null)}()}(K,F)}function Tn(P,F){const K=qt.get(P);if(K)for(const ee of K)ee(F)}let Xn=null;const $n="firebase-installations-store";let zn=null;function Hn(){return zn||(zn=(0,ce.X3)("firebase-installations-database",1,(P,F)=>{0===F&&P.createObjectStore($n)})),zn}function Ht(P,F){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,Z.Z)(function*(P,F){const K=mn(P),De=(yield Hn()).transaction($n,"readwrite"),Se=De.objectStore($n),mt=yield Se.get(K);return yield Se.put(F,K),yield De.complete,(!mt||mt.fid!==F.fid)&&dr(P,F.fid),F})).apply(this,arguments)}function Tr(P){return Er.apply(this,arguments)}function Er(){return(Er=(0,Z.Z)(function*(P){const F=mn(P),ee=(yield Hn()).transaction($n,"readwrite");yield ee.objectStore($n).delete(F),yield ee.complete})).apply(this,arguments)}function fi(P,F){return ds.apply(this,arguments)}function ds(){return(ds=(0,Z.Z)(function*(P,F){const K=mn(P),De=(yield Hn()).transaction($n,"readwrite"),Se=De.objectStore($n),mt=yield Se.get(K),Wt=F(mt);return void 0===Wt?yield Se.delete(K):yield Se.put(Wt,K),yield De.complete,Wt&&(!mt||mt.fid!==Wt.fid)&&dr(P,Wt.fid),Wt})).apply(this,arguments)}function Ye(P){return ge.apply(this,arguments)}function ge(){return(ge=(0,Z.Z)(function*(P){let F;const K=yield fi(P.appConfig,ee=>{const De=Ce(ee),Se=Ue(P,De);return F=Se.registrationPromise,Se.installationEntry});return""===K.fid?{installationEntry:yield F}:{installationEntry:K,registrationPromise:F}})).apply(this,arguments)}function Ce(P){return Xt(P||{fid:Vt(),registrationStatus:0})}function Ue(P,F){if(0===F.registrationStatus){if(!navigator.onLine)return{installationEntry:F,registrationPromise:Promise.reject($e.create("app-offline"))};const K={fid:F.fid,registrationStatus:1,registrationTime:Date.now()},ee=function Je(P,F){return lt.apply(this,arguments)}(P,K);return{installationEntry:K,registrationPromise:ee}}return 1===F.registrationStatus?{installationEntry:F,registrationPromise:St(P)}:{installationEntry:F}}function lt(){return(lt=(0,Z.Z)(function*(P,F){try{const K=yield Ne(P,F);return Ht(P.appConfig,K)}catch(K){throw Me(K)&&409===K.customData.serverCode?yield Tr(P.appConfig):yield Ht(P.appConfig,{fid:F.fid,registrationStatus:0}),K}})).apply(this,arguments)}function St(P){return En.apply(this,arguments)}function En(){return(En=(0,Z.Z)(function*(P){let F=yield ln(P.appConfig);for(;1===F.registrationStatus;)yield Fe(100),F=yield ln(P.appConfig);if(0===F.registrationStatus){const{installationEntry:K,registrationPromise:ee}=yield Ye(P);return ee||K}return F})).apply(this,arguments)}function ln(P){return fi(P,F=>{if(!F)throw $e.create("installation-not-found");return Xt(F)})}function Xt(P){return function Zr(P){return 1===P.registrationStatus&&P.registrationTime+1e4<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function Wn(P,F){return hr.apply(this,arguments)}function hr(){return(hr=(0,Z.Z)(function*({appConfig:P,heartbeatServiceProvider:F},K){const ee=Ot(P,K),De=pt(P,K),Se=F.getImmediate({optional:!0});if(Se){const gn=yield Se.getHeartbeatsHeader();gn&&De.append("x-firebase-client",gn)}const Wt={method:"POST",headers:De,body:JSON.stringify({installation:{sdkVersion:q,appId:P.appId}})},pn=yield se(()=>fetch(ee,Wt));if(pn.ok)return Qe(yield pn.json());throw yield je("Generate Auth Token",pn)})).apply(this,arguments)}function Ot(P,{fid:F}){return`${it(P)}/${F}/authTokens:generate`}function An(P){return hn.apply(this,arguments)}function hn(){return(hn=(0,Z.Z)(function*(P,F=!1){let K;const ee=yield fi(P.appConfig,Se=>{if(!wn(Se))throw $e.create("not-registered");const mt=Se.authToken;if(!F&&fe(mt))return Se;if(1===mt.requestStatus)return K=Ct(P,F),Se;{if(!navigator.onLine)throw $e.create("app-offline");const Wt=be(Se);return K=Lt(P,Wt),Wt}});return K?yield K:ee.authToken})).apply(this,arguments)}function Ct(P,F){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,Z.Z)(function*(P,F){let K=yield Bt(P.appConfig);for(;1===K.authToken.requestStatus;)yield Fe(100),K=yield Bt(P.appConfig);const ee=K.authToken;return 0===ee.requestStatus?An(P,F):ee})).apply(this,arguments)}function Bt(P){return fi(P,F=>{if(!wn(F))throw $e.create("not-registered");return function ze(P){return 1===P.requestStatus&&P.requestTime+1e4<Date.now()}(F.authToken)?Object.assign(Object.assign({},F),{authToken:{requestStatus:0}}):F})}function Lt(P,F){return fn.apply(this,arguments)}function fn(){return(fn=(0,Z.Z)(function*(P,F){try{const K=yield Wn(P,F),ee=Object.assign(Object.assign({},F),{authToken:K});return yield Ht(P.appConfig,ee),K}catch(K){if(!Me(K)||401!==K.customData.serverCode&&404!==K.customData.serverCode){const ee=Object.assign(Object.assign({},F),{authToken:{requestStatus:0}});yield Ht(P.appConfig,ee)}else yield Tr(P.appConfig);throw K}})).apply(this,arguments)}function wn(P){return void 0!==P&&2===P.registrationStatus}function fe(P){return 2===P.requestStatus&&!function ne(P){const F=Date.now();return F<P.creationTime||P.creationTime+P.expiresIn<F+36e5}(P)}function be(P){const F={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:F})}function Et(){return(Et=(0,Z.Z)(function*(P){const F=P,{installationEntry:K,registrationPromise:ee}=yield Ye(F);return ee?ee.catch(console.error):An(F).catch(console.error),K.fid})).apply(this,arguments)}function Nt(){return(Nt=(0,Z.Z)(function*(P,F=!1){const K=P;return yield kr(K),(yield An(K,F)).token})).apply(this,arguments)}function kr(P){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,Z.Z)(function*(P){const{registrationPromise:F}=yield Ye(P);F&&(yield F)})).apply(this,arguments)}function rr(P){return $e.create("missing-app-config-values",{valueName:P})}const Hr="installations",ct=P=>{const F=P.getProvider("app").getImmediate(),K=function ti(P){if(!P||!P.options)throw rr("App Configuration");if(!P.name)throw rr("App Name");const F=["projectId","apiKey","appId"];for(const K of F)if(!P.options[K])throw rr(K);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}(F);return{app:F,appConfig:K,heartbeatServiceProvider:(0,de._getProvider)(F,"heartbeat"),_delete:()=>Promise.resolve()}},_n=P=>{const F=P.getProvider("app").getImmediate(),K=(0,de._getProvider)(F,Hr).getImmediate();return{getId:()=>function xe(P){return Et.apply(this,arguments)}(K),getToken:De=>function Kt(P){return Nt.apply(this,arguments)}(K,De)}};(function Vn(){(0,de._registerComponent)(new _e.wA(Hr,ct,"PUBLIC")),(0,de._registerComponent)(new _e.wA("installations-internal",_n,"PRIVATE"))})(),(0,de.registerVersion)(he,"0.5.7"),(0,de.registerVersion)(he,"0.5.7","esm2017");const Qr="@firebase/remote-config",or=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class lo{constructor(F,K,ee,De){this.client=F,this.storage=K,this.storageCache=ee,this.logger=De}isCachedDataFresh(F,K){if(!K)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ee=Date.now()-K,De=ee<=F;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ee}. Cache max age millis (minimumFetchIntervalMillis setting): ${F}. Is cache hit: ${De}.`),De}fetch(F){var K=this;return(0,Z.Z)(function*(){const[ee,De]=yield Promise.all([K.storage.getLastSuccessfulFetchTimestampMillis(),K.storage.getLastSuccessfulFetchResponse()]);if(De&&K.isCachedDataFresh(F.cacheMaxAgeMillis,ee))return De;F.eTag=De&&De.eTag;const Se=yield K.client.fetch(F),mt=[K.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Se.status&&mt.push(K.storage.setLastSuccessfulFetchResponse(Se)),yield Promise.all(mt),Se})()}}function fs(P=navigator){return P.languages&&P.languages[0]||P.language}class Is{constructor(F,K,ee,De,Se,mt){this.firebaseInstallations=F,this.sdkVersion=K,this.namespace=ee,this.projectId=De,this.apiKey=Se,this.appId=mt}fetch(F){var K=this;return(0,Z.Z)(function*(){const[ee,De]=yield Promise.all([K.firebaseInstallations.getId(),K.firebaseInstallations.getToken()]),mt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${K.projectId}/namespaces/${K.namespace}:fetch?key=${K.apiKey}`,Wt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":F.eTag||"*"},pn={sdk_version:K.sdkVersion,app_instance_id:ee,app_instance_id_token:De,app_id:K.appId,language_code:fs()},gn={method:"POST",headers:Wt,body:JSON.stringify(pn)},jn=fetch(mt,gn),Pn=new Promise((ci,yo)=>{F.signal.addEventListener(()=>{const Do=new Error("The operation was aborted.");Do.name="AbortError",yo(Do)})});let Es;try{yield Promise.race([jn,Pn]),Es=yield jn}catch(ci){let yo="fetch-client-network";throw"AbortError"===ci.name&&(yo="fetch-timeout"),or.create(yo,{originalErrorMessage:ci.message})}let Sn=Es.status;const Oa=Es.headers.get("ETag")||void 0;let Ja,la;if(200===Es.status){let ci;try{ci=yield Es.json()}catch(yo){throw or.create("fetch-client-parse",{originalErrorMessage:yo.message})}Ja=ci.entries,la=ci.state}if("INSTANCE_STATE_UNSPECIFIED"===la?Sn=500:"NO_CHANGE"===la?Sn=304:("NO_TEMPLATE"===la||"EMPTY_CONFIG"===la)&&(Ja={}),304!==Sn&&200!==Sn)throw or.create("fetch-status",{httpStatus:Sn});return{status:Sn,eTag:Oa,config:Ja}})()}}class Ro{constructor(F,K){this.client=F,this.storage=K}fetch(F){var K=this;return(0,Z.Z)(function*(){const ee=(yield K.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return K.attemptFetch(F,ee)})()}attemptFetch(F,{throttleEndTimeMillis:K,backoffCount:ee}){var De=this;return(0,Z.Z)(function*(){yield function Lr(P,F){return new Promise((K,ee)=>{const De=Math.max(F-Date.now(),0),Se=setTimeout(K,De);P.addEventListener(()=>{clearTimeout(Se),ee(or.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(F.signal,K);try{const Se=yield De.client.fetch(F);return yield De.storage.deleteThrottleMetadata(),Se}catch(Se){if(!function qo(P){if(!(P instanceof ce.ZR&&P.customData))return!1;const F=Number(P.customData.httpStatus);return 429===F||500===F||503===F||504===F}(Se))throw Se;const mt={throttleEndTimeMillis:Date.now()+(0,ce.$s)(ee),backoffCount:ee+1};return yield De.storage.setThrottleMetadata(mt),De.attemptFetch(F,mt)}})()}}class Le{constructor(F,K,ee,De,Se){this.app=F,this._client=K,this._storageCache=ee,this._storage=De,this._logger=Se,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function st(P,F){const K=P.target.error||void 0;return or.create(F,{originalErrorMessage:K&&K.message})}const vt="app_namespace_store";class Gn{constructor(F,K,ee,De=function Jr(){return new Promise((P,F)=>{try{const K=indexedDB.open("firebase_remote_config",1);K.onerror=ee=>{F(st(ee,"storage-open"))},K.onsuccess=ee=>{P(ee.target.result)},K.onupgradeneeded=ee=>{0===ee.oldVersion&&ee.target.result.createObjectStore(vt,{keyPath:"compositeKey"})}}catch(K){F(or.create("storage-open",{originalErrorMessage:K}))}})}()){this.appId=F,this.appName=K,this.namespace=ee,this.openDbPromise=De}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(F){return this.set("last_fetch_status",F)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(F){return this.set("last_successful_fetch_timestamp_millis",F)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(F){return this.set("last_successful_fetch_response",F)}getActiveConfig(){return this.get("active_config")}setActiveConfig(F){return this.set("active_config",F)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(F){return this.set("active_config_etag",F)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(F){return this.set("throttle_metadata",F)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(F){var K=this;return(0,Z.Z)(function*(){const ee=yield K.openDbPromise;return new Promise((De,Se)=>{const Wt=ee.transaction([vt],"readonly").objectStore(vt),pn=K.createCompositeKey(F);try{const gn=Wt.get(pn);gn.onerror=jn=>{Se(st(jn,"storage-get"))},gn.onsuccess=jn=>{const Pn=jn.target.result;De(Pn?Pn.value:void 0)}}catch(gn){Se(or.create("storage-get",{originalErrorMessage:gn&&gn.message}))}})})()}set(F,K){var ee=this;return(0,Z.Z)(function*(){const De=yield ee.openDbPromise;return new Promise((Se,mt)=>{const pn=De.transaction([vt],"readwrite").objectStore(vt),gn=ee.createCompositeKey(F);try{const jn=pn.put({compositeKey:gn,value:K});jn.onerror=Pn=>{mt(st(Pn,"storage-set"))},jn.onsuccess=()=>{Se()}}catch(jn){mt(or.create("storage-set",{originalErrorMessage:jn&&jn.message}))}})})()}delete(F){var K=this;return(0,Z.Z)(function*(){const ee=yield K.openDbPromise;return new Promise((De,Se)=>{const Wt=ee.transaction([vt],"readwrite").objectStore(vt),pn=K.createCompositeKey(F);try{const gn=Wt.delete(pn);gn.onerror=jn=>{Se(st(jn,"storage-delete"))},gn.onsuccess=()=>{De()}}catch(gn){Se(or.create("storage-delete",{originalErrorMessage:gn&&gn.message}))}})})()}createCompositeKey(F){return[this.appId,this.appName,this.namespace,F].join()}}class Bi{constructor(F){this.storage=F}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var F=this;return(0,Z.Z)(function*(){const K=F.storage.getLastFetchStatus(),ee=F.storage.getLastSuccessfulFetchTimestampMillis(),De=F.storage.getActiveConfig(),Se=yield K;Se&&(F.lastFetchStatus=Se);const mt=yield ee;mt&&(F.lastSuccessfulFetchTimestampMillis=mt);const Wt=yield De;Wt&&(F.activeConfig=Wt)})()}setLastFetchStatus(F){return this.lastFetchStatus=F,this.storage.setLastFetchStatus(F)}setLastSuccessfulFetchTimestampMillis(F){return this.lastSuccessfulFetchTimestampMillis=F,this.storage.setLastSuccessfulFetchTimestampMillis(F)}setActiveConfig(F){return this.activeConfig=F,this.storage.setActiveConfig(F)}}function Gi(){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,Z.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(P){return!1}})).apply(this,arguments)}!function Hi(){(0,de._registerComponent)(new _e.wA("remote-config",function P(F,{instanceIdentifier:K}){const ee=F.getProvider("app").getImmediate(),De=F.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw or.create("registration-window");if(!(0,ce.hl)())throw or.create("indexed-db-unavailable");const{projectId:Se,apiKey:mt,appId:Wt}=ee.options;if(!Se)throw or.create("registration-project-id");if(!mt)throw or.create("registration-api-key");if(!Wt)throw or.create("registration-app-id");const pn=new Gn(Wt,ee.name,K=K||"firebase"),gn=new Bi(pn),jn=new ue.Yd(Qr);jn.logLevel=ue.in.ERROR;const Pn=new Is(De,de.SDK_VERSION,K,Se,mt,Wt),Es=new Ro(Pn,pn),Sn=new lo(Es,pn,gn,jn),Oa=new Le(ee,Sn,gn,pn,jn);return function bi(P){const F=(0,ce.m9)(P);F._initializePromise||(F._initializePromise=F._storageCache.loadFromStorage().then(()=>{F._isInitializationComplete=!0}))}(Oa),Oa},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(Qr,"0.3.6"),(0,de.registerVersion)(Qr,"0.3.6","esm2017")}();const wo="/firebase-messaging-sw.js",ps="/firebase-cloud-messaging-push-scope",Ei="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",gs="google.c.a.c_id",js="google.c.a.c_l",ms="google.c.a.ts",ka="google.c.a.e";var Ki=(()=>{return(P=Ki||(Ki={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",Ki;var P})();function wi(P){const F=new Uint8Array(P);return btoa(String.fromCharCode(...F)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Xs(P){const K=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ee=atob(K),De=new Uint8Array(ee.length);for(let Se=0;Se<ee.length;++Se)De[Se]=ee.charCodeAt(Se);return De}const $s="fcm_token_details_db",Dr="fcm_token_object_Store";function da(P){return qi.apply(this,arguments)}function qi(){return qi=(0,Z.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Se=>Se.name).includes($s))return null;let F=null;return(yield(0,ce.X3)($s,5,function(){var ee=(0,Z.Z)(function*(De,Se,mt,Wt){var pn;if(Se<2||!De.objectStoreNames.contains(Dr))return;const gn=Wt.objectStore(Dr),jn=yield gn.index("fcmSenderId").get(P);if(yield gn.clear(),jn)if(2===Se){const Pn=jn;if(!Pn.auth||!Pn.p256dh||!Pn.endpoint)return;F={token:Pn.fcmToken,createTime:null!==(pn=Pn.createTime)&&void 0!==pn?pn:Date.now(),subscriptionOptions:{auth:Pn.auth,p256dh:Pn.p256dh,endpoint:Pn.endpoint,swScope:Pn.swScope,vapidKey:"string"==typeof Pn.vapidKey?Pn.vapidKey:wi(Pn.vapidKey)}}}else if(3===Se){const Pn=jn;F={token:Pn.fcmToken,createTime:Pn.createTime,subscriptionOptions:{auth:wi(Pn.auth),p256dh:wi(Pn.p256dh),endpoint:Pn.endpoint,swScope:Pn.swScope,vapidKey:wi(Pn.vapidKey)}}}else if(4===Se){const Pn=jn;F={token:Pn.fcmToken,createTime:Pn.createTime,subscriptionOptions:{auth:wi(Pn.auth),p256dh:wi(Pn.p256dh),endpoint:Pn.endpoint,swScope:Pn.swScope,vapidKey:wi(Pn.vapidKey)}}}});return function(De,Se,mt,Wt){return ee.apply(this,arguments)}}())).close(),yield(0,ce.Lj)($s),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),zs(F)?F:null}),qi.apply(this,arguments)}function zs(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:F}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof F.auth&&F.auth.length>0&&"string"==typeof F.p256dh&&F.p256dh.length>0&&"string"==typeof F.endpoint&&F.endpoint.length>0&&"string"==typeof F.swScope&&F.swScope.length>0&&"string"==typeof F.vapidKey&&F.vapidKey.length>0}const ys="firebase-messaging-store";let co=null;function Ds(){return co||(co=(0,ce.X3)("firebase-messaging-database",1,(P,F)=>{0===F&&P.createObjectStore(ys)})),co}function Kn(P){return R.apply(this,arguments)}function R(){return(R=(0,Z.Z)(function*(P){const F=He(P),ee=yield(yield Ds()).transaction(ys).objectStore(ys).get(F);if(ee)return ee;{const De=yield da(P.appConfig.senderId);if(De)return yield G(P,De),De}})).apply(this,arguments)}function G(P,F){return k.apply(this,arguments)}function k(){return(k=(0,Z.Z)(function*(P,F){const K=He(P),De=(yield Ds()).transaction(ys,"readwrite");return yield De.objectStore(ys).put(F,K),yield De.complete,F})).apply(this,arguments)}function Y(P){return oe.apply(this,arguments)}function oe(){return(oe=(0,Z.Z)(function*(P){const F=He(P),ee=(yield Ds()).transaction(ys,"readwrite");yield ee.objectStore(ys).delete(F),yield ee.complete})).apply(this,arguments)}function He({appConfig:P}){return P.appId}const At=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Dn(P,F){return kn.apply(this,arguments)}function kn(){return(kn=(0,Z.Z)(function*(P,F){const K=yield Ps(P),ee=Yt(F),De={method:"POST",headers:K,body:JSON.stringify(ee)};let Se;try{Se=yield(yield fetch(ar(P.appConfig),De)).json()}catch(mt){throw At.create("token-subscribe-failed",{errorInfo:mt})}if(Se.error)throw At.create("token-subscribe-failed",{errorInfo:Se.error.message});if(!Se.token)throw At.create("token-subscribe-no-token");return Se.token})).apply(this,arguments)}function Nn(P,F){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,Z.Z)(function*(P,F){const K=yield Ps(P),ee=Yt(F.subscriptionOptions),De={method:"PATCH",headers:K,body:JSON.stringify(ee)};let Se;try{Se=yield(yield fetch(`${ar(P.appConfig)}/${F.token}`,De)).json()}catch(mt){throw At.create("token-update-failed",{errorInfo:mt})}if(Se.error)throw At.create("token-update-failed",{errorInfo:Se.error.message});if(!Se.token)throw At.create("token-update-no-token");return Se.token})).apply(this,arguments)}function Mr(P,F){return wr.apply(this,arguments)}function wr(){return(wr=(0,Z.Z)(function*(P,F){const ee={method:"DELETE",headers:yield Ps(P)};try{const Se=yield(yield fetch(`${ar(P.appConfig)}/${F}`,ee)).json();if(Se.error)throw At.create("token-unsubscribe-failed",{errorInfo:Se.error.message})}catch(De){throw At.create("token-unsubscribe-failed",{errorInfo:De})}})).apply(this,arguments)}function ar({projectId:P}){return`https://fcmregistrations.googleapis.com/v1/projects/${P}/registrations`}function Ps(P){return yi.apply(this,arguments)}function yi(){return(yi=(0,Z.Z)(function*({appConfig:P,installations:F}){const K=yield F.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${K}`})})).apply(this,arguments)}function Yt({p256dh:P,auth:F,endpoint:K,vapidKey:ee}){const De={web:{endpoint:K,auth:F,p256dh:P}};return ee!==Ei&&(De.web.applicationPubKey=ee),De}const eo=6048e5;function uo(P){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,Z.Z)(function*(P){const F=yield Oo(P.swRegistration,P.vapidKey),K={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:F.endpoint,auth:wi(F.getKey("auth")),p256dh:wi(F.getKey("p256dh"))},ee=yield Kn(P.firebaseDependencies);if(ee){if(to(ee.subscriptionOptions,K))return Date.now()>=ee.createTime+eo?Na(P,{token:ee.token,createTime:Date.now(),subscriptionOptions:K}):ee.token;try{yield Mr(P.firebaseDependencies,ee.token)}catch(De){console.warn(De)}return dt(P.firebaseDependencies,K)}return dt(P.firebaseDependencies,K)})).apply(this,arguments)}function Yi(P){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,Z.Z)(function*(P){const F=yield Kn(P.firebaseDependencies);F&&(yield Mr(P.firebaseDependencies,F.token),yield Y(P.firebaseDependencies));const K=yield P.swRegistration.pushManager.getSubscription();return!K||K.unsubscribe()})).apply(this,arguments)}function Na(P,F){return ko.apply(this,arguments)}function ko(){return(ko=(0,Z.Z)(function*(P,F){try{const K=yield Nn(P.firebaseDependencies,F),ee=Object.assign(Object.assign({},F),{token:K,createTime:Date.now()});return yield G(P.firebaseDependencies,ee),K}catch(K){throw yield Yi(P),K}})).apply(this,arguments)}function dt(P,F){return qn.apply(this,arguments)}function qn(){return(qn=(0,Z.Z)(function*(P,F){const ee={token:yield Dn(P,F),createTime:Date.now(),subscriptionOptions:F};return yield G(P,ee),ee.token})).apply(this,arguments)}function Oo(P,F){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,Z.Z)(function*(P,F){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Xs(F)})})).apply(this,arguments)}function to(P,F){return F.vapidKey===P.vapidKey&&F.endpoint===P.endpoint&&F.auth===P.auth&&F.p256dh===P.p256dh}function Zo(P){const F={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function Zi(P,F){if(!F.notification)return;P.notification={};const K=F.notification.title;K&&(P.notification.title=K);const ee=F.notification.body;ee&&(P.notification.body=ee);const De=F.notification.image;De&&(P.notification.image=De)}(F,P),function Xr(P,F){!F.data||(P.data=F.data)}(F,P),function Ha(P,F){if(!F.fcmOptions)return;P.fcmOptions={};const K=F.fcmOptions.link;K&&(P.fcmOptions.link=K);const ee=F.fcmOptions.analytics_label;ee&&(P.fcmOptions.analyticsLabel=ee)}(F,P),F}function pl(P){return"object"==typeof P&&!!P&&gs in P}function Ga(P,F){const K=[];for(let ee=0;ee<P.length;ee++)K.push(P.charAt(ee)),ee<F.length&&K.push(F.charAt(ee));return K.join("")}function Ss(P){return At.create("missing-app-config-values",{valueName:P})}Ga("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ga("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Mi{constructor(F,K,ee){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const De=function Qo(P){if(!P||!P.options)throw Ss("App Configuration Object");if(!P.name)throw Ss("App Name");const F=["projectId","apiKey","appId","messagingSenderId"],{options:K}=P;for(const ee of F)if(!K[ee])throw Ss(ee);return{appName:P.name,projectId:K.projectId,apiKey:K.apiKey,appId:K.appId,senderId:K.messagingSenderId}}(F);this.firebaseDependencies={app:F,appConfig:De,installations:K,analyticsProvider:ee}}_delete(){return Promise.resolve()}}function rs(P){return No.apply(this,arguments)}function No(){return(No=(0,Z.Z)(function*(P){try{P.swRegistration=yield navigator.serviceWorker.register(wo,{scope:ps}),P.swRegistration.update().catch(()=>{})}catch(F){throw At.create("failed-service-worker-registration",{browserErrorMessage:F.message})}})).apply(this,arguments)}function Ts(P,F){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,Z.Z)(function*(P,F){if(!F&&!P.swRegistration&&(yield rs(P)),F||!P.swRegistration){if(!(F instanceof ServiceWorkerRegistration))throw At.create("invalid-sw-registration");P.swRegistration=F}})).apply(this,arguments)}function Fa(P,F){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,Z.Z)(function*(P,F){F?P.vapidKey=F:P.vapidKey||(P.vapidKey=Ei)})).apply(this,arguments)}function Wa(){return(Wa=(0,Z.Z)(function*(P,F){if(!navigator)throw At.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw At.create("permission-blocked");return yield Fa(P,null==F?void 0:F.vapidKey),yield Ts(P,null==F?void 0:F.serviceWorkerRegistration),uo(P)})).apply(this,arguments)}function fa(P,F,K){return Io.apply(this,arguments)}function Io(){return(Io=(0,Z.Z)(function*(P,F,K){const ee=Ka(F);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(ee,{message_id:K[gs],message_name:K[js],message_time:K[ms],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ka(P){switch(P){case Ki.NOTIFICATION_CLICKED:return"notification_open";case Ki.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Jo(){return(Jo=(0,Z.Z)(function*(P,F){const K=F.data;if(!K.isFirebaseMessaging)return;P.onMessageHandler&&K.messageType===Ki.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(Zo(K)):P.onMessageHandler.next(Zo(K)));const ee=K.data;pl(ee)&&"1"===ee[ka]&&(yield fa(P,K.messageType,ee))})).apply(this,arguments)}const Xo="@firebase/messaging",ea=P=>{const F=new Mi(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",K=>function pa(P,F){return Jo.apply(this,arguments)}(F,K)),F},Ai=P=>{const F=P.getProvider("messaging").getImmediate();return{getToken:ee=>function ha(P,F){return Wa.apply(this,arguments)}(F,ee)}};function qa(){return ho.apply(this,arguments)}function ho(){return(ho=(0,Z.Z)(function*(){try{yield(0,ce.eu)()}catch(P){return!1}return"undefined"!=typeof window&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ga(){(0,de._registerComponent)(new _e.wA("messaging",ea,"PUBLIC")),(0,de._registerComponent)(new _e.wA("messaging-internal",Ai,"PRIVATE")),(0,de.registerVersion)(Xo,"0.9.11"),(0,de.registerVersion)(Xo,"0.9.11","esm2017")}();const La="analytics",nn="firebase_id",po="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Lo="https://www.googletagmanager.com/gtag/js",lr=new ue.Yd("@firebase/analytics");function ya(P){return Promise.all(P.map(F=>F.catch(K=>K)))}function Za(P,F){const K=document.createElement("script");K.src=`${Lo}?l=${P}&id=${F}`,K.async=!0,document.head.appendChild(K)}function is(P,F,K,ee,De,Se){return ki.apply(this,arguments)}function ki(){return(ki=(0,Z.Z)(function*(P,F,K,ee,De,Se){const mt=ee[De];try{if(mt)yield F[mt];else{const pn=(yield ya(K)).find(gn=>gn.measurementId===De);pn&&(yield F[pn.appId])}}catch(Wt){lr.error(Wt)}P("config",De,Se)})).apply(this,arguments)}function na(P,F,K,ee,De){return go.apply(this,arguments)}function go(){return(go=(0,Z.Z)(function*(P,F,K,ee,De){try{let Se=[];if(De&&De.send_to){let mt=De.send_to;Array.isArray(mt)||(mt=[mt]);const Wt=yield ya(K);for(const pn of mt){const gn=Wt.find(Pn=>Pn.measurementId===pn),jn=gn&&F[gn.appId];if(!jn){Se=[];break}Se.push(jn)}}0===Se.length&&(Se=Object.values(F)),yield Promise.all(Se),P("event",ee,De||{})}catch(Se){lr.error(Se)}})).apply(this,arguments)}function ss(){const P=window.document.getElementsByTagName("script");for(const F of Object.values(P))if(F.src&&F.src.includes(Lo))return F;return null}const ri=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ro=new class ia{constructor(F={},K=1e3){this.throttleMetadata=F,this.intervalMillis=K}getThrottleMetadata(F){return this.throttleMetadata[F]}setThrottleMetadata(F,K){this.throttleMetadata[F]=K}deleteThrottleMetadata(F){delete this.throttleMetadata[F]}};function va(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function ml(P){return Or.apply(this,arguments)}function Or(){return(Or=(0,Z.Z)(function*(P){var F;const{appId:K,apiKey:ee}=P,De={method:"GET",headers:va(ee)},Se=po.replace("{app-id}",K),mt=yield fetch(Se,De);if(200!==mt.status&&304!==mt.status){let Wt="";try{const pn=yield mt.json();(null===(F=pn.error)||void 0===F?void 0:F.message)&&(Wt=pn.error.message)}catch(pn){}throw ri.create("config-fetch-failed",{httpStatus:mt.status,responseMessage:Wt})}return mt.json()})).apply(this,arguments)}function Fl(P){return vs.apply(this,arguments)}function vs(){return(vs=(0,Z.Z)(function*(P,F=ro,K){const{appId:ee,apiKey:De,measurementId:Se}=P.options;if(!ee)throw ri.create("no-app-id");if(!De){if(Se)return{measurementId:Se,appId:ee};throw ri.create("no-api-key")}const mt=F.getThrottleMetadata(ee)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Wt=new Cs;return setTimeout((0,Z.Z)(function*(){Wt.abort()}),void 0!==K?K:6e4),Ua({appId:ee,apiKey:De,measurementId:Se},mt,Wt,F)})).apply(this,arguments)}function Ua(P,F,K){return io.apply(this,arguments)}function io(){return(io=(0,Z.Z)(function*(P,{throttleEndTimeMillis:F,backoffCount:K},ee,De=ro){const{appId:Se,measurementId:mt}=P;try{yield ji(ee,F)}catch(Wt){if(mt)return lr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${Wt.message}]`),{appId:Se,measurementId:mt};throw Wt}try{const Wt=yield ml(P);return De.deleteThrottleMetadata(Se),Wt}catch(Wt){if(!Uo(Wt)){if(De.deleteThrottleMetadata(Se),mt)return lr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${Wt.message}]`),{appId:Se,measurementId:mt};throw Wt}const pn=503===Number(Wt.customData.httpStatus)?(0,ce.$s)(K,De.intervalMillis,30):(0,ce.$s)(K,De.intervalMillis),gn={throttleEndTimeMillis:Date.now()+pn,backoffCount:K+1};return De.setThrottleMetadata(Se,gn),lr.debug(`Calling attemptFetch again in ${pn} millis`),Ua(P,gn,ee,De)}})).apply(this,arguments)}function ji(P,F){return new Promise((K,ee)=>{const De=Math.max(F-Date.now(),0),Se=setTimeout(K,De);P.addEventListener(()=>{clearTimeout(Se),ee(ri.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}function Uo(P){if(!(P instanceof ce.ZR&&P.customData))return!1;const F=Number(P.customData.httpStatus);return 429===F||500===F||503===F||504===F}class Cs{constructor(){this.listeners=[]}addEventListener(F){this.listeners.push(F)}abort(){this.listeners.forEach(F=>F())}}function sa(){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,Z.Z)(function*(){if(!(0,ce.hl)())return lr.warn(ri.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(P){return lr.warn(ri.create("indexeddb-unavailable",{errorInfo:P}).message),!1}return!0})).apply(this,arguments)}function Ir(){return(Ir=(0,Z.Z)(function*(P,F,K,ee,De,Se,mt){var Wt;const pn=Fl(P);pn.then(Sn=>{K[Sn.measurementId]=Sn.appId,P.options.measurementId&&Sn.measurementId!==P.options.measurementId&&lr.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${Sn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Sn=>lr.error(Sn)),F.push(pn);const gn=sa().then(Sn=>{if(Sn)return ee.getId()}),[jn,Pn]=yield Promise.all([pn,gn]);ss()||Za(Se,jn.measurementId),De("js",new Date);const Es=null!==(Wt=null==mt?void 0:mt.config)&&void 0!==Wt?Wt:{};return Es.origin="firebase",Es.update=!0,null!=Pn&&(Es[nn]=Pn),De("config",jn.measurementId,Es),jn.measurementId})).apply(this,arguments)}class mo{constructor(F){this.app=F}_delete(){return delete I[this.app.options.appId],Promise.resolve()}}let I={},E=[];const b={};let U,W,T="dataLayer",ae=!1;function dn(P,F,K){!function Ft(){const P=[];if((0,ce.ru)()&&P.push("This is a browser extension environment."),(0,ce.zI)()||P.push("Cookies are not available."),P.length>0){const F=P.map((ee,De)=>`(${De+1}) ${ee}`).join(" "),K=ri.create("invalid-analytics-context",{errorInfo:F});lr.warn(K.message)}}();const ee=P.options.appId;if(!ee)throw ri.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw ri.create("no-api-key");lr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=I[ee])throw ri.create("already-exists",{id:ee});if(!ae){!function _s(P){let F=[];Array.isArray(window[P])?F=window[P]:window[P]=F}(T);const{wrappedGtag:Se,gtagCore:mt}=function _a(P,F,K,ee,De){let Se=function(...mt){window[ee].push(arguments)};return window[De]&&"function"==typeof window[De]&&(Se=window[De]),window[De]=function ra(P,F,K,ee){function Se(){return(Se=(0,Z.Z)(function*(mt,Wt,pn){try{"event"===mt?yield na(P,F,K,Wt,pn):"config"===mt?yield is(P,F,K,ee,Wt,pn):P("set",Wt)}catch(gn){lr.error(gn)}})).apply(this,arguments)}return function De(mt,Wt,pn){return Se.apply(this,arguments)}}(Se,P,F,K),{gtagCore:Se,wrappedGtag:window[De]}}(I,E,b,T,"gtag");W=Se,U=mt,ae=!0}return I[ee]=function yt(P,F,K,ee,De,Se,mt){return Ir.apply(this,arguments)}(P,E,b,F,U,T,K),new mo(P)}function cr(){return(cr=(0,Z.Z)(function*(P,F,K,ee,De){if(De&&De.global)P("event",K,ee);else{const Se=yield F;P("event",K,Object.assign(Object.assign({},ee),{send_to:Se}))}})).apply(this,arguments)}function Vr(){return rn.apply(this,arguments)}function rn(){return(rn=(0,Z.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch(P){return!1}})).apply(this,arguments)}const Ll="@firebase/analytics";!function Va(){(0,de._registerComponent)(new _e.wA(La,(F,{options:K})=>dn(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),K),"PUBLIC")),(0,de._registerComponent)(new _e.wA("analytics-internal",function P(F){try{const K=F.getProvider(La).getImmediate();return{logEvent:(ee,De,Se)=>function nr(P,F,K,ee){P=(0,ce.m9)(P),function Qt(P,F,K,ee,De){return cr.apply(this,arguments)}(W,I[P.app.options.appId],F,K,ee).catch(De=>lr.error(De))}(K,ee,De,Se)}}catch(K){throw ri.create("interop-component-reg-failed",{reason:K})}},"PRIVATE")),(0,de.registerVersion)(Ll,"0.7.7"),(0,de.registerVersion)(Ll,"0.7.7","esm2017")}();var Wc=L(233),$r=L(4986),Kc=L(8505),Ln=L(9468),ei=L(5363);const so=new M.GfV("7.3.0"),Qa="__angularfire_symbol__analyticsIsSupportedValue",Br="__angularfire_symbol__analyticsIsSupported",Cn="__angularfire_symbol__remoteConfigIsSupportedValue",As="__angularfire_symbol__remoteConfigIsSupported",oo="__angularfire_symbol__messagingIsSupportedValue",Rs="__angularfire_symbol__messagingIsSupported";function Yc(P,F,K){if(F){if(1===F.length)return F[0];const Se=F.filter(mt=>mt.app===K);if(1===Se.length)return Se[0]}return K.container.getProvider(P).getImmediate({optional:!0})}globalThis[Br]||(globalThis[Br]=Vr().then(P=>globalThis[Qa]=P).catch(()=>globalThis[Qa]=!1)),globalThis[Rs]||(globalThis[Rs]=qa().then(P=>globalThis[oo]=P).catch(()=>globalThis[oo]=!1)),globalThis[As]||(globalThis[As]=Gi().then(P=>globalThis[Cn]=P).catch(()=>globalThis[Cn]=!1));const aa=(P,F)=>{const K=F?[F]:(0,A.C6)(),ee=[];return K.forEach(De=>{De.container.getProvider(P).instances.forEach(mt=>{ee.includes(mt)||ee.push(mt)})}),ee};function tt(){}class _i{constructor(F,K=Wc.N){this.zone=F,this.delegate=K}now(){return this.delegate.now()}schedule(F,K,ee){const De=this.zone;return this.delegate.schedule(function(mt){De.runGuarded(()=>{F.apply(this,[mt])})},K,ee)}}class ao{constructor(F){this.zone=F,this.task=null}call(F,K){const ee=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",tt,{},tt,tt)),K.pipe((0,Kc.b)({next:ee,complete:ee,error:ee})).subscribe(F).add(ee)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ba=(()=>{class P{constructor(K){this.ngZone=K,this.outsideAngular=K.runOutsideAngular(()=>new _i(Zone.current)),this.insideAngular=K.run(()=>new _i(Zone.current,$r.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(K){return new(K||P)(M.LFG(M.R0b))},P.\u0275prov=M.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function ks(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function Ea(P){return ks(),function Vl(P){return function(K){return(K=K.lift(new ao(P.ngZone))).pipe((0,Ln.R)(P.outsideAngular),(0,ei.Q)(P.insideAngular))}}(ks())(P)}},2090:(Dt,Te,L)=>{L.d(Te,{BH:()=>qe,LL:()=>It,ZR:()=>Fe,zI:()=>ke,US:()=>ue,tV:()=>X,L:()=>ie,$s:()=>Zr,r3:()=>Tn,Sg:()=>rt,ne:()=>Ht,vZ:()=>Cr,ZB:()=>le,Lj:()=>fn,pd:()=>zn,m9:()=>Ot,z$:()=>ft,jU:()=>Me,ru:()=>it,d:()=>je,xb:()=>Xn,w1:()=>Re,hl:()=>we,uI:()=>Pe,UG:()=>$e,b$:()=>Qe,G6:()=>se,Mn:()=>Mt,X3:()=>Lt,xO:()=>qr,zd:()=>$n,eu:()=>Ee});var M=L(5861);const ce=function(fe){const ne=[];let be=0;for(let ze=0;ze<fe.length;ze++){let xe=fe.charCodeAt(ze);xe<128?ne[be++]=xe:xe<2048?(ne[be++]=xe>>6|192,ne[be++]=63&xe|128):55296==(64512&xe)&&ze+1<fe.length&&56320==(64512&fe.charCodeAt(ze+1))?(xe=65536+((1023&xe)<<10)+(1023&fe.charCodeAt(++ze)),ne[be++]=xe>>18|240,ne[be++]=xe>>12&63|128,ne[be++]=xe>>6&63|128,ne[be++]=63&xe|128):(ne[be++]=xe>>12|224,ne[be++]=xe>>6&63|128,ne[be++]=63&xe|128)}return ne},ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(fe,ne){if(!Array.isArray(fe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const be=ne?this.byteToCharMapWebSafe_:this.byteToCharMap_,ze=[];for(let xe=0;xe<fe.length;xe+=3){const Et=fe[xe],Kt=xe+1<fe.length,Nt=Kt?fe[xe+1]:0,kr=xe+2<fe.length,Bn=kr?fe[xe+2]:0;let er=(15&Nt)<<2|Bn>>6,Un=63&Bn;kr||(Un=64,Kt||(er=64)),ze.push(be[Et>>2],be[(3&Et)<<4|Nt>>4],be[er],be[Un])}return ze.join("")},encodeString(fe,ne){return this.HAS_NATIVE_SUPPORT&&!ne?btoa(fe):this.encodeByteArray(ce(fe),ne)},decodeString(fe,ne){return this.HAS_NATIVE_SUPPORT&&!ne?atob(fe):function(fe){const ne=[];let be=0,ze=0;for(;be<fe.length;){const xe=fe[be++];if(xe<128)ne[ze++]=String.fromCharCode(xe);else if(xe>191&&xe<224){const Et=fe[be++];ne[ze++]=String.fromCharCode((31&xe)<<6|63&Et)}else if(xe>239&&xe<365){const kr=((7&xe)<<18|(63&fe[be++])<<12|(63&fe[be++])<<6|63&fe[be++])-65536;ne[ze++]=String.fromCharCode(55296+(kr>>10)),ne[ze++]=String.fromCharCode(56320+(1023&kr))}else{const Et=fe[be++],Kt=fe[be++];ne[ze++]=String.fromCharCode((15&xe)<<12|(63&Et)<<6|63&Kt)}}return ne.join("")}(this.decodeStringToByteArray(fe,ne))},decodeStringToByteArray(fe,ne){this.init_();const be=ne?this.charToByteMapWebSafe_:this.charToByteMap_,ze=[];for(let xe=0;xe<fe.length;){const Et=be[fe.charAt(xe++)],Nt=xe<fe.length?be[fe.charAt(xe)]:0;++xe;const Bn=xe<fe.length?be[fe.charAt(xe)]:64;++xe;const Mn=xe<fe.length?be[fe.charAt(xe)]:64;if(++xe,null==Et||null==Nt||null==Bn||null==Mn)throw Error();ze.push(Et<<2|Nt>>4),64!==Bn&&(ze.push(Nt<<4&240|Bn>>2),64!==Mn&&ze.push(Bn<<6&192|Mn))}return ze},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let fe=0;fe<this.ENCODED_VALS.length;fe++)this.byteToCharMap_[fe]=this.ENCODED_VALS.charAt(fe),this.charToByteMap_[this.byteToCharMap_[fe]]=fe,this.byteToCharMapWebSafe_[fe]=this.ENCODED_VALS_WEBSAFE.charAt(fe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[fe]]=fe,fe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(fe)]=fe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(fe)]=fe)}}},ie=function(fe){return function(fe){const ne=ce(fe);return ue.encodeByteArray(ne,!0)}(fe).replace(/\./g,"")},X=function(fe){try{return ue.decodeString(fe,!0)}catch(ne){console.error("base64Decode failed: ",ne)}return null};function le(fe,ne){if(!(ne instanceof Object))return ne;switch(ne.constructor){case Date:return new Date(ne.getTime());case Object:void 0===fe&&(fe={});break;case Array:fe=[];break;default:return ne}for(const be in ne)!ne.hasOwnProperty(be)||!ot(be)||(fe[be]=le(fe[be],ne[be]));return fe}function ot(fe){return"__proto__"!==fe}class qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ne,be)=>{this.resolve=ne,this.reject=be})}wrapCallback(ne){return(be,ze)=>{be?this.reject(be):this.resolve(ze),"function"==typeof ne&&(this.promise.catch(()=>{}),1===ne.length?ne(be):ne(be,ze))}}}function rt(fe,ne){if(fe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ze=ne||"demo-project",xe=fe.iat||0,Et=fe.sub||fe.user_id;if(!Et)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Kt=Object.assign({iss:`https://securetoken.google.com/${ze}`,aud:ze,iat:xe,exp:xe+3600,auth_time:xe,sub:Et,user_id:Et,firebase:{sign_in_provider:"custom",identities:{}}},fe);return[ie(JSON.stringify({alg:"none",type:"JWT"})),ie(JSON.stringify(Kt)),""].join(".")}function ft(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function $e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(fe){return!1}}function Me(){return"object"==typeof self&&self.self===self}function it(){const fe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof fe&&void 0!==fe.id}function Qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function je(){return ft().indexOf("Electron/")>=0}function Re(){const fe=ft();return fe.indexOf("MSIE ")>=0||fe.indexOf("Trident/")>=0}function Mt(){return ft().indexOf("MSAppHost/")>=0}function se(){return!$e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function we(){return"object"==typeof indexedDB}function Ee(){return new Promise((fe,ne)=>{try{let be=!0;const ze="validate-browser-context-for-indexeddb-analytics-module",xe=self.indexedDB.open(ze);xe.onsuccess=()=>{xe.result.close(),be||self.indexedDB.deleteDatabase(ze),fe(!0)},xe.onupgradeneeded=()=>{be=!1},xe.onerror=()=>{var Et;ne((null===(Et=xe.error)||void 0===Et?void 0:Et.message)||"")}}catch(be){ne(be)}})}function ke(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Fe extends Error{constructor(ne,be,ze){super(be),this.code=ne,this.customData=ze,this.name="FirebaseError",Object.setPrototypeOf(this,Fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,It.prototype.create)}}class It{constructor(ne,be,ze){this.service=ne,this.serviceName=be,this.errors=ze}create(ne,...be){const ze=be[0]||{},xe=`${this.service}/${ne}`,Et=this.errors[ne],Kt=Et?function un(fe,ne){return fe.replace(ur,(be,ze)=>{const xe=ne[ze];return null!=xe?String(xe):`<${ze}?>`})}(Et,ze):"Error";return new Fe(xe,`${this.serviceName}: ${Kt} (${xe}).`,ze)}}const ur=/\{\$([^}]+)}/g;function Tn(fe,ne){return Object.prototype.hasOwnProperty.call(fe,ne)}function Xn(fe){for(const ne in fe)if(Object.prototype.hasOwnProperty.call(fe,ne))return!1;return!0}function Cr(fe,ne){if(fe===ne)return!0;const be=Object.keys(fe),ze=Object.keys(ne);for(const xe of be){if(!ze.includes(xe))return!1;const Et=fe[xe],Kt=ne[xe];if(sr(Et)&&sr(Kt)){if(!Cr(Et,Kt))return!1}else if(Et!==Kt)return!1}for(const xe of ze)if(!be.includes(xe))return!1;return!0}function sr(fe){return null!==fe&&"object"==typeof fe}function qr(fe){const ne=[];for(const[be,ze]of Object.entries(fe))Array.isArray(ze)?ze.forEach(xe=>{ne.push(encodeURIComponent(be)+"="+encodeURIComponent(xe))}):ne.push(encodeURIComponent(be)+"="+encodeURIComponent(ze));return ne.length?"&"+ne.join("&"):""}function $n(fe){const ne={};return fe.replace(/^\?/,"").split("&").forEach(ze=>{if(ze){const[xe,Et]=ze.split("=");ne[decodeURIComponent(xe)]=decodeURIComponent(Et)}}),ne}function zn(fe){const ne=fe.indexOf("?");if(!ne)return"";const be=fe.indexOf("#",ne);return fe.substring(ne,be>0?be:void 0)}function Ht(fe,ne){const be=new Yr(fe,ne);return be.subscribe.bind(be)}class Yr{constructor(ne,be){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=be,this.task.then(()=>{ne(this)}).catch(ze=>{this.error(ze)})}next(ne){this.forEachObserver(be=>{be.next(ne)})}error(ne){this.forEachObserver(be=>{be.error(ne)}),this.close(ne)}complete(){this.forEachObserver(ne=>{ne.complete()}),this.close()}subscribe(ne,be,ze){let xe;if(void 0===ne&&void 0===be&&void 0===ze)throw new Error("Missing Observer.");xe=function Er(fe,ne){if("object"!=typeof fe||null===fe)return!1;for(const be of ne)if(be in fe&&"function"==typeof fe[be])return!0;return!1}(ne,["next","error","complete"])?ne:{next:ne,error:be,complete:ze},void 0===xe.next&&(xe.next=fi),void 0===xe.error&&(xe.error=fi),void 0===xe.complete&&(xe.complete=fi);const Et=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?xe.error(this.finalError):xe.complete()}catch(Kt){}}),this.observers.push(xe),Et}unsubscribeOne(ne){void 0===this.observers||void 0===this.observers[ne]||(delete this.observers[ne],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ne){if(!this.finalized)for(let be=0;be<this.observers.length;be++)this.sendOne(be,ne)}sendOne(ne,be){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ne])try{be(this.observers[ne])}catch(ze){"undefined"!=typeof console&&console.error&&console.error(ze)}})}close(ne){this.finalized||(this.finalized=!0,void 0!==ne&&(this.finalError=ne),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fi(){}function Zr(fe,ne=1e3,be=2){const ze=ne*Math.pow(be,fe),xe=Math.round(.5*ze*(Math.random()-.5)*2);return Math.min(144e5,ze+xe)}function Ot(fe){return fe&&fe._delegate?fe._delegate:fe}function An(fe,ne){return new Promise((be,ze)=>{fe.onsuccess=xe=>{be(xe.target.result)},fe.onerror=xe=>{var Et;ze(`${ne}: ${null===(Et=xe.target.error)||void 0===Et?void 0:Et.message}`)}})}class hn{constructor(ne){this._db=ne,this.objectStoreNames=this._db.objectStoreNames}transaction(ne,be){return new Ct(this._db.transaction.call(this._db,ne,be))}createObjectStore(ne,be){return new Ze(this._db.createObjectStore(ne,be))}close(){this._db.close()}}class Ct{constructor(ne){this._transaction=ne,this.complete=new Promise((be,ze)=>{this._transaction.oncomplete=function(){be()},this._transaction.onerror=()=>{ze(this._transaction.error)},this._transaction.onabort=()=>{ze(this._transaction.error)}})}objectStore(ne){return new Ze(this._transaction.objectStore(ne))}}class Ze{constructor(ne){this._store=ne}index(ne){return new Bt(this._store.index(ne))}createIndex(ne,be,ze){return new Bt(this._store.createIndex(ne,be,ze))}get(ne){return An(this._store.get(ne),"Error reading from IndexedDB")}put(ne,be){return An(this._store.put(ne,be),"Error writing to IndexedDB")}delete(ne){return An(this._store.delete(ne),"Error deleting from IndexedDB")}clear(){return An(this._store.clear(),"Error clearing IndexedDB object store")}}class Bt{constructor(ne){this._index=ne}get(ne){return An(this._index.get(ne),"Error reading from IndexedDB")}}function Lt(fe,ne,be){return new Promise((ze,xe)=>{try{const Et=indexedDB.open(fe,ne);Et.onsuccess=Kt=>{ze(new hn(Kt.target.result))},Et.onerror=Kt=>{var Nt;xe(`Error opening indexedDB: ${null===(Nt=Kt.target.error)||void 0===Nt?void 0:Nt.message}`)},Et.onupgradeneeded=Kt=>{be(new hn(Et.result),Kt.oldVersion,Kt.newVersion,new Ct(Et.transaction))}}catch(Et){xe(`Error opening indexedDB: ${Et.message}`)}})}function fn(fe){return wn.apply(this,arguments)}function wn(){return(wn=(0,M.Z)(function*(fe){return new Promise((ne,be)=>{try{const ze=indexedDB.deleteDatabase(fe);ze.onsuccess=()=>{ne()},ze.onerror=xe=>{var Et;be(`Error deleting indexedDB database "${fe}": ${null===(Et=xe.target.error)||void 0===Et?void 0:Et.message}`)}}catch(ze){be(`Error deleting indexedDB database "${fe}": ${ze.message}`)}})})).apply(this,arguments)}},629:(Dt,Te,L)=>{L.d(Te,{e:()=>he});var M=L(1135),A=L(4004),Z=L(127),de=L(5e3),ce=L(520),_e=L(3632),ue=L(3385);let he=(()=>{class ie{constructor(q,le,ot){this.http=q,this.usuarioSrv=le,this.auth=ot,this.usuarioSubject=new M.X(null),this.usuario=this.usuarioSubject.asObservable(),this.auth.authState.subscribe(qe=>{this.usuarioSrv.getOne(qe.uid).subscribe(rt=>{this.usuarioSubject.next(rt)})})}get usuarioValue(){return this.usuarioSubject.value}login(q,le){return this.auth.signInWithEmailAndPassword(q,le)}logout(){return this.auth.signOut()}register(q,le){return this.auth.createUserWithEmailAndPassword(q,le)}emailVerified(){this.auth.currentUser.then(q=>{q&&q.sendEmailVerification()})}googleAuth(){return this.auth.signInWithPopup(new Z.Z.auth.GoogleAuthProvider)}authenticated(){return this.auth.authState.pipe((0,A.U)(q=>null!=q))}getUsuario(){return this.auth.authState}getToken(){return JSON.parse(localStorage.getItem("usuario")).token}}return ie.\u0275fac=function(q){return new(q||ie)(de.LFG(ce.eN),de.LFG(_e.L),de.LFG(ue.zQ))},ie.\u0275prov=de.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})()},3632:(Dt,Te,L)=>{L.d(Te,{L:()=>de});var M=L(5861),A=L(5e3),Z=L(7407);let de=(()=>{class ce{constructor(ue){this.firestore=ue}getAll(){return this.firestore.collection("profiles").valueChanges({idField:"id"})}getAllMatches(ue){return this.firestore.collection("profiles",he=>he.orderBy("username").startAt(ue).endAt(ue+"\uf8ff")).valueChanges({idField:"id"})}getAllMatchesRol(ue){return this.firestore.collection("profiles",he=>he.where("rol.code","==",ue)).valueChanges({idField:"id"})}getAllMatchesArtista(ue){return this.firestore.collection("profiles",he=>he.where("rol.code","==","ARTISTA").orderBy("username").startAt(ue).endAt(ue+"\uf8ff")).valueChanges({idField:"id"})}getAllMatchesGenre(ue){return this.firestore.collection("profiles",he=>he.where("genre.code","==",ue).orderBy("username")).valueChanges({idField:"id"})}getOne(ue){return this.firestore.collection("profiles").doc(ue).valueChanges({idField:"id"})}setUsuario(ue){this.usuario=ue}getUsuario(){return this.usuario}create(ue){var he=this;return(0,M.Z)(function*(){try{return yield he.firestore.collection("profiles").doc(ue.id).set(ue)}catch(ie){return ie}})()}update(ue){var he=this;return(0,M.Z)(function*(){try{return yield he.firestore.collection("profiles").doc(ue.id).update(Object.assign({},ue))}catch(ie){return ie}})()}delete(ue){var he=this;return(0,M.Z)(function*(){try{return yield he.firestore.collection("profiles").doc(ue).delete()}catch(ie){return ie}})()}}return ce.\u0275fac=function(ue){return new(ue||ce)(A.LFG(Z.ST))},ce.\u0275prov=A.Yz7({token:ce,factory:ce.\u0275fac,providedIn:"root"}),ce})()},2340:(Dt,Te,L)=>{L.d(Te,{N:()=>M});const M={firebase:{projectId:"samesouls-a0c25",appId:"1:1070620659890:web:59375834fa9a4fdb4779ab",databaseURL:"https://samesouls-a0c25-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"samesouls-a0c25.appspot.com",apiKey:"AIzaSyBWCalOGtysQ3cQdhoBda-hi69CzyDk4JU",authDomain:"samesouls-a0c25.firebaseapp.com",messagingSenderId:"1070620659890",measurementId:"G-KQQEK8QH2F"},production:!0,clientId:"ARu-WzovK2xn7HnTWan2p9sM1bM6VqPnkOcPgAeM85pNdRyOXbU9QlnGD0x3__9uhBlg-lR4DFmppvPQ"}},5181:(Dt,Te,L)=>{var M=L(9808),A=L(5e3);class Z extends M.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class de extends Z{static makeCurrent(){(0,M.HT)(new de)}onAndCancel(g,u,_){return g.addEventListener(u,_,!1),()=>{g.removeEventListener(u,_,!1)}}dispatchEvent(g,u){g.dispatchEvent(u)}remove(g){g.parentNode&&g.parentNode.removeChild(g)}createElement(g,u){return(u=u||this.getDefaultDocument()).createElement(g)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(g){return g.nodeType===Node.ELEMENT_NODE}isShadowRoot(g){return g instanceof DocumentFragment}getGlobalEventTarget(g,u){return"window"===u?window:"document"===u?g:"body"===u?g.body:null}getBaseHref(g){const u=function _e(){return ce=ce||document.querySelector("base"),ce?ce.getAttribute("href"):null}();return null==u?null:function he(m){ue=ue||document.createElement("a"),ue.setAttribute("href",m);const g=ue.pathname;return"/"===g.charAt(0)?g:`/${g}`}(u)}resetBaseElement(){ce=null}getUserAgent(){return window.navigator.userAgent}getCookie(g){return(0,M.Mx)(document.cookie,g)}}let ue,ce=null;const ie=new A.OlP("TRANSITION_ID"),q=[{provide:A.ip1,useFactory:function X(m,g,u){return()=>{u.get(A.CZH).donePromise.then(()=>{const _=(0,M.q)(),S=g.querySelectorAll(`style[ng-transition="${m}"]`);for(let $=0;$<S.length;$++)_.remove(S[$])})}},deps:[ie,M.K0,A.zs3],multi:!0}];class le{static init(){(0,A.VLi)(new le)}addToWindow(g){A.dqk.getAngularTestability=(_,S=!0)=>{const $=g.findTestabilityInTree(_,S);if(null==$)throw new Error("Could not find testability for element.");return $},A.dqk.getAllAngularTestabilities=()=>g.getAllTestabilities(),A.dqk.getAllAngularRootElements=()=>g.getAllRootElements(),A.dqk.frameworkStabilizers||(A.dqk.frameworkStabilizers=[]),A.dqk.frameworkStabilizers.push(_=>{const S=A.dqk.getAllAngularTestabilities();let $=S.length,te=!1;const Oe=function(Ge){te=te||Ge,$--,0==$&&_(te)};S.forEach(function(Ge){Ge.whenStable(Oe)})})}findTestabilityInTree(g,u,_){if(null==u)return null;const S=g.getTestability(u);return null!=S?S:_?(0,M.q)().isShadowRoot(u)?this.findTestabilityInTree(g,u.host,!0):this.findTestabilityInTree(g,u.parentElement,!0):null}}let ot=(()=>{class m{build(){return new XMLHttpRequest}}return m.\u0275fac=function(u){return new(u||m)},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();const qe=new A.OlP("EventManagerPlugins");let rt=(()=>{class m{constructor(u,_){this._zone=_,this._eventNameToPlugin=new Map,u.forEach(S=>S.manager=this),this._plugins=u.slice().reverse()}addEventListener(u,_,S){return this._findPluginFor(_).addEventListener(u,_,S)}addGlobalEventListener(u,_,S){return this._findPluginFor(_).addGlobalEventListener(u,_,S)}getZone(){return this._zone}_findPluginFor(u){const _=this._eventNameToPlugin.get(u);if(_)return _;const S=this._plugins;for(let $=0;$<S.length;$++){const te=S[$];if(te.supports(u))return this._eventNameToPlugin.set(u,te),te}throw new Error(`No event manager plugin found for event ${u}`)}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(qe),A.LFG(A.R0b))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();class ft{constructor(g){this._doc=g}addGlobalEventListener(g,u,_){const S=(0,M.q)().getGlobalEventTarget(this._doc,g);if(!S)throw new Error(`Unsupported event target ${S} for event ${u}`);return this.addEventListener(S,u,_)}}let Pe=(()=>{class m{constructor(){this._stylesSet=new Set}addStyles(u){const _=new Set;u.forEach(S=>{this._stylesSet.has(S)||(this._stylesSet.add(S),_.add(S))}),this.onStylesAdded(_)}onStylesAdded(u){}getAllStyles(){return Array.from(this._stylesSet)}}return m.\u0275fac=function(u){return new(u||m)},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})(),$e=(()=>{class m extends Pe{constructor(u){super(),this._doc=u,this._hostNodes=new Map,this._hostNodes.set(u.head,[])}_addStylesToHost(u,_,S){u.forEach($=>{const te=this._doc.createElement("style");te.textContent=$,S.push(_.appendChild(te))})}addHost(u){const _=[];this._addStylesToHost(this._stylesSet,u,_),this._hostNodes.set(u,_)}removeHost(u){const _=this._hostNodes.get(u);_&&_.forEach(Me),this._hostNodes.delete(u)}onStylesAdded(u){this._hostNodes.forEach((_,S)=>{this._addStylesToHost(u,S,_)})}ngOnDestroy(){this._hostNodes.forEach(u=>u.forEach(Me))}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(M.K0))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();function Me(m){(0,M.q)().remove(m)}const it={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Qe=/%COMP%/g;function Ee(m,g,u){for(let _=0;_<g.length;_++){let S=g[_];Array.isArray(S)?Ee(m,S,u):(S=S.replace(Qe,m),u.push(S))}return u}function ke(m){return g=>{if("__ngUnwrap__"===g)return m;!1===m(g)&&(g.preventDefault(),g.returnValue=!1)}}let et=(()=>{class m{constructor(u,_,S){this.eventManager=u,this.sharedStylesHost=_,this.appId=S,this.rendererByCompId=new Map,this.defaultRenderer=new Fe(u)}createRenderer(u,_){if(!u||!_)return this.defaultRenderer;switch(_.encapsulation){case A.ifc.Emulated:{let S=this.rendererByCompId.get(_.id);return S||(S=new ur(this.eventManager,this.sharedStylesHost,_,this.appId),this.rendererByCompId.set(_.id,S)),S.applyToHost(u),S}case 1:case A.ifc.ShadowDom:return new Vt(this.eventManager,this.sharedStylesHost,u,_);default:if(!this.rendererByCompId.has(_.id)){const S=Ee(_.id,_.styles,[]);this.sharedStylesHost.addStyles(S),this.rendererByCompId.set(_.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(rt),A.LFG($e),A.LFG(A.AFp))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();class Fe{constructor(g){this.eventManager=g,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(g,u){return u?document.createElementNS(it[u]||u,g):document.createElement(g)}createComment(g){return document.createComment(g)}createText(g){return document.createTextNode(g)}appendChild(g,u){g.appendChild(u)}insertBefore(g,u,_){g&&g.insertBefore(u,_)}removeChild(g,u){g&&g.removeChild(u)}selectRootElement(g,u){let _="string"==typeof g?document.querySelector(g):g;if(!_)throw new Error(`The selector "${g}" did not match any elements`);return u||(_.textContent=""),_}parentNode(g){return g.parentNode}nextSibling(g){return g.nextSibling}setAttribute(g,u,_,S){if(S){u=S+":"+u;const $=it[S];$?g.setAttributeNS($,u,_):g.setAttribute(u,_)}else g.setAttribute(u,_)}removeAttribute(g,u,_){if(_){const S=it[_];S?g.removeAttributeNS(S,u):g.removeAttribute(`${_}:${u}`)}else g.removeAttribute(u)}addClass(g,u){g.classList.add(u)}removeClass(g,u){g.classList.remove(u)}setStyle(g,u,_,S){S&(A.JOm.DashCase|A.JOm.Important)?g.style.setProperty(u,_,S&A.JOm.Important?"important":""):g.style[u]=_}removeStyle(g,u,_){_&A.JOm.DashCase?g.style.removeProperty(u):g.style[u]=""}setProperty(g,u,_){g[u]=_}setValue(g,u){g.nodeValue=u}listen(g,u,_){return"string"==typeof g?this.eventManager.addGlobalEventListener(g,u,ke(_)):this.eventManager.addEventListener(g,u,ke(_))}}class ur extends Fe{constructor(g,u,_,S){super(g),this.component=_;const $=Ee(S+"-"+_.id,_.styles,[]);u.addStyles($),this.contentAttr=function se(m){return"_ngcontent-%COMP%".replace(Qe,m)}(S+"-"+_.id),this.hostAttr=function we(m){return"_nghost-%COMP%".replace(Qe,m)}(S+"-"+_.id)}applyToHost(g){super.setAttribute(g,this.hostAttr,"")}createElement(g,u){const _=super.createElement(g,u);return super.setAttribute(_,this.contentAttr,""),_}}class Vt extends Fe{constructor(g,u,_,S){super(g),this.sharedStylesHost=u,this.hostEl=_,this.shadowRoot=_.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const $=Ee(S.id,S.styles,[]);for(let te=0;te<$.length;te++){const Oe=document.createElement("style");Oe.textContent=$[te],this.shadowRoot.appendChild(Oe)}}nodeOrShadowRoot(g){return g===this.hostEl?this.shadowRoot:g}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(g,u){return super.appendChild(this.nodeOrShadowRoot(g),u)}insertBefore(g,u,_){return super.insertBefore(this.nodeOrShadowRoot(g),u,_)}removeChild(g,u){return super.removeChild(this.nodeOrShadowRoot(g),u)}parentNode(g){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(g)))}}let Pt=(()=>{class m extends ft{constructor(u){super(u)}supports(u){return!0}addEventListener(u,_,S){return u.addEventListener(_,S,!1),()=>this.removeEventListener(u,_,S)}removeEventListener(u,_,S){return u.removeEventListener(_,S)}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(M.K0))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();const mn=["alt","control","meta","shift"],dr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Gt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},mr={alt:m=>m.altKey,control:m=>m.ctrlKey,meta:m=>m.metaKey,shift:m=>m.shiftKey};let Tn=(()=>{class m extends ft{constructor(u){super(u)}supports(u){return null!=m.parseEventName(u)}addEventListener(u,_,S){const $=m.parseEventName(_),te=m.eventCallback($.fullKey,S,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,M.q)().onAndCancel(u,$.domEventName,te))}static parseEventName(u){const _=u.toLowerCase().split("."),S=_.shift();if(0===_.length||"keydown"!==S&&"keyup"!==S)return null;const $=m._normalizeKey(_.pop());let te="";if(mn.forEach(Ge=>{const We=_.indexOf(Ge);We>-1&&(_.splice(We,1),te+=Ge+".")}),te+=$,0!=_.length||0===$.length)return null;const Oe={};return Oe.domEventName=S,Oe.fullKey=te,Oe}static getEventFullKey(u){let _="",S=function an(m){let g=m.key;if(null==g){if(g=m.keyIdentifier,null==g)return"Unidentified";g.startsWith("U+")&&(g=String.fromCharCode(parseInt(g.substring(2),16)),3===m.location&&Gt.hasOwnProperty(g)&&(g=Gt[g]))}return dr[g]||g}(u);return S=S.toLowerCase()," "===S?S="space":"."===S&&(S="dot"),mn.forEach($=>{$!=S&&mr[$](u)&&(_+=$+".")}),_+=S,_}static eventCallback(u,_,S){return $=>{m.getEventFullKey($)===u&&S.runGuarded(()=>_($))}}static _normalizeKey(u){return"esc"===u?"escape":u}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(M.K0))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();const qr=(0,A.eFA)(A._c5,"browser",[{provide:A.Lbi,useValue:M.bD},{provide:A.g9A,useValue:function Xn(){de.makeCurrent(),le.init()},multi:!0},{provide:M.K0,useFactory:function Cr(){return(0,A.RDi)(document),document},deps:[]}]),$n=[{provide:A.zSh,useValue:"root"},{provide:A.qLn,useFactory:function yr(){return new A.qLn},deps:[]},{provide:qe,useClass:Pt,multi:!0,deps:[M.K0,A.R0b,A.Lbi]},{provide:qe,useClass:Tn,multi:!0,deps:[M.K0]},{provide:et,useClass:et,deps:[rt,$e,A.AFp]},{provide:A.FYo,useExisting:et},{provide:Pe,useExisting:$e},{provide:$e,useClass:$e,deps:[M.K0]},{provide:A.dDg,useClass:A.dDg,deps:[A.R0b]},{provide:rt,useClass:rt,deps:[qe,A.R0b]},{provide:M.JF,useClass:ot,deps:[]}];let zn=(()=>{class m{constructor(u){if(u)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(u){return{ngModule:m,providers:[{provide:A.AFp,useValue:u.appId},{provide:ie,useExisting:A.AFp},q]}}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(m,12))},m.\u0275mod=A.oAB({type:m}),m.\u0275inj=A.cJS({providers:$n,imports:[M.ez,A.hGG]}),m})();"undefined"!=typeof window&&window;var Kt=L(6115);const Nt=[{path:"",loadChildren:()=>L.e(482).then(L.bind(L,2482)).then(m=>m.DashboardModule)}];let kr=(()=>{class m{}return m.\u0275fac=function(u){return new(u||m)},m.\u0275mod=A.oAB({type:m}),m.\u0275inj=A.cJS({imports:[[Kt.Bz.forRoot(Nt)],Kt.Bz]}),m})();var Bn=L(629),fr=L(3632);let Mn=(()=>{class m{constructor(u,_){this.authSrv=u,this.usuarioSrv=_,this.title="samesouls"}ngOnInit(){}}return m.\u0275fac=function(u){return new(u||m)(A.Y36(Bn.e),A.Y36(fr.L))},m.\u0275cmp=A.Xpm({type:m,selectors:[["app-root"]],decls:1,vars:0,template:function(u,_){1&u&&A._UZ(0,"router-outlet")},directives:[Kt.lC],styles:[""]}),m})();var er=L(520),Un=L(9300),tr=L(4004),Pi=L(4986),Ui=L(7272),ti=L(5698),rr=L(4482),Hr=L(5403),Zn=L(5032);function ct(){return(0,rr.e)((m,g)=>{m.subscribe((0,Hr.x)(g,Zn.Z))})}var Vn=L(5577);function Qr(m,g){return g?u=>(0,Ui.z)(g.pipe((0,ti.q)(1),ct()),u.pipe(Qr(m))):(0,Vn.z)((u,_)=>m(u,_).pipe((0,ti.q)(1),function _n(m){return(0,tr.U)(()=>m)}(u)))}var pi=L(8306),Nr=L(3532);function gi(m){return m instanceof Date&&!isNaN(m)}function or(m,g=Pi.z){const u=function _r(m=0,g,u=Pi.P){let _=-1;return null!=g&&((0,Nr.K)(g)?u=g:_=g),new pi.y(S=>{let $=gi(m)?+m-u.now():m;$<0&&($=0);let te=0;return u.schedule(function(){S.closed||(S.next(te++),0<=_?this.schedule(void 0,_):S.complete())},$)})}(m,g);return Qr(()=>u)}var mi=L(8421),On=L(3888),es=L(9672);const Ms=(0,On.d)(m=>function(u=null){m(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=u});function Os(m,g){const{first:u,each:_,with:S=Ci,scheduler:$=(null!=g?g:Pi.z),meta:te=null}=gi(m)?{first:m}:"number"==typeof m?{each:m}:m;if(null==u&&null==_)throw new TypeError("No timeout provided.");return(0,rr.e)((Oe,Ge)=>{let We,Ve,Ut=null,xn=0;const vr=sn=>{Ve=(0,es.f)(Ge,$,()=>{try{We.unsubscribe(),(0,mi.Xf)(S({meta:te,lastValue:Ut,seen:xn})).subscribe(Ge)}catch(Wr){Ge.error(Wr)}},sn)};We=Oe.subscribe((0,Hr.x)(Ge,sn=>{null==Ve||Ve.unsubscribe(),xn++,Ge.next(Ut=sn),_>0&&vr(_)},void 0,void 0,()=>{(null==Ve?void 0:Ve.closed)||null==Ve||Ve.unsubscribe(),Ut=null})),!xn&&vr(null!=u?"number"==typeof u?u:+u-$.now():_)})}function Ci(m){throw new Ms(m)}var ir=L(262),pr=L(3151),Si=L(4671),bi=L(3269);function Rn(...m){const g=(0,bi.jO)(m);return(0,rr.e)((u,_)=>{const S=m.length,$=new Array(S);let te=m.map(()=>!1),Oe=!1;for(let Ge=0;Ge<S;Ge++)(0,mi.Xf)(m[Ge]).subscribe((0,Hr.x)(_,We=>{$[Ge]=We,!Oe&&!te[Ge]&&(te[Ge]=!0,(Oe=te.every(Si.y))&&(te=null))},Zn.Z));u.subscribe((0,Hr.x)(_,Ge=>{if(Oe){const We=[Ge,...$];_.next(g?g(...We):We)}}))})}var Ti=L(4351),Vi=L(2843),Fr=L(9646);const{isArray:ni}=Array;function zi(...m){return 1===(m=function Ao(m){return 1===m.length&&ni(m[0])?m[0]:m}(m)).length?(0,mi.Xf)(m[0]):new pi.y(function hs(m){return g=>{let u=[];for(let _=0;u&&!g.closed&&_<m.length;_++)u.push((0,mi.Xf)(m[_]).subscribe((0,Hr.x)(g,S=>{if(u){for(let $=0;$<u.length;$++)$!==_&&u[$].unsubscribe();u=null}g.next(S)})))}}(m))}var si=L(6451),lo=L(1135),fs=L(7579),Is=L(233),Lr=L(5363),qo=L(5026),ve=L(1884);const pe={};function Qn(m,g){return Object.defineProperty(g,"type",{value:m,writable:!1})}const Jr="@ngrx/store/init";let Gn=(()=>{class m extends lo.X{constructor(){super({type:Jr})}next(u){if("function"==typeof u)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(void 0===u)throw new TypeError("Actions must be objects");if(void 0===u.type)throw new TypeError("Actions must have a type property");super.next(u)}complete(){}ngOnDestroy(){super.complete()}}return m.\u0275fac=function(u){return new(u||m)},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();const Bi=[Gn],Hi=new A.OlP("@ngrx/store Internal Root Guard"),ts=new A.OlP("@ngrx/store Internal Initial State"),Js=new A.OlP("@ngrx/store Initial State"),Gi=new A.OlP("@ngrx/store Reducer Factory"),Eo=new A.OlP("@ngrx/store Internal Reducer Factory Provider"),wo=new A.OlP("@ngrx/store Initial Reducers"),ps=new A.OlP("@ngrx/store Internal Initial Reducers"),Ei=new A.OlP("@ngrx/store Store Features"),xs=new A.OlP("@ngrx/store Internal Store Reducers"),gs=new A.OlP("@ngrx/store Internal Feature Reducers"),js=new A.OlP("@ngrx/store Internal Feature Configs"),ms=new A.OlP("@ngrx/store Internal Store Features"),ka=new A.OlP("@ngrx/store Internal Feature Reducers Token"),Wi=new A.OlP("@ngrx/store Feature Reducers"),Ki=new A.OlP("@ngrx/store User Provided Meta Reducers"),wi=new A.OlP("@ngrx/store Meta Reducers"),Xs=new A.OlP("@ngrx/store Internal Resolved Meta Reducers"),$s=new A.OlP("@ngrx/store User Runtime Checks Config"),Ar=new A.OlP("@ngrx/store Internal User Runtime Checks Config"),Dr=new A.OlP("@ngrx/store Internal Runtime Checks"),da=new A.OlP("@ngrx/store Check if Action types are unique");function qi(m,g={}){const u=Object.keys(m),_={};for(let $=0;$<u.length;$++){const te=u[$];"function"==typeof m[te]&&(_[te]=m[te])}const S=Object.keys(_);return function(te,Oe){te=void 0===te?g:te;let Ge=!1;const We={};for(let Ve=0;Ve<S.length;Ve++){const Ut=S[Ve],vr=te[Ut],sn=(0,_[Ut])(vr,Oe);We[Ut]=sn,Ge=Ge||sn!==vr}return Ge?We:te}}function Hs(...m){return function(g){if(0===m.length)return g;const u=m[m.length-1];return m.slice(0,-1).reduceRight((S,$)=>$(S),u(g))}}function ns(m,g){return Array.isArray(g)&&g.length>0&&(m=Hs.apply(null,[...g,m])),(u,_)=>{const S=m(u);return($,te)=>S($=void 0===$?_:$,te)}}class co extends pi.y{}class Ds extends Gn{}let R=(()=>{class m extends lo.X{constructor(u,_,S,$){super($(S,_)),this.dispatcher=u,this.initialState=_,this.reducers=S,this.reducerFactory=$}get currentReducers(){return this.reducers}addFeature(u){this.addFeatures([u])}addFeatures(u){const _=u.reduce((S,{reducers:$,reducerFactory:te,metaReducers:Oe,initialState:Ge,key:We})=>{const Ve="function"==typeof $?function ys(m){const g=Array.isArray(m)&&m.length>0?Hs(...m):u=>u;return(u,_)=>(u=g(u),(S,$)=>u(S=void 0===S?_:S,$))}(Oe)($,Ge):ns(te,Oe)($,Ge);return S[We]=Ve,S},{});this.addReducers(_)}removeFeature(u){this.removeFeatures([u])}removeFeatures(u){this.removeReducers(u.map(_=>_.key))}addReducer(u,_){this.addReducers({[u]:_})}addReducers(u){this.reducers=Object.assign(Object.assign({},this.reducers),u),this.updateReducers(Object.keys(u))}removeReducer(u){this.removeReducers([u])}removeReducers(u){u.forEach(_=>{this.reducers=function zs(m,g){return Object.keys(m).filter(u=>u!==g).reduce((u,_)=>Object.assign(u,{[_]:m[_]}),{})}(this.reducers,_)}),this.updateReducers(u)}updateReducers(u){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:u})}ngOnDestroy(){this.complete()}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(Ds),A.LFG(Js),A.LFG(wo),A.LFG(Gi))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();const G=[R,{provide:co,useExisting:R},{provide:Ds,useExisting:Gn}];let k=(()=>{class m extends fs.x{ngOnDestroy(){this.complete()}}return m.\u0275fac=function(){let g;return function(_){return(g||(g=A.n5z(m)))(_||m)}}(),m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();const Y=[k];class oe extends pi.y{}let He=(()=>{class m extends lo.X{constructor(u,_,S,$){super($);const We=u.pipe((0,Lr.Q)(Is.N)).pipe(Rn(_)).pipe((0,qo.R)(ut,{state:$}));this.stateSubscription=We.subscribe(({state:Ve,action:Ut})=>{this.next(Ve),S.next(Ut)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return m.INIT=Jr,m.\u0275fac=function(u){return new(u||m)(A.LFG(Gn),A.LFG(co),A.LFG(k),A.LFG(Js))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();function ut(m={state:void 0},[g,u]){const{state:_}=m;return{state:u(_,g),action:g}}const At=[He,{provide:oe,useExisting:He}];let Dn=(()=>{class m extends pi.y{constructor(u,_,S){super(),this.actionsObserver=_,this.reducerManager=S,this.source=u}select(u,..._){return Nn.call(null,u,..._)(this)}lift(u){const _=new m(this,this.actionsObserver,this.reducerManager);return _.operator=u,_}dispatch(u){this.actionsObserver.next(u)}next(u){this.actionsObserver.next(u)}error(u){this.actionsObserver.error(u)}complete(){this.actionsObserver.complete()}addReducer(u,_){this.reducerManager.addReducer(u,_)}removeReducer(u){this.reducerManager.removeReducer(u)}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(oe),A.LFG(Gn),A.LFG(R))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();const kn=[Dn];function Nn(m,g,...u){return function(S){let $;if("string"==typeof m){const te=[g,...u].filter(Boolean);$=S.pipe(function Ro(...m){const g=m.length;if(0===g)throw new Error("list of properties cannot be empty.");return(0,tr.U)(u=>{let _=u;for(let S=0;S<g;S++){const $=null==_?void 0:_[m[S]];if(void 0===$)return;_=$}return _})}(m,...te))}else{if("function"!=typeof m)throw new TypeError(`Unexpected type '${typeof m}' in select operator, expected 'string' or 'function'`);$=S.pipe((0,tr.U)(te=>m(te,g)))}return $.pipe((0,ve.x)())}}const Mr="https://ngrx.io/guide/store/configuration/runtime-checks";function wr(m){return void 0===m}function ar(m){return null===m}function Ps(m){return Array.isArray(m)}function uo(m){return"object"==typeof m&&null!==m}function Yo(m){return"function"==typeof m}function Ur(m,g){return m===g}function to(m,g,u){for(let _=0;_<m.length;_++)if(!u(m[_],g[_]))return!0;return!1}function Zi(m,g=Ur,u=Ur){let $,_=null,S=null;return{memoized:function We(){if(void 0!==$)return $.result;if(!_)return S=m.apply(null,arguments),_=arguments,S;if(!to(arguments,_,g))return S;const Ve=m.apply(null,arguments);return _=arguments,u(S,Ve)?S:(S=Ve,Ve)},reset:function te(){_=null,S=null},setResult:function Oe(Ve){$={result:Ve}},clearResult:function Ge(){$=void 0}}}function Xr(...m){return function pl(m,g={stateFn:Ha}){return function(...u){let _=u;if(Array.isArray(_[0])){const[Ve,...Ut]=_;_=[...Ve,...Ut]}const S=_.slice(0,_.length-1),$=_[_.length-1],te=S.filter(Ve=>Ve.release&&"function"==typeof Ve.release),Oe=m(function(...Ve){return $.apply(null,Ve)}),Ge=Zi(function(Ve,Ut){return g.stateFn.apply(null,[Ve,S,Ut,Oe])});return Object.assign(Ge.memoized,{release:function We(){Ge.reset(),Oe.reset(),te.forEach(Ve=>Ve.release())},projector:Oe.memoized,setResult:Ge.setResult,clearResult:Ge.clearResult})}}(Zi)(...m)}function Ha(m,g,u,_){if(void 0===u){const $=g.map(te=>te(m));return _.memoized.apply(null,$)}const S=g.map($=>$(m,u));return _.memoized.apply(null,[...S,u])}function No(m){Object.freeze(m);const g=Yo(m);return Object.getOwnPropertyNames(m).forEach(u=>{if(!u.startsWith("\u0275")&&function ko(m,g){return Object.prototype.hasOwnProperty.call(m,g)}(m,u)&&(!g||"caller"!==u&&"callee"!==u&&"arguments"!==u)){const _=m[u];(uo(_)||Yo(_))&&!Object.isFrozen(_)&&No(_)}}),m}function Oi(m,g=[]){return(wr(m)||ar(m))&&0===g.length?{path:["root"],value:m}:Object.keys(m).reduce((_,S)=>{if(_)return _;const $=m[S];return function Na(m){return Yo(m)&&m.hasOwnProperty("\u0275cmp")}($)?_:!(wr($)||ar($)||function eo(m){return"number"==typeof m}($)||function Yt(m){return"boolean"==typeof m}($)||function yi(m){return"string"==typeof m}($)||Ps($))&&(function Yi(m){if(!function Mo(m){return uo(m)&&!Ps(m)}(m))return!1;const g=Object.getPrototypeOf(m);return g===Object.prototype||null===g}($)?Oi($,[...g,S]):{path:[...g,S],value:$})},!1)}function Fa(m,g){if(!1===m)return;const u=m.path.join("."),_=new Error(`Detected unserializable ${g} at "${u}". ${Mr}#strict${g}serializability`);throw _.value=m.value,_.unserializablePath=u,_}function ha(m){return(0,A.X6Q)()?Object.assign({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},m):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function Wa({strictActionSerializability:m,strictStateSerializability:g}){return u=>m||g?function Ts(m,g){return function(u,_){g.action(_)&&Fa(Oi(_),"action");const S=m(u,_);return g.state()&&Fa(Oi(S),"state"),S}}(u,{action:_=>m&&!Io(_),state:()=>g}):u}function fa({strictActionImmutability:m,strictStateImmutability:g}){return u=>m||g?function rs(m,g){return function(u,_){const S=g.action(_)?No(_):_,$=m(u,S);return g.state()?No($):$}}(u,{action:_=>m&&!Io(_),state:()=>g}):u}function Io(m){return m.type.startsWith("@ngrx")}function Ka({strictActionWithinNgZone:m}){return g=>m?function Gr(m,g){return function(u,_){if(g.action(_)&&!A.R0b.isInAngularZone())throw new Error(`Action '${_.type}' running outside NgZone. ${Mr}#strictactionwithinngzone`);return m(u,_)}}(g,{action:u=>m&&!Io(u)}):g}function pa(m){return[{provide:Ar,useValue:m},{provide:$s,useFactory:Xo,deps:[Ar]},{provide:Dr,deps:[$s],useFactory:ha},{provide:wi,multi:!0,deps:[Dr],useFactory:fa},{provide:wi,multi:!0,deps:[Dr],useFactory:Wa},{provide:wi,multi:!0,deps:[Dr],useFactory:Ka}]}function Jo(){return[{provide:da,multi:!0,deps:[Dr],useFactory:Gs}]}function Xo(m){return m}function Gs(m){if(!m.strictActionTypeUniqueness)return;const g=Object.entries(pe).filter(([,u])=>u>1).map(([u])=>u);if(g.length)throw new Error(`Action types are registered more than once, ${g.map(u=>`"${u}"`).join(", ")}. ${Mr}#strictactiontypeuniqueness`)}let ea=(()=>{class m{constructor(u,_,S,$,te,Oe){}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(Gn),A.LFG(co),A.LFG(k),A.LFG(Dn),A.LFG(Hi,8),A.LFG(da,8))},m.\u0275mod=A.oAB({type:m}),m.\u0275inj=A.cJS({}),m})(),Ai=(()=>{class m{constructor(u,_,S,$,te){this.features=u,this.featureReducers=_,this.reducerManager=S;const Oe=u.map((Ge,We)=>{const Ut=_.shift()[We];return Object.assign(Object.assign({},Ge),{reducers:Ut,initialState:Fo(Ge.initialState)})});S.addFeatures(Oe)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(ms),A.LFG(Wi),A.LFG(R),A.LFG(ea),A.LFG(da,8))},m.\u0275mod=A.oAB({type:m}),m.\u0275inj=A.cJS({}),m})(),ga=(()=>{class m{static forRoot(u,_={}){return{ngModule:ea,providers:[{provide:Hi,useFactory:fo,deps:[[Dn,new A.FiY,new A.tp0]]},{provide:ts,useValue:_.initialState},{provide:Js,useFactory:Fo,deps:[ts]},{provide:ps,useValue:u},{provide:xs,useExisting:u instanceof A.OlP?u:ps},{provide:wo,deps:[A.zs3,ps,[new A.tBr(xs)]],useFactory:qa},{provide:Ki,useValue:_.metaReducers?_.metaReducers:[]},{provide:Xs,deps:[wi,Ki],useFactory:Ri},{provide:Eo,useValue:_.reducerFactory?_.reducerFactory:qi},{provide:Gi,deps:[Eo,Xs],useFactory:ns},Bi,G,Y,At,kn,pa(_.runtimeChecks),Jo()]}}static forFeature(u,_,S={}){return{ngModule:Ai,providers:[{provide:js,multi:!0,useValue:u instanceof Object?{}:S},{provide:Ei,multi:!0,useValue:{key:u instanceof Object?u.name:u,reducerFactory:S instanceof A.OlP||!S.reducerFactory?qi:S.reducerFactory,metaReducers:S instanceof A.OlP||!S.metaReducers?[]:S.metaReducers,initialState:S instanceof A.OlP||!S.initialState?void 0:S.initialState}},{provide:ms,deps:[A.zs3,js,Ei],useFactory:ho},{provide:gs,multi:!0,useValue:u instanceof Object?u.reducer:_},{provide:ka,multi:!0,useExisting:_ instanceof A.OlP?_:gs},{provide:Wi,multi:!0,deps:[A.zs3,gs,[new A.tBr(ka)]],useFactory:ma},Jo()]}}}return m.\u0275fac=function(u){return new(u||m)},m.\u0275mod=A.oAB({type:m}),m.\u0275inj=A.cJS({}),m})();function qa(m,g){return g instanceof A.OlP?m.get(g):g}function ho(m,g,u){return u.map((_,S)=>{if(g[S]instanceof A.OlP){const $=m.get(g[S]);return{key:_.key,reducerFactory:$.reducerFactory?$.reducerFactory:qi,metaReducers:$.metaReducers?$.metaReducers:[],initialState:$.initialState}}return _})}function ma(m,g){return g.map(_=>_ instanceof A.OlP?m.get(_):_)}function Fo(m){return"function"==typeof m?m():m}function Ri(m,g){return m.concat(g)}function fo(m){if(m)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}var nn=(()=>{return(m=nn||(nn={}))[m.EntitiesOnly=0]="EntitiesOnly",m[m.Both=1]="Both",m[m.None=2]="None",nn;var m})();function Pr(m){return function(u,_){const S={ids:[..._.ids],entities:Object.assign({},_.entities)},$=m(u,S);return $===nn.Both?Object.assign({},_,S):$===nn.EntitiesOnly?Object.assign(Object.assign({},_),{entities:S.entities}):_}}function ai(m,g){const u=g(m);return(0,A.X6Q)()&&void 0===u&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",m,"The `selectId` implementation:",g.toString()),u}function po(m){function g(wt,bt){const jt=ai(wt,m);return jt in bt.entities?nn.None:(bt.ids.push(jt),bt.entities[jt]=wt,nn.Both)}function u(wt,bt){let jt=!1;for(const kt of wt)jt=g(kt,bt)!==nn.None||jt;return jt?nn.Both:nn.None}function S(wt,bt){const jt=ai(wt,m);return jt in bt.entities?(bt.entities[jt]=wt,nn.EntitiesOnly):(bt.ids.push(jt),bt.entities[jt]=wt,nn.Both)}function Oe(wt,bt){const kt=(wt instanceof Array?wt:bt.ids.filter(zt=>wt(bt.entities[zt]))).filter(zt=>zt in bt.entities).map(zt=>delete bt.entities[zt]).length>0;return kt&&(bt.ids=bt.ids.filter(zt=>zt in bt.entities)),kt?nn.Both:nn.None}function Ve(wt,bt){return Ut([wt],bt)}function Ut(wt,bt){const jt={};return(wt=wt.filter(zt=>zt.id in bt.entities)).length>0?wt.filter(on=>function We(wt,bt,jt){const zt=Object.assign({},jt.entities[bt.id],bt.changes),on=ai(zt,m),Rr=on!==bt.id;return Rr&&(wt[bt.id]=on,delete jt.entities[bt.id]),jt.entities[on]=zt,Rr}(jt,on,bt)).length>0?(bt.ids=bt.ids.map(on=>jt[on]||on),nn.Both):nn.EntitiesOnly:nn.None}function Wr(wt,bt){const jt=[],kt=[];for(const Rr of wt){const vi=ai(Rr,m);vi in bt.entities?kt.push({id:vi,changes:Rr}):jt.push(Rr)}const zt=Ut(kt,bt),on=u(jt,bt);switch(!0){case on===nn.None&&zt===nn.None:return nn.None;case on===nn.Both||zt===nn.Both:return nn.Both;default:return nn.EntitiesOnly}}return{removeAll:function Ge(wt){return Object.assign({},wt,{ids:[],entities:{}})},addOne:Pr(g),addMany:Pr(u),setAll:Pr(function _(wt,bt){return bt.ids=[],bt.entities={},u(wt,bt),nn.Both}),setOne:Pr(S),setMany:Pr(function $(wt,bt){const jt=wt.map(kt=>S(kt,bt));switch(!0){case jt.some(kt=>kt===nn.Both):return nn.Both;case jt.some(kt=>kt===nn.EntitiesOnly):return nn.EntitiesOnly;default:return nn.None}}),updateOne:Pr(Ve),updateMany:Pr(Ut),upsertOne:Pr(function sn(wt,bt){return Wr([wt],bt)}),upsertMany:Pr(Wr),removeOne:Pr(function te(wt,bt){return Oe([wt],bt)}),removeMany:Pr(Oe),map:Pr(function xn(wt,bt){return Ut(bt.ids.reduce((zt,on)=>{const Rr=wt(bt.entities[on]);return Rr!==bt.entities[on]&&zt.push({id:on,changes:Rr}),zt},[]).filter(({id:zt})=>zt in bt.entities),bt)}),mapOne:Pr(function vr({map:wt,id:bt},jt){const kt=jt.entities[bt];return kt?Ve({id:bt,changes:wt(kt)},jt):nn.None})}}function lr(m={}){var g,u;const{selectId:_,sortComparer:S}={selectId:null!==(g=m.selectId)&&void 0!==g?g:Ge=>Ge.id,sortComparer:null!==(u=m.sortComparer)&&void 0!==u&&u},$=function uc(){return{getInitialState:function m(g={}){return Object.assign({ids:[],entities:{}},g)}}}(),te=function La(){return{getSelectors:function m(g){const u=te=>te.ids,_=te=>te.entities,S=Xr(u,_,(te,Oe)=>te.map(Ge=>Oe[Ge])),$=Xr(u,te=>te.length);return g?{selectIds:Xr(g,u),selectEntities:Xr(g,_),selectAll:Xr(g,S),selectTotal:Xr(g,$)}:{selectIds:u,selectEntities:_,selectAll:S,selectTotal:$}}}}(),Oe=S?function Lo(m,g){const{removeOne:u,removeMany:_,removeAll:S}=po(m);function $(jt,kt){return te([jt],kt)}function te(jt,kt){const zt=jt.filter(on=>!(ai(on,m)in kt.entities));return 0===zt.length?nn.None:(bt(zt,kt),nn.Both)}function Ge(jt,kt){const zt=ai(jt,m);return zt in kt.entities?(kt.ids=kt.ids.filter(on=>on!==zt),bt([jt],kt),nn.Both):$(jt,kt)}function Ve(jt,kt){return xn([jt],kt)}function xn(jt,kt){const zt=[],on=jt.filter(Rr=>function Ut(jt,kt,zt){if(!(kt.id in zt.entities))return!1;const Rr=Object.assign({},zt.entities[kt.id],kt.changes),vi=ai(Rr,m);return delete zt.entities[kt.id],jt.push(Rr),vi!==kt.id}(zt,Rr,kt)).length>0;if(0===zt.length)return nn.None;{const Rr=kt.ids,vi=[];return kt.ids=kt.ids.filter((Ls,rl)=>Ls in kt.entities||(vi.push(rl),!1)),bt(zt,kt),!on&&vi.every(Ls=>kt.ids[Ls]===Rr[Ls])?nn.EntitiesOnly:nn.Both}}function wt(jt,kt){const zt=[],on=[];for(const Ls of jt){const rl=ai(Ls,m);rl in kt.entities?on.push({id:rl,changes:Ls}):zt.push(Ls)}const Rr=xn(on,kt),vi=te(zt,kt);switch(!0){case vi===nn.None&&Rr===nn.None:return nn.None;case vi===nn.Both||Rr===nn.Both:return nn.Both;default:return nn.EntitiesOnly}}function bt(jt,kt){jt.sort(g);const zt=[];let on=0,Rr=0;for(;on<jt.length&&Rr<kt.ids.length;){const vi=jt[on],Ls=ai(vi,m),rl=kt.ids[Rr];g(vi,kt.entities[rl])<=0?(zt.push(Ls),on++):(zt.push(rl),Rr++)}kt.ids=zt.concat(on<jt.length?jt.slice(on).map(m):kt.ids.slice(Rr)),jt.forEach((vi,Ls)=>{kt.entities[m(vi)]=vi})}return{removeOne:u,removeMany:_,removeAll:S,addOne:Pr($),updateOne:Pr(Ve),upsertOne:Pr(function Wr(jt,kt){return wt([jt],kt)}),setAll:Pr(function Oe(jt,kt){return kt.entities={},kt.ids=[],te(jt,kt),nn.Both}),setOne:Pr(Ge),setMany:Pr(function We(jt,kt){const zt=jt.map(on=>Ge(on,kt));switch(!0){case zt.some(on=>on===nn.Both):return nn.Both;case zt.some(on=>on===nn.EntitiesOnly):return nn.EntitiesOnly;default:return nn.None}}),addMany:Pr(te),updateMany:Pr(xn),upsertMany:Pr(wt),map:Pr(function vr(jt,kt){return xn(kt.ids.reduce((on,Rr)=>{const vi=jt(kt.entities[Rr]);return vi!==kt.entities[Rr]&&on.push({id:Rr,changes:vi}),on},[]),kt)}),mapOne:Pr(function sn({map:jt,id:kt},zt){const on=zt.entities[kt];return on?Ve({id:kt,changes:jt(on)},zt):nn.None})}}(_,S):po(_);return Object.assign(Object.assign(Object.assign({selectId:_,sortComparer:S},$),te),Oe)}var Za=L(515),_s=L(576);class ki{constructor(g,u,_){this.kind=g,this.value=u,this.error=_,this.hasValue="N"===g}observe(g){return na(this,g)}do(g,u,_){const{kind:S,value:$,error:te}=this;return"N"===S?null==g?void 0:g($):"E"===S?null==u?void 0:u(te):null==_?void 0:_()}accept(g,u,_){var S;return(0,_s.m)(null===(S=g)||void 0===S?void 0:S.next)?this.observe(g):this.do(g,u,_)}toObservable(){const{kind:g,value:u,error:_}=this,S="N"===g?(0,Fr.of)(u):"E"===g?(0,Vi._)(()=>_):"C"===g?Za.E:0;if(!S)throw new TypeError(`Unexpected notification kind ${g}`);return S}static createNext(g){return new ki("N",g)}static createError(g){return new ki("E",void 0,g)}static createComplete(){return ki.completeNotification}}function na(m,g){var u,_,S;const{kind:$,value:te,error:Oe}=m;if("string"!=typeof $)throw new TypeError('Invalid notification, missing "kind"');"N"===$?null===(u=g.next)||void 0===u||u.call(g,te):"E"===$?null===(_=g.error)||void 0===_||_.call(g,Oe):null===(S=g.complete)||void 0===S||S.call(g)}function ra(m,g,u,_){return(0,rr.e)((S,$)=>{let te;g&&"function"!=typeof g?({duration:u,element:te,connector:_}=g):te=g;const Oe=new Map,Ge=sn=>{Oe.forEach(sn),sn($)},We=sn=>Ge(Wr=>Wr.error(sn));let Ve=0,Ut=!1;const xn=new Hr.Q($,sn=>{try{const Wr=m(sn);let wt=Oe.get(Wr);if(!wt){Oe.set(Wr,wt=_?_():new fs.x);const bt=function vr(sn,Wr){const wt=new pi.y(bt=>{Ve++;const jt=Wr.subscribe(bt);return()=>{jt.unsubscribe(),0==--Ve&&Ut&&xn.unsubscribe()}});return wt.key=sn,wt}(Wr,wt);if($.next(bt),u){const jt=(0,Hr.x)(wt,()=>{wt.complete(),null==jt||jt.unsubscribe()},void 0,void 0,()=>Oe.delete(Wr));xn.add((0,mi.Xf)(u(bt)).subscribe(jt))}}wt.next(te?te(sn):sn)}catch(Wr){We(Wr)}},()=>Ge(sn=>sn.complete()),We,()=>Oe.clear(),()=>(Ut=!0,0===Ve));S.subscribe(xn)})}function _a(m,g){return g?u=>u.pipe(_a((_,S)=>(0,mi.Xf)(m(_,S)).pipe((0,tr.U)(($,te)=>g(_,$,S,te))))):(0,rr.e)((u,_)=>{let S=0,$=null,te=!1;u.subscribe((0,Hr.x)(_,Oe=>{$||($=(0,Hr.x)(_,void 0,()=>{$=null,te&&_.complete()}),(0,mi.Xf)(m(Oe,S++)).subscribe($))},()=>{te=!0,!$&&_.complete()}))})}ki.completeNotification=new ki("C");const gl={dispatch:!0,useEffectsErrorHandler:!0},ri="__@ngrx/effects_create__";function no(m,g){const u=m(),_=Object.assign(Object.assign({},gl),g);return Object.defineProperty(u,ri,{value:_}),u}function Qi(m){return Object.getOwnPropertyNames(m).filter(_=>!(!m[_]||!m[_].hasOwnProperty(ri))&&m[_][ri].hasOwnProperty("dispatch")).map(_=>Object.assign({propertyName:_},m[_][ri]))}function ia(m){return Object.getPrototypeOf(m)}const ro="__@ngrx/effects__";function ml(m){return Hs(vs,ia)(m)}function vs(m){return function Or(m){return m.constructor.hasOwnProperty(ro)}(m)?m.constructor[ro]:[]}function ji(m,g,u){const _=ia(m).constructor.name,S=function io(m){return[ml,Qi].reduce((u,_)=>u.concat(_(m)),[])}(m).map(({propertyName:$,dispatch:te,useEffectsErrorHandler:Oe})=>{const Ge="function"==typeof m[$]?m[$]():m[$],We=Oe?u(Ge,g):Ge;return!1===te?We.pipe(ct()):We.pipe(function go(){return(0,rr.e)((m,g)=>{m.subscribe((0,Hr.x)(g,u=>{g.next(ki.createNext(u))},()=>{g.next(ki.createComplete()),g.complete()},u=>{g.next(ki.createError(u)),g.complete()}))})}()).pipe((0,tr.U)(Ut=>({effect:m[$],notification:Ut,propertyName:$,sourceName:_,sourceInstance:m})))});return(0,si.T)(...S)}function Cs(m,g,u=10){return m.pipe((0,ir.K)(_=>(g&&g.handleError(_),u<=1?m:Cs(m,g,u-1))))}let sa=(()=>{class m extends pi.y{constructor(u){super(),u&&(this.source=u)}lift(u){const _=new m;return _.source=this,_.operator=u,_}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(k))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();function Vo(...m){return(0,Un.h)(g=>m.some(u=>"string"==typeof u?u===g.type:u.type===g.type))}function W(m){return ae(m,"ngrxOnInitEffects")}function ae(m,g){return m&&g in m&&"function"==typeof m[g]}const Xe=new A.OlP("@ngrx/effects Internal Root Guard"),Ft=new A.OlP("@ngrx/effects User Provided Effects"),dn=new A.OlP("@ngrx/effects Internal Root Effects"),Qt=new A.OlP("@ngrx/effects Root Effects"),cr=new A.OlP("@ngrx/effects Internal Feature Effects"),gr=new A.OlP("@ngrx/effects Feature Effects"),ii=new A.OlP("@ngrx/effects Effects Error Handler");let Ws=(()=>{class m extends fs.x{constructor(u,_){super(),this.errorHandler=u,this.effectsErrorHandler=_}addEffects(u){this.next(u)}toActions(){return this.pipe(ra(ia),(0,Vn.z)(u=>u.pipe(ra(Bo))),(0,Vn.z)(u=>{const _=u.pipe(_a($=>function Ni(m,g){return u=>{const _=ji(u,m,g);return function N(m){return ae(m,"ngrxOnRunEffects")}(u)?u.ngrxOnRunEffects(_):_}}(this.errorHandler,this.effectsErrorHandler)($)),(0,tr.U)($=>(function yt(m,g){if("N"===m.notification.kind){const u=m.notification.value;!function Ir(m){return"function"!=typeof m&&m&&m.type&&"string"==typeof m.type}(u)&&g.handleError(new Error(`Effect ${function mo({propertyName:m,sourceInstance:g,sourceName:u}){const _="function"==typeof g[m];return`"${u}.${String(m)}${_?"()":""}"`}(m)} dispatched an invalid action: ${function I(m){try{return JSON.stringify(m)}catch(g){return m}}(u)}`))}}($,this.errorHandler),$.notification)),(0,Un.h)($=>"N"===$.kind&&null!=$.value),function ss(){return(0,rr.e)((m,g)=>{m.subscribe((0,Hr.x)(g,u=>na(u,g)))})}()),S=u.pipe((0,ti.q)(1),(0,Un.h)(W),(0,tr.U)($=>$.ngrxOnInitEffects()));return(0,si.T)(_,S)}))}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(A.qLn),A.LFG(ii))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();function Bo(m){return function b(m){return ae(m,"ngrxOnIdentifyEffects")}(m)?m.ngrxOnIdentifyEffects():""}let os=(()=>{class m{constructor(u,_){this.effectSources=u,this.store=_,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(Ws),A.LFG(Dn))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();const xo="@ngrx/effects/init";!function st(m,g){if(pe[m]=(pe[m]||0)+1,"function"==typeof g)return Qn(m,(..._)=>Object.assign(Object.assign({},g(..._)),{type:m}));switch(g?g._as:"empty"){case"empty":return Qn(m,()=>({type:m}));case"props":return Qn(m,_=>Object.assign(Object.assign({},_),{type:m}));default:throw new Error("Unexpected config.")}}(xo);let Ca=(()=>{class m{constructor(u,_,S,$,te,Oe,Ge){this.sources=u,_.start(),$.forEach(We=>u.addEffects(We)),S.dispatch({type:xo})}addEffects(u){this.sources.addEffects(u)}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(Ws),A.LFG(os),A.LFG(Dn),A.LFG(Qt),A.LFG(ea,8),A.LFG(Ai,8),A.LFG(Xe,8))},m.\u0275mod=A.oAB({type:m}),m.\u0275inj=A.cJS({}),m})(),yl=(()=>{class m{constructor(u,_,S,$){_.forEach(te=>te.forEach(Oe=>u.addEffects(Oe)))}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(Ca),A.LFG(gr),A.LFG(ea,8),A.LFG(Ai,8))},m.\u0275mod=A.oAB({type:m}),m.\u0275inj=A.cJS({}),m})(),Vr=(()=>{class m{static forFeature(u=[]){return{ngModule:yl,providers:[u,{provide:cr,multi:!0,useValue:u},{provide:Ft,multi:!0,useValue:[]},{provide:gr,multi:!0,useFactory:rn,deps:[A.zs3,cr,Ft]}]}}static forRoot(u=[]){return{ngModule:Ca,providers:[{provide:ii,useValue:Cs},os,Ws,sa,u,{provide:dn,useValue:[u]},{provide:Xe,useFactory:jr,deps:[[os,new A.FiY,new A.tp0],[dn,new A.PiD]]},{provide:Ft,multi:!0,useValue:[]},{provide:Qt,useFactory:rn,deps:[A.zs3,dn,Ft]}]}}}return m.\u0275fac=function(u){return new(u||m)},m.\u0275mod=A.oAB({type:m}),m.\u0275inj=A.cJS({}),m})();function rn(m,g,u){const _=[];for(const S of g)_.push(...S);for(const S of u)_.push(...S);return function Gc(m,g){return g.map(u=>m.get(u))}(m,_)}function jr(m,g){if((1!==g.length||0!==g[0].length)&&m)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}let nr=(()=>{class m{create(u,_,S,$){const te="string"==typeof u?Object.assign(Object.assign({},$||{}),{entityName:u,entityOp:_,data:S}):u;return this.createCore(te)}createCore(u){const{entityName:_,entityOp:S,tag:$}=u;if(!_)throw new Error("Missing entity name for new action");if(null==S)throw new Error("Missing EntityOp for new action");return{type:this.formatActionType(S,$||_),payload:u}}createFromAction(u,_){return this.create(Object.assign(Object.assign({},u.payload),_))}formatActionType(u,_){return`[${_}] ${u}`}}return m.\u0275fac=function(u){return new(u||m)},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();class Ll{constructor(g,u){this.entityName=g,this.selectId=u}mustBeEntity(g){const u=this.extractData(g);if(!u)return this.throwError(g,"should have a single entity.");const _=this.selectId(u);return this.isNotKeyType(_)&&this.throwError(g,"has a missing or invalid entity key (id)"),u}mustBeEntities(g){const u=this.extractData(g);return Array.isArray(u)?(u.forEach((_,S)=>{const $=this.selectId(_);this.isNotKeyType($)&&this.throwError(g,`, item ${S+1}, does not have a valid entity key (id)`)}),u):this.throwError(g,"should be an array of entities")}mustBeKey(g){const u=this.extractData(g);if(!u)throw new Error("should be a single entity key");if(this.isNotKeyType(u))throw new Error("is not a valid key (id)");return u}mustBeKeys(g){const u=this.extractData(g);return Array.isArray(u)?(u.forEach((_,S)=>{this.isNotKeyType(_)&&this.throwError(g,`${this.entityName} ', item ${S+1}, is not a valid entity key (id)`)}),u):this.throwError(g,"should be an array of entity keys (id)")}mustBeUpdate(g){const u=this.extractData(g);if(!u)return this.throwError(g,"should be a single entity update");const{id:_,changes:S}=u,$=this.selectId(S);return(this.isNotKeyType(_)||this.isNotKeyType($))&&this.throwError(g,"has a missing or invalid entity key (id)"),u}mustBeUpdates(g){const u=this.extractData(g);return Array.isArray(u)?(u.forEach((_,S)=>{const{id:$,changes:te}=_,Oe=this.selectId(te);(this.isNotKeyType($)||this.isNotKeyType(Oe))&&this.throwError(g,`, item ${S+1}, has a missing or invalid entity key (id)`)}),u):this.throwError(g,"should be an array of entity updates")}mustBeUpdateResponse(g){const u=this.extractData(g);if(!u)return this.throwError(g,"should be a single entity update");const{id:_,changes:S}=u,$=this.selectId(S);return(this.isNotKeyType(_)||this.isNotKeyType($))&&this.throwError(g,"has a missing or invalid entity key (id)"),u}mustBeUpdateResponses(g){const u=this.extractData(g);return Array.isArray(u)?(u.forEach((_,S)=>{const{id:$,changes:te}=_,Oe=this.selectId(te);(this.isNotKeyType($)||this.isNotKeyType(Oe))&&this.throwError(g,`, item ${S+1}, has a missing or invalid entity key (id)`)}),u):this.throwError(g,"should be an array of entity updates")}extractData(g){return g.payload&&g.payload.data}isNotKeyType(g){return"string"!=typeof g&&"number"!=typeof g}throwError(g,u){throw new Error(`${this.entityName} EntityAction guard for "${g.type}": payload ${u}`)}}function li(m){return null==m?void 0:m.id}function Va(m){if(null==m)return[];if(Array.isArray(m[0])){const[g,...u]=m;m=[...g,...u]}return m}function Wc(m){return m=m||li,function(u){const _=m(u);if(null==_)throw new Error("Primary key may not be null/undefined.");return u&&{id:_,changes:u}}}function $r(...m){const g=Va(m);switch(g.length){case 0:return(0,Un.h)(_=>_.payload&&null!=_.payload.entityOp);case 1:const u=g[0];return(0,Un.h)(_=>_.payload&&u===_.payload.entityOp);default:return(0,Un.h)(_=>{const S=_.payload&&_.payload.entityOp;return S&&g.some($=>$===S)})}}function Kc(...m){const g=Va(m);switch(g.length){case 0:return(0,Un.h)(_=>_.payload&&null!=_.payload.entityName);case 1:const u=g[0];return(0,Un.h)(_=>_.payload&&u===_.payload.entityName);default:return(0,Un.h)(_=>{const S=_.payload&&_.payload.entityName;return!!S&&g.some($=>$===S)})}}var Ln=(()=>{return(m=Ln||(Ln={})).Add="Add",m.Delete="Delete",m.Update="Update",m.Upsert="Upsert",Ln;var m})();function Qa(m){const g=(m=m&&m.changes?m:{changes:[]}).changes.filter(u=>null!=u&&u.entities&&u.entities.length>0);return Object.assign(Object.assign({},m),{changes:g})}new class ei{add(g,u){return u=Array.isArray(u)?u:u?[u]:[],{entityName:g,op:Ln.Add,entities:u}}delete(g,u){const _=Array.isArray(u)?u:u?[u]:[];return{entityName:g,op:Ln.Delete,entities:_}}update(g,u){return u=Array.isArray(u)?u:u?[u]:[],{entityName:g,op:Ln.Update,entities:u}}upsert(g,u){return u=Array.isArray(u)?u:u?[u]:[],{entityName:g,op:Ln.Upsert,entities:u}}};var Br=(()=>{return(m=Br||(Br={}))[m.IgnoreChanges=0]="IgnoreChanges",m[m.PreserveChanges=1]="PreserveChanges",m[m.OverwriteChanges=2]="OverwriteChanges",Br;var m})(),Cn=(()=>{return(m=Cn||(Cn={})).CLEAR_COLLECTIONS="@ngrx/data/entity-cache/clear-collections",m.LOAD_COLLECTIONS="@ngrx/data/entity-cache/load-collections",m.MERGE_QUERY_SET="@ngrx/data/entity-cache/merge-query-set",m.SET_ENTITY_CACHE="@ngrx/data/entity-cache/set-cache",m.SAVE_ENTITIES="@ngrx/data/entity-cache/save-entities",m.SAVE_ENTITIES_CANCEL="@ngrx/data/entity-cache/save-entities-cancel",m.SAVE_ENTITIES_CANCELED="@ngrx/data/entity-cache/save-entities-canceled",m.SAVE_ENTITIES_ERROR="@ngrx/data/entity-cache/save-entities-error",m.SAVE_ENTITIES_SUCCESS="@ngrx/data/entity-cache/save-entities-success",Cn;var m})();class As{constructor(g,u){this.type=Cn.CLEAR_COLLECTIONS,this.payload={collections:g,tag:u}}}class oo{constructor(g,u){this.type=Cn.LOAD_COLLECTIONS,this.payload={collections:g,tag:u}}}class Rs{constructor(g,u,_){this.type=Cn.MERGE_QUERY_SET,this.payload={querySet:g,mergeStrategy:null===u?Br.PreserveChanges:u,tag:_}}}class bs{constructor(g,u){this.cache=g,this.type=Cn.SET_ENTITY_CACHE,this.payload={cache:g,tag:u}}}class oa{constructor(g,u,_){this.type=Cn.SAVE_ENTITIES,_=_||{},g&&(g.tag=g.tag||_.tag),this.payload=Object.assign(Object.assign({changeSet:g,url:u},_),{tag:g.tag})}}class Rt{constructor(g,u,_,S){this.type=Cn.SAVE_ENTITIES_CANCEL,this.payload={correlationId:g,reason:u,entityNames:_,tag:S}}}class qc{constructor(g,u,_){this.type=Cn.SAVE_ENTITIES_CANCELED,this.payload={correlationId:g,reason:u,tag:_}}}class Yc{constructor(g,u){this.type=Cn.SAVE_ENTITIES_ERROR,this.payload={error:g,originalAction:u,correlationId:u.payload.correlationId}}}class aa{constructor(g,u,_){this.type=Cn.SAVE_ENTITIES_SUCCESS,_=_||{},g&&(g.tag=g.tag||_.tag),this.payload=Object.assign(Object.assign({changeSet:g,url:u},_),{tag:g.tag})}}var tt=(()=>{return(m=tt||(tt={})).CANCEL_PERSIST="@ngrx/data/cancel-persist",m.CANCELED_PERSIST="@ngrx/data/canceled-persist",m.QUERY_ALL="@ngrx/data/query-all",m.QUERY_ALL_SUCCESS="@ngrx/data/query-all/success",m.QUERY_ALL_ERROR="@ngrx/data/query-all/error",m.QUERY_LOAD="@ngrx/data/query-load",m.QUERY_LOAD_SUCCESS="@ngrx/data/query-load/success",m.QUERY_LOAD_ERROR="@ngrx/data/query-load/error",m.QUERY_MANY="@ngrx/data/query-many",m.QUERY_MANY_SUCCESS="@ngrx/data/query-many/success",m.QUERY_MANY_ERROR="@ngrx/data/query-many/error",m.QUERY_BY_KEY="@ngrx/data/query-by-key",m.QUERY_BY_KEY_SUCCESS="@ngrx/data/query-by-key/success",m.QUERY_BY_KEY_ERROR="@ngrx/data/query-by-key/error",m.SAVE_ADD_MANY="@ngrx/data/save/add-many",m.SAVE_ADD_MANY_ERROR="@ngrx/data/save/add-many/error",m.SAVE_ADD_MANY_SUCCESS="@ngrx/data/save/add-many/success",m.SAVE_ADD_ONE="@ngrx/data/save/add-one",m.SAVE_ADD_ONE_ERROR="@ngrx/data/save/add-one/error",m.SAVE_ADD_ONE_SUCCESS="@ngrx/data/save/add-one/success",m.SAVE_DELETE_MANY="@ngrx/data/save/delete-many",m.SAVE_DELETE_MANY_SUCCESS="@ngrx/data/save/delete-many/success",m.SAVE_DELETE_MANY_ERROR="@ngrx/data/save/delete-many/error",m.SAVE_DELETE_ONE="@ngrx/data/save/delete-one",m.SAVE_DELETE_ONE_SUCCESS="@ngrx/data/save/delete-one/success",m.SAVE_DELETE_ONE_ERROR="@ngrx/data/save/delete-one/error",m.SAVE_UPDATE_MANY="@ngrx/data/save/update-many",m.SAVE_UPDATE_MANY_SUCCESS="@ngrx/data/save/update-many/success",m.SAVE_UPDATE_MANY_ERROR="@ngrx/data/save/update-many/error",m.SAVE_UPDATE_ONE="@ngrx/data/save/update-one",m.SAVE_UPDATE_ONE_SUCCESS="@ngrx/data/save/update-one/success",m.SAVE_UPDATE_ONE_ERROR="@ngrx/data/save/update-one/error",m.SAVE_UPSERT_MANY="@ngrx/data/save/upsert-many",m.SAVE_UPSERT_MANY_SUCCESS="@ngrx/data/save/upsert-many/success",m.SAVE_UPSERT_MANY_ERROR="@ngrx/data/save/upsert-many/error",m.SAVE_UPSERT_ONE="@ngrx/data/save/upsert-one",m.SAVE_UPSERT_ONE_SUCCESS="@ngrx/data/save/upsert-one/success",m.SAVE_UPSERT_ONE_ERROR="@ngrx/data/save/upsert-one/error",m.ADD_ALL="@ngrx/data/add-all",m.ADD_MANY="@ngrx/data/add-many",m.ADD_ONE="@ngrx/data/add-one",m.REMOVE_ALL="@ngrx/data/remove-all",m.REMOVE_MANY="@ngrx/data/remove-many",m.REMOVE_ONE="@ngrx/data/remove-one",m.UPDATE_MANY="@ngrx/data/update-many",m.UPDATE_ONE="@ngrx/data/update-one",m.UPSERT_MANY="@ngrx/data/upsert-many",m.UPSERT_ONE="@ngrx/data/upsert-one",m.COMMIT_ALL="@ngrx/data/commit-all",m.COMMIT_MANY="@ngrx/data/commit-many",m.COMMIT_ONE="@ngrx/data/commit-one",m.UNDO_ALL="@ngrx/data/undo-all",m.UNDO_MANY="@ngrx/data/undo-many",m.UNDO_ONE="@ngrx/data/undo-one",m.SET_CHANGE_STATE="@ngrx/data/set-change-state",m.SET_COLLECTION="@ngrx/data/set-collection",m.SET_FILTER="@ngrx/data/set-filter",m.SET_LOADED="@ngrx/data/set-loaded",m.SET_LOADING="@ngrx/data/set-loading",tt;var m})();const _i="/success",ao="/error";function ks(m){return m+_i}class jo{constructor(g,u){this.error=g,this.requestData=u,this.message="string"==typeof g?g:function Ns(m){const{error:g,body:u,message:_}=m;let S=null;return g?S="string"==typeof g?g:g.message:_?S=_:u&&(S="string"==typeof u?u:u.error),"string"==typeof S?S:S?JSON.stringify(S):null}(g)}}class Ul{}class $o{}const Ea=new A.OlP("@ngrx/data Plural Names");class Vl{}class Ma{}let P=(()=>{class m{constructor(u){this.pluralizer=u,this.knownHttpResourceUrls={}}getResourceUrls(u,_,S=!1){let $=this.knownHttpResourceUrls[u];if(!$){const te=S?_:function F(m){return m.replace(/^[/\s]+|[/\s]+$/g,"")}(_);$={entityResourceUrl:`${te}/${u}/`.toLowerCase(),collectionResourceUrl:`${te}/${this.pluralizer.pluralize(u)}/`.toLowerCase()},this.registerHttpResourceUrls({[u]:$})}return $}entityResource(u,_,S){return this.getResourceUrls(u,_,S).entityResourceUrl}collectionResource(u,_){return this.getResourceUrls(u,_).collectionResourceUrl}registerHttpResourceUrls(u){this.knownHttpResourceUrls=Object.assign(Object.assign({},this.knownHttpResourceUrls),u||{})}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(Vl))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();class K{constructor(g,u,_,S){this.http=u,this.httpUrlGenerator=_,this.getDelay=0,this.saveDelay=0,this.timeout=0,this.trailingSlashEndpoints=!1,this._name=`${g} DefaultDataService`,this.entityName=g;const{root:$="api",delete404OK:te=!0,getDelay:Oe=0,saveDelay:Ge=0,timeout:We=0,trailingSlashEndpoints:Ve=!1}=S||{};this.delete404OK=te,this.entityUrl=_.entityResource(g,$,Ve),this.entitiesUrl=_.collectionResource(g,$),this.getDelay=Oe,this.saveDelay=Ge,this.timeout=We}get name(){return this._name}add(g){const u=g||new Error(`No "${this.entityName}" entity to add`);return this.execute("POST",this.entityUrl,u)}delete(g){let u;return null==g&&(u=new Error(`No "${this.entityName}" key to delete`)),this.execute("DELETE",this.entityUrl+g,u).pipe((0,tr.U)(_=>g))}getAll(){return this.execute("GET",this.entitiesUrl)}getById(g){let u;return null==g&&(u=new Error(`No "${this.entityName}" key to get`)),this.execute("GET",this.entityUrl+g,u)}getWithQuery(g){const _=new er.LE("string"==typeof g?{fromString:g}:{fromObject:g});return this.execute("GET",this.entitiesUrl,void 0,{params:_})}update(g){const u=g&&g.id,_=null==u?new Error(`No "${this.entityName}" update data or id`):g.changes;return this.execute("PUT",this.entityUrl+u,_)}upsert(g){const u=g||new Error(`No "${this.entityName}" entity to upsert`);return this.execute("POST",this.entityUrl,u)}execute(g,u,_,S){const $={method:g,url:u,data:_,options:S};if(_ instanceof Error)return this.handleError($)(_);let te;switch(g){case"DELETE":te=this.http.delete(u,S),this.saveDelay&&(te=te.pipe(or(this.saveDelay)));break;case"GET":te=this.http.get(u,S),this.getDelay&&(te=te.pipe(or(this.getDelay)));break;case"POST":te=this.http.post(u,_,S),this.saveDelay&&(te=te.pipe(or(this.saveDelay)));break;case"PUT":te=this.http.put(u,_,S),this.saveDelay&&(te=te.pipe(or(this.saveDelay)));break;default:{const Oe=new Error("Unimplemented HTTP method, "+g);te=(0,Vi._)(()=>Oe)}}return this.timeout&&(te=te.pipe(Os(this.timeout+this.saveDelay))),te.pipe((0,ir.K)(this.handleError($)))}handleError(g){return u=>{const _=this.handleDelete404(u,g);if(_)return _;const S=new jo(u,g);return(0,Vi._)(()=>S)}}handleDelete404(g,u){if(404===g.status&&"DELETE"===u.method&&this.delete404OK)return(0,Fr.of)({})}}let ee=(()=>{class m{constructor(u,_,S){this.http=u,this.httpUrlGenerator=_,this.config=S,_.registerHttpResourceUrls((S=S||{}).entityHttpResourceUrls)}create(u){return new K(u,this.http,this.httpUrlGenerator,this.config)}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(er.eN),A.LFG(Ma),A.LFG(Ul,8))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();const Se=new A.OlP("@ngrx/data Entity Metadata");let mt=(()=>{class m{constructor(u){this.definitions={},u&&u.forEach(_=>this.registerMetadataMap(_))}getDefinition(u,_=!0){u=u.trim();const S=this.definitions[u];if(!S&&_)throw new Error(`No EntityDefinition for entity type "${u}".`);return S}registerMetadata(u){if(u){const _=function De(m){let g=m.entityName;if(!g)throw new Error("Missing required entityName");m.entityName=g=g.trim();const u=m.selectId||li,_=m.sortComparer=m.sortComparer||!1,S=lr({selectId:u,sortComparer:_}),$=m.entityDispatcherOptions||{},te=S.getInitialState(Object.assign({entityName:g,filter:"",loaded:!1,loading:!1,changeState:{}},m.additionalCollectionState||{}));return{entityName:g,entityAdapter:S,entityDispatcherOptions:$,initialState:te,metadata:m,noChangeTracking:!0===m.noChangeTracking,selectId:u,sortComparer:_}}(u);this.registerDefinition(_)}}registerMetadataMap(u={}){Object.keys(u||{}).forEach(_=>this.registerMetadata(Object.assign({entityName:_},u[_])))}registerDefinition(u){this.definitions[u.entityName]=u}registerDefinitions(u){Object.assign(this.definitions,u)}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(Se,8))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();const Wt=Ln.Update;let pn=(()=>{class m{constructor(u,_,S){this.entityDefinitionService=u,this.http=_,this.idSelectors={},this.saveDelay=0,this.timeout=0;const{saveDelay:$=0,timeout:te=0}=S||{};this.saveDelay=$,this.timeout=te}saveEntities(u,_){u=this.filterChangeSet(u),u=this.flattenUpdates(u);let S=this.http.post(_,u).pipe((0,tr.U)($=>this.restoreUpdates($)),(0,ir.K)(this.handleError({method:"POST",url:_,data:u})));return this.timeout&&(S=S.pipe(Os(this.timeout))),this.saveDelay&&(S=S.pipe(or(this.saveDelay))),S}handleError(u){return _=>{const S=new jo(_,u);return(0,Vi._)(()=>S)}}filterChangeSet(u){return Qa(u)}flattenUpdates(u){let _=u.changes;if(0===_.length)return u;let S=!1;return _=_.map($=>$.op===Wt&&$.entities.length>0?(S=!0,Object.assign(Object.assign({},$),{entities:$.entities.map(te=>te.changes)})):$),S?Object.assign(Object.assign({},u),{changes:_}):u}restoreUpdates(u){if(null==u)return u;let _=u.changes;if(0===_.length)return u;let S=!1;return _=_.map($=>{if($.op===Wt){S=!0;const te=this.getIdSelector($.entityName);return Object.assign(Object.assign({},$),{entities:$.entities.map(Oe=>({id:te(Oe),changes:Oe}))})}return $}),S?Object.assign(Object.assign({},u),{changes:_}):u}getIdSelector(u){let _=this.idSelectors[u];return _||(_=this.entityDefinitionService.getDefinition(u).selectId,this.idSelectors[u]=_),_}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(mt),A.LFG(er.eN),A.LFG(Ul,8))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})(),gn=(()=>{class m{constructor(u){this.defaultDataServiceFactory=u,this.services={}}getService(u){u=u.trim();let _=this.services[u];return _||(_=this.defaultDataServiceFactory.create(u),this.services[u]=_),_}registerService(u,_){this.services[u.trim()]=_}registerServices(u){this.services=Object.assign(Object.assign({},this.services),u)}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(ee))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();class jn{}let Pn=(()=>{class m{constructor(u,_){this.logger=u,this.entityActionFactory=_}handleSuccess(u){const _=ks(u.payload.entityOp);return S=>this.entityActionFactory.createFromAction(u,{entityOp:_,data:S})}handleError(u){const _=function ba(m){return m+ao}(u.payload.entityOp);return S=>{const te={error:S instanceof jo?S:new jo(S,null),originalAction:u};return this.logger.error(te),this.entityActionFactory.createFromAction(u,{entityOp:_,data:te})}}}return m.\u0275fac=function(u){return new(u||m)(A.LFG($o),A.LFG(nr))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();class Es{constructor(g){this.message=g,this.message=g||"Canceled by user"}}let Sn=(()=>{class m{constructor(){this.seed=0,this.prefix="CRID"}next(){return this.seed+=1,this.prefix+this.seed}}return m.\u0275fac=function(u){return new(u||m)},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})(),Oa=(()=>{class m{constructor(){this.optimisticAdd=!1,this.optimisticDelete=!0,this.optimisticUpdate=!1,this.optimisticUpsert=!1,this.optimisticSaveEntities=!1}}return m.\u0275fac=function(u){return new(u||m)},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})(),Ja=(()=>{class m{constructor(u,_,S,$){this.correlationIdGenerator=u,this.defaultDispatcherOptions=_,this.store=$,this.reducedActions$=S.pipe((0,pr.d)(1)),this.raSubscription=this.reducedActions$.subscribe()}dispatch(u){return this.store.dispatch(u),u}cancelSaveEntities(u,_,S,$){if(!u)throw new Error("Missing correlationId");const te=new Rt(u,_,S,$);this.dispatch(te)}clearCollections(u,_){this.dispatch(new As(u,_))}loadCollections(u,_){this.dispatch(new oo(u,_))}mergeQuerySet(u,_,S){this.dispatch(new Rs(u,_,S))}setEntityCache(u,_){this.dispatch(new bs(u,_))}saveEntities(u,_,S){const $=Array.isArray(u)?{changes:u}:u,te=null==(S=S||{}).correlationId?this.correlationIdGenerator.next():S.correlationId,Oe=null==S.isOptimistic?this.defaultDispatcherOptions.optimisticSaveEntities||!1:!0===S.isOptimistic,Ge=S.tag||"Save Entities";S=Object.assign(Object.assign({},S),{correlationId:te,isOptimistic:Oe,tag:Ge});const We=new oa($,_,S);return this.dispatch(We),this.getSaveEntitiesResponseData$(S.correlationId).pipe((0,pr.d)(1))}getSaveEntitiesResponseData$(u){return this.reducedActions$.pipe((0,Un.h)(_=>_.type===Cn.SAVE_ENTITIES_SUCCESS||_.type===Cn.SAVE_ENTITIES_ERROR||_.type===Cn.SAVE_ENTITIES_CANCEL),(0,Un.h)(_=>u===_.payload.correlationId),(0,ti.q)(1),(0,Vn.z)(_=>_.type===Cn.SAVE_ENTITIES_CANCEL?(0,Vi._)(()=>new Es(_.payload.reason)):_.type===Cn.SAVE_ENTITIES_SUCCESS?(0,Fr.of)(_.payload.changeSet):(0,Vi._)(()=>_.payload)))}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(Sn),A.LFG(Oa),A.LFG(k),A.LFG(Dn))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();class la{constructor(g,u,_,S=li,$,te,Oe,Ge){this.entityName=g,this.entityActionFactory=u,this.store=_,this.selectId=S,this.defaultDispatcherOptions=$,this.reducedActions$=te,this.correlationIdGenerator=Ge,this.guard=new Ll(g,S),this.toUpdate=Wc(S);const We=Xr(Oe,Ve=>Ve[g]);this.entityCollection$=_.select(We)}createEntityAction(g,u,_){return this.entityActionFactory.create(Object.assign({entityName:this.entityName,entityOp:g,data:u},_))}createAndDispatch(g,u,_){const S=this.createEntityAction(g,u,_);return this.dispatch(S),S}dispatch(g){return this.store.dispatch(g),g}add(g,u){u=this.setSaveEntityActionOptions(u,this.defaultDispatcherOptions.optimisticAdd);const _=this.createEntityAction(tt.SAVE_ADD_ONE,g,u);return u.isOptimistic&&this.guard.mustBeEntity(_),this.dispatch(_),this.getResponseData$(u.correlationId).pipe(Rn(this.entityCollection$),(0,tr.U)(([S,$])=>$.entities[this.selectId(S)]),(0,pr.d)(1))}cancel(g,u,_){if(!g)throw new Error("Missing correlationId");this.createAndDispatch(tt.CANCEL_PERSIST,u,{correlationId:g})}delete(g,u){u=this.setSaveEntityActionOptions(u,this.defaultDispatcherOptions.optimisticDelete);const _=this.getKey(g),S=this.createEntityAction(tt.SAVE_DELETE_ONE,_,u);return this.guard.mustBeKey(S),this.dispatch(S),this.getResponseData$(u.correlationId).pipe((0,tr.U)(()=>_),(0,pr.d)(1))}getAll(g){g=this.setQueryEntityActionOptions(g);const u=this.createEntityAction(tt.QUERY_ALL,null,g);return this.dispatch(u),this.getResponseData$(g.correlationId).pipe(Rn(this.entityCollection$),(0,tr.U)(([_,S])=>_.reduce(($,te)=>{const Oe=S.entities[this.selectId(te)];return Oe&&$.push(Oe),$},[])),(0,pr.d)(1))}getByKey(g,u){u=this.setQueryEntityActionOptions(u);const _=this.createEntityAction(tt.QUERY_BY_KEY,g,u);return this.dispatch(_),this.getResponseData$(u.correlationId).pipe(Rn(this.entityCollection$),(0,tr.U)(([S,$])=>$.entities[this.selectId(S)]),(0,pr.d)(1))}getWithQuery(g,u){u=this.setQueryEntityActionOptions(u);const _=this.createEntityAction(tt.QUERY_MANY,g,u);return this.dispatch(_),this.getResponseData$(u.correlationId).pipe(Rn(this.entityCollection$),(0,tr.U)(([S,$])=>S.reduce((te,Oe)=>{const Ge=$.entities[this.selectId(Oe)];return Ge&&te.push(Ge),te},[])),(0,pr.d)(1))}load(g){g=this.setQueryEntityActionOptions(g);const u=this.createEntityAction(tt.QUERY_LOAD,null,g);return this.dispatch(u),this.getResponseData$(g.correlationId).pipe((0,pr.d)(1))}update(g,u){const _=this.toUpdate(g);u=this.setSaveEntityActionOptions(u,this.defaultDispatcherOptions.optimisticUpdate);const S=this.createEntityAction(tt.SAVE_UPDATE_ONE,_,u);return u.isOptimistic&&this.guard.mustBeUpdate(S),this.dispatch(S),this.getResponseData$(u.correlationId).pipe((0,tr.U)($=>$.changes),Rn(this.entityCollection$),(0,tr.U)(([$,te])=>te.entities[this.selectId($)]),(0,pr.d)(1))}upsert(g,u){u=this.setSaveEntityActionOptions(u,this.defaultDispatcherOptions.optimisticUpsert);const _=this.createEntityAction(tt.SAVE_UPSERT_ONE,g,u);return u.isOptimistic&&this.guard.mustBeEntity(_),this.dispatch(_),this.getResponseData$(u.correlationId).pipe(Rn(this.entityCollection$),(0,tr.U)(([S,$])=>$.entities[this.selectId(S)]),(0,pr.d)(1))}addAllToCache(g,u){this.createAndDispatch(tt.ADD_ALL,g,u)}addOneToCache(g,u){this.createAndDispatch(tt.ADD_ONE,g,u)}addManyToCache(g,u){this.createAndDispatch(tt.ADD_MANY,g,u)}clearCache(g){this.createAndDispatch(tt.REMOVE_ALL,void 0,g)}removeOneFromCache(g,u){this.createAndDispatch(tt.REMOVE_ONE,this.getKey(g),u)}removeManyFromCache(g,u){if(!g||0===g.length)return;const _="object"==typeof g[0]?g.map(S=>this.getKey(S)):g;this.createAndDispatch(tt.REMOVE_MANY,_,u)}updateOneInCache(g,u){const _=this.toUpdate(g);this.createAndDispatch(tt.UPDATE_ONE,_,u)}updateManyInCache(g,u){if(!g||0===g.length)return;const _=g.map(S=>this.toUpdate(S));this.createAndDispatch(tt.UPDATE_MANY,_,u)}upsertOneInCache(g,u){this.createAndDispatch(tt.UPSERT_ONE,g,u)}upsertManyInCache(g,u){!g||0===g.length||this.createAndDispatch(tt.UPSERT_MANY,g,u)}setFilter(g){this.createAndDispatch(tt.SET_FILTER,g)}setLoaded(g){this.createAndDispatch(tt.SET_LOADED,!!g)}setLoading(g){this.createAndDispatch(tt.SET_LOADING,!!g)}getKey(g){return"object"==typeof g?this.selectId(g):g}getResponseData$(g){return this.reducedActions$.pipe((0,Un.h)(u=>!!u.payload),(0,Un.h)(u=>{const{correlationId:_,entityName:S,entityOp:$}=u.payload;return S===this.entityName&&_===g&&($.endsWith(_i)||$.endsWith(ao)||$===tt.CANCEL_PERSIST)}),(0,ti.q)(1),(0,Vn.z)(u=>{const{entityOp:_}=u.payload;return _===tt.CANCEL_PERSIST?(0,Vi._)(()=>new Es(u.payload.data)):_.endsWith(_i)?(0,Fr.of)(u.payload.data):(0,Vi._)(()=>u.payload.data.error)}))}setQueryEntityActionOptions(g){const u=null==(g=g||{}).correlationId?this.correlationIdGenerator.next():g.correlationId;return Object.assign(Object.assign({},g),{correlationId:u})}setSaveEntityActionOptions(g,u){const _=null==(g=g||{}).correlationId?this.correlationIdGenerator.next():g.correlationId,S=null==g.isOptimistic?u||!1:!0===g.isOptimistic;return Object.assign(Object.assign({},g),{correlationId:_,isOptimistic:S})}}const ci="entityCache",yo=new A.OlP("@ngrx/data Entity Cache Name"),Do=new A.OlP("@ngrx/data Entity Cache Meta Reducers"),Xa=new A.OlP("@ngrx/data Entity Collection Meta Reducers"),Ia=new A.OlP("@ngrx/data Initial Entity Cache State"),ui=new A.OlP("@ngrx/data Entity Cache Selector"),hc={provide:ui,useFactory:el,deps:[[new A.FiY,yo]]};function el(m){return function Ga(m){return Xr(g=>{const u=g[m];return(0,A.X6Q)()&&!(m in g)&&console.warn(`@ngrx/store: The feature name "${m}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${m}', ...) or StoreModule.forFeature('${m}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),u},g=>g)}(m=m||ci)}let fc=(()=>{class m{constructor(u,_,S,$,te,Oe){this.entityActionFactory=u,this.store=_,this.entityDispatcherDefaultOptions=S,this.entityCacheSelector=te,this.correlationIdGenerator=Oe,this.reducedActions$=$.pipe((0,pr.d)(1)),this.raSubscription=this.reducedActions$.subscribe()}create(u,_=li,S={}){const $=Object.assign(Object.assign({},this.entityDispatcherDefaultOptions),S);return new la(u,this.entityActionFactory,this.store,_,$,this.reducedActions$,this.entityCacheSelector,this.correlationIdGenerator)}ngOnDestroy(){this.raSubscription.unsubscribe()}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(nr),A.LFG(Dn),A.LFG(Oa),A.LFG(k),A.LFG(ui),A.LFG(Sn))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();const pc=new A.OlP("@ngrx/data Entity Effects Scheduler");let Bl=(()=>{class m{constructor(u,_,S,$,te){this.actions=u,this.dataService=_,this.entityActionFactory=S,this.logger=$,this.scheduler=te,this.responseDelay=10,this.saveEntitiesCancel$=no(()=>this.actions.pipe(Vo(Cn.SAVE_ENTITIES_CANCEL),(0,Un.h)(Oe=>null!=Oe.payload.correlationId)),{dispatch:!1}),this.saveEntities$=no(()=>this.actions.pipe(Vo(Cn.SAVE_ENTITIES),(0,Vn.z)(Oe=>this.saveEntities(Oe))))}saveEntities(u){const _=u.payload.error;if(_)return this.handleSaveEntitiesError$(u)(_);try{const S=Qa(u.payload.changeSet),{correlationId:$,mergeStrategy:te,tag:Oe,url:Ge}=u.payload,We={correlationId:$,mergeStrategy:te,tag:Oe};if(0===S.changes.length)return(0,Fr.of)(new aa(S,Ge,We));return zi(this.saveEntitiesCancel$.pipe((0,Un.h)(xn=>$===xn.payload.correlationId),(0,tr.U)(xn=>new qc($,xn.payload.reason,xn.payload.tag))),this.dataService.saveEntities(S,Ge).pipe((0,Ti.b)(xn=>this.handleSaveEntitiesSuccess$(u,this.entityActionFactory)(xn)),(0,ir.K)(this.handleSaveEntitiesError$(u))))}catch(S){return this.handleSaveEntitiesError$(u)(S)}}handleSaveEntitiesError$(u){return _=>{const S=_ instanceof jo?_:new jo(_,null);return(0,Fr.of)(new Yc(S,u)).pipe(or(this.responseDelay,this.scheduler||Pi.z))}}handleSaveEntitiesSuccess$(u,_){const{url:S,correlationId:$,mergeStrategy:te,tag:Oe}=u.payload,Ge={correlationId:$,mergeStrategy:te,tag:Oe};return We=>{if(We)return(0,Fr.of)(new aa(We,S,Ge));if(We=u.payload.changeSet,!u.payload.isOptimistic)return(0,Fr.of)(new aa(We,S,Ge));const Ve=We.changes.reduce((Ut,xn)=>-1===Ut.indexOf(xn.entityName)?Ut.concat(xn.entityName):Ut,[]);return(0,si.T)(Ve.map(Ut=>_.create(Ut,tt.SET_LOADING,!1)))}}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(sa),A.LFG(pn),A.LFG(nr),A.LFG($o),A.LFG(pc,8))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();const _l=[tt.QUERY_ALL,tt.QUERY_LOAD,tt.QUERY_BY_KEY,tt.QUERY_MANY,tt.SAVE_ADD_ONE,tt.SAVE_DELETE_ONE,tt.SAVE_UPDATE_ONE,tt.SAVE_UPSERT_ONE];let Zc=(()=>{class m{constructor(u,_,S,$,te){this.actions=u,this.dataService=_,this.entityActionFactory=S,this.resultHandler=$,this.scheduler=te,this.responseDelay=10,this.cancel$=no(()=>this.actions.pipe($r(tt.CANCEL_PERSIST),(0,tr.U)(Oe=>Oe.payload.correlationId),(0,Un.h)(Oe=>null!=Oe)),{dispatch:!1}),this.persist$=no(()=>this.actions.pipe($r(_l),(0,Vn.z)(Oe=>this.persist(Oe))))}persist(u){if(u.payload.skip)return this.handleSkipSuccess$(u);if(u.payload.error)return this.handleError$(u)(u.payload.error);try{return zi(this.cancel$.pipe((0,Un.h)($=>u.payload.correlationId===$),(0,tr.U)($=>this.entityActionFactory.createFromAction(u,{entityOp:tt.CANCELED_PERSIST}))),this.callDataService(u).pipe((0,tr.U)(this.resultHandler.handleSuccess(u)),(0,ir.K)(this.handleError$(u))))}catch(_){return this.handleError$(u)(_)}}callDataService(u){const{entityName:_,entityOp:S,data:$}=u.payload,te=this.dataService.getService(_);switch(S){case tt.QUERY_ALL:case tt.QUERY_LOAD:return te.getAll();case tt.QUERY_BY_KEY:return te.getById($);case tt.QUERY_MANY:return te.getWithQuery($);case tt.SAVE_ADD_ONE:return te.add($);case tt.SAVE_DELETE_ONE:return te.delete($);case tt.SAVE_UPDATE_ONE:const{id:Oe,changes:Ge}=$;return te.update($).pipe((0,tr.U)(We=>We&&Object.keys(We).length>0?{id:Oe,changes:Object.assign(Object.assign({},Ge),We),changed:!0}:{id:Oe,changes:Ge,changed:!1}));case tt.SAVE_UPSERT_ONE:return te.upsert($).pipe((0,tr.U)(We=>We&&Object.keys(We).length>0?We:$));default:throw new Error(`Persistence action "${S}" is not implemented.`)}}handleError$(u){return _=>(0,Fr.of)(this.resultHandler.handleError(u)(_)).pipe(or(this.responseDelay,this.scheduler||Pi.z))}handleSkipSuccess$(u){const _=ks(u.payload.entityOp),S=this.entityActionFactory.createFromAction(u,{entityOp:_});return(0,Fr.of)(S).pipe(or(this.responseDelay,this.scheduler||Pi.z))}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(sa),A.LFG(gn),A.LFG(nr),A.LFG(jn),A.LFG(pc,8))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();class Ba{constructor(g,u){this.entityName=g,g=g.trim();const{dispatcher:_,selectors:S,selectors$:$}=u.create(g);this.entityName=g,this.dispatcher=_,this.guard=_.guard,this.selectId=_.selectId,this.toUpdate=_.toUpdate,this.selectors=S,this.selectors$=$,this.collection$=$.collection$,this.count$=$.count$,this.entities$=$.entities$,this.entityActions$=$.entityActions$,this.entityMap$=$.entityMap$,this.errors$=$.errors$,this.filter$=$.filter$,this.filteredEntities$=$.filteredEntities$,this.keys$=$.keys$,this.loaded$=$.loaded$,this.loading$=$.loading$,this.changeState$=$.changeState$}createEntityAction(g,u,_){return this.dispatcher.createEntityAction(g,u,_)}createAndDispatch(g,u,_){return this.dispatcher.createAndDispatch(g,u,_)}dispatch(g){return this.dispatcher.dispatch(g)}get store(){return this.dispatcher.store}add(g,u){return this.dispatcher.add(g,u)}cancel(g,u,_){this.dispatcher.cancel(g,u,_)}delete(g,u){return this.dispatcher.delete(g,u)}getAll(g){return this.dispatcher.getAll(g)}getByKey(g,u){return this.dispatcher.getByKey(g,u)}getWithQuery(g,u){return this.dispatcher.getWithQuery(g,u)}load(g){return this.dispatcher.load(g)}update(g,u){return this.dispatcher.update(g,u)}upsert(g,u){return this.dispatcher.upsert(g,u)}addAllToCache(g,u){this.dispatcher.addAllToCache(g,u)}addOneToCache(g,u){this.dispatcher.addOneToCache(g,u)}addManyToCache(g,u){this.dispatcher.addManyToCache(g,u)}clearCache(){this.dispatcher.clearCache()}removeOneFromCache(g,u){this.dispatcher.removeOneFromCache(g,u)}removeManyFromCache(g,u){this.dispatcher.removeManyFromCache(g,u)}updateOneInCache(g,u){this.dispatcher.updateOneInCache(g,u)}updateManyInCache(g,u){this.dispatcher.updateManyInCache(g,u)}upsertOneInCache(g,u){this.dispatcher.upsertOneInCache(g,u)}upsertManyInCache(g,u){this.dispatcher.upsertManyInCache(g,u)}setFilter(g){this.dispatcher.setFilter(g)}setLoaded(g){this.dispatcher.setLoaded(!!g)}setLoading(g){this.dispatcher.setLoading(!!g)}}let Fs=(()=>{class m{constructor(u){this.entityDefinitionService=u}create(u){const _=this.entityDefinitionService&&this.entityDefinitionService.getDefinition(u,!1);return _&&_.initialState||function jl(m){return{entityName:m,ids:[],entities:{},filter:void 0,loaded:!1,loading:!1,changeState:{}}}(u)}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(mt,8))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})(),Qc=(()=>{class m{constructor(u,_){this.entityCollectionCreator=u||new Fs,this.selectEntityCache=_||el(ci)}createCollectionSelector(u){return Xr(this.selectEntityCache,(S={})=>S[u]||this.entityCollectionCreator.create(u))}createCollectionSelectors(u){const _="string"==typeof u?{entityName:u}:u,S=wt=>wt.ids,$=wt=>wt.entities,te=Xr(S,$,(wt,bt)=>wt.map(jt=>bt[jt])),Oe=Xr(S,wt=>wt.length),Ge=wt=>wt.filter,We=_.filterFn,Ve=We?Xr(te,Ge,(wt,bt)=>We(wt,bt)):te,Wr={};return Object.keys(_.additionalCollectionState||{}).forEach(wt=>{Wr["select"+wt[0].toUpperCase()+wt.slice(1)]=bt=>bt[wt]}),Object.assign({selectCount:Oe,selectEntities:te,selectEntityMap:$,selectFilter:Ge,selectFilteredEntities:Ve,selectKeys:S,selectLoaded:wt=>wt.loaded,selectLoading:wt=>wt.loading,selectChangeState:wt=>wt.changeState},Wr)}create(u){const _="string"==typeof u?{entityName:u}:u,S=_.entityName,$=this.createCollectionSelector(S),te=this.createCollectionSelectors(_),Oe={};return Object.keys(te).forEach(Ge=>{Oe[Ge]=Xr($,te[Ge])}),Object.assign({entityName:S,selectCollection:$,selectEntityCache:this.selectEntityCache},Oe)}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(Fs,8),A.LFG(ui,8))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})(),gc=(()=>{class m{constructor(u,_,S){this.store=u,this.actions=_,this.selectEntityCache=S,this.entityCache$=this.store.select(this.selectEntityCache),this.entityActionErrors$=_.pipe((0,Un.h)($=>$.payload&&$.payload.entityOp&&$.payload.entityOp.endsWith(ao)),(0,pr.d)(1))}create(u,_){const S={entityName:u};return Object.keys(_).forEach($=>{if($.startsWith("select")){const te=$[6].toLowerCase()+$.substr(7)+"$";S[te]=this.store.select(_[$])}}),S.entityActions$=this.actions.pipe(Kc(u)),S.errors$=this.entityActionErrors$.pipe(Kc(u)),S}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(Dn),A.LFG(sa),A.LFG(ui))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})(),zo=(()=>{class m{constructor(u,_,S,$){this.entityDispatcherFactory=u,this.entityDefinitionService=_,this.entitySelectorsFactory=S,this.entitySelectors$Factory=$}create(u){u=u.trim();const _=this.entityDefinitionService.getDefinition(u),S=this.entityDispatcherFactory.create(u,_.selectId,_.entityDispatcherOptions),$=this.entitySelectorsFactory.create(_.metadata);return{dispatcher:S,entityName:u,selectors:$,selectors$:this.entitySelectors$Factory.create(u,$)}}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(fc),A.LFG(mt),A.LFG(Qc),A.LFG(gc))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})(),vl=(()=>{class m{constructor(u){this.entityCollectionServiceElementsFactory=u}create(u){return new Ba(u,this.entityCollectionServiceElementsFactory)}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(zo))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})(),Cl=(()=>{class m{constructor(u,_,S,$){this.entityCollectionServiceFactory=u,this.store=$,this.entityActionErrors$=S.entityActionErrors$,this.entityCache$=S.entityCache$,this.reducedActions$=_.reducedActions$}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(vl),A.LFG(fc),A.LFG(gc),A.LFG(Dn))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})(),mc=(()=>{class m{constructor(u){this.entityServicesElements=u,this.EntityCollectionServices={}}get entityActionErrors$(){return this.entityServicesElements.entityActionErrors$}get entityCache$(){return this.entityServicesElements.entityCache$}get entityCollectionServiceFactory(){return this.entityServicesElements.entityCollectionServiceFactory}get reducedActions$(){return this.entityServicesElements.reducedActions$}get store(){return this.entityServicesElements.store}dispatch(u){this.store.dispatch(u)}createEntityCollectionService(u){return this.entityCollectionServiceFactory.create(u)}getEntityCollectionService(u){let _=this.EntityCollectionServices[u];return _||(_=this.createEntityCollectionService(u),this.EntityCollectionServices[u]=_),_}registerEntityCollectionService(u,_){this.EntityCollectionServices[_||u.entityName]=u}registerEntityCollectionServices(u){Array.isArray(u)?u.forEach(_=>this.registerEntityCollectionService(_)):Object.keys(u||{}).forEach(_=>{this.registerEntityCollectionService(u[_],_)})}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(Cl))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();class yc{}var Fi=(()=>{return(m=Fi||(Fi={}))[m.Unchanged=0]="Unchanged",m[m.Added=1]="Added",m[m.Deleted=2]="Deleted",m[m.Updated=3]="Updated",Fi;var m})();class bl{constructor(g,u){this.adapter=g,this.selectId=u,this.selectId=u||li}commitAll(g){return 0===Object.keys(g.changeState).length?g:Object.assign(Object.assign({},g),{changeState:{}})}commitMany(g,u){if(null==g||0===g.length)return u;let _=!1;const S=g.reduce(($,te)=>{const Oe="object"==typeof te?this.selectId(te):te;return $[Oe]&&(_||($=Object.assign({},$),_=!0),delete $[Oe]),$},u.changeState);return _?Object.assign(Object.assign({},u),{changeState:S}):u}commitOne(g,u){return null==g?u:this.commitMany([g],u)}mergeQueryResults(g,u,_){return this.mergeServerUpserts(g,u,Br.PreserveChanges,_)}mergeSaveAdds(g,u,_){return this.mergeServerUpserts(g,u,Br.OverwriteChanges,_)}mergeSaveDeletes(g,u,_){const S=g;return u=(_=null==_?Br.OverwriteChanges:_)===Br.IgnoreChanges?u:this.commitMany(S,u),this.adapter.removeMany(S,u)}mergeSaveUpdates(g,u,_,S=!1){if(null==g||0===g.length)return u;let Oe,$=!1,te=u.changeState;switch(_=null==_?Br.OverwriteChanges:_){case Br.IgnoreChanges:return Oe=Ge(g),this.adapter.updateMany(Oe,u);case Br.OverwriteChanges:return te=g.reduce((We,Ve)=>{const Ut=Ve.id;return We[Ut]&&($||(We=Object.assign({},We),$=!0),delete We[Ut]),We},u.changeState),u=$?Object.assign(Object.assign({},u),{changeState:te}):u,Oe=Ge(g),this.adapter.updateMany(Oe,u);case Br.PreserveChanges:{const We=[];return te=g.reduce((Ve,Ut)=>{const xn=Ut.id,vr=Ve[xn];if(vr){$||(Ve=Object.assign({},Ve),$=!0);const sn=this.selectId(Ut.changes),Wr=vr;sn!==xn&&delete Ve[xn];const wt=Object.assign(Object.assign({},Wr.originalValue),Ut.changes);Ve[sn]=Object.assign(Object.assign({},Wr),{originalValue:wt})}else We.push(Ut);return Ve},u.changeState),u=$?Object.assign(Object.assign({},u),{changeState:te}):u,Oe=Ge(We),this.adapter.updateMany(Oe,u)}}function Ge(We){return!0===S&&(We=We.filter(Ve=>!0===Ve.changed)),We.map(Ve=>({id:Ve.id,changes:Ve.changes}))}}mergeSaveUpserts(g,u,_){return this.mergeServerUpserts(g,u,Br.OverwriteChanges,_)}mergeServerUpserts(g,u,_,S){if(null==g||0===g.length)return u;let $=!1,te=u.changeState;switch(S=null==S?_:S){case Br.IgnoreChanges:return this.adapter.upsertMany(g,u);case Br.OverwriteChanges:return u=this.adapter.upsertMany(g,u),te=g.reduce((Oe,Ge)=>{const We=this.selectId(Ge);return Oe[We]&&($||(Oe=Object.assign({},Oe),$=!0),delete Oe[We]),Oe},u.changeState),$?Object.assign(Object.assign({},u),{changeState:te}):u;case Br.PreserveChanges:{const Oe=[];return te=g.reduce((Ge,We)=>{const Ve=this.selectId(We);return Ge[Ve]?$||(Ge=Object.assign(Object.assign({},Ge),{[Ve]:Object.assign(Object.assign({},Ge[Ve]),{originalValue:We})}),$=!0):Oe.push(We),Ge},u.changeState),u=this.adapter.upsertMany(Oe,u),$?Object.assign(Object.assign({},u),{changeState:te}):u}}}trackAddMany(g,u,_){if(_===Br.IgnoreChanges||null==g||0===g.length)return u;let S=!1;const $=g.reduce((te,Oe)=>{const Ge=this.selectId(Oe);if(null==Ge||""===Ge)throw new Error(`${u.entityName} entity add requires a key to be tracked`);return te[Ge]||(S||(S=!0,te=Object.assign({},te)),te[Ge]={changeType:Fi.Added}),te},u.changeState);return S?Object.assign(Object.assign({},u),{changeState:$}):u}trackAddOne(g,u,_){return null==g?u:this.trackAddMany([g],u,_)}trackDeleteMany(g,u,_){if(_===Br.IgnoreChanges||null==g||0===g.length)return u;let S=!1;const $=u.entities,te=g.reduce((Oe,Ge)=>{const We=$[Ge];if(We){const Ut=Oe[Ge];Ut?Ut.changeType===Fi.Added?(Ve(),delete Oe[Ge]):Ut.changeType===Fi.Updated&&(Ve(),Oe[Ge]=Object.assign(Object.assign({},Oe[Ge]),{changeType:Fi.Deleted})):(Ve(),Oe[Ge]={changeType:Fi.Deleted,originalValue:We})}return Oe;function Ve(){S||(S=!0,Oe=Object.assign({},Oe))}},u.changeState);return S?Object.assign(Object.assign({},u),{changeState:te}):u}trackDeleteOne(g,u,_){return null==g?u:this.trackDeleteMany([g],u,_)}trackUpdateMany(g,u,_){if(_===Br.IgnoreChanges||null==g||0===g.length)return u;let S=!1;const $=u.entities,te=g.reduce((Oe,Ge)=>{const{id:We}=Ge;if(null==We||""===We)throw new Error(`${u.entityName} entity update requires a key to be tracked`);const Ut=$[We];return Ut&&(Oe[We]||(S||(S=!0,Oe=Object.assign({},Oe)),Oe[We]={changeType:Fi.Updated,originalValue:Ut})),Oe},u.changeState);return S?Object.assign(Object.assign({},u),{changeState:te}):u}trackUpdateOne(g,u,_){return null==g?u:this.trackUpdateMany([g],u,_)}trackUpsertMany(g,u,_){if(_===Br.IgnoreChanges||null==g||0===g.length)return u;let S=!1;const $=u.entities,te=g.reduce((Oe,Ge)=>{const We=this.selectId(Ge);if(null==We||""===We)throw new Error(`${u.entityName} entity upsert requires a key to be tracked`);if(!Oe[We]){S||(S=!0,Oe=Object.assign({},Oe));const Ut=$[We];Oe[We]=null==Ut?{changeType:Fi.Added}:{changeType:Fi.Updated,originalValue:Ut}}return Oe},u.changeState);return S?Object.assign(Object.assign({},u),{changeState:te}):u}trackUpsertOne(g,u,_){return null==g?u:this.trackUpsertMany([g],u,_)}undoAll(g){const u=Object.keys(g.changeState),{remove:_,upsert:S}=u.reduce(($,te)=>{const Oe=$.chgState[te];switch(Oe.changeType){case Fi.Added:$.remove.push(te);break;case Fi.Deleted:const Ge=Oe.originalValue;Ge&&$.upsert.push(Ge);break;case Fi.Updated:$.upsert.push(Oe.originalValue)}return $},{remove:[],upsert:[],chgState:g.changeState});return g=this.adapter.removeMany(_,g),g=this.adapter.upsertMany(S,g),Object.assign(Object.assign({},g),{changeState:{}})}undoMany(g,u){if(null==g||0===g.length)return u;let _=!1;const{changeState:S,remove:$,upsert:te}=g.reduce((Oe,Ge)=>{let We=Oe.changeState;const Ve="object"==typeof Ge?this.selectId(Ge):Ge,Ut=We[Ve];if(Ut)switch(_||(We=Object.assign({},We),_=!0),delete We[Ve],Oe.changeState=We,Ut.changeType){case Fi.Added:Oe.remove.push(Ve);break;case Fi.Deleted:const xn=Ut.originalValue;xn&&Oe.upsert.push(xn);break;case Fi.Updated:Oe.upsert.push(Ut.originalValue)}return Oe},{remove:[],upsert:[],changeState:u.changeState});return u=this.adapter.removeMany($,u),u=this.adapter.upsertMany(te,u),_?Object.assign(Object.assign({},u),{changeState:S}):u}undoOne(g,u){return null==g?u:this.undoMany([g],u)}}class $l{constructor(g,u,_){this.entityName=g,this.definition=u,this.methods={[tt.CANCEL_PERSIST]:this.cancelPersist.bind(this),[tt.QUERY_ALL]:this.queryAll.bind(this),[tt.QUERY_ALL_ERROR]:this.queryAllError.bind(this),[tt.QUERY_ALL_SUCCESS]:this.queryAllSuccess.bind(this),[tt.QUERY_BY_KEY]:this.queryByKey.bind(this),[tt.QUERY_BY_KEY_ERROR]:this.queryByKeyError.bind(this),[tt.QUERY_BY_KEY_SUCCESS]:this.queryByKeySuccess.bind(this),[tt.QUERY_LOAD]:this.queryLoad.bind(this),[tt.QUERY_LOAD_ERROR]:this.queryLoadError.bind(this),[tt.QUERY_LOAD_SUCCESS]:this.queryLoadSuccess.bind(this),[tt.QUERY_MANY]:this.queryMany.bind(this),[tt.QUERY_MANY_ERROR]:this.queryManyError.bind(this),[tt.QUERY_MANY_SUCCESS]:this.queryManySuccess.bind(this),[tt.SAVE_ADD_MANY]:this.saveAddMany.bind(this),[tt.SAVE_ADD_MANY_ERROR]:this.saveAddManyError.bind(this),[tt.SAVE_ADD_MANY_SUCCESS]:this.saveAddManySuccess.bind(this),[tt.SAVE_ADD_ONE]:this.saveAddOne.bind(this),[tt.SAVE_ADD_ONE_ERROR]:this.saveAddOneError.bind(this),[tt.SAVE_ADD_ONE_SUCCESS]:this.saveAddOneSuccess.bind(this),[tt.SAVE_DELETE_MANY]:this.saveDeleteMany.bind(this),[tt.SAVE_DELETE_MANY_ERROR]:this.saveDeleteManyError.bind(this),[tt.SAVE_DELETE_MANY_SUCCESS]:this.saveDeleteManySuccess.bind(this),[tt.SAVE_DELETE_ONE]:this.saveDeleteOne.bind(this),[tt.SAVE_DELETE_ONE_ERROR]:this.saveDeleteOneError.bind(this),[tt.SAVE_DELETE_ONE_SUCCESS]:this.saveDeleteOneSuccess.bind(this),[tt.SAVE_UPDATE_MANY]:this.saveUpdateMany.bind(this),[tt.SAVE_UPDATE_MANY_ERROR]:this.saveUpdateManyError.bind(this),[tt.SAVE_UPDATE_MANY_SUCCESS]:this.saveUpdateManySuccess.bind(this),[tt.SAVE_UPDATE_ONE]:this.saveUpdateOne.bind(this),[tt.SAVE_UPDATE_ONE_ERROR]:this.saveUpdateOneError.bind(this),[tt.SAVE_UPDATE_ONE_SUCCESS]:this.saveUpdateOneSuccess.bind(this),[tt.SAVE_UPSERT_MANY]:this.saveUpsertMany.bind(this),[tt.SAVE_UPSERT_MANY_ERROR]:this.saveUpsertManyError.bind(this),[tt.SAVE_UPSERT_MANY_SUCCESS]:this.saveUpsertManySuccess.bind(this),[tt.SAVE_UPSERT_ONE]:this.saveUpsertOne.bind(this),[tt.SAVE_UPSERT_ONE_ERROR]:this.saveUpsertOneError.bind(this),[tt.SAVE_UPSERT_ONE_SUCCESS]:this.saveUpsertOneSuccess.bind(this),[tt.ADD_ALL]:this.addAll.bind(this),[tt.ADD_MANY]:this.addMany.bind(this),[tt.ADD_ONE]:this.addOne.bind(this),[tt.REMOVE_ALL]:this.removeAll.bind(this),[tt.REMOVE_MANY]:this.removeMany.bind(this),[tt.REMOVE_ONE]:this.removeOne.bind(this),[tt.UPDATE_MANY]:this.updateMany.bind(this),[tt.UPDATE_ONE]:this.updateOne.bind(this),[tt.UPSERT_MANY]:this.upsertMany.bind(this),[tt.UPSERT_ONE]:this.upsertOne.bind(this),[tt.COMMIT_ALL]:this.commitAll.bind(this),[tt.COMMIT_MANY]:this.commitMany.bind(this),[tt.COMMIT_ONE]:this.commitOne.bind(this),[tt.UNDO_ALL]:this.undoAll.bind(this),[tt.UNDO_MANY]:this.undoMany.bind(this),[tt.UNDO_ONE]:this.undoOne.bind(this),[tt.SET_CHANGE_STATE]:this.setChangeState.bind(this),[tt.SET_COLLECTION]:this.setCollection.bind(this),[tt.SET_FILTER]:this.setFilter.bind(this),[tt.SET_LOADED]:this.setLoaded.bind(this),[tt.SET_LOADING]:this.setLoading.bind(this)},this.adapter=u.entityAdapter,this.isChangeTracking=!0!==u.noChangeTracking,this.selectId=u.selectId,this.guard=new Ll(g,this.selectId),this.toUpdate=Wc(this.selectId),this.entityChangeTracker=_||new bl(this.adapter,this.selectId)}cancelPersist(g){return this.setLoadingFalse(g)}queryAll(g){return this.setLoadingTrue(g)}queryAllError(g,u){return this.setLoadingFalse(g)}queryAllSuccess(g,u){const _=this.extractData(u),S=this.extractMergeStrategy(u);return Object.assign(Object.assign({},this.entityChangeTracker.mergeQueryResults(_,g,S)),{loaded:!0,loading:!1})}queryByKey(g,u){return this.setLoadingTrue(g)}queryByKeyError(g,u){return this.setLoadingFalse(g)}queryByKeySuccess(g,u){const _=this.extractData(u),S=this.extractMergeStrategy(u);return g=null==_?g:this.entityChangeTracker.mergeQueryResults([_],g,S),this.setLoadingFalse(g)}queryLoad(g){return this.setLoadingTrue(g)}queryLoadError(g,u){return this.setLoadingFalse(g)}queryLoadSuccess(g,u){const _=this.extractData(u);return Object.assign(Object.assign({},this.adapter.setAll(_,g)),{loading:!1,loaded:!0,changeState:{}})}queryMany(g,u){return this.setLoadingTrue(g)}queryManyError(g,u){return this.setLoadingFalse(g)}queryManySuccess(g,u){const _=this.extractData(u),S=this.extractMergeStrategy(u);return Object.assign(Object.assign({},this.entityChangeTracker.mergeQueryResults(_,g,S)),{loaded:!0,loading:!1})}saveAddMany(g,u){if(this.isOptimistic(u)){const _=this.guard.mustBeEntities(u),S=this.extractMergeStrategy(u);g=this.entityChangeTracker.trackAddMany(_,g,S),g=this.adapter.addMany(_,g)}return this.setLoadingTrue(g)}saveAddManyError(g,u){return this.setLoadingFalse(g)}saveAddManySuccess(g,u){const _=this.guard.mustBeEntities(u),S=this.extractMergeStrategy(u);return g=this.isOptimistic(u)?this.entityChangeTracker.mergeSaveUpserts(_,g,S):this.entityChangeTracker.mergeSaveAdds(_,g,S),this.setLoadingFalse(g)}saveAddOne(g,u){if(this.isOptimistic(u)){const _=this.guard.mustBeEntity(u),S=this.extractMergeStrategy(u);g=this.entityChangeTracker.trackAddOne(_,g,S),g=this.adapter.addOne(_,g)}return this.setLoadingTrue(g)}saveAddOneError(g,u){return this.setLoadingFalse(g)}saveAddOneSuccess(g,u){const _=this.guard.mustBeEntity(u),S=this.extractMergeStrategy(u);if(this.isOptimistic(u)){const $=this.toUpdate(_);g=this.entityChangeTracker.mergeSaveUpdates([$],g,S,!1)}else g=this.entityChangeTracker.mergeSaveAdds([_],g,S);return this.setLoadingFalse(g)}saveDeleteOne(g,u){const _=this.extractData(u),S="object"==typeof _?this.selectId(_):_,$=g.changeState[S];if($&&($.changeType===Fi.Added?(g=this.adapter.removeOne(S,g),g=this.entityChangeTracker.commitOne(S,g),u.payload.skip=!0):g=this.entityChangeTracker.trackDeleteOne(S,g)),this.isOptimistic(u)){const te=this.extractMergeStrategy(u);g=this.entityChangeTracker.trackDeleteOne(S,g,te),g=this.adapter.removeOne(S,g)}return this.setLoadingTrue(g)}saveDeleteOneError(g,u){return this.setLoadingFalse(g)}saveDeleteOneSuccess(g,u){const _=this.extractData(u);if(this.isOptimistic(u)){const S=this.extractMergeStrategy(u);g=this.entityChangeTracker.mergeSaveDeletes([_],g,S)}else g=this.adapter.removeOne(_,g),g=this.entityChangeTracker.commitOne(_,g);return this.setLoadingFalse(g)}saveDeleteMany(g,u){const _=this.extractData(u).map(S=>"object"==typeof S?this.selectId(S):S);if(_.forEach(S=>{const $=g.changeState[S];$&&($.changeType===Fi.Added?(g=this.adapter.removeOne(S,g),g=this.entityChangeTracker.commitOne(S,g),u.payload.skip=!0):g=this.entityChangeTracker.trackDeleteOne(S,g))}),this.isOptimistic(u)){const S=this.extractMergeStrategy(u);g=this.entityChangeTracker.trackDeleteMany(_,g,S),g=this.adapter.removeMany(_,g)}return this.setLoadingTrue(g)}saveDeleteManyError(g,u){return this.setLoadingFalse(g)}saveDeleteManySuccess(g,u){const _=this.extractData(u);if(this.isOptimistic(u)){const S=this.extractMergeStrategy(u);g=this.entityChangeTracker.mergeSaveDeletes(_,g,S)}else g=this.adapter.removeMany(_,g),g=this.entityChangeTracker.commitMany(_,g);return this.setLoadingFalse(g)}saveUpdateOne(g,u){const _=this.guard.mustBeUpdate(u);if(this.isOptimistic(u)){const S=this.extractMergeStrategy(u);g=this.entityChangeTracker.trackUpdateOne(_,g,S),g=this.adapter.updateOne(_,g)}return this.setLoadingTrue(g)}saveUpdateOneError(g,u){return this.setLoadingFalse(g)}saveUpdateOneSuccess(g,u){const _=this.guard.mustBeUpdateResponse(u),S=this.isOptimistic(u),$=this.extractMergeStrategy(u);return g=this.entityChangeTracker.mergeSaveUpdates([_],g,$,S),this.setLoadingFalse(g)}saveUpdateMany(g,u){const _=this.guard.mustBeUpdates(u);if(this.isOptimistic(u)){const S=this.extractMergeStrategy(u);g=this.entityChangeTracker.trackUpdateMany(_,g,S),g=this.adapter.updateMany(_,g)}return this.setLoadingTrue(g)}saveUpdateManyError(g,u){return this.setLoadingFalse(g)}saveUpdateManySuccess(g,u){const _=this.guard.mustBeUpdateResponses(u),$=(this.isOptimistic(u),this.extractMergeStrategy(u));return g=this.entityChangeTracker.mergeSaveUpdates(_,g,$,!1),this.setLoadingFalse(g)}saveUpsertOne(g,u){if(this.isOptimistic(u)){const _=this.guard.mustBeEntity(u),S=this.extractMergeStrategy(u);g=this.entityChangeTracker.trackUpsertOne(_,g,S),g=this.adapter.upsertOne(_,g)}return this.setLoadingTrue(g)}saveUpsertOneError(g,u){return this.setLoadingFalse(g)}saveUpsertOneSuccess(g,u){const _=this.guard.mustBeEntity(u),S=this.extractMergeStrategy(u);return g=this.entityChangeTracker.mergeSaveUpserts([_],g,S),this.setLoadingFalse(g)}saveUpsertMany(g,u){if(this.isOptimistic(u)){const _=this.guard.mustBeEntities(u),S=this.extractMergeStrategy(u);g=this.entityChangeTracker.trackUpsertMany(_,g,S),g=this.adapter.upsertMany(_,g)}return this.setLoadingTrue(g)}saveUpsertManyError(g,u){return this.setLoadingFalse(g)}saveUpsertManySuccess(g,u){const _=this.guard.mustBeEntities(u),S=this.extractMergeStrategy(u);return g=this.entityChangeTracker.mergeSaveUpserts(_,g,S),this.setLoadingFalse(g)}addAll(g,u){const _=this.guard.mustBeEntities(u);return Object.assign(Object.assign({},this.adapter.setAll(_,g)),{loading:!1,loaded:!0,changeState:{}})}addMany(g,u){const _=this.guard.mustBeEntities(u),S=this.extractMergeStrategy(u);return g=this.entityChangeTracker.trackAddMany(_,g,S),this.adapter.addMany(_,g)}addOne(g,u){const _=this.guard.mustBeEntity(u),S=this.extractMergeStrategy(u);return g=this.entityChangeTracker.trackAddOne(_,g,S),this.adapter.addOne(_,g)}removeMany(g,u){const _=this.guard.mustBeKeys(u),S=this.extractMergeStrategy(u);return g=this.entityChangeTracker.trackDeleteMany(_,g,S),this.adapter.removeMany(_,g)}removeOne(g,u){const _=this.guard.mustBeKey(u),S=this.extractMergeStrategy(u);return g=this.entityChangeTracker.trackDeleteOne(_,g,S),this.adapter.removeOne(_,g)}removeAll(g,u){return Object.assign(Object.assign({},this.adapter.removeAll(g)),{loaded:!1,loading:!1,changeState:{}})}updateMany(g,u){const _=this.guard.mustBeUpdates(u),S=this.extractMergeStrategy(u);return g=this.entityChangeTracker.trackUpdateMany(_,g,S),this.adapter.updateMany(_,g)}updateOne(g,u){const _=this.guard.mustBeUpdate(u),S=this.extractMergeStrategy(u);return g=this.entityChangeTracker.trackUpdateOne(_,g,S),this.adapter.updateOne(_,g)}upsertMany(g,u){const _=this.guard.mustBeEntities(u),S=this.extractMergeStrategy(u);return g=this.entityChangeTracker.trackUpsertMany(_,g,S),this.adapter.upsertMany(_,g)}upsertOne(g,u){const _=this.guard.mustBeEntity(u),S=this.extractMergeStrategy(u);return g=this.entityChangeTracker.trackUpsertOne(_,g,S),this.adapter.upsertOne(_,g)}commitAll(g){return this.entityChangeTracker.commitAll(g)}commitMany(g,u){return this.entityChangeTracker.commitMany(this.extractData(u),g)}commitOne(g,u){return this.entityChangeTracker.commitOne(this.extractData(u),g)}undoAll(g){return this.entityChangeTracker.undoAll(g)}undoMany(g,u){return this.entityChangeTracker.undoMany(this.extractData(u),g)}undoOne(g,u){return this.entityChangeTracker.undoOne(this.extractData(u),g)}setChangeState(g,u){const _=this.extractData(u);return g.changeState===_?g:Object.assign(Object.assign({},g),{changeState:_})}setCollection(g,u){const _=this.extractData(u);return g===_?g:_}setFilter(g,u){const _=this.extractData(u);return g.filter===_?g:Object.assign(Object.assign({},g),{filter:_})}setLoaded(g,u){const _=!0===this.extractData(u)||!1;return g.loaded===_?g:Object.assign(Object.assign({},g),{loaded:_})}setLoading(g,u){return this.setLoadingFlag(g,this.extractData(u))}setLoadingFalse(g){return this.setLoadingFlag(g,!1)}setLoadingTrue(g){return this.setLoadingFlag(g,!0)}setLoadingFlag(g,u){return g.loading===(u=!0===u)?g:Object.assign(Object.assign({},g),{loading:u})}extractData(g){return g.payload&&g.payload.data}extractMergeStrategy(g){return this.isChangeTracking?g.payload&&g.payload.mergeStrategy:Br.IgnoreChanges}isOptimistic(g){return g.payload&&!0===g.payload.isOptimistic}}let Po=(()=>{class m{constructor(u){this.entityDefinitionService=u}create(u){const _=this.entityDefinitionService.getDefinition(u);return new $l(u,_).methods}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(mt))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})(),_o=(()=>{class m{constructor(u){this.methodsFactory=u}create(u){const _=this.methodsFactory.create(u);return function($,te){const Oe=_[te.payload.entityOp];return Oe?Oe($,te):$}}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(Po))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})(),zl=(()=>{class m{constructor(u,_){this.entityCollectionReducerFactory=u,this.entityCollectionReducers={},this.entityCollectionMetaReducer=Hs.apply(null,_||[])}getOrCreateReducer(u){let _=this.entityCollectionReducers[u];return _||(_=this.entityCollectionReducerFactory.create(u),_=this.registerReducer(u,_),this.entityCollectionReducers[u]=_),_}registerReducer(u,_){return _=this.entityCollectionMetaReducer(_),this.entityCollectionReducers[u.trim()]=_}registerReducers(u){(u?Object.keys(u):[]).forEach(S=>this.registerReducer(S,u[S]))}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(_o),A.LFG(Xa,8))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})(),Hl=(()=>{class m{constructor(u,_,S){this.entityCollectionCreator=u,this.entityCollectionReducerRegistry=_,this.logger=S}create(){return function u(_={},S){switch(S.type){case Cn.CLEAR_COLLECTIONS:return this.clearCollectionsReducer(_,S);case Cn.LOAD_COLLECTIONS:return this.loadCollectionsReducer(_,S);case Cn.MERGE_QUERY_SET:return this.mergeQuerySetReducer(_,S);case Cn.SAVE_ENTITIES:return this.saveEntitiesReducer(_,S);case Cn.SAVE_ENTITIES_CANCEL:return this.saveEntitiesCancelReducer(_,S);case Cn.SAVE_ENTITIES_ERROR:return this.saveEntitiesErrorReducer(_,S);case Cn.SAVE_ENTITIES_SUCCESS:return this.saveEntitiesSuccessReducer(_,S);case Cn.SET_ENTITY_CACHE:return S.payload.cache}const $=S.payload;return $&&$.entityName&&$.entityOp&&!$.error?this.applyCollectionReducer(_,S):_}.bind(this)}clearCollectionsReducer(u,_){let{collections:S}=_.payload;const te=tt.REMOVE_ALL;return S||(S=Object.keys(u)),S.reduce((Oe,Ge)=>this.applyCollectionReducer(Oe,{type:`[${Ge}] ${_.type}`,payload:{entityName:Ge,entityOp:te}}),u)}loadCollectionsReducer(u,_){const{collections:S}=_.payload,te=tt.ADD_ALL;return Object.keys(S).reduce((Ge,We)=>this.applyCollectionReducer(Ge,{type:`[${We}] ${_.type}`,payload:{entityName:We,entityOp:te,data:S[We]}}),u)}mergeQuerySetReducer(u,_){let{mergeStrategy:S,querySet:$}=_.payload;S=null===S?Br.PreserveChanges:S;const Oe=tt.QUERY_MANY_SUCCESS;return Object.keys($).reduce((We,Ve)=>this.applyCollectionReducer(We,{type:`[${Ve}] ${_.type}`,payload:{entityName:Ve,entityOp:Oe,data:$[Ve],mergeStrategy:S}}),u)}saveEntitiesReducer(u,_){const{changeSet:S,correlationId:$,isOptimistic:te,mergeStrategy:Oe,tag:Ge}=_.payload;try{S.changes.forEach(Ve=>{const Ut=Ve.entityName,xn={entityName:Ut,entityOp:We(Ve),data:Ve.entities,correlationId:$,isOptimistic:te,mergeStrategy:Oe,tag:Ge},vr={type:`[${Ut}] ${_.type}`,payload:xn};if(u=this.applyCollectionReducer(u,vr),vr.payload.error)throw vr.payload.error})}catch(Ve){_.payload.error=Ve}return u;function We(Ve){switch(Ve.op){case Ln.Add:return tt.SAVE_ADD_MANY;case Ln.Delete:return tt.SAVE_DELETE_MANY;case Ln.Update:return tt.SAVE_UPDATE_MANY;case Ln.Upsert:return tt.SAVE_UPSERT_MANY}}}saveEntitiesCancelReducer(u,_){return this.clearLoadingFlags(u,_.payload.entityNames||[])}saveEntitiesErrorReducer(u,_){const te=_.payload.originalAction.payload.changeSet.changes.map(Oe=>Oe.entityName);return this.clearLoadingFlags(u,te)}saveEntitiesSuccessReducer(u,_){const{changeSet:S,correlationId:$,isOptimistic:te,mergeStrategy:Oe,tag:Ge}=_.payload;return S.changes.forEach(Ve=>{const Ut=Ve.entityName,xn={entityName:Ut,entityOp:We(Ve),data:Ve.entities,correlationId:$,isOptimistic:te,mergeStrategy:Oe,tag:Ge};u=this.applyCollectionReducer(u,{type:`[${Ut}] ${_.type}`,payload:xn})}),u;function We(Ve){switch(Ve.op){case Ln.Add:return tt.SAVE_ADD_MANY_SUCCESS;case Ln.Delete:return tt.SAVE_DELETE_MANY_SUCCESS;case Ln.Update:return tt.SAVE_UPDATE_MANY_SUCCESS;case Ln.Upsert:return tt.SAVE_UPSERT_MANY_SUCCESS}}}applyCollectionReducer(u={},_){const S=_.payload.entityName,$=u[S],te=this.entityCollectionReducerRegistry.getOrCreateReducer(S);let Oe;try{Oe=te($||this.entityCollectionCreator.create(S),_)}catch(Ge){this.logger.error(Ge),_.payload.error=Ge}return _.payload.error||$===Oe?u:Object.assign(Object.assign({},u),{[S]:Oe})}clearLoadingFlags(u,_){let S=!1;return _.forEach($=>{const te=u[$];te.loading&&(S||(u=Object.assign({},u),S=!0),u[$]=Object.assign(Object.assign({},te),{loading:!1}))}),u}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(Fs),A.LFG(zl),A.LFG($o))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})(),Gl=(()=>{class m{error(u,_){u&&(_?console.error(u,_):console.error(u))}log(u,_){u&&(_?console.log(u,_):console.log(u))}warn(u,_){u&&(_?console.warn(u,_):console.warn(u))}}return m.\u0275fac=function(u){return new(u||m)},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})();const Wl=["equipment","information","money","series"];let _c=(()=>{class m{constructor(u){this.pluralNames={},u&&u.forEach(_=>this.registerPluralNames(_))}pluralize(u){return this.pluralNames[u]||(Wl.indexOf(u.toLowerCase())>=0?u:/[aeiou]y$/.test(u)?u+"s":u.endsWith("y")?u.substr(0,u.length-1)+"ies":/[s|ss|sh|ch|x|z]$/.test(u)?u+"es":u+"s")}registerPluralNames(u){this.pluralNames=Object.assign(Object.assign({},this.pluralNames),u||{})}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(Ea,8))},m.\u0275prov=A.Yz7({token:m,factory:m.\u0275fac}),m})(),Su=(()=>{class m{constructor(u,_,S,$,te,Oe){this.reducerManager=u,this.injector=S,this.entityCacheName=$,this.initialState=te,this.metaReducers=Oe;const Ge=$||ci;te="function"==typeof te?te():te;const We=(Oe||[]).map(Ve=>Ve instanceof A.OlP?S.get(Ve):Ve);this.entityCacheFeature={key:Ge,reducers:_.create(),reducerFactory:qi,initialState:te||{},metaReducers:We},u.addFeature(this.entityCacheFeature)}static forRoot(u){return{ngModule:m,providers:[{provide:Do,useValue:u.entityCacheMetaReducers?u.entityCacheMetaReducers:[]},{provide:Xa,useValue:u.entityCollectionMetaReducers?u.entityCollectionMetaReducers:[]},{provide:Ea,multi:!0,useValue:u.pluralNames?u.pluralNames:{}}]}}ngOnDestroy(){this.reducerManager.removeFeature(this.entityCacheFeature)}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(R),A.LFG(Hl),A.LFG(A.zs3),A.LFG(yo,8),A.LFG(Ia,8),A.LFG(Do,8))},m.\u0275mod=A.oAB({type:m}),m.\u0275inj=A.cJS({providers:[Sn,Oa,nr,Ja,Hl,hc,Fs,_o,Po,zl,zo,vl,mt,fc,Qc,gc,Cl,{provide:yo,useValue:ci},{provide:yc,useClass:mc},{provide:$o,useClass:Gl}],imports:[[ga]]}),m})(),Tu=(()=>{class m{constructor(u,_,S){this.effectSources=u,this.addEffects(_),this.addEffects(S)}static forRoot(u){return{ngModule:m,providers:[{provide:Se,multi:!0,useValue:u.entityMetadata?u.entityMetadata:[]},{provide:Do,useValue:u.entityCacheMetaReducers?u.entityCacheMetaReducers:[]},{provide:Xa,useValue:u.entityCollectionMetaReducers?u.entityCollectionMetaReducers:[]},{provide:Ea,multi:!0,useValue:u.pluralNames?u.pluralNames:{}}]}}addEffects(u){this.effectSources.addEffects(u)}}return m.\u0275fac=function(u){return new(u||m)(A.LFG(Ws),A.LFG(Bl),A.LFG(Zc))},m.\u0275mod=A.oAB({type:m}),m.\u0275inj=A.cJS({providers:[ee,pn,gn,Bl,Zc,{provide:Ma,useClass:P},{provide:jn,useClass:Pn},{provide:Vl,useClass:_c}],imports:[[Su,Vr]]}),m})();var El=L(2011),vd=L(7407);const tl={entityMetadata:{Menu:{}},pluralNames:{}};var nl=L(2340),eu=L(712);let Yl=(()=>{class m{}return m.\u0275fac=function(u){return new(u||m)},m.\u0275mod=A.oAB({type:m}),m.\u0275inj=A.cJS({imports:[[M.ez]]}),m})(),ru=(()=>{class m{}return m.\u0275fac=function(u){return new(u||m)},m.\u0275mod=A.oAB({type:m,bootstrap:[Mn]}),m.\u0275inj=A.cJS({providers:[vd.ST],imports:[[zn,kr,er.JF,ga.forRoot({},{}),Vr.forRoot([]),Tu.forRoot(tl),El.hO.initializeApp(nl.N.firebase),eu.vj,Yl]]}),m})();nl.N.production&&(0,A.G48)(),qr().bootstrapModule(ru).catch(m=>console.error(m))},5867:(Dt,Te,L)=>{L.d(Te,{Mq:()=>M.getApp,C6:()=>M.getApps});var M=L(9681);(0,M.registerVersion)("firebase","9.6.10","app")},127:(Dt,Te,L)=>{L.d(Te,{Z:()=>M.Z});var M=L(3942);M.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(Dt,Te,L)=>{L.r(Te);var M=L(5861),A=L(3942),Z=L(2090),de=L(9681),ce=L(655),_e=L(1877),ue=L(4859);const rt=function ot(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ft=function qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Pe=new Z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Me=new _e.Yd("@firebase/auth");function it(y,...d){Me.logLevel<=_e.in.ERROR&&Me.error(`Auth (${de.SDK_VERSION}): ${y}`,...d)}function Qe(y,...d){throw pt(y,...d)}function je(y,...d){return pt(y,...d)}function Re(y,d,f){const w=Object.assign(Object.assign({},ft()),{[d]:f});return new Z.LL("auth","Firebase",w).create(d,{appName:y.name})}function Mt(y,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&Qe(y,"argument-error"),Re(y,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pt(y,...d){if("string"!=typeof y){const f=d[0],w=[...d.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(f,...w)}return Pe.create(y,...d)}function se(y,d,...f){if(!y)throw pt(d,...f)}function we(y){const d="INTERNAL ASSERTION FAILED: "+y;throw it(d),new Error(d)}function Ee(y,d){y||we(d)}const ke=new Map;function Ne(y){Ee(y instanceof Function,"Expected a class definition");let d=ke.get(y);return d?(Ee(d instanceof y,"Instance stored in cache mismatched with class"),d):(d=new y,ke.set(y,d),d)}function It(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function un(){return"http:"===ur()||"https:"===ur()}function ur(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class mn{constructor(d,f){this.shortDelay=d,this.longDelay=f,Ee(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,Z.uI)()||(0,Z.b$)()}get(){return function Vt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(un()||(0,Z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qt(y,d){Ee(y.emulator,"Emulator should always be set here");const{url:f}=y.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class dr{static initialize(d,f,w){this.fetchImpl=d,f&&(this.headersImpl=f),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Gt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},mr=new mn(3e4,6e4);function Tn(y,d){return y.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:y.tenantId}):d}function an(y,d,f,w){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,M.Z)(function*(y,d,f,w,V={}){return yr(y,V,(0,M.Z)(function*(){let Q={},Ie={};w&&("GET"===d?Ie=w:Q={body:JSON.stringify(w)});const Ke=(0,Z.xO)(Object.assign({key:y.config.apiKey},Ie)).slice(1),xt=yield y._getAdditionalHeaders();return xt["Content-Type"]="application/json",y.languageCode&&(xt["X-Firebase-Locale"]=y.languageCode),dr.fetch()($n(y,y.config.apiHost,f,Ke),Object.assign({method:d,headers:xt,referrerPolicy:"no-referrer"},Q))}))})).apply(this,arguments)}function yr(y,d,f){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,M.Z)(function*(y,d,f){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Gt),d);try{const V=new zn(y),Q=yield Promise.race([f(),V.promise]);V.clearNetworkTimeout();const Ie=yield Q.json();if("needConfirmation"in Ie)throw Hn(y,"account-exists-with-different-credential",Ie);if(Q.ok&&!("errorMessage"in Ie))return Ie;{const Ke=Q.ok?Ie.errorMessage:Ie.error.message,[xt,Jt]=Ke.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xt)throw Hn(y,"credential-already-in-use",Ie);if("EMAIL_EXISTS"===xt)throw Hn(y,"email-already-in-use",Ie);const yn=w[xt]||xt.toLowerCase().replace(/[_\s]+/g,"-");if(Jt)throw Re(y,yn,Jt);Qe(y,yn)}}catch(V){if(V instanceof Z.ZR)throw V;Qe(y,"network-request-failed")}})).apply(this,arguments)}function sr(y,d,f,w){return qr.apply(this,arguments)}function qr(){return(qr=(0,M.Z)(function*(y,d,f,w,V={}){const Q=yield an(y,d,f,w,V);return"mfaPendingCredential"in Q&&Qe(y,"multi-factor-auth-required",{_serverResponse:Q}),Q})).apply(this,arguments)}function $n(y,d,f,w){const V=`${d}${f}?${w}`;return y.config.emulator?qt(y.config,V):`${y.config.apiScheme}://${V}`}class zn{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,w)=>{this.timer=setTimeout(()=>w(je(this.auth,"network-request-failed")),mr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hn(y,d,f){const w={appName:y.name};f.email&&(w.email=f.email),f.phoneNumber&&(w.phoneNumber=f.phoneNumber);const V=je(y,d,w);return V.customData._tokenResponse=f,V}function Yr(){return(Yr=(0,M.Z)(function*(y,d){return an(y,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Tr(y,d){return Er.apply(this,arguments)}function Er(){return(Er=(0,M.Z)(function*(y,d){return an(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function fi(y,d){return ds.apply(this,arguments)}function ds(){return(ds=(0,M.Z)(function*(y,d){return an(y,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Ye(y){if(y)try{const d=new Date(Number(y));if(!isNaN(d.getTime()))return d.toUTCString()}catch(d){}}function Ue(){return(Ue=(0,M.Z)(function*(y,d=!1){const f=(0,Z.m9)(y),w=yield f.getIdToken(d),V=lt(w);se(V&&V.exp&&V.auth_time&&V.iat,f.auth,"internal-error");const Q="object"==typeof V.firebase?V.firebase:void 0,Ie=null==Q?void 0:Q.sign_in_provider;return{claims:V,token:w,authTime:Ye(Je(V.auth_time)),issuedAtTime:Ye(Je(V.iat)),expirationTime:Ye(Je(V.exp)),signInProvider:Ie||null,signInSecondFactor:(null==Q?void 0:Q.sign_in_second_factor)||null}})).apply(this,arguments)}function Je(y){return 1e3*Number(y)}function lt(y){const[d,f,w]=y.split(".");if(void 0===d||void 0===f||void 0===w)return it("JWT malformed, contained fewer than 3 sections"),null;try{const V=(0,Z.tV)(f);return V?JSON.parse(V):(it("Failed to decode base64 JWT payload"),null)}catch(V){return it("Caught error parsing JWT payload as JSON",V),null}}function En(y,d){return ln.apply(this,arguments)}function ln(){return(ln=(0,M.Z)(function*(y,d,f=!1){if(f)return d;try{return yield d}catch(w){throw w instanceof Z.ZR&&Xt(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Xt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Zr{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const V=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,V)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const w=this.getInterval(d);this.timerId=setTimeout((0,M.Z)(function*(){yield f.iteration()}),w)}iteration(){var d=this;return(0,M.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&d.schedule(!0))}d.schedule()})()}}class Wn{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ye(this.lastLoginAt),this.creationTime=Ye(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function hr(y){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,M.Z)(function*(y){var d;const f=y.auth,w=yield y.getIdToken(),V=yield En(y,fi(f,{idToken:w}));se(null==V?void 0:V.users.length,f,"internal-error");const Q=V.users[0];y._notifyReloadListener(Q);const Ie=(null===(d=Q.providerUserInfo)||void 0===d?void 0:d.length)?Ze(Q.providerUserInfo):[],Ke=Ct(y.providerData,Ie),yn=!!y.isAnonymous&&!(y.email&&Q.passwordHash||(null==Ke?void 0:Ke.length)),cn={uid:Q.localId,displayName:Q.displayName||null,photoURL:Q.photoUrl||null,email:Q.email||null,emailVerified:Q.emailVerified||!1,phoneNumber:Q.phoneNumber||null,tenantId:Q.tenantId||null,providerData:Ke,metadata:new Wn(Q.createdAt,Q.lastLoginAt),isAnonymous:yn};Object.assign(y,cn)})).apply(this,arguments)}function hn(){return(hn=(0,M.Z)(function*(y){const d=(0,Z.m9)(y);yield hr(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Ct(y,d){return[...y.filter(w=>!d.some(V=>V.providerId===w.providerId)),...d]}function Ze(y){return y.map(d=>{var{providerId:f}=d,w=(0,ce._T)(d,["providerId"]);return{providerId:f,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Lt(){return(Lt=(0,M.Z)(function*(y,d){const f=yield yr(y,{},(0,M.Z)(function*(){const w=(0,Z.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:V,apiKey:Q}=y.config,Ie=$n(y,V,"/v1/token",`key=${Q}`),Ke=yield y._getAdditionalHeaders();return Ke["Content-Type"]="application/x-www-form-urlencoded",dr.fetch()(Ie,{method:"POST",headers:Ke,body:w})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class fn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){se(d.idToken,"internal-error"),se(void 0!==d.idToken,"internal-error"),se(void 0!==d.refreshToken,"internal-error");const f="expiresIn"in d&&void 0!==d.expiresIn?Number(d.expiresIn):function St(y){const d=lt(y);return se(d,"internal-error"),se(void 0!==d.exp,"internal-error"),se(void 0!==d.iat,"internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}getToken(d,f=!1){var w=this;return(0,M.Z)(function*(){return se(!w.accessToken||w.refreshToken,d,"user-token-expired"),f||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(d,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var w=this;return(0,M.Z)(function*(){const{accessToken:V,refreshToken:Q,expiresIn:Ie}=yield function Bt(y,d){return Lt.apply(this,arguments)}(d,f);w.updateTokensAndExpiration(V,Q,Number(Ie))})()}updateTokensAndExpiration(d,f,w){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(d,f){const{refreshToken:w,accessToken:V,expirationTime:Q}=f,Ie=new fn;return w&&(se("string"==typeof w,"internal-error",{appName:d}),Ie.refreshToken=w),V&&(se("string"==typeof V,"internal-error",{appName:d}),Ie.accessToken=V),Q&&(se("number"==typeof Q,"internal-error",{appName:d}),Ie.expirationTime=Q),Ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new fn,this.toJSON())}_performRefresh(){return we("not implemented")}}function wn(y,d){se("string"==typeof y||void 0===y,"internal-error",{appName:d})}class fe{constructor(d){var{uid:f,auth:w,stsTokenManager:V}=d,Q=(0,ce._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=w,this.stsTokenManager=V,this.accessToken=V.accessToken,this.displayName=Q.displayName||null,this.email=Q.email||null,this.emailVerified=Q.emailVerified||!1,this.phoneNumber=Q.phoneNumber||null,this.photoURL=Q.photoURL||null,this.isAnonymous=Q.isAnonymous||!1,this.tenantId=Q.tenantId||null,this.providerData=Q.providerData?[...Q.providerData]:[],this.metadata=new Wn(Q.createdAt||void 0,Q.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,M.Z)(function*(){const w=yield En(f,f.stsTokenManager.getToken(f.auth,d));return se(w,f.auth,"internal-error"),f.accessToken!==w&&(f.accessToken=w,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),w})()}getIdTokenResult(d){return function Ce(y){return Ue.apply(this,arguments)}(this,d)}reload(){return function An(y){return hn.apply(this,arguments)}(this)}_assign(d){this!==d&&(se(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new fe(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var w=this;return(0,M.Z)(function*(){let V=!1;d.idToken&&d.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(d),V=!0),f&&(yield hr(w)),yield w.auth._persistUserIfCurrent(w),V&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var d=this;return(0,M.Z)(function*(){const f=yield d.getIdToken();return yield En(d,function Ht(y,d){return Yr.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var w,V,Q,Ie,Ke,xt,Jt,yn;const cn=null!==(w=f.displayName)&&void 0!==w?w:void 0,Li=null!==(V=f.email)&&void 0!==V?V:void 0,ca=null!==(Q=f.phoneNumber)&&void 0!==Q?Q:void 0,cu=null!==(Ie=f.photoURL)&&void 0!==Ie?Ie:void 0,Bu=null!==(Ke=f.tenantId)&&void 0!==Ke?Ke:void 0,uu=null!==(xt=f._redirectEventId)&&void 0!==xt?xt:void 0,Sd=null!==(Jt=f.createdAt)&&void 0!==Jt?Jt:void 0,Wf=null!==(yn=f.lastLoginAt)&&void 0!==yn?yn:void 0,{uid:xl,emailVerified:ju,isAnonymous:Td,providerData:Ad,stsTokenManager:$u}=f;se(xl&&$u,d,"internal-error");const Kf=fn.fromJSON(this.name,$u);se("string"==typeof xl,d,"internal-error"),wn(cn,d.name),wn(Li,d.name),se("boolean"==typeof ju,d,"internal-error"),se("boolean"==typeof Td,d,"internal-error"),wn(ca,d.name),wn(cu,d.name),wn(Bu,d.name),wn(uu,d.name),wn(Sd,d.name),wn(Wf,d.name);const Rd=new fe({uid:xl,auth:d,email:Li,emailVerified:ju,displayName:cn,isAnonymous:Td,photoURL:cu,phoneNumber:ca,tenantId:Bu,stsTokenManager:Kf,createdAt:Sd,lastLoginAt:Wf});return Ad&&Array.isArray(Ad)&&(Rd.providerData=Ad.map(qf=>Object.assign({},qf))),uu&&(Rd._redirectEventId=uu),Rd}static _fromIdTokenResponse(d,f,w=!1){return(0,M.Z)(function*(){const V=new fn;V.updateFromServerResponse(f);const Q=new fe({uid:f.localId,auth:d,stsTokenManager:V,isAnonymous:w});return yield hr(Q),Q})()}}const be=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,M.Z)(function*(){return!0})()}_set(f,w){var V=this;return(0,M.Z)(function*(){V.storage[f]=w})()}_get(f){var w=this;return(0,M.Z)(function*(){const V=w.storage[f];return void 0===V?null:V})()}_remove(f){var w=this;return(0,M.Z)(function*(){delete w.storage[f]})()}_addListener(f,w){}_removeListener(f,w){}}return y.type="NONE",y})();function ze(y,d,f){return`firebase:${y}:${d}:${f}`}class xe{constructor(d,f,w){this.persistence=d,this.auth=f,this.userKey=w;const{config:V,name:Q}=this.auth;this.fullUserKey=ze(this.userKey,V.apiKey,Q),this.fullPersistenceKey=ze("persistence",V.apiKey,Q),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,M.Z)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?fe._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,M.Z)(function*(){if(f.persistence===d)return;const w=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,w?f.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,w="authUser"){return(0,M.Z)(function*(){if(!f.length)return new xe(Ne(be),d,w);const V=(yield Promise.all(f.map(function(){var Jt=(0,M.Z)(function*(yn){if(yield yn._isAvailable())return yn});return function(yn){return Jt.apply(this,arguments)}}()))).filter(Jt=>Jt);let Q=V[0]||Ne(be);const Ie=ze(w,d.config.apiKey,d.name);let Ke=null;for(const Jt of f)try{const yn=yield Jt._get(Ie);if(yn){const cn=fe._fromJSON(d,yn);Jt!==Q&&(Ke=cn),Q=Jt;break}}catch(yn){}const xt=V.filter(Jt=>Jt._shouldAllowMigration);return Q._shouldAllowMigration&&xt.length?(Q=xt[0],Ke&&(yield Q._set(Ie,Ke.toJSON())),yield Promise.all(f.map(function(){var Jt=(0,M.Z)(function*(yn){if(yn!==Q)try{yield yn._remove(Ie)}catch(cn){}});return function(yn){return Jt.apply(this,arguments)}}())),new xe(Q,d,w)):new xe(Q,d,w)})()}}function Et(y){const d=y.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Bn(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Kt(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Mn(d))return"Blackberry";if(er(d))return"Webos";if(Nt(d))return"Safari";if((d.includes("chrome/")||kr(d))&&!d.includes("edge/"))return"Chrome";if(fr(d))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Kt(y=(0,Z.z$)()){return/firefox\//i.test(y)}function Nt(y=(0,Z.z$)()){const d=y.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function kr(y=(0,Z.z$)()){return/crios\//i.test(y)}function Bn(y=(0,Z.z$)()){return/iemobile/i.test(y)}function fr(y=(0,Z.z$)()){return/android/i.test(y)}function Mn(y=(0,Z.z$)()){return/blackberry/i.test(y)}function er(y=(0,Z.z$)()){return/webos/i.test(y)}function Un(y=(0,Z.z$)()){return/iphone|ipad|ipod/i.test(y)}function ti(y=(0,Z.z$)()){return Un(y)||fr(y)||er(y)||Mn(y)||/windows phone/i.test(y)||Bn(y)}function Hr(y,d=[]){let f;switch(y){case"Browser":f=Et((0,Z.z$)());break;case"Worker":f=`${Et((0,Z.z$)())}-${y}`;break;default:f=y}const w=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${de.SDK_VERSION}/${w}`}class Zn{constructor(d,f,w){this.app=d,this.heartbeatServiceProvider=f,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _n(this),this.idTokenSubscription=new _n(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(d,f){var w=this;return f&&(this._popupRedirectResolver=Ne(f)),this._initializationPromise=this.queue((0,M.Z)(function*(){var V,Q;if(!w._deleted&&(w.persistenceManager=yield xe.create(w,d),!w._deleted)){if(null===(V=w._popupRedirectResolver)||void 0===V?void 0:V._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(Ie){}yield w.initializeCurrentUser(f),w.lastNotifiedUid=(null===(Q=w.currentUser)||void 0===Q?void 0:Q.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,M.Z)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f)}})()}initializeCurrentUser(d){var f=this;return(0,M.Z)(function*(){var w;let V=yield f.assertedPersistence.getCurrentUser();if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Q=null===(w=f.redirectUser)||void 0===w?void 0:w._redirectEventId,Ie=null==V?void 0:V._redirectEventId,Ke=yield f.tryRedirectSignIn(d);(!Q||Q===Ie)&&(null==Ke?void 0:Ke.user)&&(V=Ke.user)}return V?V._redirectEventId?(se(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===V._redirectEventId?f.directlySetCurrentUser(V):f.reloadAndSetCurrentUserOrClear(V)):f.reloadAndSetCurrentUserOrClear(V):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(d){var f=this;return(0,M.Z)(function*(){let w=null;try{w=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch(V){yield f._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,M.Z)(function*(){try{yield hr(d)}catch(w){if("auth/network-request-failed"!==w.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Pt(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var d=this;return(0,M.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,M.Z)(function*(){const w=d?(0,Z.m9)(d):null;return w&&se(w.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(w&&w._clone(f))})()}_updateCurrentUser(d){var f=this;return(0,M.Z)(function*(){if(!f._deleted)return d&&se(f.tenantId===d.tenantId,f,"tenant-id-mismatch"),f.queue((0,M.Z)(function*(){yield f.directlySetCurrentUser(d),f.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,M.Z)(function*(){return(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null)})()}setPersistence(d){var f=this;return this.queue((0,M.Z)(function*(){yield f.assertedPersistence.setPersistence(Ne(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new Z.LL("auth","Firebase",d())}onAuthStateChanged(d,f,w){return this.registerStateListener(this.authStateSubscription,d,f,w)}onIdTokenChanged(d,f,w){return this.registerStateListener(this.idTokenSubscription,d,f,w)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var w=this;return(0,M.Z)(function*(){const V=yield w.getOrInitRedirectPersistenceManager(f);return null===d?V.removeCurrentUser():V.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,M.Z)(function*(){if(!f.redirectPersistenceManager){const w=d&&Ne(d)||f._popupRedirectResolver;se(w,f,"argument-error"),f.redirectPersistenceManager=yield xe.create(f,[Ne(w._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,M.Z)(function*(){var w,V;return f._isInitialized&&(yield f.queue((0,M.Z)(function*(){}))),(null===(w=f._currentUser)||void 0===w?void 0:w._redirectEventId)===d?f._currentUser:(null===(V=f.redirectUser)||void 0===V?void 0:V._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,M.Z)(function*(){if(d===f.currentUser)return f.queue((0,M.Z)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,w,V){if(this._deleted)return()=>{};const Q="function"==typeof f?f:f.next.bind(f),Ie=this._isInitialized?Promise.resolve():this._initializationPromise;return se(Ie,this,"internal-error"),Ie.then(()=>Q(this.currentUser)),"function"==typeof f?d.addObserver(f,w,V):d.addObserver(f)}directlySetCurrentUser(d){var f=this;return(0,M.Z)(function*(){f.currentUser&&f.currentUser!==d&&(f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh()),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Hr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,M.Z)(function*(){var f;const w={"X-Client-Version":d.clientVersion};d.app.options.appId&&(w["X-Firebase-gmpid"]=d.app.options.appId);const V=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return V&&(w["X-Firebase-Client"]=V),w})()}}function ct(y){return(0,Z.m9)(y)}class _n{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,Z.ne)(f=>this.observer=f)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Qr(y){const d=y.indexOf(":");return d<0?"":y.substr(0,d+1)}function Nr(y){if(!y)return null;const d=Number(y);return isNaN(d)?null:d}class _r{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return we("not implemented")}_getIdTokenResponse(d){return we("not implemented")}_linkToIdToken(d,f){return we("not implemented")}_getReauthenticationResolver(d){return we("not implemented")}}function or(y,d){return mi.apply(this,arguments)}function mi(){return(mi=(0,M.Z)(function*(y,d){return an(y,"POST","/v1/accounts:resetPassword",Tn(y,d))})).apply(this,arguments)}function On(y,d){return es.apply(this,arguments)}function es(){return(es=(0,M.Z)(function*(y,d){return an(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ms(y,d){return Os.apply(this,arguments)}function Os(){return(Os=(0,M.Z)(function*(y,d){return an(y,"POST","/v1/accounts:update",Tn(y,d))})).apply(this,arguments)}function ir(){return(ir=(0,M.Z)(function*(y,d){return sr(y,"POST","/v1/accounts:signInWithPassword",Tn(y,d))})).apply(this,arguments)}function pr(y,d){return Si.apply(this,arguments)}function Si(){return(Si=(0,M.Z)(function*(y,d){return an(y,"POST","/v1/accounts:sendOobCode",Tn(y,d))})).apply(this,arguments)}function bi(y,d){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,M.Z)(function*(y,d){return pr(y,d)})).apply(this,arguments)}function Ti(y,d){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,M.Z)(function*(y,d){return pr(y,d)})).apply(this,arguments)}function Fr(y,d){return ni.apply(this,arguments)}function ni(){return(ni=(0,M.Z)(function*(y,d){return pr(y,d)})).apply(this,arguments)}function Ao(y,d){return zi.apply(this,arguments)}function zi(){return(zi=(0,M.Z)(function*(y,d){return pr(y,d)})).apply(this,arguments)}function si(){return(si=(0,M.Z)(function*(y,d){return sr(y,"POST","/v1/accounts:signInWithEmailLink",Tn(y,d))})).apply(this,arguments)}function fs(){return(fs=(0,M.Z)(function*(y,d){return sr(y,"POST","/v1/accounts:signInWithEmailLink",Tn(y,d))})).apply(this,arguments)}class Is extends _r{constructor(d,f,w,V=null){super("password",w),this._email=d,this._password=f,this._tenantId=V}static _fromEmailAndPassword(d,f){return new Is(d,f,"password")}static _fromEmailAndCode(d,f,w=null){return new Is(d,f,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,M.Z)(function*(){switch(f.signInMethod){case"password":return function Ci(y,d){return ir.apply(this,arguments)}(d,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function hs(y,d){return si.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:Qe(d,"internal-error")}})()}_linkToIdToken(d,f){var w=this;return(0,M.Z)(function*(){switch(w.signInMethod){case"password":return On(d,{idToken:f,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function lo(y,d){return fs.apply(this,arguments)}(d,{idToken:f,email:w._email,oobCode:w._password});default:Qe(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Lr(y,d){return qo.apply(this,arguments)}function qo(){return(qo=(0,M.Z)(function*(y,d){return sr(y,"POST","/v1/accounts:signInWithIdp",Tn(y,d))})).apply(this,arguments)}class ve extends _r{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new ve(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):Qe("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:w,signInMethod:V}=f,Q=(0,ce._T)(f,["providerId","signInMethod"]);if(!w||!V)return null;const Ie=new ve(w,V);return Ie.idToken=Q.idToken||void 0,Ie.accessToken=Q.accessToken||void 0,Ie.secret=Q.secret,Ie.nonce=Q.nonce,Ie.pendingToken=Q.pendingToken||null,Ie}_getIdTokenResponse(d){return Lr(d,this.buildRequest())}_linkToIdToken(d,f){const w=this.buildRequest();return w.idToken=f,Lr(d,w)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Lr(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,Z.xO)(f)}return d}}function pe(y,d){return Le.apply(this,arguments)}function Le(){return(Le=(0,M.Z)(function*(y,d){return an(y,"POST","/v1/accounts:sendVerificationCode",Tn(y,d))})).apply(this,arguments)}function vt(){return(vt=(0,M.Z)(function*(y,d){return sr(y,"POST","/v1/accounts:signInWithPhoneNumber",Tn(y,d))})).apply(this,arguments)}function Qn(){return(Qn=(0,M.Z)(function*(y,d){const f=yield sr(y,"POST","/v1/accounts:signInWithPhoneNumber",Tn(y,d));if(f.temporaryProof)throw Hn(y,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Jr={USER_NOT_FOUND:"user-not-found"};function Bi(){return(Bi=(0,M.Z)(function*(y,d){return sr(y,"POST","/v1/accounts:signInWithPhoneNumber",Tn(y,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Jr)})).apply(this,arguments)}class Hi extends _r{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new Hi({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new Hi({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function st(y,d){return vt.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function Zt(y,d){return Qn.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function Gn(y,d){return Bi.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:w,verificationCode:V}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:w,code:V}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:w,phoneNumber:V,temporaryProof:Q}=d;return w||f||V||Q?new Hi({verificationId:f,verificationCode:w,phoneNumber:V,temporaryProof:Q}):null}}class Gi{constructor(d){var f,w,V,Q,Ie,Ke;const xt=(0,Z.zd)((0,Z.pd)(d)),Jt=null!==(f=xt.apiKey)&&void 0!==f?f:null,yn=null!==(w=xt.oobCode)&&void 0!==w?w:null,cn=function ts(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(V=xt.mode)&&void 0!==V?V:null);se(Jt&&yn&&cn,"argument-error"),this.apiKey=Jt,this.operation=cn,this.code=yn,this.continueUrl=null!==(Q=xt.continueUrl)&&void 0!==Q?Q:null,this.languageCode=null!==(Ie=xt.languageCode)&&void 0!==Ie?Ie:null,this.tenantId=null!==(Ke=xt.tenantId)&&void 0!==Ke?Ke:null}static parseLink(d){const f=function Js(y){const d=(0,Z.zd)((0,Z.pd)(y)).link,f=d?(0,Z.zd)((0,Z.pd)(d)).deep_link_id:null,w=(0,Z.zd)((0,Z.pd)(y)).deep_link_id;return(w?(0,Z.zd)((0,Z.pd)(w)).link:null)||w||f||d||y}(d);try{return new Gi(f)}catch(w){return null}}}let wo=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(f,w){return Is._fromEmailAndPassword(f,w)}static credentialWithLink(f,w){const V=Gi.parseLink(w);return se(V,"argument-error"),Is._fromEmailAndCode(f,V.code,V.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ps{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Ei extends ps{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class xs extends Ei{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return se("providerId"in f&&"signInMethod"in f,"argument-error"),ve._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return se(d.idToken||d.accessToken,"argument-error"),ve._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return xs.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return xs.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:w,oauthTokenSecret:V,pendingToken:Q,nonce:Ie,providerId:Ke}=d;if(!w&&!V&&!f&&!Q||!Ke)return null;try{return new xs(Ke)._credential({idToken:f,accessToken:w,nonce:Ie,pendingToken:Q})}catch(xt){return null}}}let gs=(()=>{class y extends Ei{constructor(){super("facebook.com")}static credential(f){return ve._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),js=(()=>{class y extends Ei{constructor(){super("google.com"),this.addScope("profile")}static credential(f,w){return ve._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:w})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:w,oauthAccessToken:V}=f;if(!w&&!V)return null;try{return y.credential(w,V)}catch(Q){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),ms=(()=>{class y extends Ei{constructor(){super("github.com")}static credential(f){return ve._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Wi extends _r{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return Lr(d,this.buildRequest())}_linkToIdToken(d,f){const w=this.buildRequest();return w.idToken=f,Lr(d,w)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Lr(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:w,signInMethod:V,pendingToken:Q}=f;return w&&V&&Q&&w===V?new Wi(w,Q):null}static _create(d,f){return new Wi(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wi extends ps{constructor(d){se(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return wi.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return wi.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=Wi.fromJSON(d);return se(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:w}=d;if(!f||!w)return null;try{return Wi._create(w,f)}catch(V){return null}}}let Xs=(()=>{class y extends Ei{constructor(){super("twitter.com")}static credential(f,w){return ve._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:w})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:w,oauthTokenSecret:V}=f;if(!w||!V)return null;try{return y.credential(w,V)}catch(Q){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function $s(y,d){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,M.Z)(function*(y,d){return sr(y,"POST","/v1/accounts:signUp",Tn(y,d))})).apply(this,arguments)}class Dr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,w,V=!1){return(0,M.Z)(function*(){const Q=yield fe._fromIdTokenResponse(d,w,V),Ie=da(w);return new Dr({user:Q,providerId:Ie,_tokenResponse:w,operationType:f})})()}static _forOperation(d,f,w){return(0,M.Z)(function*(){yield d._updateTokensIfNecessary(w,!0);const V=da(w);return new Dr({user:d,providerId:V,_tokenResponse:w,operationType:f})})()}}function da(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function zs(){return(zs=(0,M.Z)(function*(y){var d;const f=ct(y);if(yield f._initializationPromise,null===(d=f.currentUser)||void 0===d?void 0:d.isAnonymous)return new Dr({user:f.currentUser,providerId:null,operationType:"signIn"});const w=yield $s(f,{returnSecureToken:!0}),V=yield Dr._fromIdTokenResponse(f,"signIn",w,!0);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class Hs extends Z.ZR{constructor(d,f,w,V){var Q;super(f.code,f.message),this.operationType=w,this.user=V,Object.setPrototypeOf(this,Hs.prototype),this.customData={appName:d.name,tenantId:null!==(Q=d.tenantId)&&void 0!==Q?Q:void 0,_serverResponse:f.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(d,f,w,V){return new Hs(d,f,w,V)}}function ns(y,d,f,w){return("reauthenticate"===d?f._getReauthenticationResolver(y):f._getIdTokenResponse(y)).catch(Q=>{throw"auth/multi-factor-auth-required"===Q.code?Hs._fromErrorAndOperation(y,Q,d,w):Q})}function ys(y){return new Set(y.map(({providerId:d})=>d).filter(d=>!!d))}function Ds(){return(Ds=(0,M.Z)(function*(y,d){const f=(0,Z.m9)(y);yield G(!0,f,d);const{providerUserInfo:w}=yield Tr(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),V=ys(w||[]);return f.providerData=f.providerData.filter(Q=>V.has(Q.providerId)),V.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function Kn(y,d){return R.apply(this,arguments)}function R(){return(R=(0,M.Z)(function*(y,d,f=!1){const w=yield En(y,d._linkToIdToken(y.auth,yield y.getIdToken()),f);return Dr._forOperation(y,"link",w)})).apply(this,arguments)}function G(y,d,f){return k.apply(this,arguments)}function k(){return(k=(0,M.Z)(function*(y,d,f){yield hr(d);const V=!1===y?"provider-already-linked":"no-such-provider";se(ys(d.providerData).has(f)===y,d.auth,V)})).apply(this,arguments)}function Y(y,d){return oe.apply(this,arguments)}function oe(){return(oe=(0,M.Z)(function*(y,d,f=!1){const{auth:w}=y,V="reauthenticate";try{const Q=yield En(y,ns(w,V,d,y),f);se(Q.idToken,w,"internal-error");const Ie=lt(Q.idToken);se(Ie,w,"internal-error");const{sub:Ke}=Ie;return se(y.uid===Ke,w,"user-mismatch"),Dr._forOperation(y,V,Q)}catch(Q){throw"auth/user-not-found"===(null==Q?void 0:Q.code)&&Qe(w,"user-mismatch"),Q}})).apply(this,arguments)}function He(y,d){return ut.apply(this,arguments)}function ut(){return(ut=(0,M.Z)(function*(y,d,f=!1){const w="signIn",V=yield ns(y,w,d),Q=yield Dr._fromIdTokenResponse(y,w,V);return f||(yield y._updateCurrentUser(Q.user)),Q})).apply(this,arguments)}function At(y,d){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,M.Z)(function*(y,d){return He(ct(y),d)})).apply(this,arguments)}function kn(y,d){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,M.Z)(function*(y,d){const f=(0,Z.m9)(y);return yield G(!1,f,d.providerId),Kn(f,d)})).apply(this,arguments)}function Fn(y,d){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,M.Z)(function*(y,d){return Y((0,Z.m9)(y),d)})).apply(this,arguments)}function wr(y,d){return ar.apply(this,arguments)}function ar(){return(ar=(0,M.Z)(function*(y,d){return sr(y,"POST","/v1/accounts:signInWithCustomToken",Tn(y,d))})).apply(this,arguments)}function yi(){return(yi=(0,M.Z)(function*(y,d){const f=ct(y),w=yield wr(f,{token:d,returnSecureToken:!0}),V=yield Dr._fromIdTokenResponse(f,"signIn",w);return yield f._updateCurrentUser(V.user),V})).apply(this,arguments)}class Yt{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?eo._fromServerResponse(d,f):Qe(d,"internal-error")}}class eo extends Yt{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new eo(f)}}function uo(y,d,f){var w;se((null===(w=f.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),se(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(se(f.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(se(f.android.packageName.length>0,y,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function Yi(){return(Yi=(0,M.Z)(function*(y,d,f){const w=(0,Z.m9)(y),V={requestType:"PASSWORD_RESET",email:d};f&&uo(w,V,f),yield Ti(w,V)})).apply(this,arguments)}function Na(){return(Na=(0,M.Z)(function*(y,d,f){yield or((0,Z.m9)(y),{oobCode:d,newPassword:f})})).apply(this,arguments)}function dt(){return(dt=(0,M.Z)(function*(y,d){yield Ms((0,Z.m9)(y),{oobCode:d})})).apply(this,arguments)}function qn(y,d){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,M.Z)(function*(y,d){const f=(0,Z.m9)(y),w=yield or(f,{oobCode:d}),V=w.requestType;switch(se(V,f,"internal-error"),V){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":se(w.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":se(w.mfaInfo,f,"internal-error");default:se(w.email,f,"internal-error")}let Q=null;return w.mfaInfo&&(Q=Yt._fromServerResponse(ct(f),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:Q},operation:V}})).apply(this,arguments)}function to(){return(to=(0,M.Z)(function*(y,d){const{data:f}=yield qn((0,Z.m9)(y),d);return f.email})).apply(this,arguments)}function Zi(){return(Zi=(0,M.Z)(function*(y,d,f){const w=ct(y),V=yield $s(w,{returnSecureToken:!0,email:d,password:f}),Q=yield Dr._fromIdTokenResponse(w,"signIn",V);return yield w._updateCurrentUser(Q.user),Q})).apply(this,arguments)}function pl(){return(pl=(0,M.Z)(function*(y,d,f){const w=(0,Z.m9)(y),V={requestType:"EMAIL_SIGNIN",email:d};se(f.handleCodeInApp,w,"argument-error"),f&&uo(w,V,f),yield Fr(w,V)})).apply(this,arguments)}function Ss(){return(Ss=(0,M.Z)(function*(y,d,f){const w=(0,Z.m9)(y),V=wo.credentialWithLink(d,f||It());return se(V._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),At(w,V)})).apply(this,arguments)}function Mi(y,d){return rs.apply(this,arguments)}function rs(){return(rs=(0,M.Z)(function*(y,d){return an(y,"POST","/v1/accounts:createAuthUri",Tn(y,d))})).apply(this,arguments)}function Ts(){return(Ts=(0,M.Z)(function*(y,d){const w={identifier:d,continueUri:un()?It():"http://localhost"},{signinMethods:V}=yield Mi((0,Z.m9)(y),w);return V||[]})).apply(this,arguments)}function Fa(){return(Fa=(0,M.Z)(function*(y,d){const f=(0,Z.m9)(y),V={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};d&&uo(f.auth,V,d);const{email:Q}=yield bi(f.auth,V);Q!==y.email&&(yield y.reload())})).apply(this,arguments)}function ha(){return(ha=(0,M.Z)(function*(y,d,f){const w=(0,Z.m9)(y),Q={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:d};f&&uo(w.auth,Q,f);const{email:Ie}=yield Ao(w.auth,Q);Ie!==y.email&&(yield y.reload())})).apply(this,arguments)}function Wa(y,d){return fa.apply(this,arguments)}function fa(){return(fa=(0,M.Z)(function*(y,d){return an(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ka(){return(Ka=(0,M.Z)(function*(y,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const w=(0,Z.m9)(y),Q={idToken:yield w.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},Ie=yield En(w,Wa(w.auth,Q));w.displayName=Ie.displayName||null,w.photoURL=Ie.photoUrl||null;const Ke=w.providerData.find(({providerId:xt})=>"password"===xt);Ke&&(Ke.displayName=w.displayName,Ke.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Ie)})).apply(this,arguments)}function Xo(y,d,f){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,M.Z)(function*(y,d,f){const{auth:w}=y,Q={idToken:yield y.getIdToken(),returnSecureToken:!0};d&&(Q.email=d),f&&(Q.password=f);const Ie=yield En(y,On(w,Q));yield y._updateTokensIfNecessary(Ie,!0)})).apply(this,arguments)}class Ai{constructor(d,f,w={}){this.isNewUser=d,this.providerId=f,this.profile=w}}class ga extends Ai{constructor(d,f,w,V){super(d,f,w),this.username=V}}class qa extends Ai{constructor(d,f){super(d,"facebook.com",f)}}class ho extends ga{constructor(d,f){super(d,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class ma extends Ai{constructor(d,f){super(d,"google.com",f)}}class Fo extends ga{constructor(d,f,w){super(d,"twitter.com",f,w)}}function Ri(y){const{user:d,_tokenResponse:f}=y;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function ea(y){var d,f;if(!y)return null;const{providerId:w}=y,V=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},Q=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const Ie=null===(f=null===(d=lt(y.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(Ie)return new Ai(Q,"anonymous"!==Ie&&"custom"!==Ie?Ie:null)}if(!w)return null;switch(w){case"facebook.com":return new qa(Q,V);case"github.com":return new ho(Q,V);case"google.com":return new ma(Q,V);case"twitter.com":return new Fo(Q,V,y.screenName||null);case"custom":case"anonymous":return new Ai(Q,null);default:return new Ai(Q,w,V)}}(f)}class ai{constructor(d,f){this.type=d,this.credential=f}static _fromIdtoken(d){return new ai("enroll",d)}static _fromMfaPendingCredential(d){return new ai("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,w;if(null==d?void 0:d.multiFactorSession){if(null===(f=d.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return ai._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null===(w=d.multiFactorSession)||void 0===w?void 0:w.idToken)return ai._fromIdtoken(d.multiFactorSession.idToken)}return null}}class po{constructor(d,f,w){this.session=d,this.hints=f,this.signInResolver=w}static _fromError(d,f){const w=ct(d),V=f.customData._serverResponse,Q=(V.mfaInfo||[]).map(Ke=>Yt._fromServerResponse(w,Ke));se(V.mfaPendingCredential,w,"internal-error");const Ie=ai._fromMfaPendingCredential(V.mfaPendingCredential);return new po(Ie,Q,function(){var Ke=(0,M.Z)(function*(xt){const Jt=yield xt._process(w,Ie);delete V.mfaInfo,delete V.mfaPendingCredential;const yn=Object.assign(Object.assign({},V),{idToken:Jt.idToken,refreshToken:Jt.refreshToken});switch(f.operationType){case"signIn":const cn=yield Dr._fromIdTokenResponse(w,f.operationType,yn);return yield w._updateCurrentUser(cn.user),cn;case"reauthenticate":return se(f.user,w,"internal-error"),Dr._forOperation(f.user,f.operationType,yn);default:Qe(w,"internal-error")}});return function(xt){return Ke.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,M.Z)(function*(){return f.signInResolver(d)})()}}function lr(y,d){return an(y,"POST","/v2/accounts/mfaEnrollment:start",Tn(y,d))}class _s{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(w=>Yt._fromServerResponse(d.auth,w)))})}static _fromUser(d){return new _s(d)}getSession(){var d=this;return(0,M.Z)(function*(){return ai._fromIdtoken(yield d.user.getIdToken())})()}enroll(d,f){var w=this;return(0,M.Z)(function*(){const V=d,Q=yield w.getSession(),Ie=yield En(w.user,V._process(w.user.auth,Q,f));return yield w.user._updateTokensIfNecessary(Ie),w.user.reload()})()}unenroll(d){var f=this;return(0,M.Z)(function*(){const w="string"==typeof d?d:d.uid,V=yield f.user.getIdToken(),Q=yield En(f.user,function Za(y,d){return an(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Tn(y,d))}(f.user.auth,{idToken:V,mfaEnrollmentId:w}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Ie})=>Ie!==w),yield f.user._updateTokensIfNecessary(Q);try{yield f.user.reload()}catch(Ie){if("auth/user-token-expired"!==Ie.code)throw Ie}})()}}const is=new WeakMap,na="__sak";class go{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(na,"1"),this.storage.removeItem(na),Promise.resolve(!0)):Promise.resolve(!1)}catch(d){return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const ri=(()=>{class y extends go{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,w)=>this.onStorageEvent(f,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ra(){const y=(0,Z.z$)();return Nt(y)||Un(y)}()&&function rr(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ti(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const w of Object.keys(this.listeners)){const V=this.storage.getItem(w),Q=this.localCache[w];V!==Q&&f(w,Q,V)}}onStorageEvent(f,w=!1){if(!f.key)return void this.forAllChangedKeys((Ke,xt,Jt)=>{this.notifyListeners(Ke,Jt)});const V=f.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ke=this.storage.getItem(V);if(f.newValue!==Ke)null!==f.newValue?this.storage.setItem(V,f.newValue):this.storage.removeItem(V);else if(this.localCache[V]===f.newValue&&!w)return}const Q=()=>{const Ke=this.storage.getItem(V);!w&&this.localCache[V]===Ke||this.notifyListeners(V,Ke)},Ie=this.storage.getItem(V);!function Ui(){return(0,Z.w1)()&&10===document.documentMode}()||Ie===f.newValue||f.newValue===f.oldValue?Q():setTimeout(Q,10)}notifyListeners(f,w){this.localCache[f]=w;const V=this.listeners[f];if(V)for(const Q of Array.from(V))Q(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,w,V)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:w,newValue:V}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(w)}_removeListener(f,w){this.listeners[f]&&(this.listeners[f].delete(w),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,w){var V=()=>super._set,Q=this;return(0,M.Z)(function*(){yield V().call(Q,f,w),Q.localCache[f]=JSON.stringify(w)})()}_get(f){var w=()=>super._get,V=this;return(0,M.Z)(function*(){const Q=yield w().call(V,f);return V.localCache[f]=JSON.stringify(Q),Q})()}_remove(f){var w=()=>super._remove,V=this;return(0,M.Z)(function*(){yield w().call(V,f),delete V.localCache[f]})()}}return y.type="LOCAL",y})(),Qi=(()=>{class y extends go{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,w){}_removeListener(f,w){}}return y.type="SESSION",y})();let ro=(()=>{class y{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const w=this.receivers.find(Q=>Q.isListeningto(f));if(w)return w;const V=new y(f);return this.receivers.push(V),V}isListeningto(f){return this.eventTarget===f}handleEvent(f){var w=this;return(0,M.Z)(function*(){const V=f,{eventId:Q,eventType:Ie,data:Ke}=V.data,xt=w.handlersMap[Ie];if(!(null==xt?void 0:xt.size))return;V.ports[0].postMessage({status:"ack",eventId:Q,eventType:Ie});const Jt=Array.from(xt).map(function(){var cn=(0,M.Z)(function*(Li){return Li(V.origin,Ke)});return function(Li){return cn.apply(this,arguments)}}()),yn=yield function ia(y){return Promise.all(y.map(function(){var d=(0,M.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(w){return{fulfilled:!1,reason:w}}});return function(f){return d.apply(this,arguments)}}()))}(Jt);V.ports[0].postMessage({status:"done",eventId:Q,eventType:Ie,response:yn})})()}_subscribe(f,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(w)}_unsubscribe(f,w){this.handlersMap[f]&&w&&this.handlersMap[f].delete(w),(!w||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function va(y="",d=10){let f="";for(let w=0;w<d;w++)f+=Math.floor(10*Math.random());return y+f}class ml{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,w=50){var V=this;return(0,M.Z)(function*(){const Q="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Q)throw new Error("connection_unavailable");let Ie,Ke;return new Promise((xt,Jt)=>{const yn=va("",20);Q.port1.start();const cn=setTimeout(()=>{Jt(new Error("unsupported_event"))},w);Ke={messageChannel:Q,onMessage(Li){const ca=Li;if(ca.data.eventId===yn)switch(ca.data.status){case"ack":clearTimeout(cn),Ie=setTimeout(()=>{Jt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ie),xt(ca.data.response);break;default:clearTimeout(cn),clearTimeout(Ie),Jt(new Error("invalid_response"))}}},V.handlers.add(Ke),Q.port1.addEventListener("message",Ke.onMessage),V.target.postMessage({eventType:d,eventId:yn,data:f},[Q.port2])}).finally(()=>{Ke&&V.removeMessageHandler(Ke)})})()}}function Or(){return window}function vs(){return void 0!==Or().WorkerGlobalScope&&"function"==typeof Or().importScripts}function io(){return(io=(0,M.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Cs="firebaseLocalStorageDb",Vo="firebaseLocalStorage",yt="fbase_key";class Ir{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function mo(y,d){return y.transaction([Vo],d?"readwrite":"readonly").objectStore(Vo)}function E(){const y=indexedDB.open(Cs,1);return new Promise((d,f)=>{y.addEventListener("error",()=>{f(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Vo,{keyPath:yt})}catch(V){f(V)}}),y.addEventListener("success",(0,M.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Vo)?d(w):(w.close(),yield function I(){const y=indexedDB.deleteDatabase(Cs);return new Ir(y).toPromise()}(),d(yield E()))}))})}function b(y,d,f){return T.apply(this,arguments)}function T(){return(T=(0,M.Z)(function*(y,d,f){const w=mo(y,!0).put({[yt]:d,value:f});return new Ir(w).toPromise()})).apply(this,arguments)}function U(){return(U=(0,M.Z)(function*(y,d){const f=mo(y,!1).get(d),w=yield new Ir(f).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function W(y,d){const f=mo(y,!0).delete(d);return new Ir(f).toPromise()}const dn=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,M.Z)(function*(){return f.db||(f.db=yield E()),f.db})()}_withRetries(f){var w=this;return(0,M.Z)(function*(){let V=0;for(;;)try{const Q=yield w._openDb();return yield f(Q)}catch(Q){if(V++>3)throw Q;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,M.Z)(function*(){return vs()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,M.Z)(function*(){f.receiver=ro._getInstance(function Uo(){return vs()?self:null}()),f.receiver._subscribe("keyChanged",function(){var w=(0,M.Z)(function*(V,Q){return{keyProcessed:(yield f._poll()).includes(Q.key)}});return function(V,Q){return w.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var w=(0,M.Z)(function*(V,Q){return["keyChanged"]});return function(V,Q){return w.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,M.Z)(function*(){var w,V;if(f.activeServiceWorker=yield function Ua(){return io.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new ml(f.activeServiceWorker);const Q=yield f.sender._send("ping",{},800);!Q||(null===(w=Q[0])||void 0===w?void 0:w.fulfilled)&&(null===(V=Q[0])||void 0===V?void 0:V.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var w=this;return(0,M.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function ji(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:f},w.serviceWorkerReceiverAvailable?800:50)}catch(V){}})()}_isAvailable(){return(0,M.Z)(function*(){try{if(!indexedDB)return!1;const f=yield E();return yield b(f,na,"1"),yield W(f,na),!0}catch(f){}return!1})()}_withPendingWrite(f){var w=this;return(0,M.Z)(function*(){w.pendingWrites++;try{yield f()}finally{w.pendingWrites--}})()}_set(f,w){var V=this;return(0,M.Z)(function*(){return V._withPendingWrite((0,M.Z)(function*(){return yield V._withRetries(Q=>b(Q,f,w)),V.localCache[f]=w,V.notifyServiceWorker(f)}))})()}_get(f){var w=this;return(0,M.Z)(function*(){const V=yield w._withRetries(Q=>function N(y,d){return U.apply(this,arguments)}(Q,f));return w.localCache[f]=V,V})()}_remove(f){var w=this;return(0,M.Z)(function*(){return w._withPendingWrite((0,M.Z)(function*(){return yield w._withRetries(V=>W(V,f)),delete w.localCache[f],w.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,M.Z)(function*(){const w=yield f._withRetries(Ie=>{const Ke=mo(Ie,!1).getAll();return new Ir(Ke).toPromise()});if(!w)return[];if(0!==f.pendingWrites)return[];const V=[],Q=new Set;for(const{fbase_key:Ie,value:Ke}of w)Q.add(Ie),JSON.stringify(f.localCache[Ie])!==JSON.stringify(Ke)&&(f.notifyListeners(Ie,Ke),V.push(Ie));for(const Ie of Object.keys(f.localCache))f.localCache[Ie]&&!Q.has(Ie)&&(f.notifyListeners(Ie,null),V.push(Ie));return V})()}notifyListeners(f,w){this.localCache[f]=w;const V=this.listeners[f];if(V)for(const Q of Array.from(V))Q(w)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,M.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(w)}_removeListener(f,w){this.listeners[f]&&(this.listeners[f].delete(w),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Qt(y,d){return an(y,"POST","/v2/accounts/mfaSignIn:start",Tn(y,d))}function ii(){return(ii=(0,M.Z)(function*(y){return(yield an(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Bo(y){return new Promise((d,f)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=d,w.onerror=V=>{const Q=je("internal-error");Q.customData=V,f(Q)},w.type="text/javascript",w.charset="UTF-8",function Ws(){var y,d;return null!==(d=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==d?d:document}().appendChild(w)})}function Ni(y){return`__${y}${Math.floor(1e6*Math.random())}`}const vn=1e12;class Ca{constructor(d){this.auth=d,this.counter=vn,this._widgets=new Map}render(d,f){const w=this.counter;return this._widgets.set(w,new yl(d,this.auth.name,f||{})),this.counter++,w}reset(d){var f;const w=d||vn;null===(f=this._widgets.get(w))||void 0===f||f.delete(),this._widgets.delete(w)}getResponse(d){var f;return(null===(f=this._widgets.get(d||vn))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,M.Z)(function*(){var w;return null===(w=f._widgets.get(d||vn))||void 0===w||w.execute(),""})()}}class yl{constructor(d,f,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const V="string"==typeof d?document.getElementById(d):d;se(V,"argument-error",{appName:f}),this.container=V,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Vr(y){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)d.push(f.charAt(Math.floor(Math.random()*f.length)));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const rn=Ni("rcb"),Gc=new mn(3e4,6e4);class Pu{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Or().grecaptcha}load(d,f=""){return se(function dc(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(f),d,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Or().grecaptcha):new Promise((w,V)=>{const Q=Or().setTimeout(()=>{V(je(d,"network-request-failed"))},Gc.get());Or()[rn]=()=>{Or().clearTimeout(Q),delete Or()[rn];const Ke=Or().grecaptcha;if(!Ke)return void V(je(d,"internal-error"));const xt=Ke.render;Ke.render=(Jt,yn)=>{const cn=xt(Jt,yn);return this.counter++,cn},this.hostLanguage=f,w(Ke)},Bo(`https://www.google.com/recaptcha/api.js??${(0,Z.xO)({onload:rn,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(Q),V(je(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){return!!Or().grecaptcha&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nr{load(d){return(0,M.Z)(function*(){return new Ca(d)})()}clearedOneInstance(){}}const Ll="recaptcha",li={theme:"light",type:"image"};class Va{constructor(d,f=Object.assign({},li),w){this.parameters=f,this.type=Ll,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ct(w),this.isInvisible="invisible"===this.parameters.size,se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const V="string"==typeof d?document.getElementById(d):d;se(V,this.auth,"argument-error"),this.container=V,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nr:new Pu,this.validateStartingState()}verify(){var d=this;return(0,M.Z)(function*(){d.assertNotDestroyed();const f=yield d.render(),w=d.getAssertedRecaptcha();return w.getResponse(f)||new Promise(Q=>{const Ie=Ke=>{!Ke||(d.tokenChangeListeners.delete(Ie),Q(Ke))};d.tokenChangeListeners.add(Ie),d.isInvisible&&w.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){se(!this.parameters.sitekey,this.auth,"argument-error"),se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(w=>w(f)),"function"==typeof d)d(f);else if("string"==typeof d){const w=Or()[d];"function"==typeof w&&w(f)}}}assertNotDestroyed(){se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,M.Z)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const w=document.createElement("div");f.appendChild(w),f=w}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,M.Z)(function*(){se(un()&&!vs(),d.auth,"internal-error"),yield function Wc(){let y=null;return new Promise(d=>{"complete"!==document.readyState?(y=()=>d(),window.addEventListener("load",y)):d()}).catch(d=>{throw y&&window.removeEventListener("load",y),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function gr(y){return ii.apply(this,arguments)}(d.auth);se(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class $r{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=Hi._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function Ln(){return(Ln=(0,M.Z)(function*(y,d,f){const w=ct(y),V=yield Cn(w,d,(0,Z.m9)(f));return new $r(V,Q=>At(w,Q))})).apply(this,arguments)}function so(){return(so=(0,M.Z)(function*(y,d,f){const w=(0,Z.m9)(y);yield G(!1,w,"phone");const V=yield Cn(w.auth,d,(0,Z.m9)(f));return new $r(V,Q=>kn(w,Q))})).apply(this,arguments)}function Br(){return(Br=(0,M.Z)(function*(y,d,f){const w=(0,Z.m9)(y),V=yield Cn(w.auth,d,(0,Z.m9)(f));return new $r(V,Q=>Fn(w,Q))})).apply(this,arguments)}function Cn(y,d,f){return As.apply(this,arguments)}function As(){return(As=(0,M.Z)(function*(y,d,f){var w;const V=yield f.verify();try{let Q;if(se("string"==typeof V,y,"argument-error"),se(f.type===Ll,y,"argument-error"),Q="string"==typeof d?{phoneNumber:d}:d,"session"in Q){const Ie=Q.session;if("phoneNumber"in Q)return se("enroll"===Ie.type,y,"internal-error"),(yield lr(y,{idToken:Ie.credential,phoneEnrollmentInfo:{phoneNumber:Q.phoneNumber,recaptchaToken:V}})).phoneSessionInfo.sessionInfo;{se("signin"===Ie.type,y,"internal-error");const Ke=(null===(w=Q.multiFactorHint)||void 0===w?void 0:w.uid)||Q.multiFactorUid;return se(Ke,y,"missing-multi-factor-info"),(yield Qt(y,{mfaPendingCredential:Ie.credential,mfaEnrollmentId:Ke,phoneSignInInfo:{recaptchaToken:V}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ie}=yield pe(y,{phoneNumber:Q.phoneNumber,recaptchaToken:V});return Ie}}finally{f._reset()}})).apply(this,arguments)}function Rs(){return(Rs=(0,M.Z)(function*(y,d){yield Kn((0,Z.m9)(y),d)})).apply(this,arguments)}let bs=(()=>{class y{constructor(f){this.providerId=y.PROVIDER_ID,this.auth=ct(f)}verifyPhoneNumber(f,w){return Cn(this.auth,f,(0,Z.m9)(w))}static credential(f,w){return Hi._fromVerification(f,w)}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:w,temporaryProof:V}=f;return w&&V?Hi._fromTokenResponse(w,V):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function oa(y,d){return d?Ne(d):(se(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Rt extends _r{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Lr(d,this._buildIdpRequest())}_linkToIdToken(d,f){return Lr(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return Lr(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function qc(y){return He(y.auth,new Rt(y),y.bypassAuthState)}function Yc(y){const{auth:d,user:f}=y;return se(f,d,"internal-error"),Y(f,new Rt(y),y.bypassAuthState)}function aa(y){return tt.apply(this,arguments)}function tt(){return(tt=(0,M.Z)(function*(y){const{auth:d,user:f}=y;return se(f,d,"internal-error"),Kn(f,new Rt(y),y.bypassAuthState)})).apply(this,arguments)}class _i{constructor(d,f,w,V,Q=!1){this.auth=d,this.resolver=w,this.user=V,this.bypassAuthState=Q,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,M.Z)(function*(w,V){d.pendingPromise={resolve:w,reject:V};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(Q){d.reject(Q)}});return function(w,V){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,M.Z)(function*(){const{urlResponse:w,sessionId:V,postBody:Q,tenantId:Ie,error:Ke,type:xt}=d;if(Ke)return void f.reject(Ke);const Jt={auth:f.auth,requestUri:w,sessionId:V,tenantId:Ie||void 0,postBody:Q||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(xt)(Jt))}catch(yn){f.reject(yn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return qc;case"linkViaPopup":case"linkViaRedirect":return aa;case"reauthViaPopup":case"reauthViaRedirect":return Yc;default:Qe(this.auth,"internal-error")}}resolve(d){Ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ao=new mn(2e3,1e4);function ks(){return(ks=(0,M.Z)(function*(y,d,f){const w=ct(y);Mt(y,d,ps);const V=oa(w,f);return new Ea(w,"signInViaPopup",d,V).executeNotNull()})).apply(this,arguments)}function Ns(){return(Ns=(0,M.Z)(function*(y,d,f){const w=(0,Z.m9)(y);Mt(w.auth,d,ps);const V=oa(w.auth,f);return new Ea(w.auth,"reauthViaPopup",d,V,w).executeNotNull()})).apply(this,arguments)}function $o(){return($o=(0,M.Z)(function*(y,d,f){const w=(0,Z.m9)(y);Mt(w.auth,d,ps);const V=oa(w.auth,f);return new Ea(w.auth,"linkViaPopup",d,V,w).executeNotNull()})).apply(this,arguments)}let Ea=(()=>{class y extends _i{constructor(f,w,V,Q,Ie){super(f,w,Q,Ie),this.provider=V,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var f=this;return(0,M.Z)(function*(){const w=yield f.execute();return se(w,f.auth,"internal-error"),w})()}onExecution(){var f=this;return(0,M.Z)(function*(){Ee(1===f.filter.length,"Popup operations only handle one event");const w=va();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],w),f.authWindow.associatedEvent=w,f.resolver._originValidation(f.auth).catch(V=>{f.reject(V)}),f.resolver._isIframeWebStorageSupported(f.auth,V=>{V||f.reject(je(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(je(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const f=()=>{var w,V;this.pollId=(null===(V=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===V?void 0:V.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(je(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,ao.get())};f()}}return y.currentPopupAction=null,y})();const wa=new Map;class Ma extends _i{constructor(d,f,w=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,w),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,M.Z)(function*(){let w=wa.get(f.auth._key());if(!w){try{const Q=(yield function P(y,d){return F.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;w=()=>Promise.resolve(Q)}catch(V){w=()=>Promise.reject(V)}wa.set(f.auth._key(),w)}return f.bypassAuthState||wa.set(f.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,w=this;return(0,M.Z)(function*(){if("signInViaRedirect"===d.type)return f().call(w,d);if("unknown"!==d.type){if(d.eventId){const V=yield w.auth._redirectUserForId(d.eventId);if(V)return w.user=V,f().call(w,d);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,M.Z)(function*(){})()}cleanUp(){}}function F(){return(F=(0,M.Z)(function*(y,d){const f=mt(d),w=Se(y);if(!(yield w._isAvailable()))return!1;const V="true"===(yield w._get(f));return yield w._remove(f),V})).apply(this,arguments)}function K(y,d){return ee.apply(this,arguments)}function ee(){return(ee=(0,M.Z)(function*(y,d){return Se(y)._set(mt(d),"true")})).apply(this,arguments)}function Se(y){return Ne(y._redirectPersistence)}function mt(y){return ze("pendingRedirect",y.config.apiKey,y.name)}function gn(){return(gn=(0,M.Z)(function*(y,d,f){const w=ct(y);Mt(y,d,ps);const V=oa(w,f);return yield K(V,w),V._openRedirect(w,d,"signInViaRedirect")})).apply(this,arguments)}function Es(){return(Es=(0,M.Z)(function*(y,d,f){const w=(0,Z.m9)(y);Mt(w.auth,d,ps);const V=oa(w.auth,f);yield K(V,w.auth);const Q=yield Xa(w);return V._openRedirect(w.auth,d,"reauthViaRedirect",Q)})).apply(this,arguments)}function Ja(){return(Ja=(0,M.Z)(function*(y,d,f){const w=(0,Z.m9)(y);Mt(w.auth,d,ps);const V=oa(w.auth,f);yield G(!1,w,d.providerId),yield K(V,w.auth);const Q=yield Xa(w);return V._openRedirect(w.auth,d,"linkViaRedirect",Q)})).apply(this,arguments)}function ci(){return(ci=(0,M.Z)(function*(y,d){return yield ct(y)._initializationPromise,yo(y,d,!1)})).apply(this,arguments)}function yo(y,d){return Do.apply(this,arguments)}function Do(){return(Do=(0,M.Z)(function*(y,d,f=!1){const w=ct(y),V=oa(w,d),Ie=yield new Ma(w,V,f).execute();return Ie&&!f&&(delete Ie.user._redirectEventId,yield w._persistUserIfCurrent(Ie.user),yield w._setRedirectUser(null,d)),Ie})).apply(this,arguments)}function Xa(y){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,M.Z)(function*(y){const d=va(`${y.uid}:::`);return y._redirectEventId=d,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),d})).apply(this,arguments)}class hc{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(d,w)&&(f=!0,this.sendToConsumer(d,w),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function pc(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fc(y);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var w;if(d.error&&!fc(d)){const V=(null===(w=d.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";f.onError(je(this.auth,V))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const w=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&w}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(el(d))}saveEventToCache(d){this.cachedEventUids.add(el(d)),this.lastProcessedEventTime=Date.now()}}function el(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(d=>d).join("-")}function fc({type:y,error:d}){return"unknown"===y&&"auth/no-auth-event"===(null==d?void 0:d.code)}function Bl(y){return _l.apply(this,arguments)}function _l(){return(_l=(0,M.Z)(function*(y,d={}){return an(y,"GET","/v1/projects",d)})).apply(this,arguments)}const Zc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mh=/^https?/;function Fs(){return(Fs=(0,M.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:d}=yield Bl(y);for(const f of d)try{if(jl(f))return}catch(w){}Qe(y,"unauthorized-domain")})).apply(this,arguments)}function jl(y){const d=It(),{protocol:f,hostname:w}=new URL(d);if(y.startsWith("chrome-extension://")){const Ie=new URL(y);return""===Ie.hostname&&""===w?"chrome-extension:"===f&&y.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&Ie.hostname===w}if(!Mh.test(f))return!1;if(Zc.test(y))return w===y;const V=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+V+"|"+V+")$","i").test(w)}const Qc=new mn(3e4,6e4);function gc(){const y=Or().___jsl;if(null==y?void 0:y.H)for(const d of Object.keys(y.H))if(y.H[d].r=y.H[d].r||[],y.H[d].L=y.H[d].L||[],y.H[d].r=[...y.H[d].L],y.CP)for(let f=0;f<y.CP.length;f++)y.CP[f]=null}let vl=null;function Cl(y){return vl=vl||function zo(y){return new Promise((d,f)=>{var w,V,Q;function Ie(){gc(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{gc(),f(je(y,"network-request-failed"))},timeout:Qc.get()})}if(null===(V=null===(w=Or().gapi)||void 0===w?void 0:w.iframes)||void 0===V?void 0:V.Iframe)d(gapi.iframes.getContext());else{if(!(null===(Q=Or().gapi)||void 0===Q?void 0:Q.load)){const Ke=Ni("iframefcb");return Or()[Ke]=()=>{gapi.load?Ie():f(je(y,"network-request-failed"))},Bo(`https://apis.google.com/js/api.js?onload=${Ke}`).catch(xt=>f(xt))}Ie()}}).catch(d=>{throw vl=null,d})}(y),vl}const mc=new mn(5e3,15e3),bl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$l=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Po(y){const d=y.config;se(d.authDomain,y,"auth-domain-config-required");const f=d.emulator?qt(d,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:d.apiKey,appName:y.name,v:de.SDK_VERSION},V=$l.get(y.config.apiHost);V&&(w.eid=V);const Q=y._getFrameworks();return Q.length&&(w.fw=Q.join(",")),`${f}?${(0,Z.xO)(w).slice(1)}`}function zl(){return zl=(0,M.Z)(function*(y){const d=yield Cl(y),f=Or().gapi;return se(f,y,"internal-error"),d.open({where:document.body,url:Po(y),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bl,dontclear:!0},w=>new Promise(function(){var V=(0,M.Z)(function*(Q,Ie){yield w.restyle({setHideOnLeave:!1});const Ke=je(y,"network-request-failed"),xt=Or().setTimeout(()=>{Ie(Ke)},mc.get());function Jt(){Or().clearTimeout(xt),Q(w)}w.ping(Jt).then(Jt,()=>{Ie(Ke)})});return function(Q,Ie){return V.apply(this,arguments)}}()))}),zl.apply(this,arguments)}const Hl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Xc{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(d){}}}function El(y,d,f,w,V,Q){se(y.config.authDomain,y,"auth-domain-config-required"),se(y.config.apiKey,y,"invalid-api-key");const Ie={apiKey:y.config.apiKey,appName:y.name,authType:f,redirectUrl:w,v:de.SDK_VERSION,eventId:V};if(d instanceof ps){d.setDefaultLanguage(y.languageCode),Ie.providerId=d.providerId||"",(0,Z.xb)(d.getCustomParameters())||(Ie.customParameters=JSON.stringify(d.getCustomParameters()));for(const[xt,Jt]of Object.entries(Q||{}))Ie[xt]=Jt}if(d instanceof Ei){const xt=d.getScopes().filter(Jt=>""!==Jt);xt.length>0&&(Ie.scopes=xt.join(","))}y.tenantId&&(Ie.tid=y.tenantId);const Ke=Ie;for(const xt of Object.keys(Ke))void 0===Ke[xt]&&delete Ke[xt];return`${function vd({config:y}){return y.emulator?qt(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,Z.xO)(Ke).slice(1)}`}const xa="webStorageSupport";class eu extends class nl{constructor(d){this.factorId=d}_process(d,f,w){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,w);case"signin":return this._finalizeSignIn(d,f.credential);default:return we("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new eu(d)}_finalizeEnroll(d,f,w){return function ya(y,d){return an(y,"POST","/v2/accounts/mfaEnrollment:finalize",Tn(y,d))}(d,{idToken:f,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function cr(y,d){return an(y,"POST","/v2/accounts/mfaSignIn:finalize",Tn(y,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ql=(()=>{class y{constructor(){}static assertion(f){return eu._fromCredential(f)}}return y.FACTOR_ID="phone",y})();var Au="@firebase/auth",wl="0.19.11";class tu{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,M.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(w=>{var V;d((null===(V=w)||void 0===V?void 0:V.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);!f||(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ml(){return window}function ja(){return(ja=(0,M.Z)(function*(y,d,f){var w;const{BuildInfo:V}=Ml();Ee(d.sessionId,"AuthEvent did not contain a session ID");const Q=yield u(d.sessionId),Ie={};return Un()?Ie.ibi=V.packageName:fr()?Ie.apn=V.packageName:Qe(y,"operation-not-supported-in-this-environment"),V.displayName&&(Ie.appDisplayName=V.displayName),Ie.sessionId=Q,El(y,f,d.type,void 0,null!==(w=d.eventId)&&void 0!==w?w:void 0,Ie)})).apply(this,arguments)}function vo(){return(vo=(0,M.Z)(function*(y){const{BuildInfo:d}=Ml(),f={};Un()?f.iosBundleId=d.packageName:fr()?f.androidPackageName=d.packageName:Qe(y,"operation-not-supported-in-this-environment"),yield Bl(y,f)})).apply(this,arguments)}function m(){return(m=(0,M.Z)(function*(y,d,f){const{cordova:w}=Ml();let V=()=>{};try{yield new Promise((Q,Ie)=>{let Ke=null;function xt(){var cn;Q();const Li=null===(cn=w.plugins.browsertab)||void 0===cn?void 0:cn.close;"function"==typeof Li&&Li(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function Jt(){Ke||(Ke=window.setTimeout(()=>{Ie(je(y,"redirect-cancelled-by-user"))},2e3))}function yn(){"visible"===(null==document?void 0:document.visibilityState)&&Jt()}d.addPassiveListener(xt),document.addEventListener("resume",Jt,!1),fr()&&document.addEventListener("visibilitychange",yn,!1),V=()=>{d.removePassiveListener(xt),document.removeEventListener("resume",Jt,!1),document.removeEventListener("visibilitychange",yn,!1),Ke&&window.clearTimeout(Ke)}})}finally{V()}})).apply(this,arguments)}function u(y){return _.apply(this,arguments)}function _(){return(_=(0,M.Z)(function*(y){const d=S(y),f=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(f)).map(V=>V.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function S(y){if(Ee(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const d=new ArrayBuffer(y.length),f=new Uint8Array(d);for(let w=0;w<y.length;w++)f[w]=y.charCodeAt(w);return f}!function vc(y){(0,de._registerComponent)(new ue.wA("auth",(d,{options:f})=>{const w=d.getProvider("app").getImmediate(),V=d.getProvider("heartbeat"),{apiKey:Q,authDomain:Ie}=w.options;return((Ke,xt)=>{se(Q&&!Q.includes(":"),"invalid-api-key",{appName:Ke.name}),se(!(null==Ie?void 0:Ie.includes(":")),"argument-error",{appName:Ke.name});const Jt={apiKey:Q,authDomain:Ie,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hr(y)},yn=new Zn(Ke,xt,Jt);return function Fe(y,d){const f=(null==d?void 0:d.persistence)||[],w=(Array.isArray(f)?f:[f]).map(Ne);(null==d?void 0:d.errorMap)&&y._updateErrorMap(d.errorMap),y._initializeWithPersistence(w,null==d?void 0:d.popupRedirectResolver)}(yn,f),yn})(w,V)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,w)=>{d.getProvider("auth-internal").initialize()})),(0,de._registerComponent)(new ue.wA("auth-internal",d=>{const f=ct(d.getProvider("auth").getImmediate());return new tu(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,de.registerVersion)(Au,wl,function Cd(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,de.registerVersion)(Au,wl,"esm2017")}("Browser");class te extends hc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(d)),super.onEvent(d)}initialized(){var d=this;return(0,M.Z)(function*(){yield d.initPromise})()}}function We(y){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,M.Z)(function*(y){const d=yield vr()._get(sn(y));return d&&(yield vr()._remove(sn(y))),d})).apply(this,arguments)}function xn(){const y=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const w=Math.floor(Math.random()*d.length);y.push(d.charAt(w))}return y.join("")}function vr(){return Ne(ri)}function sn(y){return ze("authEvent",y.config.apiKey,y.name)}function bt(y){if(!(null==y?void 0:y.includes("?")))return{};const[d,...f]=y.split("?");return(0,Z.zd)(f.join("?"))}function on(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:je("no-auth-event")}}function Cc(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Oh(y=(0,Z.z$)()){return!("file:"!==Cc()&&"ionic:"!==Cc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ks(){try{const y=self.localStorage,d=va();if(y)return y.setItem(d,"1"),y.removeItem(d),!function Ol(y=(0,Z.z$)()){return function ku(){return(0,Z.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Nu(y=(0,Z.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,Z.hl)()}catch(y){return bc()&&(0,Z.hl)()}return!1}function bc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function iu(){return(function zr(){return"http:"===Cc()||"https:"===Cc()}()||(0,Z.ru)()||Oh())&&!function Ru(){return(0,Z.b$)()||(0,Z.UG)()}()&&Ks()&&!bc()}function Ed(){return Oh()&&"undefined"!=typeof document}function Il(){return(Il=(0,M.Z)(function*(){return!!Ed()&&new Promise(y=>{const d=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),y(!0)})})})).apply(this,arguments)}const Ho={LOCAL:"local",NONE:"none",SESSION:"session"},su=se,Zl="persistence";function Fu(y){return ls.apply(this,arguments)}function ls(){return(ls=(0,M.Z)(function*(y){yield y._initializationPromise;const d=Md(),f=ze(Zl,y.config.apiKey,y.name);d&&d.setItem(f,y._getPersistence())})).apply(this,arguments)}function Md(){var y;try{return(null===(y=function wd(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(d){return null}}const ou=se;class ws{constructor(){this.browserResolver=Ne(class Kl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qi,this._completeRedirectFn=yo}_openPopup(d,f,w,V){var Q=this;return(0,M.Z)(function*(){var Ie;Ee(null===(Ie=Q.eventManagers[d._key()])||void 0===Ie?void 0:Ie.manager,"_initialize() not called before _openPopup()");const Ke=El(d,f,w,It(),V);return function yd(y,d,f,w=500,V=600){const Q=Math.max((window.screen.availHeight-V)/2,0).toString(),Ie=Math.max((window.screen.availWidth-w)/2,0).toString();let Ke="";const xt=Object.assign(Object.assign({},Hl),{width:w.toString(),height:V.toString(),top:Q,left:Ie}),Jt=(0,Z.z$)().toLowerCase();f&&(Ke=kr(Jt)?"_blank":f),Kt(Jt)&&(d=d||"http://localhost",xt.scrollbars="yes");const yn=Object.entries(xt).reduce((Li,[ca,cu])=>`${Li}${ca}=${cu},`,"");if(function Pi(y=(0,Z.z$)()){var d;return Un(y)&&!!(null===(d=window.navigator)||void 0===d?void 0:d.standalone)}(Jt)&&"_self"!==Ke)return function _d(y,d){const f=document.createElement("a");f.href=y,f.target=d;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(w)}(d||"",Ke),new Xc(null);const cn=window.open(d||"",Ke,yn);se(cn,y,"popup-blocked");try{cn.focus()}catch(Li){}return new Xc(cn)}(d,Ke,va())})()}_openRedirect(d,f,w,V){var Q=this;return(0,M.Z)(function*(){return yield Q._originValidation(d),function Fl(y){Or().location.href=y}(El(d,f,w,It(),V)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:V,promise:Q}=this.eventManagers[f];return V?Promise.resolve(V):(Ee(Q,"If manager is not set, promise should be"),Q)}const w=this.initAndGetManager(d);return this.eventManagers[f]={promise:w},w.catch(()=>{delete this.eventManagers[f]}),w}initAndGetManager(d){var f=this;return(0,M.Z)(function*(){const w=yield function _o(y){return zl.apply(this,arguments)}(d),V=new hc(d);return w.register("authEvent",Q=>(se(null==Q?void 0:Q.authEvent,d,"invalid-auth-event"),{status:V.onEvent(Q.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:V},f.iframes[d._key()]=w,V})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(xa,{type:xa},V=>{var Q;const Ie=null===(Q=null==V?void 0:V[0])||void 0===Q?void 0:Q[xa];void 0!==Ie&&f(!!Ie),Qe(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Ba(y){return Fs.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return ti()||Nt()||Un()}}),this.cordovaResolver=Ne(class kt{constructor(){this._redirectPersistence=Qi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=yo}_initialize(d){var f=this;return(0,M.Z)(function*(){const w=d._key();let V=f.eventManagers.get(w);return V||(V=new te(d),f.eventManagers.set(w,V),f.attachCallbackListeners(d,V)),V})()}_openPopup(d){Qe(d,"operation-not-supported-in-this-environment")}_openRedirect(d,f,w,V){var Q=this;return(0,M.Z)(function*(){!function g(y){var d,f,w,V,Q,Ie,Ke,xt,Jt,yn;const cn=Ml();se("function"==typeof(null===(d=null==cn?void 0:cn.universalLinks)||void 0===d?void 0:d.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),se(void 0!==(null===(f=null==cn?void 0:cn.BuildInfo)||void 0===f?void 0:f.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),se("function"==typeof(null===(Q=null===(V=null===(w=null==cn?void 0:cn.cordova)||void 0===w?void 0:w.plugins)||void 0===V?void 0:V.browsertab)||void 0===Q?void 0:Q.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),se("function"==typeof(null===(xt=null===(Ke=null===(Ie=null==cn?void 0:cn.cordova)||void 0===Ie?void 0:Ie.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===xt?void 0:xt.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),se("function"==typeof(null===(yn=null===(Jt=null==cn?void 0:cn.cordova)||void 0===Jt?void 0:Jt.InAppBrowser)||void 0===yn?void 0:yn.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const Ie=yield Q._initialize(d);yield Ie.initialized(),Ie.resetRedirect(),function De(){wa.clear()}(),yield Q._originValidation(d);const Ke=function Oe(y,d,f=null){return{type:d,eventId:f,urlResponse:null,sessionId:xn(),postBody:null,tenantId:y.tenantId,error:je(y,"no-auth-event")}}(d,w,V);yield function Ge(y,d){return vr()._set(sn(y),d)}(d,Ke);const xt=yield function nu(y,d,f){return ja.apply(this,arguments)}(d,Ke,f),Jt=yield function Yl(y){const{cordova:d}=Ml();return new Promise(f=>{d.plugins.browsertab.isAvailable(w=>{let V=null;w?d.plugins.browsertab.openUrl(y):V=d.InAppBrowser.open(y,function tr(y=(0,Z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),f(V)})})}(xt);return function ru(y,d,f){return m.apply(this,arguments)}(d,Ie,Jt)})()}_isIframeWebStorageSupported(d,f){throw new Error("Method not implemented.")}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function bd(y){return vo.apply(this,arguments)}(d)),this.originValidationPromises[f]}attachCallbackListeners(d,f){const{universalLinks:w,handleOpenURL:V,BuildInfo:Q}=Ml(),Ie=setTimeout((0,M.Z)(function*(){yield We(d),f.onEvent(on())}),500),Ke=function(){var yn=(0,M.Z)(function*(cn){clearTimeout(Ie);const Li=yield We(d);let ca=null;Li&&(null==cn?void 0:cn.url)&&(ca=function Ut(y,d){var f,w;const V=function wt(y){const d=bt(y),f=d.link?decodeURIComponent(d.link):void 0,w=bt(f).link,V=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return bt(V).link||V||w||f||y}(d);if(V.includes("/__/auth/callback")){const Q=bt(V),Ie=Q.firebaseError?function Wr(y){try{return JSON.parse(y)}catch(d){return null}}(decodeURIComponent(Q.firebaseError)):null,Ke=null===(w=null===(f=null==Ie?void 0:Ie.code)||void 0===f?void 0:f.split("auth/"))||void 0===w?void 0:w[1],xt=Ke?je(Ke):null;return xt?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:xt,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:V,postBody:null}}return null}(Li,cn.url)),f.onEvent(ca||on())});return function(Li){return yn.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,Ke);const xt=V,Jt=`${Q.packageName.toLowerCase()}://`;Ml().handleOpenURL=function(){var yn=(0,M.Z)(function*(cn){if(cn.toLowerCase().startsWith(Jt)&&Ke({url:cn}),"function"==typeof xt)try{xt(cn)}catch(Li){console.error(Li)}});return function(cn){return yn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Qi,this._completeRedirectFn=yo}_initialize(d){var f=this;return(0,M.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,f,w,V){var Q=this;return(0,M.Z)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._openPopup(d,f,w,V)})()}_openRedirect(d,f,w,V){var Q=this;return(0,M.Z)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._openRedirect(d,f,w,V)})()}_isIframeWebStorageSupported(d,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,f)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return Ed()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ou(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,M.Z)(function*(){if(d.underlyingResolver)return;const f=yield function qs(){return Il.apply(this,arguments)}();d.underlyingResolver=f?d.cordovaResolver:d.browserResolver})()}}function Uu(y){return y.unwrap()}function Ql(y){return Od(y)}function Od(y){const{_tokenResponse:d}=y instanceof Z.ZR?y.customData:y;if(!d)return null;if(!(y instanceof Z.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return bs.credentialFromResult(y);const f=d.providerId;if(!f||"password"===f)return null;let w;switch(f){case"google.com":w=js;break;case"facebook.com":w=gs;break;case"github.com":w=ms;break;case"twitter.com":w=Xs;break;default:const{oauthIdToken:V,oauthAccessToken:Q,oauthTokenSecret:Ie,pendingToken:Ke,nonce:xt}=d;return Q||Ie||V||Ke?Ke?f.startsWith("saml.")?Wi._create(f,Ke):ve._fromParams({providerId:f,signInMethod:f,pendingToken:Ke,idToken:V,accessToken:Q}):new xs(f).credential({idToken:V,accessToken:Q,rawNonce:xt}):null}return y instanceof Z.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function Us(y,d){return d.catch(f=>{throw f instanceof Z.ZR&&function Dh(y,d){var f;const w=null===(f=d.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===d.code)d.resolver=new au(y,function Lo(y,d){var f;const w=(0,Z.m9)(y),V=d;return se(d.customData.operationType,w,"argument-error"),se(null===(f=V.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,w,"argument-error"),po._fromError(w,V)}(y,d));else if(w){const V=Od(d),Q=d;V&&(Q.credential=V,Q.tenantId=w.tenantId||void 0,Q.email=w.email||void 0,Q.phoneNumber=w.phoneNumber||void 0)}}(y,f),f}).then(f=>{const V=f.user;return{operationType:f.operationType,credential:Ql(f),additionalUserInfo:Ri(f),user:Da.getOrCreate(V)}})}function Id(y,d){return xd.apply(this,arguments)}function xd(){return(xd=(0,M.Z)(function*(y,d){const f=yield d;return{verificationId:f.verificationId,confirm:w=>Us(y,f.confirm(w))}})).apply(this,arguments)}class au{constructor(d,f){this.resolver=f,this.auth=function xh(y){return y.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Us(Uu(this.auth),this.resolver.resolveSignIn(d))}}class Da{constructor(d){this._delegate=d,this.multiFactor=function ki(y){const d=(0,Z.m9)(y);return is.has(d)||is.set(d,_s._fromUser(d)),is.get(d)}(d)}static getOrCreate(d){return Da.USER_MAP.has(d)||Da.USER_MAP.set(d,new Da(d)),Da.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var f=this;return(0,M.Z)(function*(){return Us(f.auth,kn(f._delegate,d))})()}linkWithPhoneNumber(d,f){var w=this;return(0,M.Z)(function*(){return Id(w.auth,function ei(y,d,f){return so.apply(this,arguments)}(w._delegate,d,f))})()}linkWithPopup(d){var f=this;return(0,M.Z)(function*(){return Us(f.auth,function Ul(y,d,f){return $o.apply(this,arguments)}(f._delegate,d,ws))})()}linkWithRedirect(d){var f=this;return(0,M.Z)(function*(){return yield Fu(ct(f.auth)),function Sn(y,d,f){return function Oa(y,d,f){return Ja.apply(this,arguments)}(y,d,f)}(f._delegate,d,ws)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var f=this;return(0,M.Z)(function*(){return Us(f.auth,Fn(f._delegate,d))})()}reauthenticateWithPhoneNumber(d,f){return Id(this.auth,function Qa(y,d,f){return Br.apply(this,arguments)}(this._delegate,d,f))}reauthenticateWithPopup(d){return Us(this.auth,function jo(y,d,f){return Ns.apply(this,arguments)}(this._delegate,d,ws))}reauthenticateWithRedirect(d){var f=this;return(0,M.Z)(function*(){return yield Fu(ct(f.auth)),function jn(y,d,f){return function Pn(y,d,f){return Es.apply(this,arguments)}(y,d,f)}(f._delegate,d,ws)})()}sendEmailVerification(d){return function Oi(y,d){return Fa.apply(this,arguments)}(this._delegate,d)}unlink(d){var f=this;return(0,M.Z)(function*(){return yield function co(y,d){return Ds.apply(this,arguments)}(f._delegate,d),f})()}updateEmail(d){return function pa(y,d){return Xo((0,Z.m9)(y),d,null)}(this._delegate,d)}updatePassword(d){return function Jo(y,d){return Xo((0,Z.m9)(y),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function oo(y,d){return Rs.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Io(y,d){return Ka.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,f){return function Gr(y,d,f){return ha.apply(this,arguments)}(this._delegate,d,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Da.USER_MAP=new WeakMap;const lu=se;let Vu=(()=>{class y{constructor(f,w){if(this.app=f,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:V}=f.options;lu(V,"invalid-api-key",{appName:f.name}),lu(V,"invalid-api-key",{appName:f.name});const Q="undefined"!=typeof window?ws:void 0;this._delegate=w.initialize({options:{persistence:Ph(V,f.name),popupRedirectResolver:Q}}),this._delegate._updateErrorMap(rt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Da.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,w){!function Vn(y,d,f){const w=ct(y);se(w._canInitEmulator,w,"emulator-config-failed"),se(/^https?:\/\//.test(d),w,"invalid-emulator-scheme");const V=!!(null==f?void 0:f.disableWarnings),Q=Qr(d),{host:Ie,port:Ke}=function pi(y){const d=Qr(y),f=/(\/\/)?([^?#/]+)/.exec(y.substr(d.length));if(!f)return{host:"",port:null};const w=f[2].split("@").pop()||"",V=/^(\[[^\]]+\])(:|$)/.exec(w);if(V){const Q=V[1];return{host:Q,port:Nr(w.substr(Q.length+1))}}{const[Q,Ie]=w.split(":");return{host:Q,port:Nr(Ie)}}}(d);w.config.emulator={url:`${Q}//${Ie}${null===Ke?"":`:${Ke}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Ie,port:Ke,protocol:Q.replace(":",""),options:Object.freeze({disableWarnings:V})}),V||function gi(){function y(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,f,w)}applyActionCode(f){return function ko(y,d){return dt.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return qn(this._delegate,f)}confirmPasswordReset(f,w){return function Yo(y,d,f){return Na.apply(this,arguments)}(this._delegate,f,w)}createUserWithEmailAndPassword(f,w){var V=this;return(0,M.Z)(function*(){return Us(V._delegate,function Zo(y,d,f){return Zi.apply(this,arguments)}(V._delegate,f,w))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function No(y,d){return Ts.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Ga(y,d){const f=Gi.parseLink(d);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,M.Z)(function*(){lu(iu(),f._delegate,"operation-not-supported-in-this-environment");const w=yield function la(y,d){return ci.apply(this,arguments)}(f._delegate,ws);return w?Us(f._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Rr(y,d){ct(y)._logFramework(d)}(this._delegate,f)}onAuthStateChanged(f,w,V){const{next:Q,error:Ie,complete:Ke}=Dd(f,w,V);return this._delegate.onAuthStateChanged(Q,Ie,Ke)}onIdTokenChanged(f,w,V){const{next:Q,error:Ie,complete:Ke}=Dd(f,w,V);return this._delegate.onIdTokenChanged(Q,Ie,Ke)}sendSignInLinkToEmail(f,w){return function Ha(y,d,f){return pl.apply(this,arguments)}(this._delegate,f,w)}sendPasswordResetEmail(f,w){return function Mo(y,d,f){return Yi.apply(this,arguments)}(this._delegate,f,w||void 0)}setPersistence(f){var w=this;return(0,M.Z)(function*(){let V;switch(function Ih(y,d){su(Object.values(Ho).includes(d),y,"invalid-persistence-type"),(0,Z.b$)()?su(d!==Ho.SESSION,y,"unsupported-persistence-type"):(0,Z.UG)()?su(d===Ho.NONE,y,"unsupported-persistence-type"):bc()?su(d===Ho.NONE||d===Ho.LOCAL&&(0,Z.hl)(),y,"unsupported-persistence-type"):su(d===Ho.NONE||Ks(),y,"unsupported-persistence-type")}(w._delegate,f),f){case Ho.SESSION:V=Qi;break;case Ho.LOCAL:V=(yield Ne(dn)._isAvailable())?dn:ri;break;case Ho.NONE:V=be;break;default:return Qe("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(V)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Us(this._delegate,function qi(y){return zs.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Us(this._delegate,At(this._delegate,f))}signInWithCustomToken(f){return Us(this._delegate,function Ps(y,d){return yi.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,w){return Us(this._delegate,function Xr(y,d,f){return At((0,Z.m9)(y),wo.credential(d,f))}(this._delegate,f,w))}signInWithEmailLink(f,w){return Us(this._delegate,function Qo(y,d,f){return Ss.apply(this,arguments)}(this._delegate,f,w))}signInWithPhoneNumber(f,w){return Id(this._delegate,function Kc(y,d,f){return Ln.apply(this,arguments)}(this._delegate,f,w))}signInWithPopup(f){var w=this;return(0,M.Z)(function*(){return lu(iu(),w._delegate,"operation-not-supported-in-this-environment"),Us(w._delegate,function ba(y,d,f){return ks.apply(this,arguments)}(w._delegate,f,ws))})()}signInWithRedirect(f){var w=this;return(0,M.Z)(function*(){return lu(iu(),w._delegate,"operation-not-supported-in-this-environment"),yield Fu(w._delegate),function Wt(y,d,f){return function pn(y,d,f){return gn.apply(this,arguments)}(y,d,f)}(w._delegate,f,ws)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Ur(y,d){return to.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ho,y})();function Dd(y,d,f){let w=y;"function"!=typeof y&&({next:w,error:d,complete:f}=y);const V=w;return{next:Ie=>V(Ie&&Da.getOrCreate(Ie)),error:d,complete:f}}function Ph(y,d){const f=function Lu(y,d){const f=Md();if(!f)return[];const w=ze(Zl,y,d);switch(f.getItem(w)){case Ho.NONE:return[be];case Ho.LOCAL:return[dn,Qi];case Ho.SESSION:return[Qi];default:return[]}}(y,d);if("undefined"!=typeof self&&!f.includes(dn)&&f.push(dn),"undefined"!=typeof window)for(const w of[ri,Qi])f.includes(w)||f.push(w);return f.includes(be)||f.push(be),f}class Pd{constructor(){this.providerId="phone",this._delegate=new bs(Uu(A.Z.auth()))}static credential(d,f){return bs.credential(d,f)}verifyPhoneNumber(d,f){return this._delegate.verifyPhoneNumber(d,f)}unwrap(){return this._delegate}}Pd.PHONE_SIGN_IN_METHOD=bs.PHONE_SIGN_IN_METHOD,Pd.PROVIDER_ID=bs.PROVIDER_ID;const Sh=se;class Hf{constructor(d,f,w=A.Z.app()){var V;Sh(null===(V=w.options)||void 0===V?void 0:V.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Va(d,f,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ec(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",d=>{const f=d.getProvider("app-compat").getImmediate(),w=d.getProvider("auth");return new Vu(f,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:wo,FacebookAuthProvider:gs,GithubAuthProvider:ms,GoogleAuthProvider:js,OAuthProvider:xs,SAMLAuthProvider:wi,PhoneAuthProvider:Pd,PhoneMultiFactorGenerator:ql,RecaptchaVerifier:Hf,TwitterAuthProvider:Xs,Auth:Vu,AuthCredential:_r,Error:Z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(A.Z)},1135:(Dt,Te,L)=>{L.d(Te,{X:()=>A});var M=L(7579);class A extends M.x{constructor(de){super(),this._value=de}get value(){return this.getValue()}_subscribe(de){const ce=super._subscribe(de);return!ce.closed&&de.next(this._value),ce}getValue(){const{hasError:de,thrownError:ce,_value:_e}=this;if(de)throw ce;return this._throwIfClosed(),_e}next(de){super.next(this._value=de)}}},8306:(Dt,Te,L)=>{L.d(Te,{y:()=>X});var M=L(930),A=L(727),Z=L(8822),de=L(4671);var ue=L(2416),he=L(576),ie=L(2806);let X=(()=>{class qe{constructor(ft){ft&&(this._subscribe=ft)}lift(ft){const Pe=new qe;return Pe.source=this,Pe.operator=ft,Pe}subscribe(ft,Pe,$e){const Me=function ot(qe){return qe&&qe instanceof M.Lv||function le(qe){return qe&&(0,he.m)(qe.next)&&(0,he.m)(qe.error)&&(0,he.m)(qe.complete)}(qe)&&(0,A.Nn)(qe)}(ft)?ft:new M.Hp(ft,Pe,$e);return(0,ie.x)(()=>{const{operator:it,source:Qe}=this;Me.add(it?it.call(Me,Qe):Qe?this._subscribe(Me):this._trySubscribe(Me))}),Me}_trySubscribe(ft){try{return this._subscribe(ft)}catch(Pe){ft.error(Pe)}}forEach(ft,Pe){return new(Pe=q(Pe))(($e,Me)=>{const it=new M.Hp({next:Qe=>{try{ft(Qe)}catch(je){Me(je),it.unsubscribe()}},error:Me,complete:$e});this.subscribe(it)})}_subscribe(ft){var Pe;return null===(Pe=this.source)||void 0===Pe?void 0:Pe.subscribe(ft)}[Z.L](){return this}pipe(...ft){return function _e(qe){return 0===qe.length?de.y:1===qe.length?qe[0]:function(ft){return qe.reduce((Pe,$e)=>$e(Pe),ft)}}(ft)(this)}toPromise(ft){return new(ft=q(ft))((Pe,$e)=>{let Me;this.subscribe(it=>Me=it,it=>$e(it),()=>Pe(Me))})}}return qe.create=rt=>new qe(rt),qe})();function q(qe){var rt;return null!==(rt=null!=qe?qe:ue.v.Promise)&&void 0!==rt?rt:Promise}},7579:(Dt,Te,L)=>{L.d(Te,{x:()=>ue});var M=L(8306),A=L(727);const de=(0,L(3888).d)(ie=>function(){ie(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=L(8737),_e=L(2806);let ue=(()=>{class ie extends M.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const le=new he(this,this);return le.operator=q,le}_throwIfClosed(){if(this.closed)throw new de}next(q){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const le of this.currentObservers)le.next(q)}})}error(q){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:le}=this;for(;le.length;)le.shift().error(q)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:le,isStopped:ot,observers:qe}=this;return le||ot?A.Lc:(this.currentObservers=null,qe.push(q),new A.w0(()=>{this.currentObservers=null,(0,ce.P)(qe,q)}))}_checkFinalizedStatuses(q){const{hasError:le,thrownError:ot,isStopped:qe}=this;le?q.error(ot):qe&&q.complete()}asObservable(){const q=new M.y;return q.source=this,q}}return ie.create=(X,q)=>new he(X,q),ie})();class he extends ue{constructor(X,q){super(),this.destination=X,this.source=q}next(X){var q,le;null===(le=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===le||le.call(q,X)}error(X){var q,le;null===(le=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===le||le.call(q,X)}complete(){var X,q;null===(q=null===(X=this.destination)||void 0===X?void 0:X.complete)||void 0===q||q.call(X)}_subscribe(X){var q,le;return null!==(le=null===(q=this.source)||void 0===q?void 0:q.subscribe(X))&&void 0!==le?le:A.Lc}}},930:(Dt,Te,L)=>{L.d(Te,{Hp:()=>ft,Lv:()=>le});var M=L(576),A=L(727),Z=L(2416),de=L(7849),ce=L(5032);const _e=ie("C",void 0,void 0);function ie(Qe,je,Re){return{kind:Qe,value:je,error:Re}}var X=L(3410),q=L(2806);class le extends A.w0{constructor(je){super(),this.isStopped=!1,je?(this.destination=je,(0,A.Nn)(je)&&je.add(this)):this.destination=it}static create(je,Re,Mt){return new ft(je,Re,Mt)}next(je){this.isStopped?Me(function he(Qe){return ie("N",Qe,void 0)}(je),this):this._next(je)}error(je){this.isStopped?Me(function ue(Qe){return ie("E",void 0,Qe)}(je),this):(this.isStopped=!0,this._error(je))}complete(){this.isStopped?Me(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(je){this.destination.next(je)}_error(je){try{this.destination.error(je)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ot=Function.prototype.bind;function qe(Qe,je){return ot.call(Qe,je)}class rt{constructor(je){this.partialObserver=je}next(je){const{partialObserver:Re}=this;if(Re.next)try{Re.next(je)}catch(Mt){Pe(Mt)}}error(je){const{partialObserver:Re}=this;if(Re.error)try{Re.error(je)}catch(Mt){Pe(Mt)}else Pe(je)}complete(){const{partialObserver:je}=this;if(je.complete)try{je.complete()}catch(Re){Pe(Re)}}}class ft extends le{constructor(je,Re,Mt){let pt;if(super(),(0,M.m)(je)||!je)pt={next:null!=je?je:void 0,error:null!=Re?Re:void 0,complete:null!=Mt?Mt:void 0};else{let se;this&&Z.v.useDeprecatedNextContext?(se=Object.create(je),se.unsubscribe=()=>this.unsubscribe(),pt={next:je.next&&qe(je.next,se),error:je.error&&qe(je.error,se),complete:je.complete&&qe(je.complete,se)}):pt=je}this.destination=new rt(pt)}}function Pe(Qe){Z.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Qe):(0,de.h)(Qe)}function Me(Qe,je){const{onStoppedNotification:Re}=Z.v;Re&&X.z.setTimeout(()=>Re(Qe,je))}const it={closed:!0,next:ce.Z,error:function $e(Qe){throw Qe},complete:ce.Z}},727:(Dt,Te,L)=>{L.d(Te,{Lc:()=>_e,w0:()=>ce,Nn:()=>ue});var M=L(576);const Z=(0,L(3888).d)(ie=>function(q){ie(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((le,ot)=>`${ot+1}) ${le.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var de=L(8737);class ce{constructor(X){this.initialTeardown=X,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let X;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const qe of q)qe.remove(this);else q.remove(this);const{initialTeardown:le}=this;if((0,M.m)(le))try{le()}catch(qe){X=qe instanceof Z?qe.errors:[qe]}const{_finalizers:ot}=this;if(ot){this._finalizers=null;for(const qe of ot)try{he(qe)}catch(rt){X=null!=X?X:[],rt instanceof Z?X=[...X,...rt.errors]:X.push(rt)}}if(X)throw new Z(X)}}add(X){var q;if(X&&X!==this)if(this.closed)he(X);else{if(X instanceof ce){if(X.closed||X._hasParent(this))return;X._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(X)}}_hasParent(X){const{_parentage:q}=this;return q===X||Array.isArray(q)&&q.includes(X)}_addParent(X){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(X),q):q?[q,X]:X}_removeParent(X){const{_parentage:q}=this;q===X?this._parentage=null:Array.isArray(q)&&(0,de.P)(q,X)}remove(X){const{_finalizers:q}=this;q&&(0,de.P)(q,X),X instanceof ce&&X._removeParent(this)}}ce.EMPTY=(()=>{const ie=new ce;return ie.closed=!0,ie})();const _e=ce.EMPTY;function ue(ie){return ie instanceof ce||ie&&"closed"in ie&&(0,M.m)(ie.remove)&&(0,M.m)(ie.add)&&(0,M.m)(ie.unsubscribe)}function he(ie){(0,M.m)(ie)?ie():ie.unsubscribe()}},2416:(Dt,Te,L)=>{L.d(Te,{v:()=>M});const M={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Dt,Te,L)=>{L.d(Te,{z:()=>ce});var M=L(8189),Z=L(3269),de=L(8996);function ce(..._e){return function A(){return(0,M.J)(1)}()((0,de.D)(_e,(0,Z.yG)(_e)))}},515:(Dt,Te,L)=>{L.d(Te,{E:()=>A});const A=new(L(8306).y)(ce=>ce.complete())},8996:(Dt,Te,L)=>{L.d(Te,{D:()=>je});var M=L(8421),A=L(5363),Z=L(9468),_e=L(8306),he=L(2202),ie=L(576),X=L(9672);function le(Re,Mt){if(!Re)throw new Error("Iterable cannot be null");return new _e.y(pt=>{(0,X.f)(pt,Mt,()=>{const se=Re[Symbol.asyncIterator]();(0,X.f)(pt,Mt,()=>{se.next().then(we=>{we.done?pt.complete():pt.next(we.value)})},0,!0)})})}var ot=L(3670),qe=L(8239),rt=L(1144),ft=L(6495),Pe=L(2206),$e=L(4532),Me=L(3260);function je(Re,Mt){return Mt?function Qe(Re,Mt){if(null!=Re){if((0,ot.c)(Re))return function de(Re,Mt){return(0,M.Xf)(Re).pipe((0,Z.R)(Mt),(0,A.Q)(Mt))}(Re,Mt);if((0,rt.z)(Re))return function ue(Re,Mt){return new _e.y(pt=>{let se=0;return Mt.schedule(function(){se===Re.length?pt.complete():(pt.next(Re[se++]),pt.closed||this.schedule())})})}(Re,Mt);if((0,qe.t)(Re))return function ce(Re,Mt){return(0,M.Xf)(Re).pipe((0,Z.R)(Mt),(0,A.Q)(Mt))}(Re,Mt);if((0,Pe.D)(Re))return le(Re,Mt);if((0,ft.T)(Re))return function q(Re,Mt){return new _e.y(pt=>{let se;return(0,X.f)(pt,Mt,()=>{se=Re[he.h](),(0,X.f)(pt,Mt,()=>{let we,Ee;try{({value:we,done:Ee}=se.next())}catch(ke){return void pt.error(ke)}Ee?pt.complete():pt.next(we)},0,!0)}),()=>(0,ie.m)(null==se?void 0:se.return)&&se.return()})}(Re,Mt);if((0,Me.L)(Re))return function it(Re,Mt){return le((0,Me.Q)(Re),Mt)}(Re,Mt)}throw(0,$e.z)(Re)}(Re,Mt):(0,M.Xf)(Re)}},8421:(Dt,Te,L)=>{L.d(Te,{Xf:()=>ot});var M=L(655),A=L(1144),Z=L(8239),de=L(8306),ce=L(3670),_e=L(2206),ue=L(4532),he=L(6495),ie=L(3260),X=L(576),q=L(7849),le=L(8822);function ot(Qe){if(Qe instanceof de.y)return Qe;if(null!=Qe){if((0,ce.c)(Qe))return function qe(Qe){return new de.y(je=>{const Re=Qe[le.L]();if((0,X.m)(Re.subscribe))return Re.subscribe(je);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Qe);if((0,A.z)(Qe))return function rt(Qe){return new de.y(je=>{for(let Re=0;Re<Qe.length&&!je.closed;Re++)je.next(Qe[Re]);je.complete()})}(Qe);if((0,Z.t)(Qe))return function ft(Qe){return new de.y(je=>{Qe.then(Re=>{je.closed||(je.next(Re),je.complete())},Re=>je.error(Re)).then(null,q.h)})}(Qe);if((0,_e.D)(Qe))return $e(Qe);if((0,he.T)(Qe))return function Pe(Qe){return new de.y(je=>{for(const Re of Qe)if(je.next(Re),je.closed)return;je.complete()})}(Qe);if((0,ie.L)(Qe))return function Me(Qe){return $e((0,ie.Q)(Qe))}(Qe)}throw(0,ue.z)(Qe)}function $e(Qe){return new de.y(je=>{(function it(Qe,je){var Re,Mt,pt,se;return(0,M.mG)(this,void 0,void 0,function*(){try{for(Re=(0,M.KL)(Qe);!(Mt=yield Re.next()).done;)if(je.next(Mt.value),je.closed)return}catch(we){pt={error:we}}finally{try{Mt&&!Mt.done&&(se=Re.return)&&(yield se.call(Re))}finally{if(pt)throw pt.error}}je.complete()})})(Qe,je).catch(Re=>je.error(Re))})}},6451:(Dt,Te,L)=>{L.d(Te,{T:()=>_e});var M=L(8189),A=L(8421),Z=L(515),de=L(3269),ce=L(8996);function _e(...ue){const he=(0,de.yG)(ue),ie=(0,de._6)(ue,1/0),X=ue;return X.length?1===X.length?(0,A.Xf)(X[0]):(0,M.J)(ie)((0,ce.D)(X,he)):Z.E}},9646:(Dt,Te,L)=>{L.d(Te,{of:()=>Z});var M=L(3269),A=L(8996);function Z(...de){const ce=(0,M.yG)(de);return(0,A.D)(de,ce)}},2843:(Dt,Te,L)=>{L.d(Te,{_:()=>Z});var M=L(8306),A=L(576);function Z(de,ce){const _e=(0,A.m)(de)?de:()=>de,ue=he=>he.error(_e());return new M.y(ce?he=>ce.schedule(ue,0,he):ue)}},5403:(Dt,Te,L)=>{L.d(Te,{x:()=>A,Q:()=>Z});var M=L(930);function A(de,ce,_e,ue,he){return new Z(de,ce,_e,ue,he)}class Z extends M.Lv{constructor(ce,_e,ue,he,ie,X){super(ce),this.onFinalize=ie,this.shouldUnsubscribe=X,this._next=_e?function(q){try{_e(q)}catch(le){ce.error(le)}}:super._next,this._error=he?function(q){try{he(q)}catch(le){ce.error(le)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(q){ce.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},262:(Dt,Te,L)=>{L.d(Te,{K:()=>de});var M=L(8421),A=L(5403),Z=L(4482);function de(ce){return(0,Z.e)((_e,ue)=>{let X,he=null,ie=!1;he=_e.subscribe((0,A.x)(ue,void 0,void 0,q=>{X=(0,M.Xf)(ce(q,de(ce)(_e))),he?(he.unsubscribe(),he=null,X.subscribe(ue)):ie=!0})),ie&&(he.unsubscribe(),he=null,X.subscribe(ue))})}},4351:(Dt,Te,L)=>{L.d(Te,{b:()=>Z});var M=L(5577),A=L(576);function Z(de,ce){return(0,A.m)(ce)?(0,M.z)(de,ce,1):(0,M.z)(de,1)}},6590:(Dt,Te,L)=>{L.d(Te,{d:()=>Z});var M=L(4482),A=L(5403);function Z(de){return(0,M.e)((ce,_e)=>{let ue=!1;ce.subscribe((0,A.x)(_e,he=>{ue=!0,_e.next(he)},()=>{ue||_e.next(de),_e.complete()}))})}},1884:(Dt,Te,L)=>{L.d(Te,{x:()=>de});var M=L(4671),A=L(4482),Z=L(5403);function de(_e,ue=M.y){return _e=null!=_e?_e:ce,(0,A.e)((he,ie)=>{let X,q=!0;he.subscribe((0,Z.x)(ie,le=>{const ot=ue(le);(q||!_e(X,ot))&&(q=!1,X=ot,ie.next(le))}))})}function ce(_e,ue){return _e===ue}},9300:(Dt,Te,L)=>{L.d(Te,{h:()=>Z});var M=L(4482),A=L(5403);function Z(de,ce){return(0,M.e)((_e,ue)=>{let he=0;_e.subscribe((0,A.x)(ue,ie=>de.call(ce,ie,he++)&&ue.next(ie)))})}},590:(Dt,Te,L)=>{L.d(Te,{P:()=>ue});var M=L(6805),A=L(9300),Z=L(5698),de=L(6590),ce=L(8068),_e=L(4671);function ue(he,ie){const X=arguments.length>=2;return q=>q.pipe(he?(0,A.h)((le,ot)=>he(le,ot,q)):_e.y,(0,Z.q)(1),X?(0,de.d)(ie):(0,ce.T)(()=>new M.K))}},4004:(Dt,Te,L)=>{L.d(Te,{U:()=>Z});var M=L(4482),A=L(5403);function Z(de,ce){return(0,M.e)((_e,ue)=>{let he=0;_e.subscribe((0,A.x)(ue,ie=>{ue.next(de.call(ce,ie,he++))}))})}},8189:(Dt,Te,L)=>{L.d(Te,{J:()=>Z});var M=L(5577),A=L(4671);function Z(de=1/0){return(0,M.z)(A.y,de)}},5577:(Dt,Te,L)=>{L.d(Te,{z:()=>he});var M=L(4004),A=L(8421),Z=L(4482),de=L(9672),ce=L(5403),ue=L(576);function he(ie,X,q=1/0){return(0,ue.m)(X)?he((le,ot)=>(0,M.U)((qe,rt)=>X(le,qe,ot,rt))((0,A.Xf)(ie(le,ot))),q):("number"==typeof X&&(q=X),(0,Z.e)((le,ot)=>function _e(ie,X,q,le,ot,qe,rt,ft){const Pe=[];let $e=0,Me=0,it=!1;const Qe=()=>{it&&!Pe.length&&!$e&&X.complete()},je=Mt=>$e<le?Re(Mt):Pe.push(Mt),Re=Mt=>{qe&&X.next(Mt),$e++;let pt=!1;(0,A.Xf)(q(Mt,Me++)).subscribe((0,ce.x)(X,se=>{null==ot||ot(se),qe?je(se):X.next(se)},()=>{pt=!0},void 0,()=>{if(pt)try{for($e--;Pe.length&&$e<le;){const se=Pe.shift();rt?(0,de.f)(X,rt,()=>Re(se)):Re(se)}Qe()}catch(se){X.error(se)}}))};return ie.subscribe((0,ce.x)(X,je,()=>{it=!0,Qe()})),()=>{null==ft||ft()}}(le,ot,ie,q)))}},5363:(Dt,Te,L)=>{L.d(Te,{Q:()=>de});var M=L(9672),A=L(4482),Z=L(5403);function de(ce,_e=0){return(0,A.e)((ue,he)=>{ue.subscribe((0,Z.x)(he,ie=>(0,M.f)(he,ce,()=>he.next(ie),_e),()=>(0,M.f)(he,ce,()=>he.complete(),_e),ie=>(0,M.f)(he,ce,()=>he.error(ie),_e)))})}},5026:(Dt,Te,L)=>{L.d(Te,{R:()=>de});var M=L(4482),A=L(5403);function Z(ce,_e,ue,he,ie){return(X,q)=>{let le=ue,ot=_e,qe=0;X.subscribe((0,A.x)(q,rt=>{const ft=qe++;ot=le?ce(ot,rt,ft):(le=!0,rt),he&&q.next(ot)},ie&&(()=>{le&&q.next(ot),q.complete()})))}}function de(ce,_e){return(0,M.e)(Z(ce,_e,arguments.length>=2,!0))}},3099:(Dt,Te,L)=>{L.d(Te,{B:()=>_e});var M=L(8996),A=L(5698),Z=L(7579),de=L(930),ce=L(4482);function _e(he={}){const{connector:ie=(()=>new Z.x),resetOnError:X=!0,resetOnComplete:q=!0,resetOnRefCountZero:le=!0}=he;return ot=>{let qe=null,rt=null,ft=null,Pe=0,$e=!1,Me=!1;const it=()=>{null==rt||rt.unsubscribe(),rt=null},Qe=()=>{it(),qe=ft=null,$e=Me=!1},je=()=>{const Re=qe;Qe(),null==Re||Re.unsubscribe()};return(0,ce.e)((Re,Mt)=>{Pe++,!Me&&!$e&&it();const pt=ft=null!=ft?ft:ie();Mt.add(()=>{Pe--,0===Pe&&!Me&&!$e&&(rt=ue(je,le))}),pt.subscribe(Mt),qe||(qe=new de.Hp({next:se=>pt.next(se),error:se=>{Me=!0,it(),rt=ue(Qe,X,se),pt.error(se)},complete:()=>{$e=!0,it(),rt=ue(Qe,q),pt.complete()}}),(0,M.D)(Re).subscribe(qe))})(ot)}}function ue(he,ie,...X){return!0===ie?(he(),null):!1===ie?null:ie(...X).pipe((0,A.q)(1)).subscribe(()=>he())}},3151:(Dt,Te,L)=>{L.d(Te,{d:()=>ce});var M=L(7579),A=L(6063);class Z extends M.x{constructor(ue=1/0,he=1/0,ie=A.l){super(),this._bufferSize=ue,this._windowTime=he,this._timestampProvider=ie,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=he===1/0,this._bufferSize=Math.max(1,ue),this._windowTime=Math.max(1,he)}next(ue){const{isStopped:he,_buffer:ie,_infiniteTimeWindow:X,_timestampProvider:q,_windowTime:le}=this;he||(ie.push(ue),!X&&ie.push(q.now()+le)),this._trimBuffer(),super.next(ue)}_subscribe(ue){this._throwIfClosed(),this._trimBuffer();const he=this._innerSubscribe(ue),{_infiniteTimeWindow:ie,_buffer:X}=this,q=X.slice();for(let le=0;le<q.length&&!ue.closed;le+=ie?1:2)ue.next(q[le]);return this._checkFinalizedStatuses(ue),he}_trimBuffer(){const{_bufferSize:ue,_timestampProvider:he,_buffer:ie,_infiniteTimeWindow:X}=this,q=(X?1:2)*ue;if(ue<1/0&&q<ie.length&&ie.splice(0,ie.length-q),!X){const le=he.now();let ot=0;for(let qe=1;qe<ie.length&&ie[qe]<=le;qe+=2)ot=qe;ot&&ie.splice(0,ot+1)}}}var de=L(3099);function ce(_e,ue,he){let ie,X=!1;return _e&&"object"==typeof _e?({bufferSize:ie=1/0,windowTime:ue=1/0,refCount:X=!1,scheduler:he}=_e):ie=null!=_e?_e:1/0,(0,de.B)({connector:()=>new Z(ie,ue,he),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:X})}},8675:(Dt,Te,L)=>{L.d(Te,{O:()=>de});var M=L(7272),A=L(3269),Z=L(4482);function de(...ce){const _e=(0,A.yG)(ce);return(0,Z.e)((ue,he)=>{(_e?(0,M.z)(ce,ue,_e):(0,M.z)(ce,ue)).subscribe(he)})}},9468:(Dt,Te,L)=>{L.d(Te,{R:()=>A});var M=L(4482);function A(Z,de=0){return(0,M.e)((ce,_e)=>{_e.add(Z.schedule(()=>ce.subscribe(_e),de))})}},3900:(Dt,Te,L)=>{L.d(Te,{w:()=>de});var M=L(8421),A=L(4482),Z=L(5403);function de(ce,_e){return(0,A.e)((ue,he)=>{let ie=null,X=0,q=!1;const le=()=>q&&!ie&&he.complete();ue.subscribe((0,Z.x)(he,ot=>{null==ie||ie.unsubscribe();let qe=0;const rt=X++;(0,M.Xf)(ce(ot,rt)).subscribe(ie=(0,Z.x)(he,ft=>he.next(_e?_e(ot,ft,rt,qe++):ft),()=>{ie=null,le()}))},()=>{q=!0,le()}))})}},5698:(Dt,Te,L)=>{L.d(Te,{q:()=>de});var M=L(515),A=L(4482),Z=L(5403);function de(ce){return ce<=0?()=>M.E:(0,A.e)((_e,ue)=>{let he=0;_e.subscribe((0,Z.x)(ue,ie=>{++he<=ce&&(ue.next(ie),ce<=he&&ue.complete())}))})}},8505:(Dt,Te,L)=>{L.d(Te,{b:()=>ce});var M=L(576),A=L(4482),Z=L(5403),de=L(4671);function ce(_e,ue,he){const ie=(0,M.m)(_e)||ue||he?{next:_e,error:ue,complete:he}:_e;return ie?(0,A.e)((X,q)=>{var le;null===(le=ie.subscribe)||void 0===le||le.call(ie);let ot=!0;X.subscribe((0,Z.x)(q,qe=>{var rt;null===(rt=ie.next)||void 0===rt||rt.call(ie,qe),q.next(qe)},()=>{var qe;ot=!1,null===(qe=ie.complete)||void 0===qe||qe.call(ie),q.complete()},qe=>{var rt;ot=!1,null===(rt=ie.error)||void 0===rt||rt.call(ie,qe),q.error(qe)},()=>{var qe,rt;ot&&(null===(qe=ie.unsubscribe)||void 0===qe||qe.call(ie)),null===(rt=ie.finalize)||void 0===rt||rt.call(ie)}))}):de.y}},8068:(Dt,Te,L)=>{L.d(Te,{T:()=>de});var M=L(6805),A=L(4482),Z=L(5403);function de(_e=ce){return(0,A.e)((ue,he)=>{let ie=!1;ue.subscribe((0,Z.x)(he,X=>{ie=!0,he.next(X)},()=>ie?he.complete():he.error(_e())))})}function ce(){return new M.K}},4408:(Dt,Te,L)=>{L.d(Te,{o:()=>ce});var M=L(727);class A extends M.w0{constructor(ue,he){super()}schedule(ue,he=0){return this}}const Z={setInterval(_e,ue,...he){const{delegate:ie}=Z;return(null==ie?void 0:ie.setInterval)?ie.setInterval(_e,ue,...he):setInterval(_e,ue,...he)},clearInterval(_e){const{delegate:ue}=Z;return((null==ue?void 0:ue.clearInterval)||clearInterval)(_e)},delegate:void 0};var de=L(8737);class ce extends A{constructor(ue,he){super(ue,he),this.scheduler=ue,this.work=he,this.pending=!1}schedule(ue,he=0){if(this.closed)return this;this.state=ue;const ie=this.id,X=this.scheduler;return null!=ie&&(this.id=this.recycleAsyncId(X,ie,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(X,this.id,he),this}requestAsyncId(ue,he,ie=0){return Z.setInterval(ue.flush.bind(ue,this),ie)}recycleAsyncId(ue,he,ie=0){if(null!=ie&&this.delay===ie&&!1===this.pending)return he;Z.clearInterval(he)}execute(ue,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ie=this._execute(ue,he);if(ie)return ie;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,he){let X,ie=!1;try{this.work(ue)}catch(q){ie=!0,X=q||new Error("Scheduled action threw falsy error")}if(ie)return this.unsubscribe(),X}unsubscribe(){if(!this.closed){const{id:ue,scheduler:he}=this,{actions:ie}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(ie,this),null!=ue&&(this.id=this.recycleAsyncId(he,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(Dt,Te,L)=>{L.d(Te,{v:()=>Z});var M=L(6063);class A{constructor(ce,_e=A.now){this.schedulerActionCtor=ce,this.now=_e}schedule(ce,_e=0,ue){return new this.schedulerActionCtor(this,ce).schedule(ue,_e)}}A.now=M.l.now;class Z extends A{constructor(ce,_e=A.now){super(ce,_e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ce){const{actions:_e}=this;if(this._active)return void _e.push(ce);let ue;this._active=!0;do{if(ue=ce.execute(ce.state,ce.delay))break}while(ce=_e.shift());if(this._active=!1,ue){for(;ce=_e.shift();)ce.unsubscribe();throw ue}}}},4986:(Dt,Te,L)=>{L.d(Te,{z:()=>Z,P:()=>de});var M=L(4408);const Z=new(L(7565).v)(M.o),de=Z},6063:(Dt,Te,L)=>{L.d(Te,{l:()=>M});const M={now:()=>(M.delegate||Date).now(),delegate:void 0}},233:(Dt,Te,L)=>{L.d(Te,{N:()=>ce});var M=L(4408),Z=L(7565);const ce=new class de extends Z.v{}(class A extends M.o{constructor(he,ie){super(he,ie),this.scheduler=he,this.work=ie}schedule(he,ie=0){return ie>0?super.schedule(he,ie):(this.delay=ie,this.state=he,this.scheduler.flush(this),this)}execute(he,ie){return ie>0||this.closed?super.execute(he,ie):this._execute(he,ie)}requestAsyncId(he,ie,X=0){return null!=X&&X>0||null==X&&this.delay>0?super.requestAsyncId(he,ie,X):he.flush(this)}})},3410:(Dt,Te,L)=>{L.d(Te,{z:()=>M});const M={setTimeout(A,Z,...de){const{delegate:ce}=M;return(null==ce?void 0:ce.setTimeout)?ce.setTimeout(A,Z,...de):setTimeout(A,Z,...de)},clearTimeout(A){const{delegate:Z}=M;return((null==Z?void 0:Z.clearTimeout)||clearTimeout)(A)},delegate:void 0}},2202:(Dt,Te,L)=>{L.d(Te,{h:()=>A});const A=function M(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Dt,Te,L)=>{L.d(Te,{L:()=>M});const M="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Dt,Te,L)=>{L.d(Te,{K:()=>A});const A=(0,L(3888).d)(Z=>function(){Z(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Dt,Te,L)=>{L.d(Te,{jO:()=>de,yG:()=>ce,_6:()=>_e});var M=L(576),A=L(3532);function Z(ue){return ue[ue.length-1]}function de(ue){return(0,M.m)(Z(ue))?ue.pop():void 0}function ce(ue){return(0,A.K)(Z(ue))?ue.pop():void 0}function _e(ue,he){return"number"==typeof Z(ue)?ue.pop():he}},4742:(Dt,Te,L)=>{L.d(Te,{D:()=>ce});const{isArray:M}=Array,{getPrototypeOf:A,prototype:Z,keys:de}=Object;function ce(ue){if(1===ue.length){const he=ue[0];if(M(he))return{args:he,keys:null};if(function _e(ue){return ue&&"object"==typeof ue&&A(ue)===Z}(he)){const ie=de(he);return{args:ie.map(X=>he[X]),keys:ie}}}return{args:ue,keys:null}}},8737:(Dt,Te,L)=>{function M(A,Z){if(A){const de=A.indexOf(Z);0<=de&&A.splice(de,1)}}L.d(Te,{P:()=>M})},3888:(Dt,Te,L)=>{function M(A){const de=A(ce=>{Error.call(ce),ce.stack=(new Error).stack});return de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de}L.d(Te,{d:()=>M})},1810:(Dt,Te,L)=>{function M(A,Z){return A.reduce((de,ce,_e)=>(de[ce]=Z[_e],de),{})}L.d(Te,{n:()=>M})},2806:(Dt,Te,L)=>{L.d(Te,{x:()=>Z,O:()=>de});var M=L(2416);let A=null;function Z(ce){if(M.v.useDeprecatedSynchronousErrorHandling){const _e=!A;if(_e&&(A={errorThrown:!1,error:null}),ce(),_e){const{errorThrown:ue,error:he}=A;if(A=null,ue)throw he}}else ce()}function de(ce){M.v.useDeprecatedSynchronousErrorHandling&&A&&(A.errorThrown=!0,A.error=ce)}},9672:(Dt,Te,L)=>{function M(A,Z,de,ce=0,_e=!1){const ue=Z.schedule(function(){de(),_e?A.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(A.add(ue),!_e)return ue}L.d(Te,{f:()=>M})},4671:(Dt,Te,L)=>{function M(A){return A}L.d(Te,{y:()=>M})},1144:(Dt,Te,L)=>{L.d(Te,{z:()=>M});const M=A=>A&&"number"==typeof A.length&&"function"!=typeof A},2206:(Dt,Te,L)=>{L.d(Te,{D:()=>A});var M=L(576);function A(Z){return Symbol.asyncIterator&&(0,M.m)(null==Z?void 0:Z[Symbol.asyncIterator])}},576:(Dt,Te,L)=>{function M(A){return"function"==typeof A}L.d(Te,{m:()=>M})},3670:(Dt,Te,L)=>{L.d(Te,{c:()=>Z});var M=L(8822),A=L(576);function Z(de){return(0,A.m)(de[M.L])}},6495:(Dt,Te,L)=>{L.d(Te,{T:()=>Z});var M=L(2202),A=L(576);function Z(de){return(0,A.m)(null==de?void 0:de[M.h])}},8239:(Dt,Te,L)=>{L.d(Te,{t:()=>A});var M=L(576);function A(Z){return(0,M.m)(null==Z?void 0:Z.then)}},3260:(Dt,Te,L)=>{L.d(Te,{Q:()=>Z,L:()=>de});var M=L(655),A=L(576);function Z(ce){return(0,M.FC)(this,arguments,function*(){const ue=ce.getReader();try{for(;;){const{value:he,done:ie}=yield(0,M.qq)(ue.read());if(ie)return yield(0,M.qq)(void 0);yield yield(0,M.qq)(he)}}finally{ue.releaseLock()}})}function de(ce){return(0,A.m)(null==ce?void 0:ce.getReader)}},3532:(Dt,Te,L)=>{L.d(Te,{K:()=>A});var M=L(576);function A(Z){return Z&&(0,M.m)(Z.schedule)}},4482:(Dt,Te,L)=>{L.d(Te,{A:()=>A,e:()=>Z});var M=L(576);function A(de){return(0,M.m)(null==de?void 0:de.lift)}function Z(de){return ce=>{if(A(ce))return ce.lift(function(_e){try{return de(_e,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Dt,Te,L)=>{L.d(Te,{Z:()=>de});var M=L(4004);const{isArray:A}=Array;function de(ce){return(0,M.U)(_e=>function Z(ce,_e){return A(_e)?ce(..._e):ce(_e)}(ce,_e))}},5032:(Dt,Te,L)=>{function M(){}L.d(Te,{Z:()=>M})},7849:(Dt,Te,L)=>{L.d(Te,{h:()=>Z});var M=L(2416),A=L(3410);function Z(de){A.z.setTimeout(()=>{const{onUnhandledError:ce}=M.v;if(!ce)throw de;ce(de)})}},4532:(Dt,Te,L)=>{function M(A){return new TypeError(`You provided ${null!==A&&"object"==typeof A?"an invalid object":`'${A}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Te,{z:()=>M})},655:(Dt,Te,L)=>{function de(we,Ee){var ke={};for(var Ne in we)Object.prototype.hasOwnProperty.call(we,Ne)&&Ee.indexOf(Ne)<0&&(ke[Ne]=we[Ne]);if(null!=we&&"function"==typeof Object.getOwnPropertySymbols){var et=0;for(Ne=Object.getOwnPropertySymbols(we);et<Ne.length;et++)Ee.indexOf(Ne[et])<0&&Object.prototype.propertyIsEnumerable.call(we,Ne[et])&&(ke[Ne[et]]=we[Ne[et]])}return ke}function he(we,Ee,ke,Ne){return new(ke||(ke=Promise))(function(Fe,It){function un(Pt){try{Vt(Ne.next(Pt))}catch(mn){It(mn)}}function ur(Pt){try{Vt(Ne.throw(Pt))}catch(mn){It(mn)}}function Vt(Pt){Pt.done?Fe(Pt.value):function et(Fe){return Fe instanceof ke?Fe:new ke(function(It){It(Fe)})}(Pt.value).then(un,ur)}Vt((Ne=Ne.apply(we,Ee||[])).next())})}function Pe(we){return this instanceof Pe?(this.v=we,this):new Pe(we)}function $e(we,Ee,ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var et,Ne=ke.apply(we,Ee||[]),Fe=[];return et={},It("next"),It("throw"),It("return"),et[Symbol.asyncIterator]=function(){return this},et;function It(qt){Ne[qt]&&(et[qt]=function(dr){return new Promise(function(Gt,mr){Fe.push([qt,dr,Gt,mr])>1||un(qt,dr)})})}function un(qt,dr){try{!function ur(qt){qt.value instanceof Pe?Promise.resolve(qt.value.v).then(Vt,Pt):mn(Fe[0][2],qt)}(Ne[qt](dr))}catch(Gt){mn(Fe[0][3],Gt)}}function Vt(qt){un("next",qt)}function Pt(qt){un("throw",qt)}function mn(qt,dr){qt(dr),Fe.shift(),Fe.length&&un(Fe[0][0],Fe[0][1])}}function it(we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,Ee=we[Symbol.asyncIterator];return Ee?Ee.call(we):(we=function le(we){var Ee="function"==typeof Symbol&&Symbol.iterator,ke=Ee&&we[Ee],Ne=0;if(ke)return ke.call(we);if(we&&"number"==typeof we.length)return{next:function(){return we&&Ne>=we.length&&(we=void 0),{value:we&&we[Ne++],done:!we}}};throw new TypeError(Ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(we),ke={},Ne("next"),Ne("throw"),Ne("return"),ke[Symbol.asyncIterator]=function(){return this},ke);function Ne(Fe){ke[Fe]=we[Fe]&&function(It){return new Promise(function(un,ur){!function et(Fe,It,un,ur){Promise.resolve(ur).then(function(Vt){Fe({value:Vt,done:un})},It)}(un,ur,(It=we[Fe](It)).done,It.value)})}}}L.d(Te,{_T:()=>de,mG:()=>he,qq:()=>Pe,FC:()=>$e,KL:()=>it})},9808:(Dt,Te,L)=>{L.d(Te,{mr:()=>Me,ez:()=>Wi,K0:()=>ue,Do:()=>Qe,V_:()=>X,Ye:()=>je,S$:()=>Pe,sg:()=>ir,O5:()=>bi,b0:()=>it,lw:()=>he,EM:()=>Hs,JF:()=>Kn,PM:()=>Dr,w_:()=>_e,bD:()=>Ki,q:()=>Z,Mx:()=>es,HT:()=>ce});var M=L(5e3);let A=null;function Z(){return A}function ce(R){A||(A=R)}class _e{}const ue=new M.OlP("DocumentToken");let he=(()=>{class R{historyGo(k){throw new Error("Not implemented")}}return R.\u0275fac=function(k){return new(k||R)},R.\u0275prov=M.Yz7({token:R,factory:function(){return function ie(){return(0,M.LFG)(q)}()},providedIn:"platform"}),R})();const X=new M.OlP("Location Initialized");let q=(()=>{class R extends he{constructor(k){super(),this._doc=k,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Z().getBaseHref(this._doc)}onPopState(k){const Y=Z().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("popstate",k,!1),()=>Y.removeEventListener("popstate",k)}onHashChange(k){const Y=Z().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("hashchange",k,!1),()=>Y.removeEventListener("hashchange",k)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(k){this.location.pathname=k}pushState(k,Y,oe){le()?this._history.pushState(k,Y,oe):this.location.hash=oe}replaceState(k,Y,oe){le()?this._history.replaceState(k,Y,oe):this.location.hash=oe}forward(){this._history.forward()}back(){this._history.back()}historyGo(k=0){this._history.go(k)}getState(){return this._history.state}}return R.\u0275fac=function(k){return new(k||R)(M.LFG(ue))},R.\u0275prov=M.Yz7({token:R,factory:function(){return function ot(){return new q((0,M.LFG)(ue))}()},providedIn:"platform"}),R})();function le(){return!!window.history.pushState}function qe(R,G){if(0==R.length)return G;if(0==G.length)return R;let k=0;return R.endsWith("/")&&k++,G.startsWith("/")&&k++,2==k?R+G.substring(1):1==k?R+G:R+"/"+G}function rt(R){const G=R.match(/#|\?|$/),k=G&&G.index||R.length;return R.slice(0,k-("/"===R[k-1]?1:0))+R.slice(k)}function ft(R){return R&&"?"!==R[0]?"?"+R:R}let Pe=(()=>{class R{historyGo(k){throw new Error("Not implemented")}}return R.\u0275fac=function(k){return new(k||R)},R.\u0275prov=M.Yz7({token:R,factory:function(){return function $e(R){const G=(0,M.LFG)(ue).location;return new it((0,M.LFG)(he),G&&G.origin||"")}()},providedIn:"root"}),R})();const Me=new M.OlP("appBaseHref");let it=(()=>{class R extends Pe{constructor(k,Y){if(super(),this._platformLocation=k,this._removeListenerFns=[],null==Y&&(Y=this._platformLocation.getBaseHrefFromDOM()),null==Y)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Y}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}prepareExternalUrl(k){return qe(this._baseHref,k)}path(k=!1){const Y=this._platformLocation.pathname+ft(this._platformLocation.search),oe=this._platformLocation.hash;return oe&&k?`${Y}${oe}`:Y}pushState(k,Y,oe,He){const ut=this.prepareExternalUrl(oe+ft(He));this._platformLocation.pushState(k,Y,ut)}replaceState(k,Y,oe,He){const ut=this.prepareExternalUrl(oe+ft(He));this._platformLocation.replaceState(k,Y,ut)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(k=0){var Y,oe;null===(oe=(Y=this._platformLocation).historyGo)||void 0===oe||oe.call(Y,k)}}return R.\u0275fac=function(k){return new(k||R)(M.LFG(he),M.LFG(Me,8))},R.\u0275prov=M.Yz7({token:R,factory:R.\u0275fac}),R})(),Qe=(()=>{class R extends Pe{constructor(k,Y){super(),this._platformLocation=k,this._baseHref="",this._removeListenerFns=[],null!=Y&&(this._baseHref=Y)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}path(k=!1){let Y=this._platformLocation.hash;return null==Y&&(Y="#"),Y.length>0?Y.substring(1):Y}prepareExternalUrl(k){const Y=qe(this._baseHref,k);return Y.length>0?"#"+Y:Y}pushState(k,Y,oe,He){let ut=this.prepareExternalUrl(oe+ft(He));0==ut.length&&(ut=this._platformLocation.pathname),this._platformLocation.pushState(k,Y,ut)}replaceState(k,Y,oe,He){let ut=this.prepareExternalUrl(oe+ft(He));0==ut.length&&(ut=this._platformLocation.pathname),this._platformLocation.replaceState(k,Y,ut)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(k=0){var Y,oe;null===(oe=(Y=this._platformLocation).historyGo)||void 0===oe||oe.call(Y,k)}}return R.\u0275fac=function(k){return new(k||R)(M.LFG(he),M.LFG(Me,8))},R.\u0275prov=M.Yz7({token:R,factory:R.\u0275fac}),R})(),je=(()=>{class R{constructor(k,Y){this._subject=new M.vpe,this._urlChangeListeners=[],this._platformStrategy=k;const oe=this._platformStrategy.getBaseHref();this._platformLocation=Y,this._baseHref=rt(pt(oe)),this._platformStrategy.onPopState(He=>{this._subject.emit({url:this.path(!0),pop:!0,state:He.state,type:He.type})})}path(k=!1){return this.normalize(this._platformStrategy.path(k))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(k,Y=""){return this.path()==this.normalize(k+ft(Y))}normalize(k){return R.stripTrailingSlash(function Mt(R,G){return R&&G.startsWith(R)?G.substring(R.length):G}(this._baseHref,pt(k)))}prepareExternalUrl(k){return k&&"/"!==k[0]&&(k="/"+k),this._platformStrategy.prepareExternalUrl(k)}go(k,Y="",oe=null){this._platformStrategy.pushState(oe,"",k,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+ft(Y)),oe)}replaceState(k,Y="",oe=null){this._platformStrategy.replaceState(oe,"",k,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+ft(Y)),oe)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(k=0){var Y,oe;null===(oe=(Y=this._platformStrategy).historyGo)||void 0===oe||oe.call(Y,k)}onUrlChange(k){this._urlChangeListeners.push(k),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Y=>{this._notifyUrlChangeListeners(Y.url,Y.state)}))}_notifyUrlChangeListeners(k="",Y){this._urlChangeListeners.forEach(oe=>oe(k,Y))}subscribe(k,Y,oe){return this._subject.subscribe({next:k,error:Y,complete:oe})}}return R.normalizeQueryParams=ft,R.joinWithSlash=qe,R.stripTrailingSlash=rt,R.\u0275fac=function(k){return new(k||R)(M.LFG(Pe),M.LFG(he))},R.\u0275prov=M.Yz7({token:R,factory:function(){return function Re(){return new je((0,M.LFG)(Pe),(0,M.LFG)(he))}()},providedIn:"root"}),R})();function pt(R){return R.replace(/\/index.html$/,"")}function es(R,G){G=encodeURIComponent(G);for(const k of R.split(";")){const Y=k.indexOf("="),[oe,He]=-1==Y?[k,""]:[k.slice(0,Y),k.slice(Y+1)];if(oe.trim()===G)return decodeURIComponent(He)}return null}class Ci{constructor(G,k,Y,oe){this.$implicit=G,this.ngForOf=k,this.index=Y,this.count=oe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ir=(()=>{class R{constructor(k,Y,oe){this._viewContainer=k,this._template=Y,this._differs=oe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(k){this._ngForOf=k,this._ngForOfDirty=!0}set ngForTrackBy(k){this._trackByFn=k}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(k){k&&(this._template=k)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const k=this._ngForOf;!this._differ&&k&&(this._differ=this._differs.find(k).create(this.ngForTrackBy))}if(this._differ){const k=this._differ.diff(this._ngForOf);k&&this._applyChanges(k)}}_applyChanges(k){const Y=this._viewContainer;k.forEachOperation((oe,He,ut)=>{if(null==oe.previousIndex)Y.createEmbeddedView(this._template,new Ci(oe.item,this._ngForOf,-1,-1),null===ut?void 0:ut);else if(null==ut)Y.remove(null===He?void 0:He);else if(null!==He){const At=Y.get(He);Y.move(At,ut),pr(At,oe)}});for(let oe=0,He=Y.length;oe<He;oe++){const At=Y.get(oe).context;At.index=oe,At.count=He,At.ngForOf=this._ngForOf}k.forEachIdentityChange(oe=>{pr(Y.get(oe.currentIndex),oe)})}static ngTemplateContextGuard(k,Y){return!0}}return R.\u0275fac=function(k){return new(k||R)(M.Y36(M.s_b),M.Y36(M.Rgc),M.Y36(M.ZZ4))},R.\u0275dir=M.lG2({type:R,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),R})();function pr(R,G){R.context.$implicit=G.item}let bi=(()=>{class R{constructor(k,Y){this._viewContainer=k,this._context=new Rn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Y}set ngIf(k){this._context.$implicit=this._context.ngIf=k,this._updateView()}set ngIfThen(k){Ti("ngIfThen",k),this._thenTemplateRef=k,this._thenViewRef=null,this._updateView()}set ngIfElse(k){Ti("ngIfElse",k),this._elseTemplateRef=k,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(k,Y){return!0}}return R.\u0275fac=function(k){return new(k||R)(M.Y36(M.s_b),M.Y36(M.Rgc))},R.\u0275dir=M.lG2({type:R,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),R})();class Rn{constructor(){this.$implicit=null,this.ngIf=null}}function Ti(R,G){if(G&&!G.createEmbeddedView)throw new Error(`${R} must be a TemplateRef, but received '${(0,M.AaK)(G)}'.`)}let Wi=(()=>{class R{}return R.\u0275fac=function(k){return new(k||R)},R.\u0275mod=M.oAB({type:R}),R.\u0275inj=M.cJS({}),R})();const Ki="browser";function Dr(R){return"server"===R}let Hs=(()=>{class R{}return R.\u0275prov=(0,M.Yz7)({token:R,providedIn:"root",factory:()=>new ns((0,M.LFG)(ue),window)}),R})();class ns{constructor(G,k){this.document=G,this.window=k,this.offset=()=>[0,0]}setOffset(G){this.offset=Array.isArray(G)?()=>G:G}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(G){this.supportsScrolling()&&this.window.scrollTo(G[0],G[1])}scrollToAnchor(G){if(!this.supportsScrolling())return;const k=function co(R,G){const k=R.getElementById(G)||R.getElementsByName(G)[0];if(k)return k;if("function"==typeof R.createTreeWalker&&R.body&&(R.body.createShadowRoot||R.body.attachShadow)){const Y=R.createTreeWalker(R.body,NodeFilter.SHOW_ELEMENT);let oe=Y.currentNode;for(;oe;){const He=oe.shadowRoot;if(He){const ut=He.getElementById(G)||He.querySelector(`[name="${G}"]`);if(ut)return ut}oe=Y.nextNode()}}return null}(this.document,G);k&&(this.scrollToElement(k),k.focus())}setHistoryScrollRestoration(G){if(this.supportScrollRestoration()){const k=this.window.history;k&&k.scrollRestoration&&(k.scrollRestoration=G)}}scrollToElement(G){const k=G.getBoundingClientRect(),Y=k.left+this.window.pageXOffset,oe=k.top+this.window.pageYOffset,He=this.offset();this.window.scrollTo(Y-He[0],oe-He[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const G=ys(this.window.history)||ys(Object.getPrototypeOf(this.window.history));return!(!G||!G.writable&&!G.set)}catch(G){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(G){return!1}}}function ys(R){return Object.getOwnPropertyDescriptor(R,"scrollRestoration")}class Kn{}},520:(Dt,Te,L)=>{L.d(Te,{eN:()=>Fe,JF:()=>Er,LE:()=>Pe});var M=L(9808),A=L(5e3),Z=L(9646),de=L(8306),ce=L(4351),_e=L(9300),ue=L(4004);class he{}class ie{}class X{constructor(ge){this.normalizedNames=new Map,this.lazyUpdate=null,ge?this.lazyInit="string"==typeof ge?()=>{this.headers=new Map,ge.split("\n").forEach(Ce=>{const Ue=Ce.indexOf(":");if(Ue>0){const Je=Ce.slice(0,Ue),lt=Je.toLowerCase(),St=Ce.slice(Ue+1).trim();this.maybeSetNormalizedName(Je,lt),this.headers.has(lt)?this.headers.get(lt).push(St):this.headers.set(lt,[St])}})}:()=>{this.headers=new Map,Object.keys(ge).forEach(Ce=>{let Ue=ge[Ce];const Je=Ce.toLowerCase();"string"==typeof Ue&&(Ue=[Ue]),Ue.length>0&&(this.headers.set(Je,Ue),this.maybeSetNormalizedName(Ce,Je))})}:this.headers=new Map}has(ge){return this.init(),this.headers.has(ge.toLowerCase())}get(ge){this.init();const Ce=this.headers.get(ge.toLowerCase());return Ce&&Ce.length>0?Ce[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ge){return this.init(),this.headers.get(ge.toLowerCase())||null}append(ge,Ce){return this.clone({name:ge,value:Ce,op:"a"})}set(ge,Ce){return this.clone({name:ge,value:Ce,op:"s"})}delete(ge,Ce){return this.clone({name:ge,value:Ce,op:"d"})}maybeSetNormalizedName(ge,Ce){this.normalizedNames.has(Ce)||this.normalizedNames.set(Ce,ge)}init(){this.lazyInit&&(this.lazyInit instanceof X?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ge=>this.applyUpdate(ge)),this.lazyUpdate=null))}copyFrom(ge){ge.init(),Array.from(ge.headers.keys()).forEach(Ce=>{this.headers.set(Ce,ge.headers.get(Ce)),this.normalizedNames.set(Ce,ge.normalizedNames.get(Ce))})}clone(ge){const Ce=new X;return Ce.lazyInit=this.lazyInit&&this.lazyInit instanceof X?this.lazyInit:this,Ce.lazyUpdate=(this.lazyUpdate||[]).concat([ge]),Ce}applyUpdate(ge){const Ce=ge.name.toLowerCase();switch(ge.op){case"a":case"s":let Ue=ge.value;if("string"==typeof Ue&&(Ue=[Ue]),0===Ue.length)return;this.maybeSetNormalizedName(ge.name,Ce);const Je=("a"===ge.op?this.headers.get(Ce):void 0)||[];Je.push(...Ue),this.headers.set(Ce,Je);break;case"d":const lt=ge.value;if(lt){let St=this.headers.get(Ce);if(!St)return;St=St.filter(En=>-1===lt.indexOf(En)),0===St.length?(this.headers.delete(Ce),this.normalizedNames.delete(Ce)):this.headers.set(Ce,St)}else this.headers.delete(Ce),this.normalizedNames.delete(Ce)}}forEach(ge){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ce=>ge(this.normalizedNames.get(Ce),this.headers.get(Ce)))}}class q{encodeKey(ge){return rt(ge)}encodeValue(ge){return rt(ge)}decodeKey(ge){return decodeURIComponent(ge)}decodeValue(ge){return decodeURIComponent(ge)}}const ot=/%(\d[a-f0-9])/gi,qe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function rt(Ye){return encodeURIComponent(Ye).replace(ot,(ge,Ce)=>{var Ue;return null!==(Ue=qe[Ce])&&void 0!==Ue?Ue:ge})}function ft(Ye){return`${Ye}`}class Pe{constructor(ge={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ge.encoder||new q,ge.fromString){if(ge.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function le(Ye,ge){const Ce=new Map;return Ye.length>0&&Ye.replace(/^\?/,"").split("&").forEach(Je=>{const lt=Je.indexOf("="),[St,En]=-1==lt?[ge.decodeKey(Je),""]:[ge.decodeKey(Je.slice(0,lt)),ge.decodeValue(Je.slice(lt+1))],ln=Ce.get(St)||[];ln.push(En),Ce.set(St,ln)}),Ce}(ge.fromString,this.encoder)}else ge.fromObject?(this.map=new Map,Object.keys(ge.fromObject).forEach(Ce=>{const Ue=ge.fromObject[Ce];this.map.set(Ce,Array.isArray(Ue)?Ue:[Ue])})):this.map=null}has(ge){return this.init(),this.map.has(ge)}get(ge){this.init();const Ce=this.map.get(ge);return Ce?Ce[0]:null}getAll(ge){return this.init(),this.map.get(ge)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ge,Ce){return this.clone({param:ge,value:Ce,op:"a"})}appendAll(ge){const Ce=[];return Object.keys(ge).forEach(Ue=>{const Je=ge[Ue];Array.isArray(Je)?Je.forEach(lt=>{Ce.push({param:Ue,value:lt,op:"a"})}):Ce.push({param:Ue,value:Je,op:"a"})}),this.clone(Ce)}set(ge,Ce){return this.clone({param:ge,value:Ce,op:"s"})}delete(ge,Ce){return this.clone({param:ge,value:Ce,op:"d"})}toString(){return this.init(),this.keys().map(ge=>{const Ce=this.encoder.encodeKey(ge);return this.map.get(ge).map(Ue=>Ce+"="+this.encoder.encodeValue(Ue)).join("&")}).filter(ge=>""!==ge).join("&")}clone(ge){const Ce=new Pe({encoder:this.encoder});return Ce.cloneFrom=this.cloneFrom||this,Ce.updates=(this.updates||[]).concat(ge),Ce}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ge=>this.map.set(ge,this.cloneFrom.map.get(ge))),this.updates.forEach(ge=>{switch(ge.op){case"a":case"s":const Ce=("a"===ge.op?this.map.get(ge.param):void 0)||[];Ce.push(ft(ge.value)),this.map.set(ge.param,Ce);break;case"d":if(void 0===ge.value){this.map.delete(ge.param);break}{let Ue=this.map.get(ge.param)||[];const Je=Ue.indexOf(ft(ge.value));-1!==Je&&Ue.splice(Je,1),Ue.length>0?this.map.set(ge.param,Ue):this.map.delete(ge.param)}}}),this.cloneFrom=this.updates=null)}}class Me{constructor(){this.map=new Map}set(ge,Ce){return this.map.set(ge,Ce),this}get(ge){return this.map.has(ge)||this.map.set(ge,ge.defaultValue()),this.map.get(ge)}delete(ge){return this.map.delete(ge),this}has(ge){return this.map.has(ge)}keys(){return this.map.keys()}}function Qe(Ye){return"undefined"!=typeof ArrayBuffer&&Ye instanceof ArrayBuffer}function je(Ye){return"undefined"!=typeof Blob&&Ye instanceof Blob}function Re(Ye){return"undefined"!=typeof FormData&&Ye instanceof FormData}class pt{constructor(ge,Ce,Ue,Je){let lt;if(this.url=Ce,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ge.toUpperCase(),function it(Ye){switch(Ye){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Je?(this.body=void 0!==Ue?Ue:null,lt=Je):lt=Ue,lt&&(this.reportProgress=!!lt.reportProgress,this.withCredentials=!!lt.withCredentials,lt.responseType&&(this.responseType=lt.responseType),lt.headers&&(this.headers=lt.headers),lt.context&&(this.context=lt.context),lt.params&&(this.params=lt.params)),this.headers||(this.headers=new X),this.context||(this.context=new Me),this.params){const St=this.params.toString();if(0===St.length)this.urlWithParams=Ce;else{const En=Ce.indexOf("?");this.urlWithParams=Ce+(-1===En?"?":En<Ce.length-1?"&":"")+St}}else this.params=new Pe,this.urlWithParams=Ce}serializeBody(){return null===this.body?null:Qe(this.body)||je(this.body)||Re(this.body)||function Mt(Ye){return"undefined"!=typeof URLSearchParams&&Ye instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Pe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Re(this.body)?null:je(this.body)?this.body.type||null:Qe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Pe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ge={}){var Ce;const Ue=ge.method||this.method,Je=ge.url||this.url,lt=ge.responseType||this.responseType,St=void 0!==ge.body?ge.body:this.body,En=void 0!==ge.withCredentials?ge.withCredentials:this.withCredentials,ln=void 0!==ge.reportProgress?ge.reportProgress:this.reportProgress;let Xt=ge.headers||this.headers,Zr=ge.params||this.params;const Wn=null!==(Ce=ge.context)&&void 0!==Ce?Ce:this.context;return void 0!==ge.setHeaders&&(Xt=Object.keys(ge.setHeaders).reduce((hr,Ot)=>hr.set(Ot,ge.setHeaders[Ot]),Xt)),ge.setParams&&(Zr=Object.keys(ge.setParams).reduce((hr,Ot)=>hr.set(Ot,ge.setParams[Ot]),Zr)),new pt(Ue,Je,St,{params:Zr,headers:Xt,context:Wn,reportProgress:ln,responseType:lt,withCredentials:En})}}var se=(()=>((se=se||{})[se.Sent=0]="Sent",se[se.UploadProgress=1]="UploadProgress",se[se.ResponseHeader=2]="ResponseHeader",se[se.DownloadProgress=3]="DownloadProgress",se[se.Response=4]="Response",se[se.User=5]="User",se))();class we{constructor(ge,Ce=200,Ue="OK"){this.headers=ge.headers||new X,this.status=void 0!==ge.status?ge.status:Ce,this.statusText=ge.statusText||Ue,this.url=ge.url||null,this.ok=this.status>=200&&this.status<300}}class Ee extends we{constructor(ge={}){super(ge),this.type=se.ResponseHeader}clone(ge={}){return new Ee({headers:ge.headers||this.headers,status:void 0!==ge.status?ge.status:this.status,statusText:ge.statusText||this.statusText,url:ge.url||this.url||void 0})}}class ke extends we{constructor(ge={}){super(ge),this.type=se.Response,this.body=void 0!==ge.body?ge.body:null}clone(ge={}){return new ke({body:void 0!==ge.body?ge.body:this.body,headers:ge.headers||this.headers,status:void 0!==ge.status?ge.status:this.status,statusText:ge.statusText||this.statusText,url:ge.url||this.url||void 0})}}class Ne extends we{constructor(ge){super(ge,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ge.url||"(unknown url)"}`:`Http failure response for ${ge.url||"(unknown url)"}: ${ge.status} ${ge.statusText}`,this.error=ge.error||null}}function et(Ye,ge){return{body:ge,headers:Ye.headers,context:Ye.context,observe:Ye.observe,params:Ye.params,reportProgress:Ye.reportProgress,responseType:Ye.responseType,withCredentials:Ye.withCredentials}}let Fe=(()=>{class Ye{constructor(Ce){this.handler=Ce}request(Ce,Ue,Je={}){let lt;if(Ce instanceof pt)lt=Ce;else{let ln,Xt;ln=Je.headers instanceof X?Je.headers:new X(Je.headers),Je.params&&(Xt=Je.params instanceof Pe?Je.params:new Pe({fromObject:Je.params})),lt=new pt(Ce,Ue,void 0!==Je.body?Je.body:null,{headers:ln,context:Je.context,params:Xt,reportProgress:Je.reportProgress,responseType:Je.responseType||"json",withCredentials:Je.withCredentials})}const St=(0,Z.of)(lt).pipe((0,ce.b)(ln=>this.handler.handle(ln)));if(Ce instanceof pt||"events"===Je.observe)return St;const En=St.pipe((0,_e.h)(ln=>ln instanceof ke));switch(Je.observe||"body"){case"body":switch(lt.responseType){case"arraybuffer":return En.pipe((0,ue.U)(ln=>{if(null!==ln.body&&!(ln.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return ln.body}));case"blob":return En.pipe((0,ue.U)(ln=>{if(null!==ln.body&&!(ln.body instanceof Blob))throw new Error("Response is not a Blob.");return ln.body}));case"text":return En.pipe((0,ue.U)(ln=>{if(null!==ln.body&&"string"!=typeof ln.body)throw new Error("Response is not a string.");return ln.body}));default:return En.pipe((0,ue.U)(ln=>ln.body))}case"response":return En;default:throw new Error(`Unreachable: unhandled observe type ${Je.observe}}`)}}delete(Ce,Ue={}){return this.request("DELETE",Ce,Ue)}get(Ce,Ue={}){return this.request("GET",Ce,Ue)}head(Ce,Ue={}){return this.request("HEAD",Ce,Ue)}jsonp(Ce,Ue){return this.request("JSONP",Ce,{params:(new Pe).append(Ue,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ce,Ue={}){return this.request("OPTIONS",Ce,Ue)}patch(Ce,Ue,Je={}){return this.request("PATCH",Ce,et(Je,Ue))}post(Ce,Ue,Je={}){return this.request("POST",Ce,et(Je,Ue))}put(Ce,Ue,Je={}){return this.request("PUT",Ce,et(Je,Ue))}}return Ye.\u0275fac=function(Ce){return new(Ce||Ye)(A.LFG(he))},Ye.\u0275prov=A.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();class It{constructor(ge,Ce){this.next=ge,this.interceptor=Ce}handle(ge){return this.interceptor.intercept(ge,this.next)}}const un=new A.OlP("HTTP_INTERCEPTORS");let ur=(()=>{class Ye{intercept(Ce,Ue){return Ue.handle(Ce)}}return Ye.\u0275fac=function(Ce){return new(Ce||Ye)},Ye.\u0275prov=A.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();const an=/^\)\]\}',?\n/;let yr=(()=>{class Ye{constructor(Ce){this.xhrFactory=Ce}handle(Ce){if("JSONP"===Ce.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new de.y(Ue=>{const Je=this.xhrFactory.build();if(Je.open(Ce.method,Ce.urlWithParams),Ce.withCredentials&&(Je.withCredentials=!0),Ce.headers.forEach((Ot,An)=>Je.setRequestHeader(Ot,An.join(","))),Ce.headers.has("Accept")||Je.setRequestHeader("Accept","application/json, text/plain, */*"),!Ce.headers.has("Content-Type")){const Ot=Ce.detectContentTypeHeader();null!==Ot&&Je.setRequestHeader("Content-Type",Ot)}if(Ce.responseType){const Ot=Ce.responseType.toLowerCase();Je.responseType="json"!==Ot?Ot:"text"}const lt=Ce.serializeBody();let St=null;const En=()=>{if(null!==St)return St;const Ot=Je.statusText||"OK",An=new X(Je.getAllResponseHeaders()),hn=function Xn(Ye){return"responseURL"in Ye&&Ye.responseURL?Ye.responseURL:/^X-Request-URL:/m.test(Ye.getAllResponseHeaders())?Ye.getResponseHeader("X-Request-URL"):null}(Je)||Ce.url;return St=new Ee({headers:An,status:Je.status,statusText:Ot,url:hn}),St},ln=()=>{let{headers:Ot,status:An,statusText:hn,url:Ct}=En(),Ze=null;204!==An&&(Ze=void 0===Je.response?Je.responseText:Je.response),0===An&&(An=Ze?200:0);let Bt=An>=200&&An<300;if("json"===Ce.responseType&&"string"==typeof Ze){const Lt=Ze;Ze=Ze.replace(an,"");try{Ze=""!==Ze?JSON.parse(Ze):null}catch(fn){Ze=Lt,Bt&&(Bt=!1,Ze={error:fn,text:Ze})}}Bt?(Ue.next(new ke({body:Ze,headers:Ot,status:An,statusText:hn,url:Ct||void 0})),Ue.complete()):Ue.error(new Ne({error:Ze,headers:Ot,status:An,statusText:hn,url:Ct||void 0}))},Xt=Ot=>{const{url:An}=En(),hn=new Ne({error:Ot,status:Je.status||0,statusText:Je.statusText||"Unknown Error",url:An||void 0});Ue.error(hn)};let Zr=!1;const Wn=Ot=>{Zr||(Ue.next(En()),Zr=!0);let An={type:se.DownloadProgress,loaded:Ot.loaded};Ot.lengthComputable&&(An.total=Ot.total),"text"===Ce.responseType&&!!Je.responseText&&(An.partialText=Je.responseText),Ue.next(An)},hr=Ot=>{let An={type:se.UploadProgress,loaded:Ot.loaded};Ot.lengthComputable&&(An.total=Ot.total),Ue.next(An)};return Je.addEventListener("load",ln),Je.addEventListener("error",Xt),Je.addEventListener("timeout",Xt),Je.addEventListener("abort",Xt),Ce.reportProgress&&(Je.addEventListener("progress",Wn),null!==lt&&Je.upload&&Je.upload.addEventListener("progress",hr)),Je.send(lt),Ue.next({type:se.Sent}),()=>{Je.removeEventListener("error",Xt),Je.removeEventListener("abort",Xt),Je.removeEventListener("load",ln),Je.removeEventListener("timeout",Xt),Ce.reportProgress&&(Je.removeEventListener("progress",Wn),null!==lt&&Je.upload&&Je.upload.removeEventListener("progress",hr)),Je.readyState!==Je.DONE&&Je.abort()}})}}return Ye.\u0275fac=function(Ce){return new(Ce||Ye)(A.LFG(M.JF))},Ye.\u0275prov=A.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();const Cr=new A.OlP("XSRF_COOKIE_NAME"),sr=new A.OlP("XSRF_HEADER_NAME");class qr{}let $n=(()=>{class Ye{constructor(Ce,Ue,Je){this.doc=Ce,this.platform=Ue,this.cookieName=Je,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ce=this.doc.cookie||"";return Ce!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,M.Mx)(Ce,this.cookieName),this.lastCookieString=Ce),this.lastToken}}return Ye.\u0275fac=function(Ce){return new(Ce||Ye)(A.LFG(M.K0),A.LFG(A.Lbi),A.LFG(Cr))},Ye.\u0275prov=A.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})(),zn=(()=>{class Ye{constructor(Ce,Ue){this.tokenService=Ce,this.headerName=Ue}intercept(Ce,Ue){const Je=Ce.url.toLowerCase();if("GET"===Ce.method||"HEAD"===Ce.method||Je.startsWith("http://")||Je.startsWith("https://"))return Ue.handle(Ce);const lt=this.tokenService.getToken();return null!==lt&&!Ce.headers.has(this.headerName)&&(Ce=Ce.clone({headers:Ce.headers.set(this.headerName,lt)})),Ue.handle(Ce)}}return Ye.\u0275fac=function(Ce){return new(Ce||Ye)(A.LFG(qr),A.LFG(sr))},Ye.\u0275prov=A.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})(),Hn=(()=>{class Ye{constructor(Ce,Ue){this.backend=Ce,this.injector=Ue,this.chain=null}handle(Ce){if(null===this.chain){const Ue=this.injector.get(un,[]);this.chain=Ue.reduceRight((Je,lt)=>new It(Je,lt),this.backend)}return this.chain.handle(Ce)}}return Ye.\u0275fac=function(Ce){return new(Ce||Ye)(A.LFG(ie),A.LFG(A.zs3))},Ye.\u0275prov=A.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})(),Tr=(()=>{class Ye{static disable(){return{ngModule:Ye,providers:[{provide:zn,useClass:ur}]}}static withOptions(Ce={}){return{ngModule:Ye,providers:[Ce.cookieName?{provide:Cr,useValue:Ce.cookieName}:[],Ce.headerName?{provide:sr,useValue:Ce.headerName}:[]]}}}return Ye.\u0275fac=function(Ce){return new(Ce||Ye)},Ye.\u0275mod=A.oAB({type:Ye}),Ye.\u0275inj=A.cJS({providers:[zn,{provide:un,useExisting:zn,multi:!0},{provide:qr,useClass:$n},{provide:Cr,useValue:"XSRF-TOKEN"},{provide:sr,useValue:"X-XSRF-TOKEN"}]}),Ye})(),Er=(()=>{class Ye{}return Ye.\u0275fac=function(Ce){return new(Ce||Ye)},Ye.\u0275mod=A.oAB({type:Ye}),Ye.\u0275inj=A.cJS({providers:[Fe,{provide:he,useClass:Hn},yr,{provide:ie,useExisting:yr}],imports:[[Tr.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Ye})()},5e3:(Dt,Te,L)=>{L.d(Te,{deG:()=>Pu,tb:()=>cC,AFp:()=>sC,ip1:()=>iC,CZH:()=>uv,hGG:()=>rw,z2F:()=>yv,sBO:()=>jE,Sil:()=>bE,_Vd:()=>yy,EJc:()=>vE,SBq:()=>Ag,qLn:()=>Us,vpe:()=>Hc,tBr:()=>Ia,XFs:()=>Ht,OlP:()=>jr,zs3:()=>ll,ZZ4:()=>wv,aQg:()=>Mv,soG:()=>hv,YKP:()=>b0,h0i:()=>Bf,PXZ:()=>RE,R0b:()=>lc,FiY:()=>ui,Lbi:()=>lC,g9A:()=>aC,Qsj:()=>hb,FYo:()=>m0,JOm:()=>Ke,PiD:()=>hc,tp0:()=>el,Rgc:()=>Fg,dDg:()=>fC,q4F:()=>_0,GfV:()=>y0,s_b:()=>Cy,ifc:()=>Je,eFA:()=>mC,G48:()=>BE,Gpc:()=>q,X6Q:()=>VE,_c5:()=>nw,VLi:()=>SE,c2e:()=>uC,zSh:()=>eh,wAp:()=>In,vHH:()=>rt,cg1:()=>yh,kL8:()=>$c,dqk:()=>Xt,sIi:()=>sh,CqO:()=>Uc,QGY:()=>Um,F4k:()=>ul,RDi:()=>ys,AaK:()=>he,qOj:()=>rh,TTD:()=>gs,_Bn:()=>f0,xp6:()=>ip,uIk:()=>Hp,Q2q:()=>ld,Tol:()=>qm,Gre:()=>Rf,ekj:()=>mg,Suo:()=>L0,Xpm:()=>wn,lG2:()=>Nt,Yz7:()=>Gt,cJS:()=>Tn,oAB:()=>xe,Yjl:()=>kr,Y36:()=>$i,_UZ:()=>ig,qZA:()=>Mf,TgZ:()=>wf,EpF:()=>Al,n5z:()=>Ws,LFG:()=>Sn,$8M:()=>Ni,$Z:()=>tg,NdJ:()=>ud,CRH:()=>U0,kcU:()=>uc,O4$:()=>ta,oxw:()=>Bm,Q6J:()=>ng,s9C:()=>If,iGM:()=>N0,CHM:()=>Oo,LSH:()=>vi,YNc:()=>pf,_uU:()=>Xm,Oqu:()=>Cg,hij:()=>Af,Gf:()=>F0});var M=L(7579),A=L(727),Z=L(8306),de=L(6451),ce=L(3099);function _e(n){for(let r in n)if(n[r]===_e)return r;throw Error("Could not find renamed property on target object.")}function ue(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function he(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(he).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function ie(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const X=_e({__forward_ref__:_e});function q(n){return n.__forward_ref__=q,n.toString=function(){return he(this())},n}function le(n){return ot(n)?n():n}function ot(n){return"function"==typeof n&&n.hasOwnProperty(X)&&n.__forward_ref__===q}class rt extends Error{constructor(r,s){super(function ft(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function Pe(n){return"string"==typeof n?n:null==n?"":String(n)}function $e(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Pe(n)}function je(n,r){const s=r?` in ${r}`:"";throw new rt(-201,`No provider for ${$e(n)} found${s}`)}function Vt(n,r){null==n&&function Pt(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function Gt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tn(n){return{providers:n.providers||[],imports:n.imports||[]}}function an(n){return Xn(n,qr)||Xn(n,zn)}function Xn(n,r){return n.hasOwnProperty(r)?n[r]:null}function sr(n){return n&&(n.hasOwnProperty($n)||n.hasOwnProperty(Hn))?n[$n]:null}const qr=_e({\u0275prov:_e}),$n=_e({\u0275inj:_e}),zn=_e({ngInjectableDef:_e}),Hn=_e({ngInjectorDef:_e});var Ht=(()=>((Ht=Ht||{})[Ht.Default=0]="Default",Ht[Ht.Host=1]="Host",Ht[Ht.Self=2]="Self",Ht[Ht.SkipSelf=4]="SkipSelf",Ht[Ht.Optional=8]="Optional",Ht))();let Yr;function Er(n){const r=Yr;return Yr=n,r}function fi(n,r,s){const a=an(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Ht.Optional?null:void 0!==r?r:void je(he(n),"Injector")}function Ye(n){return{toString:n}.toString()}var ge=(()=>((ge=ge||{})[ge.OnPush=0]="OnPush",ge[ge.Default=1]="Default",ge))(),Je=(()=>{return(n=Je||(Je={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Je;var n})();const lt="undefined"!=typeof globalThis&&globalThis,St="undefined"!=typeof window&&window,En="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Xt=lt||"undefined"!=typeof global&&global||St||En,hr={},Ot=[],An=_e({\u0275cmp:_e}),hn=_e({\u0275dir:_e}),Ct=_e({\u0275pipe:_e}),Ze=_e({\u0275mod:_e}),Bt=_e({\u0275fac:_e}),Lt=_e({__NG_ELEMENT_ID__:_e});let fn=0;function wn(n){return Ye(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===ge.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Ot,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Je.Emulated,id:"c",styles:n.styles||Ot,_:null,setInput:null,schemas:n.schemas||null,tView:null},c=n.directives,h=n.features,v=n.pipes;return a.id+=fn++,a.inputs=Kt(n.inputs,s),a.outputs=Kt(n.outputs),h&&h.forEach(O=>O(a)),a.directiveDefs=c?()=>("function"==typeof c?c():c).map(ne):null,a.pipeDefs=v?()=>("function"==typeof v?v():v).map(be):null,a})}function ne(n){return Bn(n)||function fr(n){return n[hn]||null}(n)}function be(n){return function Mn(n){return n[Ct]||null}(n)}const ze={};function xe(n){return Ye(()=>{const r={type:n.type,bootstrap:n.bootstrap||Ot,declarations:n.declarations||Ot,imports:n.imports||Ot,exports:n.exports||Ot,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(ze[n.id]=n.type),r})}function Kt(n,r){if(null==n)return hr;const s={};for(const a in n)if(n.hasOwnProperty(a)){let c=n[a],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),s[c]=a,r&&(r[c]=h)}return s}const Nt=wn;function kr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Bn(n){return n[An]||null}function er(n,r){const s=n[Ze]||null;if(!s&&!0===r)throw new Error(`Type ${he(n)} does not have '\u0275mod' property.`);return s}function Fr(n){return Array.isArray(n)&&"object"==typeof n[1]}function ni(n){return Array.isArray(n)&&!0===n[1]}function Ao(n){return 0!=(8&n.flags)}function zi(n){return 2==(2&n.flags)}function hs(n){return 1==(1&n.flags)}function si(n){return null!==n.template}function lo(n){return 0!=(512&n[2])}function Ei(n,r){return n.hasOwnProperty(Bt)?n[Bt]:null}class xs{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function gs(){return js}function js(n){return n.type.prototype.ngOnChanges&&(n.setInput=ka),ms}function ms(){const n=Ki(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===hr)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function ka(n,r,s,a){const c=Ki(n)||function wi(n,r){return n[Wi]=r}(n,{previous:hr,current:null}),h=c.current||(c.current={}),v=c.previous,O=this.declaredInputs[s],D=v[O];h[O]=new xs(D&&D.currentValue,r,v===hr),n[a]=r}gs.ngInherit=!0;const Wi="__ngSimpleChanges__";function Ki(n){return n[Wi]||null}let ns;function ys(n){ns=n}function Kn(n){return!!n.listen}const R={createRenderer:(n,r)=>function co(){return void 0!==ns?ns:"undefined"!=typeof document?document:void 0}()};function k(n){for(;Array.isArray(n);)n=n[0];return n}function He(n,r){return k(r[n])}function ut(n,r){return k(r[n.index])}function Dn(n,r){return n.data[r]}function Nn(n,r){const s=r[n];return Fr(s)?s:s[0]}function Fn(n){return 4==(4&n[2])}function Mr(n){return 128==(128&n[2])}function ar(n,r){return null==r?null:n[r]}function Ps(n){n[18]=0}function yi(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const Yt={lFrame:Ai(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Yo(){return Yt.bindingsEnabled}function dt(){return Yt.lFrame.lView}function qn(){return Yt.lFrame.tView}function Oo(n){return Yt.lFrame.contextLView=n,n[8]}function Ur(){let n=to();for(;null!==n&&64===n.type;)n=n.parent;return n}function to(){return Yt.lFrame.currentTNode}function Zi(n,r){const s=Yt.lFrame;s.currentTNode=n,s.isParent=r}function Xr(){return Yt.lFrame.isParent}function Qo(){return Yt.isInCheckNoChangesMode}function Ss(n){Yt.isInCheckNoChangesMode=n}function Ts(){return Yt.lFrame.bindingIndex++}function Oi(n){const r=Yt.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function ha(n,r){const s=Yt.lFrame;s.bindingIndex=s.bindingRootIndex=n,fa(r)}function fa(n){Yt.lFrame.currentDirectiveIndex=n}function Ka(){return Yt.lFrame.currentQueryIndex}function pa(n){Yt.lFrame.currentQueryIndex=n}function Jo(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Xo(n,r,s){if(s&Ht.SkipSelf){let c=r,h=n;for(;!(c=c.parent,null!==c||s&Ht.Host||(c=Jo(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;r=c,n=h}const a=Yt.lFrame=ea();return a.currentTNode=r,a.lView=n,!0}function Gs(n){const r=ea(),s=n[1];Yt.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function ea(){const n=Yt.lFrame,r=null===n?null:n.child;return null===r?Ai(n):r}function Ai(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function ga(){const n=Yt.lFrame;return Yt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const qa=ga;function ho(){const n=ga();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ri(){return Yt.lFrame.selectedIndex}function fo(n){Yt.lFrame.selectedIndex=n}function oi(){const n=Yt.lFrame;return Dn(n.tView,n.selectedIndex)}function ta(){Yt.lFrame.currentNamespace="svg"}function uc(){!function La(){Yt.lFrame.currentNamespace=null}()}function ai(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:O,ngAfterViewInit:D,ngAfterViewChecked:B,ngOnDestroy:z}=h;v&&(n.contentHooks||(n.contentHooks=[])).push(-s,v),O&&((n.contentHooks||(n.contentHooks=[])).push(s,O),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,O)),D&&(n.viewHooks||(n.viewHooks=[])).push(-s,D),B&&((n.viewHooks||(n.viewHooks=[])).push(s,B),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,B)),null!=z&&(n.destroyHooks||(n.destroyHooks=[])).push(s,z)}}function po(n,r,s){ya(n,r,3,s)}function Lo(n,r,s,a){(3&n[2])===s&&ya(n,r,s,a)}function lr(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function ya(n,r,s,a){const h=null!=a?a:-1,v=r.length-1;let O=0;for(let D=void 0!==a?65535&n[18]:0;D<v;D++)if("number"==typeof r[D+1]){if(O=r[D],null!=a&&O>=a)break}else r[D]<0&&(n[18]+=65536),(O<h||-1==h)&&(Za(n,s,r,D),n[18]=(4294901760&n[18])+D+2),D++}function Za(n,r,s,a){const c=s[a]<0,h=s[a+1],O=n[c?-s[a]:s[a]];if(c){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(O)}finally{}}}else try{h.call(O)}finally{}}class is{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function no(n,r,s){const a=Kn(n);let c=0;for(;c<s.length;){const h=s[c];if("number"==typeof h){if(0!==h)break;c++;const v=s[c++],O=s[c++],D=s[c++];a?n.setAttribute(r,O,D,v):r.setAttributeNS(v,O,D)}else{const v=h,O=s[++c];ia(v)?a&&n.setProperty(r,v,O):a?n.setAttribute(r,v,O):r.setAttribute(v,O),c++}}return c}function Qi(n){return 3===n||4===n||6===n}function ia(n){return 64===n.charCodeAt(0)}function ro(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const c=r[a];"number"==typeof c?s=c:0===s||va(n,s,c,null,-1===s||2===s?r[++a]:null)}}return n}function va(n,r,s,a,c){let h=0,v=n.length;if(-1===r)v=-1;else for(;h<n.length;){const O=n[h++];if("number"==typeof O){if(O===r){v=-1;break}if(O>r){v=h-1;break}}}for(;h<n.length;){const O=n[h];if("number"==typeof O)break;if(O===s){if(null===a)return void(null!==c&&(n[h+1]=c));if(a===n[h+1])return void(n[h+2]=c)}h++,null!==a&&h++,null!==c&&h++}-1!==v&&(n.splice(v,0,r),h=v+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==c&&n.splice(h++,0,c)}function ml(n){return-1!==n}function Or(n){return 32767&n}function vs(n,r){let s=function Fl(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let Ua=!0;function io(n){const r=Ua;return Ua=n,r}let sa=0;function yt(n,r){const s=mo(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,Ir(a.data,n),Ir(r,null),Ir(a.blueprint,null));const c=I(n,r),h=n.injectorIndex;if(ml(c)){const v=Or(c),O=vs(c,r),D=O[1].data;for(let B=0;B<8;B++)r[h+B]=O[v+B]|D[v+B]}return r[h+8]=c,h}function Ir(n,r){n.push(0,0,0,0,0,0,0,0,r)}function mo(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function I(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,c=r;for(;null!==c;){const h=c[1],v=h.type;if(a=2===v?h.declTNode:1===v?c[6]:null,null===a)return-1;if(s++,c=c[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function E(n,r,s){!function Vo(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Lt)&&(a=s[Lt]),null==a&&(a=s[Lt]=sa++);const c=255&a;r.data[n+(c>>5)]|=1<<c}(n,r,s)}function T(n,r,s){if(s&Ht.Optional)return n;je(r,"NodeInjector")}function N(n,r,s,a){if(s&Ht.Optional&&void 0===a&&(a=null),0==(s&(Ht.Self|Ht.Host))){const c=n[9],h=Er(void 0);try{return c?c.get(r,a,s&Ht.Optional):fi(r,a,s&Ht.Optional)}finally{Er(h)}}return T(a,r,s)}function U(n,r,s,a=Ht.Default,c){if(null!==n){const h=function Qt(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Lt)?n[Lt]:void 0;return"number"==typeof r?r>=0?255&r:ae:r}(s);if("function"==typeof h){if(!Xo(r,n,a))return a&Ht.Host?T(c,s,a):N(r,s,a,c);try{const v=h(a);if(null!=v||a&Ht.Optional)return v;je(s)}finally{qa()}}else if("number"==typeof h){let v=null,O=mo(n,r),D=-1,B=a&Ht.Host?r[16][6]:null;for((-1===O||a&Ht.SkipSelf)&&(D=-1===O?I(n,r):r[O+8],-1!==D&&gr(a,!1)?(v=r[1],O=Or(D),r=vs(D,r)):O=-1);-1!==O;){const z=r[1];if(cr(h,O,z.data)){const J=Xe(O,r,s,v,a,B);if(J!==W)return J}D=r[O+8],-1!==D&&gr(a,r[1].data[O+8]===B)&&cr(h,O,r)?(v=z,O=Or(D),r=vs(D,r)):O=-1}}}return N(r,s,a,c)}const W={};function ae(){return new ii(Ur(),dt())}function Xe(n,r,s,a,c,h){const v=r[1],O=v.data[n+8],z=Ft(O,v,s,null==a?zi(O)&&Ua:a!=v&&0!=(3&O.type),c&Ht.Host&&h===O);return null!==z?dn(r,v,z,O):W}function Ft(n,r,s,a,c){const h=n.providerIndexes,v=r.data,O=1048575&h,D=n.directiveStart,z=h>>20,ye=c?O+z:n.directiveEnd;for(let Ae=a?O:O+z;Ae<ye;Ae++){const at=v[Ae];if(Ae<D&&s===at||Ae>=D&&at.type===s)return Ae}if(c){const Ae=v[D];if(Ae&&si(Ae)&&Ae.type===s)return D}return null}function dn(n,r,s,a){let c=n[s];const h=r.data;if(function ki(n){return n instanceof is}(c)){const v=c;v.resolving&&function Me(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new rt(-200,`Circular dependency in DI detected for ${n}${s}`)}($e(h[s]));const O=io(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?Er(v.injectImpl):null;Xo(n,a,Ht.Default);try{c=n[s]=v.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function Pr(n,r,s){const{ngOnChanges:a,ngOnInit:c,ngDoCheck:h}=r.type.prototype;if(a){const v=js(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,v),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,v)}c&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,c),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==D&&Er(D),io(O),v.resolving=!1,qa()}}return c}function cr(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function gr(n,r){return!(n&Ht.Self||n&Ht.Host&&r)}class ii{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return U(this._tNode,this._lView,r,a,s)}}function Ws(n){return Ye(()=>{const r=n.prototype.constructor,s=r[Bt]||Bo(r),a=Object.prototype;let c=Object.getPrototypeOf(n.prototype).constructor;for(;c&&c!==a;){const h=c[Bt]||Bo(c);if(h&&h!==s)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function Bo(n){return ot(n)?()=>{const r=Bo(le(n));return r&&r()}:Ei(n)}function Ni(n){return function b(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let c=0;for(;c<a;){const h=s[c];if(Qi(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<a&&"string"==typeof s[c];)c++;else{if(h===r)return s[c+1];c+=2}}}return null}(Ur(),n)}const xo="__parameters__";function Vr(n,r,s){return Ye(()=>{const a=function yl(n){return function(...s){if(n){const a=n(...s);for(const c in a)this[c]=a[c]}}}(r);function c(...h){if(this instanceof c)return a.apply(this,h),this;const v=new c(...h);return O.annotation=v,O;function O(D,B,z){const J=D.hasOwnProperty(xo)?D[xo]:Object.defineProperty(D,xo,{value:[]})[xo];for(;J.length<=z;)J.push(null);return(J[z]=J[z]||[]).push(v),D}}return s&&(c.prototype=Object.create(s.prototype)),c.prototype.ngMetadataName=n,c.annotationCls=c,c})}class jr{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Gt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Pu=new jr("AnalyzeForEntryComponents");function Cn(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),Cn(a,r)):r!==n&&r.push(a)}return r}function As(n,r){n.forEach(s=>Array.isArray(s)?As(s,r):r(s))}function oo(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Rs(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function _i(n,r,s){let a=ba(n,r);return a>=0?n[1|a]=s:(a=~a,function qc(n,r,s,a){let c=n.length;if(c==r)n.push(s,a);else if(1===c)n.push(a,n[0]),n[0]=s;else{for(c--,n.push(n[c-1],n[c]);c>r;)n[c]=n[c-2],c--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function ao(n,r){const s=ba(n,r);if(s>=0)return n[1|s]}function ba(n,r){return function jo(n,r,s){let a=0,c=n.length>>s;for(;c!==a;){const h=a+(c-a>>1),v=n[h<<s];if(r===v)return h<<s;v>r?c=h:a=h+1}return~(c<<s)}(n,r,1)}const K={},ee="__NG_DI_FLAG__",De="ngTempTokenPath",mt=/\n/gm,pn="__source",gn=_e({provide:String,useValue:_e});let jn;function Pn(n){const r=jn;return jn=n,r}function Es(n,r=Ht.Default){if(void 0===jn)throw new rt(203,"");return null===jn?fi(n,void 0,r):jn.get(n,r&Ht.Optional?null:void 0,r)}function Sn(n,r=Ht.Default){return(function Tr(){return Yr}()||Es)(le(n),r)}const Ja=Sn;function la(n){const r=[];for(let s=0;s<n.length;s++){const a=le(n[s]);if(Array.isArray(a)){if(0===a.length)throw new rt(900,"");let c,h=Ht.Default;for(let v=0;v<a.length;v++){const O=a[v],D=yo(O);"number"==typeof D?-1===D?c=O.token:h|=D:c=O}r.push(Sn(c,h))}else r.push(Sn(a))}return r}function ci(n,r){return n[ee]=r,n.prototype[ee]=r,n}function yo(n){return n[ee]}const Ia=ci(Vr("Inject",n=>({token:n})),-1),ui=ci(Vr("Optional"),8),hc=ci(Vr("Self"),2),el=ci(Vr("SkipSelf"),4);class yd{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function xa(n){return n instanceof yd?n.changingThisBreaksApplicationSecurity:n}const Ml=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,nu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var zt=(()=>((zt=zt||{})[zt.NONE=0]="NONE",zt[zt.HTML=1]="HTML",zt[zt.STYLE=2]="STYLE",zt[zt.SCRIPT=3]="SCRIPT",zt[zt.URL=4]="URL",zt[zt.RESOURCE_URL=5]="RESOURCE_URL",zt))();function vi(n){const r=function Ol(){const n=dt();return n&&n[12]}();return r?r.sanitize(zt.URL,n)||"":function Kl(n,r){const s=function tl(n){return n instanceof yd&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?xa(n):function ja(n){return(n=String(n)).match(Ml)||n.match(nu)?n:"unsafe:"+n}(Pe(n))}const Ed="__ngContext__";function qs(n,r){n[Ed]=r}function wd(n){const r=function Il(n){return n[Ed]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function Ql(n){return n.ngOriginalError}function Od(n,...r){n.error(...r)}class Us{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),a=function Dh(n){return n&&n.ngErrorLogger||Od}(r);a(this._console,"ERROR",r),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Ql(r);for(;s&&Ql(s);)s=Ql(s);return s||null}}const Hf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Xt))();function f(n){return n instanceof Function?n():n}var Ke=(()=>((Ke=Ke||{})[Ke.Important=1]="Important",Ke[Ke.DashCase=2]="DashCase",Ke))();function Jt(n,r){return undefined(n,r)}function Li(n){const r=n[3];return ni(r)?r[3]:r}function Bu(n){return Sd(n[13])}function uu(n){return Sd(n[4])}function Sd(n){for(;null!==n&&!ni(n);)n=n[4];return n}function xl(n,r,s,a,c){if(null!=a){let h,v=!1;ni(a)?h=a:Fr(a)&&(v=!0,a=a[0]);const O=k(a);0===n&&null!==s?null==c?$g(r,s,O):Pa(r,s,O,c||null,!0):1===n&&null!==s?Pa(r,s,O,c||null,!0):2===n?function Mc(n,r,s){const a=Hu(n,r);a&&function zg(n,r,s,a){Kn(n)?n.removeChild(r,s,a):r.removeChild(s)}(n,a,r,s)}(r,O,v):3===n&&r.destroyNode(O),null!=h&&function Jf(n,r,s,a,c){const h=s[7];h!==k(s)&&xl(r,n,a,h,c);for(let O=10;O<s.length;O++){const D=s[O];Dl(D[1],D,n,r,a,h)}}(r,n,h,s,c)}}function $u(n,r,s){if(Kn(n))return n.createElement(r,s);{const a=null!==s?function Hs(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function Bg(n,r){const s=n[9],a=s.indexOf(r),c=r[3];1024&r[2]&&(r[2]&=-1025,yi(c,-1)),s.splice(a,1)}function Th(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const c=a[17];null!==c&&c!==n&&Bg(c,a),r>0&&(n[s-1][4]=a[4]);const h=Rs(n,10+r);!function Kf(n,r){Dl(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const v=h[19];null!==v&&v.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Yf(n,r){if(!(256&r[2])){const s=r[11];Kn(s)&&s.destroyNode&&Dl(n,r,s,3,null,null),function Ug(n){let r=n[13];if(!r)return nt(n[1],n);for(;r;){let s=null;if(Fr(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)Fr(r)&&nt(r[1],r),r=r[3];null===r&&(r=n),Fr(r)&&nt(r[1],r),s=r&&r[4]}r=s}}(r)}}function nt(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function il(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const c=r[s[a]];if(!(c instanceof is)){const h=s[a+1];if(Array.isArray(h))for(let v=0;v<h.length;v+=2){const O=c[h[v]],D=h[v+1];try{D.call(O)}finally{}}else try{h.call(c)}finally{}}}}(n,r),function Ah(n,r){const s=n.cleanup,a=r[7];let c=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const v=s[h+1],O="function"==typeof v?v(r):k(r[v]),D=a[c=s[h+2]],B=s[h+3];"boolean"==typeof B?O.removeEventListener(s[h],D,B):B>=0?a[c=B]():a[c=-B].unsubscribe(),h+=2}else{const v=a[c=s[h+1]];s[h].call(v)}if(null!==a){for(let h=c+1;h<a.length;h++)a[h]();r[7]=null}}(n,r),1===r[1].type&&Kn(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&ni(r[3])){s!==r[3]&&Bg(s,r);const a=r[19];null!==a&&a.detachView(n)}}}function jg(n,r,s){return function zu(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const c=n.data[a.directiveStart].encapsulation;if(c===Je.None||c===Je.Emulated)return null}return ut(a,s)}(n,r.parent,s)}function Pa(n,r,s,a,c){Kn(n)?n.insertBefore(r,s,a,c):r.insertBefore(s,a,c)}function $g(n,r,s){Kn(n)?n.appendChild(r,s):r.appendChild(s)}function wc(n,r,s,a,c){null!==a?Pa(n,r,s,a,c):$g(n,r,s)}function Hu(n,r){return Kn(n)?n.parentNode(r):r.parentNode}let kh=function Rh(n,r,s){return 40&n.type?ut(n,s):null};function Nd(n,r,s,a){const c=jg(n,a,r),h=r[11],O=function Ys(n,r,s){return kh(n,r,s)}(a.parent||r[6],a,r);if(null!=c)if(Array.isArray(s))for(let D=0;D<s.length;D++)wc(h,c,s[D],O,!1);else wc(h,c,s,O,!1)}function Nh(n,r){if(null!==r){const s=r.type;if(3&s)return ut(r,n);if(4&s)return Gu(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return Nh(n,a);{const c=n[r.index];return ni(c)?Gu(-1,c):k(c)}}if(32&s)return Jt(r,n)()||k(n[r.index]);{const a=Zf(n,r);return null!==a?Array.isArray(a)?a[0]:Nh(Li(n[16]),a):Nh(n,r.next)}}return null}function Zf(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Gu(n,r){const s=10+n+1;if(s<r.length){const a=r[s],c=a[1].firstChild;if(null!==c)return Nh(a,c)}return r[7]}function Xl(n,r,s,a,c,h,v){for(;null!=s;){const O=a[s.index],D=s.type;if(v&&0===r&&(O&&qs(k(O),a),s.flags|=4),64!=(64&s.flags))if(8&D)Xl(n,r,s.child,a,c,h,!1),xl(r,n,c,O,h);else if(32&D){const B=Jt(s,a);let z;for(;z=B();)xl(r,n,c,z,h);xl(r,n,c,O,h)}else 16&D?Qf(n,r,a,s,c,h):xl(r,n,c,O,h);s=v?s.projectionNext:s.next}}function Dl(n,r,s,a,c,h){Xl(s,a,n.firstChild,r,c,h,!1)}function Qf(n,r,s,a,c,h){const v=s[16],D=v[6].projection[a.projection];if(Array.isArray(D))for(let B=0;B<D.length;B++)xl(r,n,c,D[B],h);else Xl(n,r,D,v[3],c,h,!0)}function ep(n,r,s){Kn(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function tp(n,r,s){Kn(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function np(n,r,s){let a=n.length;for(;;){const c=n.indexOf(r,s);if(-1===c)return c;if(0===c||n.charCodeAt(c-1)<=32){const h=r.length;if(c+h===a||n.charCodeAt(c+h)<=32)return c}s=c+1}}const Fh="ng-template";function Ld(n,r,s){let a=0;for(;a<n.length;){let c=n[a++];if(s&&"class"===c){if(c=n[a],-1!==np(c.toLowerCase(),r,0))return!0}else if(1===c){for(;a<n.length&&"string"==typeof(c=n[a++]);)if(c.toLowerCase()===r)return!0;return!1}}return!1}function du(n){return 4===n.type&&n.value!==Fh}function Dy(n,r,s){return r===(4!==n.type||s?n.value:Fh)}function Gg(n,r,s){let a=4;const c=n.attrs||[],h=function Oc(n){for(let r=0;r<n.length;r++)if(Qi(n[r]))return r;return n.length}(c);let v=!1;for(let O=0;O<r.length;O++){const D=r[O];if("number"!=typeof D){if(!v)if(4&a){if(a=2|1&a,""!==D&&!Dy(n,D,s)||""===D&&1===r.length){if(sl(a))return!1;v=!0}}else{const B=8&a?D:r[++O];if(8&a&&null!==n.attrs){if(!Ld(n.attrs,B,s)){if(sl(a))return!1;v=!0}continue}const J=Py(8&a?"class":D,c,du(n),s);if(-1===J){if(sl(a))return!1;v=!0;continue}if(""!==B){let ye;ye=J>h?"":c[J+1].toLowerCase();const Ae=8&a?ye:null;if(Ae&&-1!==np(Ae,B,0)||2&a&&B!==ye){if(sl(a))return!1;v=!0}}}}else{if(!v&&!sl(a)&&!sl(D))return!1;if(v&&sl(D))continue;v=!1,a=D|1&a}}return sl(a)||v}function sl(n){return 0==(1&n)}function Py(n,r,s,a){if(null===r)return-1;let c=0;if(a||!s){let h=!1;for(;c<r.length;){const v=r[c];if(v===n)return c;if(3===v||6===v)h=!0;else{if(1===v||2===v){let O=r[++c];for(;"string"==typeof O;)O=r[++c];continue}if(4===v)break;if(0===v){c+=4;continue}}c+=h?1:2}return-1}return function hu(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function Wg(n,r,s=!1){for(let a=0;a<r.length;a++)if(Gg(n,r[a],s))return!0;return!1}function qg(n,r){return n?":not("+r.trim()+")":r}function Sy(n){let r=n[0],s=1,a=2,c="",h=!1;for(;s<n.length;){let v=n[s];if("string"==typeof v)if(2&a){const O=n[++s];c+="["+v+(O.length>0?'="'+O+'"':"")+"]"}else 8&a?c+="."+v:4&a&&(c+=" "+v);else""!==c&&!sl(v)&&(r+=qg(h,c),c=""),a=v,h=h||!sl(a);s++}return""!==c&&(r+=qg(h,c)),r}const Jn={};function ip(n){Wu(qn(),dt(),Ri()+n,Qo())}function Wu(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&po(r,h,s)}else{const h=n.preOrderHooks;null!==h&&Lo(r,h,0,s)}fo(s)}function fu(n,r){return n<<17|r<<2}function $a(n){return n>>17&32767}function Ku(n){return 2|n}function ol(n){return(131068&n)>>2}function Vh(n,r){return-131069&n|r<<2}function Ic(n){return 1|n}function Hd(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const c=s[a],h=s[a+1];if(-1!==h){const v=n.data[h];pa(c),v.contentQueries(2,r[h],h)}}}function Yu(n,r,s,a,c,h,v,O,D,B){const z=r.blueprint.slice();return z[0]=c,z[2]=140|a,Ps(z),z[3]=z[15]=n,z[8]=s,z[10]=v||n&&n[10],z[11]=O||n&&n[11],z[12]=D||n&&n[12]||null,z[9]=B||n&&n[9]||null,z[6]=h,z[16]=2==r.type?n[16]:z,z}function Zu(n,r,s,a,c){let h=n.data[r];if(null===h)h=function Gd(n,r,s,a,c){const h=to(),v=Xr(),D=n.data[r]=function pp(n,r,s,a,c,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?h:h&&h.parent,s,r,a,c);return null===n.firstChild&&(n.firstChild=D),null!==h&&(v?null==h.child&&null!==D.parent&&(h.child=D):null===h.next&&(h.next=D)),D}(n,r,s,a,c),function Fa(){return Yt.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=c;const v=function Zo(){const n=Yt.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===v?-1:v.injectorIndex}return Zi(h,!0),h}function Qu(n,r,s,a){if(0===s)return-1;const c=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return c}function pu(n,r,s){Gs(r);try{const a=n.viewQuery;null!==a&&Xd(1,a,s);const c=n.template;null!==c&&zh(n,r,c,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Hd(n,r),n.staticViewQueries&&Xd(2,n.viewQuery,s);const h=n.components;null!==h&&function im(n,r){for(let s=0;s<r.length;s++)Yy(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,ho()}}function Ju(n,r,s,a){const c=r[2];if(256==(256&c))return;Gs(r);const h=Qo();try{Ps(r),function No(n){return Yt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&zh(n,r,s,2,a);const v=3==(3&c);if(!h)if(v){const B=n.preOrderCheckHooks;null!==B&&po(r,B,null)}else{const B=n.preOrderHooks;null!==B&&Lo(r,B,0,null),lr(r,0)}if(function Op(n){for(let r=Bu(n);null!==r;r=uu(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const c=s[a],h=c[3];0==(1024&c[2])&&yi(h,1),c[2]|=1024}}}(r),function Mp(n){for(let r=Bu(n);null!==r;r=uu(r))for(let s=10;s<r.length;s++){const a=r[s],c=a[1];Mr(a)&&Ju(c,a,c.template,a[8])}}(r),null!==n.contentQueries&&Hd(n,r),!h)if(v){const B=n.contentCheckHooks;null!==B&&po(r,B)}else{const B=n.contentHooks;null!==B&&Lo(r,B,1),lr(r,1)}!function cp(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const c=s[a];if(c<0)fo(~c);else{const h=c,v=s[++a],O=s[++a];ha(v,h),O(2,r[h])}}}finally{fo(-1)}}(n,r);const O=n.components;null!==O&&function rm(n,r){for(let s=0;s<r.length;s++)Sc(n,r[s])}(r,O);const D=n.viewQuery;if(null!==D&&Xd(2,D,a),!h)if(v){const B=n.viewCheckHooks;null!==B&&po(r,B)}else{const B=n.viewHooks;null!==B&&Lo(r,B,2),lr(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),h||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,yi(r[3],-1))}finally{ho()}}function $y(n,r,s,a){const c=r[10],h=!Qo(),v=Fn(r);try{h&&!v&&c.begin&&c.begin(),v&&pu(n,r,a),Ju(n,r,s,a)}finally{h&&!v&&c.end&&c.end()}}function zh(n,r,s,a,c){const h=Ri(),v=2&a;try{fo(-1),v&&r.length>20&&Wu(n,r,20,Qo()),s(a,c)}finally{fo(h)}}function up(n,r,s){!Yo()||(function qd(n,r,s,a){const c=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||yt(s,r),qs(a,r);const v=s.initialInputs;for(let O=c;O<h;O++){const D=n.data[O],B=si(D);B&&Ep(r,s,D);const z=dn(r,n,O,s);qs(z,r),null!==v&&Kh(0,O-c,z,D,0,v),B&&(Nn(s.index,r)[8]=z)}}(n,r,s,ut(s,r)),128==(128&s.flags)&&function Cp(n,r,s){const a=s.directiveStart,c=s.directiveEnd,v=s.index,O=function Wa(){return Yt.lFrame.currentDirectiveIndex}();try{fo(v);for(let D=a;D<c;D++){const B=n.data[D],z=r[D];fa(D),(null!==B.hostBindings||0!==B.hostVars||null!==B.hostAttrs)&&bp(B,z)}}finally{fo(-1),fa(O)}}(n,r,s))}function dp(n,r,s=ut){const a=r.localNames;if(null!==a){let c=r.index+1;for(let h=0;h<a.length;h+=2){const v=a[h+1],O=-1===v?s(r,n):n[v];n[c++]=O}}}function sm(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Hh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Hh(n,r,s,a,c,h,v,O,D,B){const z=20+a,J=z+c,ye=function zy(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:Jn);return s}(z,J),Ae="function"==typeof B?B():B;return ye[1]={type:n,blueprint:ye,template:s,queries:null,viewQuery:O,declTNode:r,data:ye.slice().fill(null,z),bindingStartIndex:z,expandoStartIndex:J,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:Ae,incompleteFirstPass:!1}}function fp(n,r,s,a){const c=xp(r);null===s?c.push(a):(c.push(s),n.firstCreatePass&&Dp(n).push(a,c.length-1))}function Wd(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const c=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,c):s[a]=[r,c]}return s}function Wo(n,r,s,a,c,h,v,O){const D=ut(r,s);let z,B=r.inputs;!O&&null!=B&&(z=B[a])?(fm(n,s,z,a,c),zi(r)&&function gp(n,r){const s=Nn(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(a=function Gh(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),c=null!=v?v(c,r.value||"",a):c,Kn(h)?h.setProperty(D,a,c):ia(a)||(D.setProperty?D.setProperty(a,c):D[a]=c))}function _p(n,r,s,a){let c=!1;if(Yo()){const h=function Wy(n,r,s){const a=n.directiveRegistry;let c=null;if(a)for(let h=0;h<a.length;h++){const v=a[h];Wg(s,v.selectors,!1)&&(c||(c=[]),E(yt(s,r),n,v.type),si(v)?(lm(n,s),c.unshift(v)):c.push(v))}return c}(n,r,s),v=null===a?null:{"":-1};if(null!==h){c=!0,cm(s,n.data.length,h.length);for(let z=0;z<h.length;z++){const J=h[z];J.providersResolver&&J.providersResolver(J)}let O=!1,D=!1,B=Qu(n,r,h.length,null);for(let z=0;z<h.length;z++){const J=h[z];s.mergedAttrs=ro(s.mergedAttrs,J.hostAttrs),Xu(n,s,r,B,J),qy(B,J,v),null!==J.contentQueries&&(s.flags|=8),(null!==J.hostBindings||null!==J.hostAttrs||0!==J.hostVars)&&(s.flags|=128);const ye=J.type.prototype;!O&&(ye.ngOnChanges||ye.ngOnInit||ye.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),O=!0),!D&&(ye.ngOnChanges||ye.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),D=!0),B++}!function Kd(n,r){const a=r.directiveEnd,c=n.data,h=r.attrs,v=[];let O=null,D=null;for(let B=r.directiveStart;B<a;B++){const z=c[B],J=z.inputs,ye=null===h||du(r)?null:Zd(J,h);v.push(ye),O=Wd(J,B,O),D=Wd(z.outputs,B,D)}null!==O&&(O.hasOwnProperty("class")&&(r.flags|=16),O.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=v,r.inputs=O,r.outputs=D}(n,s)}v&&function Ky(n,r,s){if(r){const a=n.localNames=[];for(let c=0;c<r.length;c+=2){const h=s[r[c+1]];if(null==h)throw new rt(-301,!1);a.push(r[c],h)}}}(s,a,v)}return s.mergedAttrs=ro(s.mergedAttrs,s.attrs),c}function vp(n,r,s,a,c,h){const v=h.hostBindings;if(v){let O=n.hostBindingOpCodes;null===O&&(O=n.hostBindingOpCodes=[]);const D=~r.index;(function Wh(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(O)!=D&&O.push(D),O.push(a,c,v)}}function bp(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function lm(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function qy(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;si(r)&&(s[""]=n)}}function cm(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function Xu(n,r,s,a,c){n.data[a]=c;const h=c.factory||(c.factory=Ei(c.type)),v=new is(h,si(c),null);n.blueprint[a]=v,s[a]=v,vp(n,r,0,a,Qu(n,s,c.hostVars,Jn),c)}function Ep(n,r,s){const a=ut(r,n),c=sm(s),h=n[10],v=Yh(n,Yu(n,c,null,s.onPush?64:16,a,r,h,h.createRenderer(a,s),null,null));n[r.index]=v}function Ko(n,r,s,a,c,h){const v=ut(n,r);!function Yd(n,r,s,a,c,h,v){if(null==h)Kn(n)?n.removeAttribute(r,c,s):r.removeAttribute(c);else{const O=null==v?Pe(h):v(h,a||"",c);Kn(n)?n.setAttribute(r,c,O,s):s?r.setAttributeNS(s,c,O):r.setAttribute(c,O)}}(r[11],v,h,n.value,s,a,c)}function Kh(n,r,s,a,c,h){const v=h[r];if(null!==v){const O=a.setInput;for(let D=0;D<v.length;){const B=v[D++],z=v[D++],J=v[D++];null!==O?a.setInput(s,J,B,z):s[z]=J}}}function Zd(n,r){let s=null,a=0;for(;a<r.length;){const c=r[a];if(0!==c)if(5!==c){if("number"==typeof c)break;n.hasOwnProperty(c)&&(null===s&&(s=[]),s.push(c,n[c],r[a+1])),a+=2}else a+=2;else a+=4}return s}function wp(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function Sc(n,r){const s=Nn(r,n);if(Mr(s)){const a=s[1];80&s[2]?Ju(a,s,a.template,s[8]):s[5]>0&&qh(s)}}function qh(n){for(let a=Bu(n);null!==a;a=uu(a))for(let c=10;c<a.length;c++){const h=a[c];if(1024&h[2]){const v=h[1];Ju(v,h,v.template,h[8])}else h[5]>0&&qh(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const c=Nn(s[a],n);Mr(c)&&c[5]>0&&qh(c)}}function Yy(n,r){const s=Nn(r,n),a=s[1];(function Ip(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),pu(a,s,s[8])}function Yh(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Qd(n){for(;n;){n[2]|=64;const r=Li(n);if(lo(n)&&!r)return n;n=r}return null}function ed(n,r,s){const a=r[10];a.begin&&a.begin();try{Ju(n,r,n.template,s)}catch(c){throw Qh(r,c),c}finally{a.end&&a.end()}}function Zh(n){!function Jd(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=wd(s),c=a[1];$y(c,a,c.template,s)}}(n[8])}function Xd(n,r,s){pa(0),r(n,s)}const Qy=(()=>Promise.resolve(null))();function xp(n){return n[7]||(n[7]=[])}function Dp(n){return n.cleanup||(n.cleanup=[])}function Qh(n,r){const s=n[9],a=s?s.get(Us,null):null;a&&a.handleError(r)}function fm(n,r,s,a,c){for(let h=0;h<s.length;){const v=s[h++],O=s[h++],D=r[v],B=n.data[v];null!==B.setInput?B.setInput(D,c,a,O):D[O]=c}}function al(n,r,s){const a=He(r,n);!function Td(n,r,s){Kn(n)?n.setValue(r,s):r.textContent=s}(n[11],a,s)}function Jh(n,r,s){let a=s?n.styles:null,c=s?n.classes:null,h=0;if(null!==r)for(let v=0;v<r.length;v++){const O=r[v];"number"==typeof O?h=O:1==h?c=ie(c,O):2==h&&(a=ie(a,O+": "+r[++v]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=c:n.classesWithoutHost=c}const Xh=new jr("INJECTOR",-1);class ef{get(r,s=K){if(s===K){const a=new Error(`NullInjectorError: No provider for ${he(r)}!`);throw a.name="NullInjectorError",a}return s}}const eh=new jr("Set Injector scope."),gu={},nd={};let Sl;function tf(){return void 0===Sl&&(Sl=new ef),Sl}function mu(n,r=null,s=null,a){const c=yu(n,r,s,a);return c._resolveInjectorDefTypes(),c}function yu(n,r=null,s=null,a){return new gm(n,s,r||tf(),a)}class gm{constructor(r,s,a,c=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];s&&As(s,O=>this.processProvider(O,r,s)),As([r],O=>this.processInjectorType(O,[],h)),this.records.set(Xh,Ac(void 0,this));const v=this.records.get(eh);this.scope=null!=v?v.value:null,this.source=c||("object"==typeof r?null:he(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=K,a=Ht.Default){this.assertNotDestroyed();const c=Pn(this),h=Er(void 0);try{if(!(a&Ht.SkipSelf)){let O=this.records.get(r);if(void 0===O){const D=function mm(n){return"function"==typeof n||"object"==typeof n&&n instanceof jr}(r)&&an(r);O=D&&this.injectableDefInScope(D)?Ac(Tc(r),gu):null,this.records.set(r,O)}if(null!=O)return this.hydrate(r,O)}return(a&Ht.Self?tf():this.parent).get(r,s=a&Ht.Optional&&s===K?null:s)}catch(v){if("NullInjectorError"===v.name){if((v[De]=v[De]||[]).unshift(he(r)),c)throw v;return function Do(n,r,s,a){const c=n[De];throw r[pn]&&c.unshift(r[pn]),n.message=function Xa(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let c=he(r);if(Array.isArray(r))c=r.map(he).join(" -> ");else if("object"==typeof r){let h=[];for(let v in r)if(r.hasOwnProperty(v)){let O=r[v];h.push(v+":"+("string"==typeof O?JSON.stringify(O):he(O)))}c=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${c}]: ${n.replace(mt,"\n  ")}`}("\n"+n.message,c,s,a),n.ngTokenPath=c,n[De]=null,n}(v,r,"R3InjectorError",this.source)}throw v}finally{Er(h),Pn(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,c)=>r.push(he(c))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new rt(205,!1)}processInjectorType(r,s,a){if(!(r=le(r)))return!1;let c=sr(r);const h=null==c&&r.ngModule||void 0,v=void 0===h?r:h,O=-1!==a.indexOf(v);if(void 0!==h&&(c=sr(h)),null==c)return!1;if(null!=c.imports&&!O){let z;a.push(v);try{As(c.imports,J=>{this.processInjectorType(J,s,a)&&(void 0===z&&(z=[]),z.push(J))})}finally{}if(void 0!==z)for(let J=0;J<z.length;J++){const{ngModule:ye,providers:Ae}=z[J];As(Ae,at=>this.processProvider(at,ye,Ae||Ot))}}this.injectorDefTypes.add(v);const D=Ei(v)||(()=>new v);this.records.set(v,Ac(D,gu));const B=c.providers;if(null!=B&&!O){const z=r;As(B,J=>this.processProvider(J,z,B))}return void 0!==h&&void 0!==r.providers}processProvider(r,s,a){let c=rd(r=le(r))?r:le(r&&r.provide);const h=function e_(n,r,s){return rf(n)?Ac(void 0,n.useValue):Ac(nf(n),gu)}(r);if(rd(r)||!0!==r.multi)this.records.get(c);else{let v=this.records.get(c);v||(v=Ac(void 0,gu,!0),v.factory=()=>la(v.multi),this.records.set(c,v)),c=r,v.multi.push(r)}this.records.set(c,h)}hydrate(r,s){return s.value===gu&&(s.value=nd,s.value=s.factory()),"object"==typeof s.value&&s.value&&function n_(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=le(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Tc(n){const r=an(n),s=null!==r?r.factory:Ei(n);if(null!==s)return s;if(n instanceof jr)throw new rt(204,!1);if(n instanceof Function)return function Xy(n){const r=n.length;if(r>0)throw function bs(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}(r,"?"),new rt(204,!1);const s=function yr(n){const r=n&&(n[qr]||n[zn]);if(r){const s=function Cr(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new rt(204,!1)}function nf(n,r,s){let a;if(rd(n)){const c=le(n);return Ei(c)||Tc(c)}if(rf(n))a=()=>le(n.useValue);else if(function t_(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...la(n.deps||[]));else if(function Sp(n){return!(!n||!n.useExisting)}(n))a=()=>Sn(le(n.useExisting));else{const c=le(n&&(n.useClass||n.provide));if(!function Ap(n){return!!n.deps}(n))return Ei(c)||Tc(c);a=()=>new c(...la(n.deps))}return a}function Ac(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function rf(n){return null!==n&&"object"==typeof n&&gn in n}function rd(n){return"function"==typeof n}let ll=(()=>{class n{static create(s,a){var c;if(Array.isArray(s))return mu({name:""},a,s,"");{const h=null!==(c=s.name)&&void 0!==c?c:"";return mu({name:h},s.parent,s.providers,h)}}}return n.THROW_IF_NOT_FOUND=K,n.NULL=new ef,n.\u0275prov=Gt({token:n,providedIn:"any",factory:()=>Sn(Xh)}),n.__NG_ELEMENT_ID__=-1,n})();function Up(n,r){ai(wd(n)[1],Ur())}function rh(n){let r=function Vp(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let c;if(si(n))c=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new rt(903,"");c=r.\u0275dir}if(c){if(s){a.push(c);const v=n;v.inputs=ih(n.inputs),v.declaredInputs=ih(n.declaredInputs),v.outputs=ih(n.outputs);const O=c.hostBindings;O&&c_(n,O);const D=c.viewQuery,B=c.contentQueries;if(D&&sc(n,D),B&&Bp(n,B),ue(n.inputs,c.inputs),ue(n.declaredInputs,c.declaredInputs),ue(n.outputs,c.outputs),si(c)&&c.data.animation){const z=n.data;z.animation=(z.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let v=0;v<h.length;v++){const O=h[v];O&&O.ngInherit&&O(n),O===rh&&(s=!1)}}r=Object.getPrototypeOf(r)}!function l_(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const c=n[a];c.hostVars=r+=c.hostVars,c.hostAttrs=ro(c.hostAttrs,s=ro(s,c.hostAttrs))}}(a)}function ih(n){return n===hr?{}:n===Ot?[]:n}function sc(n,r){const s=n.viewQuery;n.viewQuery=s?(a,c)=>{r(a,c),s(a,c)}:r}function Bp(n,r){const s=n.contentQueries;n.contentQueries=s?(a,c,h)=>{r(a,c,h),s(a,c,h)}:r}function c_(n,r){const s=n.hostBindings;n.hostBindings=s?(a,c)=>{r(a,c),s(a,c)}:r}let id=null;function sd(){if(!id){const n=Xt.Symbol;if(n&&n.iterator)id=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(id=a)}}}return id}function sh(n){return!!oh(n)&&(Array.isArray(n)||!(n instanceof Map)&&sd()in n)}function oh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Co(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Hp(n,r,s,a){const c=dt();return Co(c,Ts(),r)&&(qn(),Ko(oi(),c,n,r,s,a)),Hp}function kc(n,r,s,a){return Co(n,Ts(),s)?r+Pe(s)+a:Jn}function ld(n,r,s,a,c,h){const v=dt(),O=kc(v,r,s,a);return O!==Jn&&Ko(oi(),v,n,O,c,h),ld}function pf(n,r,s,a,c,h,v,O){const D=dt(),B=qn(),z=n+20,J=B.firstCreatePass?function Kp(n,r,s,a,c,h,v,O,D){const B=r.consts,z=Zu(r,n,4,v||null,ar(B,O));_p(r,s,z,ar(B,D)),ai(r,z);const J=z.tViews=Hh(2,z,a,c,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,B);return null!==r.queries&&(r.queries.template(r,z),J.queries=r.queries.embeddedTView(z)),z}(z,B,D,r,s,a,c,h,v):B.data[z];Zi(J,!1);const ye=D[11].createComment("");Nd(B,D,ye,J),qs(ye,D),Yh(D,D[z]=wp(ye,D,ye,J)),hs(J)&&up(B,D,J),null!=v&&dp(D,J,O)}function $i(n,r=Ht.Default){const s=dt();return null===s?Sn(n,r):U(Ur(),s,le(n),r)}function tg(){throw new Error("invalid")}function ng(n,r,s){const a=dt();return Co(a,Ts(),r)&&Wo(qn(),oi(),a,n,r,a[11],s,!1),ng}function rg(n,r,s,a,c){const v=c?"class":"style";fm(n,s,r.inputs[v],v,a)}function wf(n,r,s,a){const c=dt(),h=qn(),v=20+n,O=c[11],D=c[v]=$u(O,r,function nn(){return Yt.lFrame.currentNamespace}()),B=h.firstCreatePass?function Lm(n,r,s,a,c,h,v){const O=r.consts,B=Zu(r,n,2,c,ar(O,h));return _p(r,s,B,ar(O,v)),null!==B.attrs&&Jh(B,B.attrs,!1),null!==B.mergedAttrs&&Jh(B,B.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,B),B}(v,h,c,0,r,s,a):h.data[v];Zi(B,!0);const z=B.mergedAttrs;null!==z&&no(O,D,z);const J=B.classes;null!==J&&tp(O,D,J);const ye=B.styles;return null!==ye&&ep(O,D,ye),64!=(64&B.flags)&&Nd(h,c,D,B),0===function uo(){return Yt.lFrame.elementDepthCount}()&&qs(D,c),function Mo(){Yt.lFrame.elementDepthCount++}(),hs(B)&&(up(h,c,B),function Zs(n,r,s){if(Ao(r)){const c=r.directiveEnd;for(let h=r.directiveStart;h<c;h++){const v=n.data[h];v.contentQueries&&v.contentQueries(1,s[h],h)}}}(h,B,c)),null!==a&&dp(c,B),wf}function Mf(){let n=Ur();Xr()?function Ha(){Yt.lFrame.isParent=!1}():(n=n.parent,Zi(n,!1));const r=n;!function Yi(){Yt.lFrame.elementDepthCount--}();const s=qn();return s.firstCreatePass&&(ai(s,n),Ao(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function _a(n){return 0!=(16&n.flags)}(r)&&rg(s,r,dt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function ss(n){return 0!=(32&n.flags)}(r)&&rg(s,r,dt(),r.stylesWithoutHost,!1),Mf}function ig(n,r,s,a){return wf(n,r,s,a),Mf(),ig}function Al(){return dt()}function Um(n){return!!n&&"function"==typeof n.then}function ul(n){return!!n&&"function"==typeof n.subscribe}const Uc=ul;function ud(n,r,s,a){const c=dt(),h=qn(),v=Ur();return function lg(n,r,s,a,c,h,v,O){const D=hs(a),z=n.firstCreatePass&&Dp(n),J=r[8],ye=xp(r);let Ae=!0;if(3&a.type||O){const $t=ut(a,r),tn=O?O($t):$t,gt=ye.length,bn=O?Sr=>O(k(Sr[a.index])):a.index;if(Kn(s)){let Sr=null;if(!O&&D&&(Sr=function v_(n,r,s,a){const c=n.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const v=c[h];if(v===s&&c[h+1]===a){const O=r[7],D=c[h+2];return O.length>D?O[D]:null}"string"==typeof v&&(h+=2)}return null}(n,r,c,a.index)),null!==Sr)(Sr.__ngLastListenerFn__||Sr).__ngNextListenerFn__=h,Sr.__ngLastListenerFn__=h,Ae=!1;else{h=dd(a,r,J,h,!1);const hi=s.listen(tn,c,h);ye.push(h,hi),z&&z.push(c,bn,gt,gt+1)}}else h=dd(a,r,J,h,!0),tn.addEventListener(c,h,v),ye.push(h),z&&z.push(c,bn,gt,v)}else h=dd(a,r,J,h,!1);const at=a.outputs;let Tt;if(Ae&&null!==at&&(Tt=at[c])){const $t=Tt.length;if($t)for(let tn=0;tn<$t;tn+=2){const fl=r[Tt[tn]][Tt[tn+1]].subscribe(h),wh=ye.length;ye.push(h,fl),z&&z.push(c,a.index,wh,-(wh+1))}}}(h,c,c[11],v,n,r,!!s,a),ud}function cg(n,r,s,a){try{return!1!==s(a)}catch(c){return Qh(n,c),!1}}function dd(n,r,s,a,c){return function h(v){if(v===Function)return a;const O=2&n.flags?Nn(n.index,r):r;0==(32&r[2])&&Qd(O);let D=cg(r,0,a,v),B=h.__ngNextListenerFn__;for(;B;)D=cg(r,0,B,v)&&D,B=B.__ngNextListenerFn__;return c&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function Bm(n=1){return function ma(n){return(Yt.lFrame.contextLView=function Fo(n,r){for(;n>0;)r=r[15],n--;return r}(n,Yt.lFrame.contextLView))[8]}(n)}function If(n,r,s){return lh(n,"",r,"",s),If}function lh(n,r,s,a,c){const h=dt(),v=kc(h,r,s,a);return v!==Jn&&Wo(qn(),oi(),h,n,v,h[11],c,!1),lh}function Hm(n,r,s,a,c){const h=n[s+1],v=null===r;let O=a?$a(h):ol(h),D=!1;for(;0!==O&&(!1===D||v);){const z=n[O+1];Pf(n[O],r)&&(D=!0,n[O+1]=a?Ic(z):Ku(z)),O=a?$a(z):ol(z)}D&&(n[s+1]=a?Ku(h):Ic(h))}function Pf(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&ba(n,r)>=0}const cs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function pg(n){return n.substring(cs.key,cs.keyEnd)}function uh(n,r){const s=cs.textEnd;return s===r?-1:(r=cs.keyEnd=function E_(n,r,s){for(;r<s&&n.charCodeAt(r)>32;)r++;return r}(n,cs.key=r,s),Ta(n,r,s))}function Ta(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function mg(n,r){return function za(n,r,s,a){const c=dt(),h=qn(),v=Oi(2);h.firstUpdatePass&&yg(h,n,v,a),r!==Jn&&Co(c,v,r)&&vg(h,h.data[Ri()],c,c[11],n,c[v+1]=function Iu(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=he(xa(n)))),n}(r,s),a,v)}(n,r,null,!0),mg}function qm(n){dl(_i,Nl,n,!0)}function Nl(n,r){for(let s=function b_(n){return function hd(n){cs.key=0,cs.keyEnd=0,cs.value=0,cs.valueEnd=0,cs.textEnd=n.length}(n),uh(n,Ta(n,0,cs.textEnd))}(r);s>=0;s=uh(r,s))_i(n,pg(r),!0)}function dl(n,r,s,a){const c=qn(),h=Oi(2);c.firstUpdatePass&&yg(c,null,h,a);const v=dt();if(s!==Jn&&Co(v,h,s)){const O=c.data[Ri()];if(Jm(O,a)&&!Ym(c,h)){let D=a?O.classesWithoutHost:O.stylesWithoutHost;null!==D&&(s=ie(D,s||"")),rg(c,O,v,s,a)}else!function O_(n,r,s,a,c,h,v,O){c===Jn&&(c=Ot);let D=0,B=0,z=0<c.length?c[0]:null,J=0<h.length?h[0]:null;for(;null!==z||null!==J;){const ye=D<c.length?c[D+1]:void 0,Ae=B<h.length?h[B+1]:void 0;let Tt,at=null;z===J?(D+=2,B+=2,ye!==Ae&&(at=J,Tt=Ae)):null===J||null!==z&&z<J?(D+=2,at=z):(B+=2,at=J,Tt=Ae),null!==at&&vg(n,r,s,a,at,Tt,v,O),z=D<c.length?c[D]:null,J=B<h.length?h[B]:null}}(c,O,v,v[11],v[h+1],v[h+1]=function _g(n,r,s){if(null==s||""===s)return Ot;const a=[],c=xa(s);if(Array.isArray(c))for(let h=0;h<c.length;h++)n(a,c[h],!0);else if("object"==typeof c)for(const h in c)c.hasOwnProperty(h)&&n(a,h,c[h]);else"string"==typeof c&&r(a,c);return a}(n,r,s),a,h)}}function Ym(n,r){return r>=n.expandoStartIndex}function yg(n,r,s,a){const c=n.data;if(null===c[s+1]){const h=c[Ri()],v=Ym(n,s);Jm(h,a)&&null===r&&!v&&(r=!1),r=function w_(n,r,s,a){const c=function Io(n){const r=Yt.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===c)0===(a?r.classBindings:r.styleBindings)&&(s=fd(s=Sf(null,n,r,s,a),r.attrs,a),h=null);else{const v=r.directiveStylingLast;if(-1===v||n[v]!==c)if(s=Sf(c,n,r,s,a),null===h){let D=function M_(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==ol(a))return n[$a(a)]}(n,r,a);void 0!==D&&Array.isArray(D)&&(D=Sf(null,n,r,D[1],a),D=fd(D,r.attrs,a),function Zm(n,r,s,a){n[$a(s?r.classBindings:r.styleBindings)]=a}(n,r,a,D))}else h=function Qm(n,r,s){let a;const c=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<c;h++)a=fd(a,n[h].hostAttrs,s);return fd(a,r.attrs,s)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(c,h,r,a),function hg(n,r,s,a,c,h){let v=h?r.classBindings:r.styleBindings,O=$a(v),D=ol(v);n[a]=s;let z,B=!1;if(Array.isArray(s)){const J=s;z=J[1],(null===z||ba(J,z)>0)&&(B=!0)}else z=s;if(c)if(0!==D){const ye=$a(n[O+1]);n[a+1]=fu(ye,O),0!==ye&&(n[ye+1]=Vh(n[ye+1],a)),n[O+1]=function Yg(n,r){return 131071&n|r<<17}(n[O+1],a)}else n[a+1]=fu(O,0),0!==O&&(n[O+1]=Vh(n[O+1],a)),O=a;else n[a+1]=fu(D,0),0===O?O=a:n[D+1]=Vh(n[D+1],a),D=a;B&&(n[a+1]=Ku(n[a+1])),Hm(n,z,a,!0),Hm(n,z,a,!1),function fg(n,r,s,a,c){const h=c?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&ba(h,r)>=0&&(s[a+1]=Ic(s[a+1]))}(r,z,n,a,h),v=fu(O,D),h?r.classBindings=v:r.styleBindings=v}(c,h,r,s,v,a)}}function Sf(n,r,s,a,c){let h=null;const v=s.directiveEnd;let O=s.directiveStylingLast;for(-1===O?O=s.directiveStart:O++;O<v&&(h=r[O],a=fd(a,h.hostAttrs,c),h!==n);)O++;return null!==n&&(s.directiveStylingLast=O),a}function fd(n,r,s){const a=s?1:2;let c=-1;if(null!==r)for(let h=0;h<r.length;h++){const v=r[h];"number"==typeof v?c=v:c===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),_i(n,v,!!s||r[++h]))}return void 0===n?null:n}function vg(n,r,s,a,c,h,v,O){if(!(3&r.type))return;const D=n.data,B=D[O+1];Tf(function ec(n){return 1==(1&n)}(B)?ac(D,r,s,c,ol(B),v):void 0)||(Tf(h)||function Go(n){return 2==(2&n)}(B)&&(h=ac(D,null,s,c,O,v)),function Xf(n,r,s,a,c){const h=Kn(n);if(r)c?h?n.addClass(s,a):s.classList.add(a):h?n.removeClass(s,a):s.classList.remove(a);else{let v=-1===a.indexOf("-")?void 0:Ke.DashCase;if(null==c)h?n.removeStyle(s,a,v):s.style.removeProperty(a);else{const O="string"==typeof c&&c.endsWith("!important");O&&(c=c.slice(0,-10),v|=Ke.Important),h?n.setStyle(s,a,c,v):s.style.setProperty(a,c,O?"important":"")}}}(a,v,He(Ri(),s),c,h))}function ac(n,r,s,a,c,h){const v=null===r;let O;for(;c>0;){const D=n[c],B=Array.isArray(D),z=B?D[1]:D,J=null===z;let ye=s[c+1];ye===Jn&&(ye=J?Ot:void 0);let Ae=J?ao(ye,a):z===a?ye:void 0;if(B&&!Tf(Ae)&&(Ae=ao(D,a)),Tf(Ae)&&(O=Ae,v))return O;const at=n[c+1];c=v?$a(at):ol(at)}if(null!==r){let D=h?r.residualClasses:r.residualStyles;null!=D&&(O=ao(D,a))}return O}function Tf(n){return void 0!==n}function Jm(n,r){return 0!=(n.flags&(r?16:32))}function Xm(n,r=""){const s=dt(),a=qn(),c=n+20,h=a.firstCreatePass?Zu(a,c,1,r,null):a.data[c],v=s[c]=function ju(n,r){return Kn(n)?n.createText(r):n.createTextNode(r)}(s[11],r);Nd(a,s,v,h),Zi(h,!1)}function Cg(n){return Af("",n,""),Cg}function Af(n,r,s){const a=dt(),c=kc(a,n,r,s);return c!==Jn&&al(a,Ri(),c),Af}function Rf(n,r,s){dl(_i,Nl,kc(dt(),n,r,s),!0)}const jc=void 0;var mh=["en",[["a","p"],["AM","PM"],jc],[["AM","PM"],jc,jc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",jc,"{1} 'at' {0}",jc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function gh(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Vs={};function yh(n){const r=function N_(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=kf(r);if(s)return s;const a=r.split("-")[0];if(s=kf(a),s)return s;if("en"===a)return mh;throw new Error(`Missing locale data for the locale "${n}".`)}function $c(n){return yh(n)[In.PluralCase]}function kf(n){return n in Vs||(Vs[n]=Xt.ng&&Xt.ng.common&&Xt.ng.common.locales&&Xt.ng.common.locales[n]),Vs[n]}var In=(()=>((In=In||{})[In.LocaleId=0]="LocaleId",In[In.DayPeriodsFormat=1]="DayPeriodsFormat",In[In.DayPeriodsStandalone=2]="DayPeriodsStandalone",In[In.DaysFormat=3]="DaysFormat",In[In.DaysStandalone=4]="DaysStandalone",In[In.MonthsFormat=5]="MonthsFormat",In[In.MonthsStandalone=6]="MonthsStandalone",In[In.Eras=7]="Eras",In[In.FirstDayOfWeek=8]="FirstDayOfWeek",In[In.WeekendRange=9]="WeekendRange",In[In.DateFormat=10]="DateFormat",In[In.TimeFormat=11]="TimeFormat",In[In.DateTimeFormat=12]="DateTimeFormat",In[In.NumberSymbols=13]="NumberSymbols",In[In.NumberFormats=14]="NumberFormats",In[In.CurrencyCode=15]="CurrencyCode",In[In.CurrencySymbol=16]="CurrencySymbol",In[In.CurrencyName=17]="CurrencyName",In[In.Currencies=18]="Currencies",In[In.Directionality=19]="Directionality",In[In.PluralCase=20]="PluralCase",In[In.ExtraData=21]="ExtraData",In))();const Nf="en-US";let Ch=Nf;function H_(n,r,s,a,c){if(n=le(n),Array.isArray(n))for(let h=0;h<n.length;h++)H_(n[h],r,s,a,c);else{const h=qn(),v=dt();let O=rd(n)?n:le(n.provide),D=nf(n);const B=Ur(),z=1048575&B.providerIndexes,J=B.directiveStart,ye=B.providerIndexes>>20;if(rd(n)||!n.multi){const Ae=new is(D,c,$i),at=W_(O,r,c?z:z+ye,J);-1===at?(E(yt(B,v),h,O),G_(h,n,r.length),r.push(O),B.directiveStart++,B.directiveEnd++,c&&(B.providerIndexes+=1048576),s.push(Ae),v.push(Ae)):(s[at]=Ae,v[at]=Ae)}else{const Ae=W_(O,r,z+ye,J),at=W_(O,r,z,z+ye),Tt=Ae>=0&&s[Ae],$t=at>=0&&s[at];if(c&&!$t||!c&&!Tt){E(yt(B,v),h,O);const tn=function ob(n,r,s,a,c){const h=new is(n,s,$i);return h.multi=[],h.index=r,h.componentProviders=0,h0(h,c,a&&!s),h}(c?sb:ib,s.length,c,a,D);!c&&$t&&(s[at].providerFactory=tn),G_(h,n,r.length,0),r.push(O),B.directiveStart++,B.directiveEnd++,c&&(B.providerIndexes+=1048576),s.push(tn),v.push(tn)}else G_(h,n,Ae>-1?Ae:at,h0(s[c?at:Ae],D,!c&&a));!c&&a&&$t&&s[at].componentProviders++}}}function G_(n,r,s,a){const c=rd(r),h=function Tp(n){return!!n.useClass}(r);if(c||h){const D=(h?le(r.useClass):r).prototype.ngOnDestroy;if(D){const B=n.destroyHooks||(n.destroyHooks=[]);if(!c&&r.multi){const z=B.indexOf(s);-1===z?B.push(s,[a,D]):B[z+1].push(a,D)}else B.push(s,D)}}}function h0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function W_(n,r,s,a){for(let c=s;c<a;c++)if(r[c]===n)return c;return-1}function ib(n,r,s,a){return K_(this.multi,[])}function sb(n,r,s,a){const c=this.multi;let h;if(this.providerFactory){const v=this.providerFactory.componentProviders,O=dn(s,s[1],this.providerFactory.index,a);h=O.slice(0,v),K_(c,h);for(let D=v;D<O.length;D++)h.push(O[D])}else h=[],K_(c,h);return h}function K_(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function f0(n,r=[]){return s=>{s.providersResolver=(a,c)=>function rb(n,r,s){const a=qn();if(a.firstCreatePass){const c=si(n);H_(s,a.data,a.blueprint,c,!0),H_(r,a.data,a.blueprint,c,!1)}}(a,c?c(n):n,r)}}class p0{}class cb{resolveComponentFactory(r){throw function lb(n){const r=Error(`No component factory found for ${he(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let yy=(()=>{class n{}return n.NULL=new cb,n})();function ub(){return Vf(Ur(),dt())}function Vf(n,r){return new Ag(ut(n,r))}let Ag=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=ub,n})();function db(n){return n instanceof Ag?n.nativeElement:n}class m0{}let hb=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function pb(){const n=dt(),s=Nn(Ur().index,n);return function fb(n){return n[11]}(Fr(s)?s:n)}(),n})(),gb=(()=>{class n{}return n.\u0275prov=Gt({token:n,providedIn:"root",factory:()=>null}),n})();class y0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const _0=new y0("13.2.7"),q_={};function _y(n,r,s,a,c=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(k(h)),ni(h))for(let O=10;O<h.length;O++){const D=h[O],B=D[1].firstChild;null!==B&&_y(D[1],D,B,a)}const v=s.type;if(8&v)_y(n,r,s.child,a);else if(32&v){const O=Jt(s,r);let D;for(;D=O();)a.push(D)}else if(16&v){const O=Zf(r,s);if(Array.isArray(O))a.push(...O);else{const D=Li(r[16]);_y(D[1],D,O,a,!0)}}s=c?s.projectionNext:s.next}return a}class Rg{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return _y(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(ni(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Th(r,a),Rs(s,a))}this._attachedToViewContainer=!1}Yf(this._lView[1],this._lView)}onDestroy(r){fp(this._lView[1],this._lView,null,r)}markForCheck(){Qd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ed(this._lView[1],this._lView,this.context)}checkNoChanges(){!function dm(n,r,s){Ss(!0);try{ed(n,r,s)}finally{Ss(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new rt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function qf(n,r){Dl(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new rt(902,"");this._appRef=r}}class mb extends Rg{constructor(r){super(r),this._view=r}detectChanges(){Zh(this._view)}checkNoChanges(){!function td(n){Ss(!0);try{Zh(n)}finally{Ss(!1)}}(this._view)}get context(){return null}}class v0 extends yy{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Bn(r);return new Y_(s,this.ngModule)}}function C0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class Y_ extends p0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function rp(n){return n.map(Sy).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return C0(this.componentDef.inputs)}get outputs(){return C0(this.componentDef.outputs)}create(r,s,a,c){const h=(c=c||this.ngModule)?function _b(n,r){return{get:(s,a,c)=>{const h=n.get(s,q_,c);return h!==q_||a===q_?h:r.get(s,a,c)}}}(r,c.injector):r,v=h.get(m0,R),O=h.get(gb,null),D=v.createRenderer(null,this.componentDef),B=this.componentDef.selectors[0][0]||"div",z=a?function hp(n,r,s){if(Kn(n))return n.selectRootElement(r,s===Je.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(D,a,this.componentDef.encapsulation):$u(v.createRenderer(null,this.componentDef),B,function yb(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(B)),J=this.componentDef.onPush?576:528,ye=function uf(n,r){return{components:[],scheduler:n||Hf,clean:Qy,playerHandler:r||null,flags:0}}(),Ae=Hh(0,null,null,1,0,null,null,null,null,null),at=Yu(null,Ae,ye,J,null,null,v,D,O,h);let Tt,$t;Gs(at);try{const tn=function Mm(n,r,s,a,c,h){const v=s[1];s[20]=n;const D=Zu(v,20,2,"#host",null),B=D.mergedAttrs=r.hostAttrs;null!==B&&(Jh(D,B,!0),null!==n&&(no(c,n,B),null!==D.classes&&tp(c,n,D.classes),null!==D.styles&&ep(c,n,D.styles)));const z=a.createRenderer(n,r),J=Yu(s,sm(r),null,r.onPush?64:16,s[20],D,a,z,h||null,null);return v.firstCreatePass&&(E(yt(D,s),v,r.type),lm(v,D),cm(D,s.length,1)),Yh(s,J),s[20]=J}(z,this.componentDef,at,v,D);if(z)if(a)no(D,z,["ng-version",_0.full]);else{const{attrs:gt,classes:bn}=function Uh(n){const r=[],s=[];let a=1,c=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===c?""!==h&&r.push(h,n[++a]):8===c&&s.push(h);else{if(!sl(c))break;c=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);gt&&no(D,z,gt),bn&&bn.length>0&&tp(D,z,bn.join(" "))}if($t=Dn(Ae,20),void 0!==s){const gt=$t.projection=[];for(let bn=0;bn<this.ngContentSelectors.length;bn++){const Sr=s[bn];gt.push(null!=Sr?Array.from(Sr):null)}}Tt=function cf(n,r,s,a,c){const h=s[1],v=function Gy(n,r,s){const a=Ur();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Xu(n,a,r,Qu(n,r,1,null),s));const c=dn(r,n,a.directiveStart,a);qs(c,r);const h=ut(a,r);return h&&qs(h,r),c}(h,s,r);if(a.components.push(v),n[8]=v,c&&c.forEach(D=>D(v,r)),r.contentQueries){const D=Ur();r.contentQueries(1,v,D.directiveStart)}const O=Ur();return!h.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(fo(O.index),vp(s[1],O,0,O.directiveStart,O.directiveEnd,r),bp(r,v)),v}(tn,this.componentDef,at,ye,[Up]),pu(Ae,at,null)}finally{ho()}return new Cb(this.componentType,Tt,Vf($t,at),at,$t)}}class Cb extends class ab{}{constructor(r,s,a,c,h){super(),this.location=a,this._rootLView=c,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new mb(c),this.componentType=r}get injector(){return new ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Bf{}class b0{}const jf=new Map;class M0 extends Bf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new v0(this);const a=er(r);this._bootstrapComponents=f(a.bootstrap),this._r3Injector=yu(r,s,[{provide:Bf,useValue:this},{provide:yy,useValue:this.componentFactoryResolver}],he(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=ll.THROW_IF_NOT_FOUND,a=Ht.Default){return r===ll||r===Bf||r===Xh?this:this._r3Injector.get(r,s,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Z_ extends b0{constructor(r){super(),this.moduleType=r,null!==er(r)&&function Eb(n){const r=new Set;!function s(a){const c=er(a,!0),h=c.id;null!==h&&(function E0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${he(r)} vs ${he(r.name)}`)}(h,jf.get(h),a),jf.set(h,a));const v=f(c.imports);for(const O of v)r.has(O)||(r.add(O),s(O))}(n)}(r)}create(r){return new M0(this.moduleType,r)}}function Q_(n){return r=>{setTimeout(n,void 0,r)}}const Hc=class Bb extends M.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){var c,h,v;let O=r,D=s||(()=>null),B=a;if(r&&"object"==typeof r){const J=r;O=null===(c=J.next)||void 0===c?void 0:c.bind(J),D=null===(h=J.error)||void 0===h?void 0:h.bind(J),B=null===(v=J.complete)||void 0===v?void 0:v.bind(J)}this.__isAsync&&(D=Q_(D),O&&(O=Q_(O)),B&&(B=Q_(B)));const z=super.subscribe({next:O,error:D,complete:B});return r instanceof A.w0&&r.add(z),z}};function jb(){return this._results[sd()]()}class J_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=sd(),a=J_.prototype;a[s]||(a[s]=jb)}get changes(){return this._changes||(this._changes=new Hc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const c=Cn(r);(this._changesDetected=!function Br(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let c=n[a],h=r[a];if(s&&(c=s(c),h=s(h)),h!==c)return!1}return!0}(a._results,c,s))&&(a._results=c,a.length=c.length,a.last=c[this.length-1],a.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Fg=(()=>{class n{}return n.__NG_ELEMENT_ID__=Hb,n})();const $b=Fg,zb=class extends $b{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r){const s=this._declarationTContainer.tViews,a=Yu(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(a[19]=h.createEmbeddedView(s)),pu(s,a,r),new Rg(a)}};function Hb(){return vy(Ur(),dt())}function vy(n,r){return 4&n.type?new zb(r,n,Vf(n,r)):null}let Cy=(()=>{class n{}return n.__NG_ELEMENT_ID__=Gb,n})();function Gb(){return A0(Ur(),dt())}const Wb=Cy,S0=class extends Wb{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Vf(this._hostTNode,this._hostLView)}get injector(){return new ii(this._hostTNode,this._hostLView)}get parentInjector(){const r=I(this._hostTNode,this._hostLView);if(ml(r)){const s=vs(r,this._hostLView),a=Or(r);return new ii(s[1].data[a+8],s)}return new ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=T0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){const c=r.createEmbeddedView(s||{});return this.insert(c,a),c}createComponent(r,s,a,c,h){const v=r&&!function so(n){return"function"==typeof n}(r);let O;if(v)O=s;else{const J=s||{};O=J.index,a=J.injector,c=J.projectableNodes,h=J.ngModuleRef}const D=v?r:new Y_(Bn(r)),B=a||this.parentInjector;if(!h&&null==D.ngModule){const ye=(v?B:this.parentInjector).get(Bf,null);ye&&(h=ye)}const z=D.create(B,c,void 0,h);return this.insert(z.hostView,O),z}insert(r,s){const a=r._lView,c=a[1];if(function wr(n){return ni(n[3])}(a)){const z=this.indexOf(r);if(-1!==z)this.detach(z);else{const J=a[3],ye=new S0(J,J[6],J[3]);ye.detach(ye.indexOf(r))}}const h=this._adjustIndex(s),v=this._lContainer;!function Iy(n,r,s,a){const c=10+a,h=s.length;a>0&&(s[c-1][4]=r),a<h-10?(r[4]=s[c],oo(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const v=r[17];null!==v&&s!==v&&function Vg(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(v,r);const O=r[19];null!==O&&O.insertView(n),r[2]|=128}(c,a,v,h);const O=Gu(h,v),D=a[11],B=Hu(D,v[7]);return null!==B&&function Rd(n,r,s,a,c,h){a[0]=c,a[6]=r,Dl(n,a,s,1,c,h)}(c,v[6],D,a,B,O),r.attachToViewContainerRef(),oo(X_(v),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=T0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Th(this._lContainer,s);a&&(Rs(X_(this._lContainer),s),Yf(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=Th(this._lContainer,s);return a&&null!=Rs(X_(this._lContainer),s)?new Rg(a):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function T0(n){return n[8]}function X_(n){return n[8]||(n[8]=[])}function A0(n,r){let s;const a=r[n.index];if(ni(a))s=a;else{let c;if(8&n.type)c=k(a);else{const h=r[11];c=h.createComment("");const v=ut(n,r);Pa(h,Hu(h,v),c,function Hg(n,r){return Kn(n)?n.nextSibling(r):r.nextSibling}(h,v),!1)}r[n.index]=s=wp(a,r,c,n),Yh(r,s)}return new S0(s,n,r)}class ev{constructor(r){this.queryList=r,this.matches=null}clone(){return new ev(this.queryList)}setDirty(){this.queryList.setDirty()}}class tv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,c=[];for(let h=0;h<a;h++){const v=s.getByIndex(h);c.push(this.queries[v.indexInDeclarationView].clone())}return new tv(c)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==j0(r,s).matches&&this.queries[s].setDirty()}}class R0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class nv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const c=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,c);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new nv(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class rv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new rv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let c=0;c<a.length;c++){const h=a[c];this.matchTNodeWithReadOption(r,s,Yb(s,h)),this.matchTNodeWithReadOption(r,s,Ft(s,r,h,!1,!1))}else a===Fg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Ft(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const c=this.metadata.read;if(null!==c)if(c===Ag||c===Cy||c===Fg&&4&s.type)this.addMatch(s.index,-2);else{const h=Ft(s,r,c,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Yb(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function Qb(n,r,s,a){return-1===s?function Zb(n,r){return 11&n.type?Vf(n,r):4&n.type?vy(n,r):null}(r,n):-2===s?function Jb(n,r,s){return s===Ag?Vf(r,n):s===Fg?vy(r,n):s===Cy?A0(r,n):void 0}(n,r,a):dn(n,n[1],s,r)}function k0(n,r,s,a){const c=r[19].queries[a];if(null===c.matches){const h=n.data,v=s.matches,O=[];for(let D=0;D<v.length;D+=2){const B=v[D];O.push(B<0?null:Qb(r,h[B],v[D+1],s.metadata.read))}c.matches=O}return c.matches}function iv(n,r,s,a){const c=n.queries.getByIndex(s),h=c.matches;if(null!==h){const v=k0(n,r,c,s);for(let O=0;O<h.length;O+=2){const D=h[O];if(D>0)a.push(v[O/2]);else{const B=h[O+1],z=r[-D];for(let J=10;J<z.length;J++){const ye=z[J];ye[17]===ye[3]&&iv(ye[1],ye,B,a)}if(null!==z[9]){const J=z[9];for(let ye=0;ye<J.length;ye++){const Ae=J[ye];iv(Ae[1],Ae,B,a)}}}}}return a}function N0(n){const r=dt(),s=qn(),a=Ka();pa(a+1);const c=j0(s,a);if(n.dirty&&Fn(r)===(2==(2&c.metadata.flags))){if(null===c.matches)n.reset([]);else{const h=c.crossesNgTemplate?iv(s,r,a,[]):k0(s,r,c,a);n.reset(h,db),n.notifyOnChanges()}return!0}return!1}function F0(n,r,s){const a=qn();a.firstCreatePass&&(B0(a,new R0(n,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),V0(a,dt(),r)}function L0(n,r,s,a){const c=qn();if(c.firstCreatePass){const h=Ur();B0(c,new R0(r,s,a),h.index),function eE(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(c,n),2==(2&s)&&(c.staticContentQueries=!0)}V0(c,dt(),s)}function U0(){return function Xb(n,r){return n[19].queries[r].queryList}(dt(),Ka())}function V0(n,r,s){const a=new J_(4==(4&s));fp(n,r,a,a.destroy),null===r[19]&&(r[19]=new tv),r[19].queries.push(new ev(a))}function B0(n,r,s){null===n.queries&&(n.queries=new nv),n.queries.track(new rv(r,s))}function j0(n,r){return n.queries.getByIndex(r)}function wy(...n){}const iC=new jr("Application Initializer");let uv=(()=>{class n{constructor(s){this.appInits=s,this.resolve=wy,this.reject=wy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(Um(h))s.push(h);else if(Uc(h)){const v=new Promise((O,D)=>{h.subscribe({complete:O,error:D})});s.push(v)}}Promise.all(s).then(()=>{a()}).catch(c=>{this.reject(c)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Sn(iC,8))},n.\u0275prov=Gt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sC=new jr("AppId",{providedIn:"root",factory:function oC(){return`${dv()}${dv()}${dv()}`}});function dv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const aC=new jr("Platform Initializer"),lC=new jr("Platform ID"),cC=new jr("appBootstrapListener");let uC=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Gt({token:n,factory:n.\u0275fac}),n})();const hv=new jr("LocaleId",{providedIn:"root",factory:()=>Ja(hv,Ht.Optional|Ht.SkipSelf)||function _E(){return"undefined"!=typeof $localize&&$localize.locale||Nf}()}),vE=new jr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class CE{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let bE=(()=>{class n{compileModuleSync(s){return new Z_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=f(er(s).declarations).reduce((v,O)=>{const D=Bn(O);return D&&v.push(new Y_(D)),v},[]);return new CE(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Gt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wE=(()=>Promise.resolve(0))();function fv(n){"undefined"==typeof Zone?wE.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class lc{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Hc(!1),this.onMicrotaskEmpty=new Hc(!1),this.onStable=new Hc(!1),this.onError=new Hc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!a&&s,c.shouldCoalesceRunChangeDetection=a,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function ME(){let n=Xt.requestAnimationFrame,r=Xt.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function xE(n){const r=()=>{!function IE(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Xt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,gv(n),n.isCheckStableRunning=!0,pv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),gv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,c,h,v,O)=>{try{return dC(n),s.invokeTask(c,h,v,O)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),hC(n)}},onInvoke:(s,a,c,h,v,O,D)=>{try{return dC(n),s.invoke(c,h,v,O,D)}finally{n.shouldCoalesceRunChangeDetection&&r(),hC(n)}},onHasTask:(s,a,c,h)=>{s.hasTask(c,h),a===c&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,gv(n),pv(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,c,h)=>(s.handleError(c,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!lc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(lc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,c){const h=this._inner,v=h.scheduleEventTask("NgZoneEvent: "+c,r,OE,wy,wy);try{return h.runTask(v,s,a)}finally{h.cancelTask(v)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const OE={};function pv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function gv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function dC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function hC(n){n._nesting--,pv(n)}class DE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Hc,this.onMicrotaskEmpty=new Hc,this.onStable=new Hc,this.onError=new Hc}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,c){return r.apply(s,a)}}let fC=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{lc.assertNotInAngularZone(),fv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,c){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:c})}whenStable(s,a,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,c){return[]}}return n.\u0275fac=function(s){return new(s||n)(Sn(lc))},n.\u0275prov=Gt({token:n,factory:n.\u0275fac}),n})(),pC=(()=>{class n{constructor(){this._applications=new Map,mv.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return mv.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Gt({token:n,factory:n.\u0275fac}),n})();class PE{addToWindow(r){}findTestabilityInTree(r,s,a){return null}}function SE(n){mv=n}let cc,mv=new PE;const gC=new jr("AllowMultipleToken");class RE{constructor(r,s){this.name=r,this.token=s}}function mC(n,r,s=[]){const a=`Platform: ${r}`,c=new jr(a);return(h=[])=>{let v=yC();if(!v||v.injector.get(gC,!1))if(n)n(s.concat(h).concat({provide:c,useValue:!0}));else{const O=s.concat(h).concat({provide:c,useValue:!0},{provide:eh,useValue:"platform"});!function kE(n){if(cc&&!cc.destroyed&&!cc.injector.get(gC,!1))throw new rt(400,"");cc=n.get(_C);const r=n.get(aC,null);r&&r.forEach(s=>s())}(ll.create({providers:O,name:a}))}return function NE(n){const r=yC();if(!r)throw new rt(401,"");return r}()}}function yC(){return cc&&!cc.destroyed?cc:null}let _C=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const O=function FE(n,r){let s;return s="noop"===n?new DE:("zone.js"===n?void 0:n)||new lc({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),D=[{provide:lc,useValue:O}];return O.run(()=>{const B=ll.create({providers:D,parent:this.injector,name:s.moduleType.name}),z=s.create(B),J=z.injector.get(Us,null);if(!J)throw new rt(402,"");return O.runOutsideAngular(()=>{const ye=O.onError.subscribe({next:Ae=>{J.handleError(Ae)}});z.onDestroy(()=>{_v(this._modules,z),ye.unsubscribe()})}),function LE(n,r,s){try{const a=s();return Um(a)?a.catch(c=>{throw r.runOutsideAngular(()=>n.handleError(c)),c}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(J,O,()=>{const ye=z.injector.get(uv);return ye.runInitializers(),ye.donePromise.then(()=>(function dy(n){Vt(n,"Expected localeId to be defined"),"string"==typeof n&&(Ch=n.toLowerCase().replace(/_/g,"-"))}(z.injector.get(hv,Nf)||Nf),this._moduleDoBootstrap(z),z))})})}bootstrapModule(s,a=[]){const c=vC({},a);return function TE(n,r,s){const a=new Z_(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(s){const a=s.injector.get(yv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(c=>a.bootstrap(c));else{if(!s.instance.ngDoBootstrap)throw new rt(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new rt(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Sn(ll))},n.\u0275prov=Gt({token:n,factory:n.\u0275fac}),n})();function vC(n,r){return Array.isArray(r)?r.reduce(vC,n):Object.assign(Object.assign({},n),r)}let yv=(()=>{class n{constructor(s,a,c,h,v){this._zone=s,this._injector=a,this._exceptionHandler=c,this._componentFactoryResolver=h,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const O=new Z.y(B=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{B.next(this._stable),B.complete()})}),D=new Z.y(B=>{let z;this._zone.runOutsideAngular(()=>{z=this._zone.onStable.subscribe(()=>{lc.assertNotInAngularZone(),fv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,B.next(!0))})})});const J=this._zone.onUnstable.subscribe(()=>{lc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{B.next(!1)}))});return()=>{z.unsubscribe(),J.unsubscribe()}});this.isStable=(0,de.T)(O,D.pipe((0,ce.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new rt(405,"");let c;c=s instanceof p0?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(c.componentType);const h=function AE(n){return n.isBoundToModule}(c)?void 0:this._injector.get(Bf),O=c.create(ll.NULL,[],a||c.selector,h),D=O.location.nativeElement,B=O.injector.get(fC,null),z=B&&O.injector.get(pC);return B&&z&&z.registerApplication(D,B),O.onDestroy(()=>{this.detachView(O.hostView),_v(this.components,O),z&&z.unregisterApplication(D)}),this._loadComponent(O),O}tick(){if(this._runningTick)throw new rt(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;_v(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(cC,[]).concat(this._bootstrapListeners).forEach(c=>c(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(Sn(lc),Sn(ll),Sn(Us),Sn(yy),Sn(uv))},n.\u0275prov=Gt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _v(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let bC=!0,EC=!1;function VE(){return EC=!0,bC}function BE(){if(EC)throw new Error("Cannot enable prod mode after platform setup.");bC=!1}let jE=(()=>{class n{}return n.__NG_ELEMENT_ID__=$E,n})();function $E(n){return function zE(n,r,s){if(zi(n)&&!s){const a=Nn(n.index,r);return new Rg(a,a)}return 47&n.type?new Rg(r[16],r):null}(Ur(),dt(),16==(16&n))}class IC{constructor(){}supports(r){return sh(r)}create(r){return new YE(r)}}const qE=(n,r)=>r;class YE{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||qE}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,c=0,h=null;for(;s||a;){const v=!a||s&&s.currentIndex<DC(a,c,h)?s:a,O=DC(v,c,h),D=v.currentIndex;if(v===a)c--,a=a._nextRemoved;else if(s=s._next,null==v.previousIndex)c++;else{h||(h=[]);const B=O-c,z=D-c;if(B!=z){for(let ye=0;ye<B;ye++){const Ae=ye<h.length?h[ye]:h[ye]=0,at=Ae+ye;z<=at&&at<B&&(h[ye]=Ae+1)}h[v.previousIndex]=z-B}}O!==D&&r(v,O,D)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!sh(r))throw new rt(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let c,h,v,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let O=0;O<this.length;O++)h=r[O],v=this._trackByFn(O,h),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,h,v,O)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,v,O),a=!0),s=s._next}else c=0,function h_(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[sd()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,O=>{v=this._trackByFn(c,O),null!==s&&Object.is(s.trackById,v)?(a&&(s=this._verifyReinsertion(s,O,v,c)),Object.is(s.item,O)||this._addIdentityChange(s,O)):(s=this._mismatch(s,O,v,c),a=!0),s=s._next,c++}),this.length=c;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,c){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,c)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,c))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,c)):r=this._addAfter(new ZE(s,a),h,c),r}_verifyReinsertion(r,s,a,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,c):r.currentIndex!=c&&(r.currentIndex=c,this._addToMoves(r,c)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const c=r._prevRemoved,h=r._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const c=null===s?this._itHead:s._next;return r._next=c,r._prev=s,null===c?this._itTail=r:c._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new xC),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xC),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class ZE{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QE{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class xC{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new QE,this.map.set(s,a)),a.add(r)}get(r,s){const c=this.map.get(r);return c?c.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function DC(n,r,s){const a=n.previousIndex;if(null===a)return a;let c=0;return s&&a<s.length&&(c=s[a]),a+r+c}class PC{constructor(){}supports(r){return r instanceof Map||oh(r)}create(){return new JE}}class JE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||oh(r)))throw new rt(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,c)=>{if(s&&s.key===c)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(c,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const c=this._records.get(r);this._maybeAddToChanges(c,s);const h=c._prev,v=c._next;return h&&(h._next=v),v&&(v._prev=h),c._next=null,c._prev=null,c}const a=new XE(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class XE{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function SC(){return new wv([new IC])}let wv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const c=a.factories.slice();s=s.concat(c)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||SC()),deps:[[n,new el,new ui]]}}find(s){const a=this.factories.find(c=>c.supports(s));if(null!=a)return a;throw new rt(901,"")}}return n.\u0275prov=Gt({token:n,providedIn:"root",factory:SC}),n})();function TC(){return new Mv([new PC])}let Mv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const c=a.factories.slice();s=s.concat(c)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||TC()),deps:[[n,new el,new ui]]}}find(s){const a=this.factories.find(h=>h.supports(s));if(a)return a;throw new rt(901,"")}}return n.\u0275prov=Gt({token:n,providedIn:"root",factory:TC}),n})();const nw=mC(null,"core",[{provide:lC,useValue:"unknown"},{provide:_C,deps:[ll]},{provide:pC,deps:[]},{provide:uC,deps:[]}]);let rw=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Sn(yv))},n.\u0275mod=xe({type:n}),n.\u0275inj=Tn({}),n})()},6115:(Dt,Te,L)=>{L.d(Te,{gz:()=>Ti,F0:()=>lr,Bz:()=>ml,lC:()=>zs});var M=L(5e3),A=L(8306),Z=L(4742),de=L(8996),ce=L(4671),_e=L(3268),ue=L(3269),he=L(1810),ie=L(5403),X=L(9672);function ot(I,E,b){I?(0,X.f)(b,I,E):E()}var qe=L(8421);function rt(I){return new A.y(E=>{(0,qe.Xf)(I()).subscribe(E)})}var ft=L(727),Pe=L(4482);function $e(){return(0,Pe.e)((I,E)=>{let b=null;I._refCount++;const T=(0,ie.x)(E,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(b=null);const N=I._connection,U=b;b=null,N&&(!U||N===U)&&N.unsubscribe(),E.unsubscribe()});I.subscribe(T),T.closed||(b=I.connect())})}class Me extends A.y{constructor(E,b){super(),this.source=E,this.subjectFactory=b,this._subject=null,this._refCount=0,this._connection=null,(0,Pe.A)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,null==E||E.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new ft.w0;const b=this.getSubject();E.add(this.source.subscribe((0,ie.x)(b,void 0,()=>{this._teardown(),b.complete()},T=>{this._teardown(),b.error(T)},()=>this._teardown()))),E.closed&&(this._connection=null,E=ft.w0.EMPTY)}return E}refCount(){return $e()(this)}}var it=L(9646),Qe=L(1135),je=L(2843),Re=L(6805),Mt=L(7272),pt=L(515),se=L(7579),we=L(9300);function Ee(I){return I<=0?()=>pt.E:(0,Pe.e)((E,b)=>{let T=[];E.subscribe((0,ie.x)(b,N=>{T.push(N),I<T.length&&T.shift()},()=>{for(const N of T)b.next(N);b.complete()},void 0,()=>{T=null}))})}var ke=L(8068),Ne=L(6590),It=L(4004),un=L(3900),ur=L(5698),Vt=L(8675),Pt=L(5026),mn=L(262),qt=L(4351),dr=L(590),Gt=L(5577),mr=L(8505),Tn=L(8189),an=L(9808);class Xn{constructor(E,b){this.id=E,this.url=b}}class yr extends Xn{constructor(E,b,T="imperative",N=null){super(E,b),this.navigationTrigger=T,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Cr extends Xn{constructor(E,b,T){super(E,b),this.urlAfterRedirects=T}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class sr extends Xn{constructor(E,b,T){super(E,b),this.reason=T}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qr extends Xn{constructor(E,b,T){super(E,b),this.error=T}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $n extends Xn{constructor(E,b,T,N){super(E,b),this.urlAfterRedirects=T,this.state=N}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zn extends Xn{constructor(E,b,T,N){super(E,b),this.urlAfterRedirects=T,this.state=N}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hn extends Xn{constructor(E,b,T,N,U){super(E,b),this.urlAfterRedirects=T,this.state=N,this.shouldActivate=U}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ht extends Xn{constructor(E,b,T,N){super(E,b),this.urlAfterRedirects=T,this.state=N}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yr extends Xn{constructor(E,b,T,N){super(E,b),this.urlAfterRedirects=T,this.state=N}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tr{constructor(E){this.route=E}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Er{constructor(E){this.route=E}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fi{constructor(E){this.snapshot=E}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ds{constructor(E){this.snapshot=E}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ye{constructor(E){this.snapshot=E}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ge{constructor(E){this.snapshot=E}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ce{constructor(E,b,T){this.routerEvent=E,this.position=b,this.anchor=T}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ue="primary";class Je{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const b=this.params[E];return Array.isArray(b)?b[0]:b}return null}getAll(E){if(this.has(E)){const b=this.params[E];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function lt(I){return new Je(I)}const St="ngNavigationCancelingError";function En(I){const E=Error("NavigationCancelingError: "+I);return E[St]=!0,E}function Xt(I,E,b){const T=b.path.split("/");if(T.length>I.length||"full"===b.pathMatch&&(E.hasChildren()||T.length<I.length))return null;const N={};for(let U=0;U<T.length;U++){const W=T[U],ae=I[U];if(W.startsWith(":"))N[W.substring(1)]=ae;else if(W!==ae.path)return null}return{consumed:I.slice(0,T.length),posParams:N}}function Wn(I,E){const b=I?Object.keys(I):void 0,T=E?Object.keys(E):void 0;if(!b||!T||b.length!=T.length)return!1;let N;for(let U=0;U<b.length;U++)if(N=b[U],!hr(I[N],E[N]))return!1;return!0}function hr(I,E){if(Array.isArray(I)&&Array.isArray(E)){if(I.length!==E.length)return!1;const b=[...I].sort(),T=[...E].sort();return b.every((N,U)=>T[U]===N)}return I===E}function Ot(I){return Array.prototype.concat.apply([],I)}function An(I){return I.length>0?I[I.length-1]:null}function Ct(I,E){for(const b in I)I.hasOwnProperty(b)&&E(I[b],b)}function Ze(I){return(0,M.CqO)(I)?I:(0,M.QGY)(I)?(0,de.D)(Promise.resolve(I)):(0,it.of)(I)}const Lt={exact:function ne(I,E,b){if(!fr(I.segments,E.segments)||!Et(I.segments,E.segments,b)||I.numberOfChildren!==E.numberOfChildren)return!1;for(const T in E.children)if(!I.children[T]||!ne(I.children[T],E.children[T],b))return!1;return!0},subset:ze},fn={exact:function fe(I,E){return Wn(I,E)},subset:function be(I,E){return Object.keys(E).length<=Object.keys(I).length&&Object.keys(E).every(b=>hr(I[b],E[b]))},ignored:()=>!0};function wn(I,E,b){return Lt[b.paths](I.root,E.root,b.matrixParams)&&fn[b.queryParams](I.queryParams,E.queryParams)&&!("exact"===b.fragment&&I.fragment!==E.fragment)}function ze(I,E,b){return xe(I,E,E.segments,b)}function xe(I,E,b,T){if(I.segments.length>b.length){const N=I.segments.slice(0,b.length);return!(!fr(N,b)||E.hasChildren()||!Et(N,b,T))}if(I.segments.length===b.length){if(!fr(I.segments,b)||!Et(I.segments,b,T))return!1;for(const N in E.children)if(!I.children[N]||!ze(I.children[N],E.children[N],T))return!1;return!0}{const N=b.slice(0,I.segments.length),U=b.slice(I.segments.length);return!!(fr(I.segments,N)&&Et(I.segments,N,T)&&I.children[Ue])&&xe(I.children[Ue],E,U,T)}}function Et(I,E,b){return E.every((T,N)=>fn[b](I[N].parameters,T.parameters))}class Kt{constructor(E,b,T){this.root=E,this.queryParams=b,this.fragment=T}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lt(this.queryParams)),this._queryParamMap}toString(){return tr.serialize(this)}}class Nt{constructor(E,b){this.segments=E,this.children=b,this.parent=null,Ct(b,(T,N)=>T.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pi(this)}}class kr{constructor(E,b){this.path=E,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=lt(this.parameters)),this._parameterMap}toString(){return Vn(this)}}function fr(I,E){return I.length===E.length&&I.every((b,T)=>b.path===E[T].path)}class er{}class Un{parse(E){const b=new es(E);return new Kt(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(E){const b=`/${Ui(E.root,!0)}`,T=function pi(I){const E=Object.keys(I).map(b=>{const T=I[b];return Array.isArray(T)?T.map(N=>`${rr(b)}=${rr(N)}`).join("&"):`${rr(b)}=${rr(T)}`}).filter(b=>!!b);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${b}${T}${"string"==typeof E.fragment?`#${function Hr(I){return encodeURI(I)}(E.fragment)}`:""}`}}const tr=new Un;function Pi(I){return I.segments.map(E=>Vn(E)).join("/")}function Ui(I,E){if(!I.hasChildren())return Pi(I);if(E){const b=I.children[Ue]?Ui(I.children[Ue],!1):"",T=[];return Ct(I.children,(N,U)=>{U!==Ue&&T.push(`${U}:${Ui(N,!1)}`)}),T.length>0?`${b}(${T.join("//")})`:b}{const b=function Mn(I,E){let b=[];return Ct(I.children,(T,N)=>{N===Ue&&(b=b.concat(E(T,N)))}),Ct(I.children,(T,N)=>{N!==Ue&&(b=b.concat(E(T,N)))}),b}(I,(T,N)=>N===Ue?[Ui(I.children[Ue],!1)]:[`${N}:${Ui(T,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[Ue]?`${Pi(I)}/${b[0]}`:`${Pi(I)}/(${b.join("//")})`}}function ti(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rr(I){return ti(I).replace(/%3B/gi,";")}function Zn(I){return ti(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ct(I){return decodeURIComponent(I)}function _n(I){return ct(I.replace(/\+/g,"%20"))}function Vn(I){return`${Zn(I.path)}${function Qr(I){return Object.keys(I).map(E=>`;${Zn(E)}=${Zn(I[E])}`).join("")}(I.parameters)}`}const Nr=/^[^\/()?;=#]+/;function gi(I){const E=I.match(Nr);return E?E[0]:""}const _r=/^[^=?&#]+/,mi=/^[^&#]+/;class es{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nt([],{}):new Nt([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let T={};return this.peekStartsWith("(")&&(T=this.parseParens(!1)),(E.length>0||Object.keys(b).length>0)&&(T[Ue]=new Nt(E,b)),T}parseSegment(){const E=gi(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(E),new kr(ct(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const b=gi(this.remaining);if(!b)return;this.capture(b);let T="";if(this.consumeOptional("=")){const N=gi(this.remaining);N&&(T=N,this.capture(T))}E[ct(b)]=ct(T)}parseQueryParam(E){const b=function or(I){const E=I.match(_r);return E?E[0]:""}(this.remaining);if(!b)return;this.capture(b);let T="";if(this.consumeOptional("=")){const W=function On(I){const E=I.match(mi);return E?E[0]:""}(this.remaining);W&&(T=W,this.capture(T))}const N=_n(b),U=_n(T);if(E.hasOwnProperty(N)){let W=E[N];Array.isArray(W)||(W=[W],E[N]=W),W.push(U)}else E[N]=U}parseParens(E){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const T=gi(this.remaining),N=this.remaining[T.length];if("/"!==N&&")"!==N&&";"!==N)throw new Error(`Cannot parse url '${this.url}'`);let U;T.indexOf(":")>-1?(U=T.substr(0,T.indexOf(":")),this.capture(U),this.capture(":")):E&&(U=Ue);const W=this.parseChildren();b[U]=1===Object.keys(W).length?W[Ue]:new Nt([],W),this.consumeOptional("//")}return b}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new Error(`Expected "${E}".`)}}class Ms{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const b=this.pathFromRoot(E);return b.length>1?b[b.length-2]:null}children(E){const b=Os(E,this._root);return b?b.children.map(T=>T.value):[]}firstChild(E){const b=Os(E,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(E){const b=Ci(E,this._root);return b.length<2?[]:b[b.length-2].children.map(N=>N.value).filter(N=>N!==E)}pathFromRoot(E){return Ci(E,this._root).map(b=>b.value)}}function Os(I,E){if(I===E.value)return E;for(const b of E.children){const T=Os(I,b);if(T)return T}return null}function Ci(I,E){if(I===E.value)return[E];for(const b of E.children){const T=Ci(I,b);if(T.length)return T.unshift(E),T}return[]}class ir{constructor(E,b){this.value=E,this.children=b}toString(){return`TreeNode(${this.value})`}}function pr(I){const E={};return I&&I.children.forEach(b=>E[b.value.outlet]=b),E}class Si extends Ms{constructor(E,b){super(E),this.snapshot=b,zi(this,E)}toString(){return this.snapshot.toString()}}function bi(I,E){const b=function Rn(I,E){const W=new ni([],{},{},"",{},Ue,E,null,I.root,-1,{});return new Ao("",new ir(W,[]))}(I,E),T=new Qe.X([new kr("",{})]),N=new Qe.X({}),U=new Qe.X({}),W=new Qe.X({}),ae=new Qe.X(""),Xe=new Ti(T,N,W,ae,U,Ue,E,b.root);return Xe.snapshot=b.root,new Si(new ir(Xe,[]),b)}class Ti{constructor(E,b,T,N,U,W,ae,Xe){this.url=E,this.params=b,this.queryParams=T,this.fragment=N,this.data=U,this.outlet=W,this.component=ae,this._futureSnapshot=Xe}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,It.U)(E=>lt(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,It.U)(E=>lt(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Vi(I,E="emptyOnly"){const b=I.pathFromRoot;let T=0;if("always"!==E)for(T=b.length-1;T>=1;){const N=b[T],U=b[T-1];if(N.routeConfig&&""===N.routeConfig.path)T--;else{if(U.component)break;T--}}return function Fr(I){return I.reduce((E,b)=>({params:Object.assign(Object.assign({},E.params),b.params),data:Object.assign(Object.assign({},E.data),b.data),resolve:Object.assign(Object.assign({},E.resolve),b._resolvedData)}),{params:{},data:{},resolve:{}})}(b.slice(T))}class ni{constructor(E,b,T,N,U,W,ae,Xe,Ft,dn,Qt){this.url=E,this.params=b,this.queryParams=T,this.fragment=N,this.data=U,this.outlet=W,this.component=ae,this.routeConfig=Xe,this._urlSegment=Ft,this._lastPathIndex=dn,this._resolve=Qt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(T=>T.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ao extends Ms{constructor(E,b){super(b),this.url=E,zi(this,b)}toString(){return hs(this._root)}}function zi(I,E){E.value._routerState=I,E.children.forEach(b=>zi(I,b))}function hs(I){const E=I.children.length>0?` { ${I.children.map(hs).join(", ")} } `:"";return`${I.value}${E}`}function si(I){if(I.snapshot){const E=I.snapshot,b=I._futureSnapshot;I.snapshot=b,Wn(E.queryParams,b.queryParams)||I.queryParams.next(b.queryParams),E.fragment!==b.fragment&&I.fragment.next(b.fragment),Wn(E.params,b.params)||I.params.next(b.params),function Zr(I,E){if(I.length!==E.length)return!1;for(let b=0;b<I.length;++b)if(!Wn(I[b],E[b]))return!1;return!0}(E.url,b.url)||I.url.next(b.url),Wn(E.data,b.data)||I.data.next(b.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function lo(I,E){const b=Wn(I.params,E.params)&&function Bn(I,E){return fr(I,E)&&I.every((b,T)=>Wn(b.parameters,E[T].parameters))}(I.url,E.url);return b&&!(!I.parent!=!E.parent)&&(!I.parent||lo(I.parent,E.parent))}function Is(I,E,b){if(b&&I.shouldReuseRoute(E.value,b.value.snapshot)){const T=b.value;T._futureSnapshot=E.value;const N=function Lr(I,E,b){return E.children.map(T=>{for(const N of b.children)if(I.shouldReuseRoute(T.value,N.value.snapshot))return Is(I,T,N);return Is(I,T)})}(I,E,b);return new ir(T,N)}{if(I.shouldAttach(E.value)){const U=I.retrieve(E.value);if(null!==U){const W=U.route;return W.value._futureSnapshot=E.value,W.children=E.children.map(ae=>Is(I,ae)),W}}const T=function qo(I){return new Ti(new Qe.X(I.url),new Qe.X(I.params),new Qe.X(I.queryParams),new Qe.X(I.fragment),new Qe.X(I.data),I.outlet,I.component,I)}(E.value),N=E.children.map(U=>Is(I,U));return new ir(T,N)}}function ve(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function pe(I){return"object"==typeof I&&null!=I&&I.outlets}function Le(I,E,b,T,N){let U={};if(T&&Ct(T,(ae,Xe)=>{U[Xe]=Array.isArray(ae)?ae.map(Ft=>`${Ft}`):`${ae}`}),I===E)return new Kt(b,U,N);const W=st(I,E,b);return new Kt(W,U,N)}function st(I,E,b){const T={};return Ct(I.children,(N,U)=>{T[U]=N===E?b:st(N,E,b)}),new Nt(I.segments,T)}class vt{constructor(E,b,T){if(this.isAbsolute=E,this.numberOfDoubleDots=b,this.commands=T,E&&T.length>0&&ve(T[0]))throw new Error("Root segment cannot have matrix parameters");const N=T.find(pe);if(N&&N!==An(T))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qn{constructor(E,b,T){this.segmentGroup=E,this.processChildren=b,this.index=T}}function Hi(I,E,b){if(I||(I=new Nt([],{})),0===I.segments.length&&I.hasChildren())return ts(I,E,b);const T=function Js(I,E,b){let T=0,N=E;const U={match:!1,pathIndex:0,commandIndex:0};for(;N<I.segments.length;){if(T>=b.length)return U;const W=I.segments[N],ae=b[T];if(pe(ae))break;const Xe=`${ae}`,Ft=T<b.length-1?b[T+1]:null;if(N>0&&void 0===Xe)break;if(Xe&&Ft&&"object"==typeof Ft&&void 0===Ft.outlets){if(!ps(Xe,Ft,W))return U;T+=2}else{if(!ps(Xe,{},W))return U;T++}N++}return{match:!0,pathIndex:N,commandIndex:T}}(I,E,b),N=b.slice(T.commandIndex);if(T.match&&T.pathIndex<I.segments.length){const U=new Nt(I.segments.slice(0,T.pathIndex),{});return U.children[Ue]=new Nt(I.segments.slice(T.pathIndex),I.children),ts(U,0,N)}return T.match&&0===N.length?new Nt(I.segments,{}):T.match&&!I.hasChildren()?Gi(I,E,b):T.match?ts(I,0,N):Gi(I,E,b)}function ts(I,E,b){if(0===b.length)return new Nt(I.segments,{});{const T=function Bi(I){return pe(I[0])?I[0].outlets:{[Ue]:I}}(b),N={};return Ct(T,(U,W)=>{"string"==typeof U&&(U=[U]),null!==U&&(N[W]=Hi(I.children[W],E,U))}),Ct(I.children,(U,W)=>{void 0===T[W]&&(N[W]=U)}),new Nt(I.segments,N)}}function Gi(I,E,b){const T=I.segments.slice(0,E);let N=0;for(;N<b.length;){const U=b[N];if(pe(U)){const Xe=Eo(U.outlets);return new Nt(T,Xe)}if(0===N&&ve(b[0])){T.push(new kr(I.segments[E].path,wo(b[0]))),N++;continue}const W=pe(U)?U.outlets[Ue]:`${U}`,ae=N<b.length-1?b[N+1]:null;W&&ae&&ve(ae)?(T.push(new kr(W,wo(ae))),N+=2):(T.push(new kr(W,{})),N++)}return new Nt(T,{})}function Eo(I){const E={};return Ct(I,(b,T)=>{"string"==typeof b&&(b=[b]),null!==b&&(E[T]=Gi(new Nt([],{}),0,b))}),E}function wo(I){const E={};return Ct(I,(b,T)=>E[T]=`${b}`),E}function ps(I,E,b){return I==b.path&&Wn(E,b.parameters)}class xs{constructor(E,b,T,N){this.routeReuseStrategy=E,this.futureState=b,this.currState=T,this.forwardEvent=N}activate(E){const b=this.futureState._root,T=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,T,E),si(this.futureState.root),this.activateChildRoutes(b,T,E)}deactivateChildRoutes(E,b,T){const N=pr(b);E.children.forEach(U=>{const W=U.value.outlet;this.deactivateRoutes(U,N[W],T),delete N[W]}),Ct(N,(U,W)=>{this.deactivateRouteAndItsChildren(U,T)})}deactivateRoutes(E,b,T){const N=E.value,U=b?b.value:null;if(N===U)if(N.component){const W=T.getContext(N.outlet);W&&this.deactivateChildRoutes(E,b,W.children)}else this.deactivateChildRoutes(E,b,T);else U&&this.deactivateRouteAndItsChildren(b,T)}deactivateRouteAndItsChildren(E,b){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,b):this.deactivateRouteAndOutlet(E,b)}detachAndStoreRouteSubtree(E,b){const T=b.getContext(E.value.outlet),N=T&&E.value.component?T.children:b,U=pr(E);for(const W of Object.keys(U))this.deactivateRouteAndItsChildren(U[W],N);if(T&&T.outlet){const W=T.outlet.detach(),ae=T.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:W,route:E,contexts:ae})}}deactivateRouteAndOutlet(E,b){const T=b.getContext(E.value.outlet),N=T&&E.value.component?T.children:b,U=pr(E);for(const W of Object.keys(U))this.deactivateRouteAndItsChildren(U[W],N);T&&T.outlet&&(T.outlet.deactivate(),T.children.onOutletDeactivated(),T.attachRef=null,T.resolver=null,T.route=null)}activateChildRoutes(E,b,T){const N=pr(b);E.children.forEach(U=>{this.activateRoutes(U,N[U.value.outlet],T),this.forwardEvent(new ge(U.value.snapshot))}),E.children.length&&this.forwardEvent(new ds(E.value.snapshot))}activateRoutes(E,b,T){const N=E.value,U=b?b.value:null;if(si(N),N===U)if(N.component){const W=T.getOrCreateContext(N.outlet);this.activateChildRoutes(E,b,W.children)}else this.activateChildRoutes(E,b,T);else if(N.component){const W=T.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const ae=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),W.children.onOutletReAttached(ae.contexts),W.attachRef=ae.componentRef,W.route=ae.route.value,W.outlet&&W.outlet.attach(ae.componentRef,ae.route.value),si(ae.route.value),this.activateChildRoutes(E,null,W.children)}else{const ae=function gs(I){for(let E=I.parent;E;E=E.parent){const b=E.routeConfig;if(b&&b._loadedConfig)return b._loadedConfig;if(b&&b.component)return null}return null}(N.snapshot),Xe=ae?ae.module.componentFactoryResolver:null;W.attachRef=null,W.route=N,W.resolver=Xe,W.outlet&&W.outlet.activateWith(N,Xe),this.activateChildRoutes(E,null,W.children)}}else this.activateChildRoutes(E,null,T)}}class js{constructor(E,b){this.routes=E,this.module=b}}function ms(I){return"function"==typeof I}function Wi(I){return I instanceof Kt}const Ar=Symbol("INITIAL_VALUE");function Dr(){return(0,un.w)(I=>function q(...I){const E=(0,ue.yG)(I),b=(0,ue.jO)(I),{args:T,keys:N}=(0,Z.D)(I);if(0===T.length)return(0,de.D)([],E);const U=new A.y(function le(I,E,b=ce.y){return T=>{ot(E,()=>{const{length:N}=I,U=new Array(N);let W=N,ae=N;for(let Xe=0;Xe<N;Xe++)ot(E,()=>{const Ft=(0,de.D)(I[Xe],E);let dn=!1;Ft.subscribe((0,ie.x)(T,Qt=>{U[Xe]=Qt,dn||(dn=!0,ae--),ae||T.next(b(U.slice()))},()=>{--W||T.complete()}))},T)},T)}}(T,E,N?W=>(0,he.n)(N,W):ce.y));return b?U.pipe((0,_e.Z)(b)):U}(I.map(E=>E.pipe((0,ur.q)(1),(0,Vt.O)(Ar)))).pipe((0,Pt.R)((E,b)=>{let T=!1;return b.reduce((N,U,W)=>N!==Ar?N:(U===Ar&&(T=!0),T||!1!==U&&W!==b.length-1&&!Wi(U)?N:U),E)},Ar),(0,we.h)(E=>E!==Ar),(0,It.U)(E=>Wi(E)?E:!0===E),(0,ur.q)(1)))}class da{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new qi,this.attachRef=null}}class qi{constructor(){this.contexts=new Map}onChildOutletCreated(E,b){const T=this.getOrCreateContext(E);T.outlet=b,this.contexts.set(E,T)}onChildOutletDestroyed(E){const b=this.getContext(E);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let b=this.getContext(E);return b||(b=new da,this.contexts.set(E,b)),b}getContext(E){return this.contexts.get(E)||null}}let zs=(()=>{class I{constructor(b,T,N,U,W){this.parentContexts=b,this.location=T,this.resolver=N,this.changeDetector=W,this.activated=null,this._activatedRoute=null,this.activateEvents=new M.vpe,this.deactivateEvents=new M.vpe,this.attachEvents=new M.vpe,this.detachEvents=new M.vpe,this.name=U||Ue,b.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const b=this.parentContexts.getContext(this.name);b&&b.route&&(b.attachRef?this.attach(b.attachRef,b.route):this.activateWith(b.route,b.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const b=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(b.instance),b}attach(b,T){this.activated=b,this._activatedRoute=T,this.location.insert(b.hostView),this.attachEvents.emit(b.instance)}deactivate(){if(this.activated){const b=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,T){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=b;const W=(T=T||this.resolver).resolveComponentFactory(b._futureSnapshot.routeConfig.component),ae=this.parentContexts.getOrCreateContext(this.name).children,Xe=new Hs(b,ae,this.location.injector);this.activated=this.location.createComponent(W,this.location.length,Xe),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(b){return new(b||I)(M.Y36(qi),M.Y36(M.s_b),M.Y36(M._Vd),M.$8M("name"),M.Y36(M.sBO))},I.\u0275dir=M.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),I})();class Hs{constructor(E,b,T){this.route=E,this.childContexts=b,this.parent=T}get(E,b){return E===Ti?this.route:E===qi?this.childContexts:this.parent.get(E,b)}}let ns=(()=>{class I{}return I.\u0275fac=function(b){return new(b||I)},I.\u0275cmp=M.Xpm({type:I,selectors:[["ng-component"]],decls:1,vars:0,template:function(b,T){1&b&&M._UZ(0,"router-outlet")},directives:[zs],encapsulation:2}),I})();function ys(I,E=""){for(let b=0;b<I.length;b++){const T=I[b];co(T,Ds(E,T))}}function co(I,E){I.children&&ys(I.children,E)}function Ds(I,E){return E?I||E.path?I&&!E.path?`${I}/`:!I&&E.path?E.path:`${I}/${E.path}`:"":I}function Kn(I){const E=I.children&&I.children.map(Kn),b=E?Object.assign(Object.assign({},I),{children:E}):Object.assign({},I);return!b.component&&(E||b.loadChildren)&&b.outlet&&b.outlet!==Ue&&(b.component=ns),b}function R(I){return I.outlet||Ue}function G(I,E){const b=I.filter(T=>R(T)===E);return b.push(...I.filter(T=>R(T)!==E)),b}const k={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Y(I,E,b){var T;if(""===E.path)return"full"===E.pathMatch&&(I.hasChildren()||b.length>0)?Object.assign({},k):{matched:!0,consumedSegments:[],remainingSegments:b,parameters:{},positionalParamSegments:{}};const U=(E.matcher||Xt)(b,I,E);if(!U)return Object.assign({},k);const W={};Ct(U.posParams,(Xe,Ft)=>{W[Ft]=Xe.path});const ae=U.consumed.length>0?Object.assign(Object.assign({},W),U.consumed[U.consumed.length-1].parameters):W;return{matched:!0,consumedSegments:U.consumed,remainingSegments:b.slice(U.consumed.length),parameters:ae,positionalParamSegments:null!==(T=U.posParams)&&void 0!==T?T:{}}}function oe(I,E,b,T,N="corrected"){if(b.length>0&&function At(I,E,b){return b.some(T=>kn(I,E,T)&&R(T)!==Ue)}(I,b,T)){const W=new Nt(E,function ut(I,E,b,T){const N={};N[Ue]=T,T._sourceSegment=I,T._segmentIndexShift=E.length;for(const U of b)if(""===U.path&&R(U)!==Ue){const W=new Nt([],{});W._sourceSegment=I,W._segmentIndexShift=E.length,N[R(U)]=W}return N}(I,E,T,new Nt(b,I.children)));return W._sourceSegment=I,W._segmentIndexShift=E.length,{segmentGroup:W,slicedSegments:[]}}if(0===b.length&&function Dn(I,E,b){return b.some(T=>kn(I,E,T))}(I,b,T)){const W=new Nt(I.segments,function He(I,E,b,T,N,U){const W={};for(const ae of T)if(kn(I,b,ae)&&!N[R(ae)]){const Xe=new Nt([],{});Xe._sourceSegment=I,Xe._segmentIndexShift="legacy"===U?I.segments.length:E.length,W[R(ae)]=Xe}return Object.assign(Object.assign({},N),W)}(I,E,b,T,I.children,N));return W._sourceSegment=I,W._segmentIndexShift=E.length,{segmentGroup:W,slicedSegments:b}}const U=new Nt(I.segments,I.children);return U._sourceSegment=I,U._segmentIndexShift=E.length,{segmentGroup:U,slicedSegments:b}}function kn(I,E,b){return(!(I.hasChildren()||E.length>0)||"full"!==b.pathMatch)&&""===b.path}function Nn(I,E,b,T){return!!(R(I)===T||T!==Ue&&kn(E,b,I))&&("**"===I.path||Y(E,I,b).matched)}function Fn(I,E,b){return 0===E.length&&!I.children[b]}class Mr{constructor(E){this.segmentGroup=E||null}}class wr{constructor(E){this.urlTree=E}}function ar(I){return(0,je._)(new Mr(I))}function Ps(I){return(0,je._)(new wr(I))}class uo{constructor(E,b,T,N,U){this.configLoader=b,this.urlSerializer=T,this.urlTree=N,this.config=U,this.allowRedirects=!0,this.ngModule=E.get(M.h0i)}apply(){const E=oe(this.urlTree.root,[],[],this.config).segmentGroup,b=new Nt(E.segments,E.children);return this.expandSegmentGroup(this.ngModule,this.config,b,Ue).pipe((0,It.U)(U=>this.createUrlTree(Yi(U),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,mn.K)(U=>{if(U instanceof wr)return this.allowRedirects=!1,this.match(U.urlTree);throw U instanceof Mr?this.noMatchError(U):U}))}match(E){return this.expandSegmentGroup(this.ngModule,this.config,E.root,Ue).pipe((0,It.U)(N=>this.createUrlTree(Yi(N),E.queryParams,E.fragment))).pipe((0,mn.K)(N=>{throw N instanceof Mr?this.noMatchError(N):N}))}noMatchError(E){return new Error(`Cannot match any routes. URL Segment: '${E.segmentGroup}'`)}createUrlTree(E,b,T){const N=E.segments.length>0?new Nt([],{[Ue]:E}):E;return new Kt(N,b,T)}expandSegmentGroup(E,b,T,N){return 0===T.segments.length&&T.hasChildren()?this.expandChildren(E,b,T).pipe((0,It.U)(U=>new Nt([],U))):this.expandSegment(E,T,b,T.segments,N,!0)}expandChildren(E,b,T){const N=[];for(const U of Object.keys(T.children))"primary"===U?N.unshift(U):N.push(U);return(0,de.D)(N).pipe((0,qt.b)(U=>{const W=T.children[U],ae=G(b,U);return this.expandSegmentGroup(E,ae,W,U).pipe((0,It.U)(Xe=>({segment:Xe,outlet:U})))}),(0,Pt.R)((U,W)=>(U[W.outlet]=W.segment,U),{}),function et(I,E){const b=arguments.length>=2;return T=>T.pipe(I?(0,we.h)((N,U)=>I(N,U,T)):ce.y,Ee(1),b?(0,Ne.d)(E):(0,ke.T)(()=>new Re.K))}())}expandSegment(E,b,T,N,U,W){return(0,de.D)(T).pipe((0,qt.b)(ae=>this.expandSegmentAgainstRoute(E,b,T,ae,N,U,W).pipe((0,mn.K)(Ft=>{if(Ft instanceof Mr)return(0,it.of)(null);throw Ft}))),(0,dr.P)(ae=>!!ae),(0,mn.K)((ae,Xe)=>{if(ae instanceof Re.K||"EmptyError"===ae.name)return Fn(b,N,U)?(0,it.of)(new Nt([],{})):ar(b);throw ae}))}expandSegmentAgainstRoute(E,b,T,N,U,W,ae){return Nn(N,b,U,W)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(E,b,N,U,W):ae&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,b,T,N,U,W):ar(b):ar(b)}expandSegmentAgainstRouteUsingRedirect(E,b,T,N,U,W){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,T,N,W):this.expandRegularSegmentAgainstRouteUsingRedirect(E,b,T,N,U,W)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,b,T,N){const U=this.applyRedirectCommands([],T.redirectTo,{});return T.redirectTo.startsWith("/")?Ps(U):this.lineralizeSegments(T,U).pipe((0,Gt.z)(W=>{const ae=new Nt(W,{});return this.expandSegment(E,ae,b,W,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,b,T,N,U,W){const{matched:ae,consumedSegments:Xe,remainingSegments:Ft,positionalParamSegments:dn}=Y(b,N,U);if(!ae)return ar(b);const Qt=this.applyRedirectCommands(Xe,N.redirectTo,dn);return N.redirectTo.startsWith("/")?Ps(Qt):this.lineralizeSegments(N,Qt).pipe((0,Gt.z)(cr=>this.expandSegment(E,b,T,cr.concat(Ft),W,!1)))}matchSegmentAgainstRoute(E,b,T,N,U){if("**"===T.path)return T.loadChildren?(T._loadedConfig?(0,it.of)(T._loadedConfig):this.configLoader.load(E.injector,T)).pipe((0,It.U)(Qt=>(T._loadedConfig=Qt,new Nt(N,{})))):(0,it.of)(new Nt(N,{}));const{matched:W,consumedSegments:ae,remainingSegments:Xe}=Y(b,T,N);return W?this.getChildConfig(E,T,N).pipe((0,Gt.z)(dn=>{const Qt=dn.module,cr=dn.routes,{segmentGroup:gr,slicedSegments:ii}=oe(b,ae,Xe,cr),Ws=new Nt(gr.segments,gr.children);if(0===ii.length&&Ws.hasChildren())return this.expandChildren(Qt,cr,Ws).pipe((0,It.U)(xo=>new Nt(ae,xo)));if(0===cr.length&&0===ii.length)return(0,it.of)(new Nt(ae,{}));const Bo=R(T)===U;return this.expandSegment(Qt,Ws,cr,ii,Bo?Ue:U,!0).pipe((0,It.U)(os=>new Nt(ae.concat(os.segments),os.children)))})):ar(b)}getChildConfig(E,b,T){return b.children?(0,it.of)(new js(b.children,E)):b.loadChildren?void 0!==b._loadedConfig?(0,it.of)(b._loadedConfig):this.runCanLoadGuards(E.injector,b,T).pipe((0,Gt.z)(N=>N?this.configLoader.load(E.injector,b).pipe((0,It.U)(U=>(b._loadedConfig=U,U))):function Yt(I){return(0,je._)(En(`Cannot load children because the guard of the route "path: '${I.path}'" returned false`))}(b))):(0,it.of)(new js([],E))}runCanLoadGuards(E,b,T){const N=b.canLoad;if(!N||0===N.length)return(0,it.of)(!0);const U=N.map(W=>{const ae=E.get(W);let Xe;if(function Ki(I){return I&&ms(I.canLoad)}(ae))Xe=ae.canLoad(b,T);else{if(!ms(ae))throw new Error("Invalid CanLoad guard");Xe=ae(b,T)}return Ze(Xe)});return(0,it.of)(U).pipe(Dr(),(0,mr.b)(W=>{if(!Wi(W))return;const ae=En(`Redirecting to "${this.urlSerializer.serialize(W)}"`);throw ae.url=W,ae}),(0,It.U)(W=>!0===W))}lineralizeSegments(E,b){let T=[],N=b.root;for(;;){if(T=T.concat(N.segments),0===N.numberOfChildren)return(0,it.of)(T);if(N.numberOfChildren>1||!N.children[Ue])return(0,je._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${E.redirectTo}'`));N=N.children[Ue]}}applyRedirectCommands(E,b,T){return this.applyRedirectCreatreUrlTree(b,this.urlSerializer.parse(b),E,T)}applyRedirectCreatreUrlTree(E,b,T,N){const U=this.createSegmentGroup(E,b.root,T,N);return new Kt(U,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(E,b){const T={};return Ct(E,(N,U)=>{if("string"==typeof N&&N.startsWith(":")){const ae=N.substring(1);T[U]=b[ae]}else T[U]=N}),T}createSegmentGroup(E,b,T,N){const U=this.createSegments(E,b.segments,T,N);let W={};return Ct(b.children,(ae,Xe)=>{W[Xe]=this.createSegmentGroup(E,ae,T,N)}),new Nt(U,W)}createSegments(E,b,T,N){return b.map(U=>U.path.startsWith(":")?this.findPosParam(E,U,N):this.findOrReturn(U,T))}findPosParam(E,b,T){const N=T[b.path.substring(1)];if(!N)throw new Error(`Cannot redirect to '${E}'. Cannot find '${b.path}'.`);return N}findOrReturn(E,b){let T=0;for(const N of b){if(N.path===E.path)return b.splice(T),N;T++}return E}}function Yi(I){const E={};for(const T of Object.keys(I.children)){const U=Yi(I.children[T]);(U.segments.length>0||U.hasChildren())&&(E[T]=U)}return function Mo(I){if(1===I.numberOfChildren&&I.children[Ue]){const E=I.children[Ue];return new Nt(I.segments.concat(E.segments),E.children)}return I}(new Nt(I.segments,E))}class Na{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class ko{constructor(E,b){this.component=E,this.route=b}}function dt(I,E,b){const T=I._root;return to(T,E?E._root:null,b,[T.value])}function Oo(I,E,b){const T=function Ur(I){if(!I)return null;for(let E=I.parent;E;E=E.parent){const b=E.routeConfig;if(b&&b._loadedConfig)return b._loadedConfig}return null}(E);return(T?T.module.injector:b).get(I)}function to(I,E,b,T,N={canDeactivateChecks:[],canActivateChecks:[]}){const U=pr(E);return I.children.forEach(W=>{(function Zo(I,E,b,T,N={canDeactivateChecks:[],canActivateChecks:[]}){const U=I.value,W=E?E.value:null,ae=b?b.getContext(I.value.outlet):null;if(W&&U.routeConfig===W.routeConfig){const Xe=function Zi(I,E,b){if("function"==typeof b)return b(I,E);switch(b){case"pathParamsChange":return!fr(I.url,E.url);case"pathParamsOrQueryParamsChange":return!fr(I.url,E.url)||!Wn(I.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lo(I,E)||!Wn(I.queryParams,E.queryParams);default:return!lo(I,E)}}(W,U,U.routeConfig.runGuardsAndResolvers);Xe?N.canActivateChecks.push(new Na(T)):(U.data=W.data,U._resolvedData=W._resolvedData),to(I,E,U.component?ae?ae.children:null:b,T,N),Xe&&ae&&ae.outlet&&ae.outlet.isActivated&&N.canDeactivateChecks.push(new ko(ae.outlet.component,W))}else W&&Xr(E,ae,N),N.canActivateChecks.push(new Na(T)),to(I,null,U.component?ae?ae.children:null:b,T,N)})(W,U[W.value.outlet],b,T.concat([W.value]),N),delete U[W.value.outlet]}),Ct(U,(W,ae)=>Xr(W,b.getContext(ae),N)),N}function Xr(I,E,b){const T=pr(I),N=I.value;Ct(T,(U,W)=>{Xr(U,N.component?E?E.children.getContext(W):null:E,b)}),b.canDeactivateChecks.push(new ko(N.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,N))}class Ts{}function Oi(I){return new A.y(E=>E.error(I))}class Gr{constructor(E,b,T,N,U,W){this.rootComponentType=E,this.config=b,this.urlTree=T,this.url=N,this.paramsInheritanceStrategy=U,this.relativeLinkResolution=W}recognize(){const E=oe(this.urlTree.root,[],[],this.config.filter(W=>void 0===W.redirectTo),this.relativeLinkResolution).segmentGroup,b=this.processSegmentGroup(this.config,E,Ue);if(null===b)return null;const T=new ni([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ue,this.rootComponentType,null,this.urlTree.root,-1,{}),N=new ir(T,b),U=new Ao(this.url,N);return this.inheritParamsAndData(U._root),U}inheritParamsAndData(E){const b=E.value,T=Vi(b,this.paramsInheritanceStrategy);b.params=Object.freeze(T.params),b.data=Object.freeze(T.data),E.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(E,b,T){return 0===b.segments.length&&b.hasChildren()?this.processChildren(E,b):this.processSegment(E,b,b.segments,T)}processChildren(E,b){const T=[];for(const U of Object.keys(b.children)){const W=b.children[U],ae=G(E,U),Xe=this.processSegmentGroup(ae,W,U);if(null===Xe)return null;T.push(...Xe)}const N=Io(T);return function ha(I){I.sort((E,b)=>E.value.outlet===Ue?-1:b.value.outlet===Ue?1:E.value.outlet.localeCompare(b.value.outlet))}(N),N}processSegment(E,b,T,N){for(const U of E){const W=this.processSegmentAgainstRoute(U,b,T,N);if(null!==W)return W}return Fn(b,T,N)?[]:null}processSegmentAgainstRoute(E,b,T,N){if(E.redirectTo||!Nn(E,b,T,N))return null;let U,W=[],ae=[];if("**"===E.path){const gr=T.length>0?An(T).parameters:{};U=new ni(T,gr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xo(E),R(E),E.component,E,pa(b),Jo(b)+T.length,Gs(E))}else{const gr=Y(b,E,T);if(!gr.matched)return null;W=gr.consumedSegments,ae=gr.remainingSegments,U=new ni(W,gr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xo(E),R(E),E.component,E,pa(b),Jo(b)+W.length,Gs(E))}const Xe=function Wa(I){return I.children?I.children:I.loadChildren?I._loadedConfig.routes:[]}(E),{segmentGroup:Ft,slicedSegments:dn}=oe(b,W,ae,Xe.filter(gr=>void 0===gr.redirectTo),this.relativeLinkResolution);if(0===dn.length&&Ft.hasChildren()){const gr=this.processChildren(Xe,Ft);return null===gr?null:[new ir(U,gr)]}if(0===Xe.length&&0===dn.length)return[new ir(U,[])];const Qt=R(E)===N,cr=this.processSegment(Xe,Ft,dn,Qt?Ue:N);return null===cr?null:[new ir(U,cr)]}}function fa(I){const E=I.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function Io(I){const E=[],b=new Set;for(const T of I){if(!fa(T)){E.push(T);continue}const N=E.find(U=>T.value.routeConfig===U.value.routeConfig);void 0!==N?(N.children.push(...T.children),b.add(N)):E.push(T)}for(const T of b){const N=Io(T.children);E.push(new ir(T.value,N))}return E.filter(T=>!b.has(T))}function pa(I){let E=I;for(;E._sourceSegment;)E=E._sourceSegment;return E}function Jo(I){let E=I,b=E._segmentIndexShift?E._segmentIndexShift:0;for(;E._sourceSegment;)E=E._sourceSegment,b+=E._segmentIndexShift?E._segmentIndexShift:0;return b-1}function Xo(I){return I.data||{}}function Gs(I){return I.resolve||{}}function ho(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}function Fo(I){return(0,un.w)(E=>{const b=I(E);return b?(0,de.D)(b).pipe((0,It.U)(()=>E)):(0,it.of)(E)})}class oi extends class fo{shouldDetach(E){return!1}store(E,b){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,b){return E.routeConfig===b.routeConfig}}{}const ta=new M.OlP("ROUTES");class Ya{constructor(E,b,T,N){this.injector=E,this.compiler=b,this.onLoadStartListener=T,this.onLoadEndListener=N}load(E,b){if(b._loader$)return b._loader$;this.onLoadStartListener&&this.onLoadStartListener(b);const N=this.loadModuleFactory(b.loadChildren).pipe((0,It.U)(U=>{this.onLoadEndListener&&this.onLoadEndListener(b);const W=U.create(E);return new js(Ot(W.injector.get(ta,void 0,M.XFs.Self|M.XFs.Optional)).map(Kn),W)}),(0,mn.K)(U=>{throw b._loader$=void 0,U}));return b._loader$=new Me(N,()=>new se.x).pipe($e()),b._loader$}loadModuleFactory(E){return Ze(E()).pipe((0,Gt.z)(b=>b instanceof M.YKP?(0,it.of)(b):(0,de.D)(this.compiler.compileModuleAsync(b))))}}class La{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,b){return E}}function nn(I){throw I}function Pr(I,E,b){return E.parse("/")}function ai(I,E){return(0,it.of)(null)}const po={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Lo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let lr=(()=>{class I{constructor(b,T,N,U,W,ae,Xe){this.rootComponentType=b,this.urlSerializer=T,this.rootContexts=N,this.location=U,this.config=Xe,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new se.x,this.errorHandler=nn,this.malformedUriErrorHandler=Pr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ai,afterPreactivation:ai},this.urlHandlingStrategy=new La,this.routeReuseStrategy=new oi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=W.get(M.h0i),this.console=W.get(M.c2e);const Qt=W.get(M.R0b);this.isNgZoneEnabled=Qt instanceof M.R0b&&M.R0b.isInAngularZone(),this.resetConfig(Xe),this.currentUrlTree=function Bt(){return new Kt(new Nt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ya(W,ae,cr=>this.triggerEvent(new Tr(cr)),cr=>this.triggerEvent(new Er(cr))),this.routerState=bi(this.currentUrlTree,this.rootComponentType),this.transitions=new Qe.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var b;return null===(b=this.location.getState())||void 0===b?void 0:b.\u0275routerPageId}setupNavigations(b){const T=this.events;return b.pipe((0,we.h)(N=>0!==N.id),(0,It.U)(N=>Object.assign(Object.assign({},N),{extractedUrl:this.urlHandlingStrategy.extract(N.rawUrl)})),(0,un.w)(N=>{let U=!1,W=!1;return(0,it.of)(N).pipe((0,mr.b)(ae=>{this.currentNavigation={id:ae.id,initialUrl:ae.currentRawUrl,extractedUrl:ae.extractedUrl,trigger:ae.source,extras:ae.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,un.w)(ae=>{const Xe=this.browserUrlTree.toString(),Ft=!this.navigated||ae.extractedUrl.toString()!==Xe||Xe!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Ft)&&this.urlHandlingStrategy.shouldProcessUrl(ae.rawUrl))return Za(ae.source)&&(this.browserUrlTree=ae.extractedUrl),(0,it.of)(ae).pipe((0,un.w)(Qt=>{const cr=this.transitions.getValue();return T.next(new yr(Qt.id,this.serializeUrl(Qt.extractedUrl),Qt.source,Qt.restoredState)),cr!==this.transitions.getValue()?pt.E:Promise.resolve(Qt)}),function Yo(I,E,b,T){return(0,un.w)(N=>function eo(I,E,b,T,N){return new uo(I,E,b,T,N).apply()}(I,E,b,N.extractedUrl,T).pipe((0,It.U)(U=>Object.assign(Object.assign({},N),{urlAfterRedirects:U}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,mr.b)(Qt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Qt.urlAfterRedirects})}),function ea(I,E,b,T,N){return(0,Gt.z)(U=>function Fa(I,E,b,T,N="emptyOnly",U="legacy"){try{const W=new Gr(I,E,b,T,N,U).recognize();return null===W?Oi(new Ts):(0,it.of)(W)}catch(W){return Oi(W)}}(I,E,U.urlAfterRedirects,b(U.urlAfterRedirects),T,N).pipe((0,It.U)(W=>Object.assign(Object.assign({},U),{targetSnapshot:W}))))}(this.rootComponentType,this.config,Qt=>this.serializeUrl(Qt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,mr.b)(Qt=>{if("eager"===this.urlUpdateStrategy){if(!Qt.extras.skipLocationChange){const gr=this.urlHandlingStrategy.merge(Qt.urlAfterRedirects,Qt.rawUrl);this.setBrowserUrl(gr,Qt)}this.browserUrlTree=Qt.urlAfterRedirects}const cr=new $n(Qt.id,this.serializeUrl(Qt.extractedUrl),this.serializeUrl(Qt.urlAfterRedirects),Qt.targetSnapshot);T.next(cr)}));if(Ft&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:cr,extractedUrl:gr,source:ii,restoredState:Ws,extras:Bo}=ae,Ni=new yr(cr,this.serializeUrl(gr),ii,Ws);T.next(Ni);const os=bi(gr,this.rootComponentType).snapshot;return(0,it.of)(Object.assign(Object.assign({},ae),{targetSnapshot:os,urlAfterRedirects:gr,extras:Object.assign(Object.assign({},Bo),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ae.rawUrl,ae.resolve(null),pt.E}),Fo(ae=>{const{targetSnapshot:Xe,id:Ft,extractedUrl:dn,rawUrl:Qt,extras:{skipLocationChange:cr,replaceUrl:gr}}=ae;return this.hooks.beforePreactivation(Xe,{navigationId:Ft,appliedUrlTree:dn,rawUrlTree:Qt,skipLocationChange:!!cr,replaceUrl:!!gr})}),(0,mr.b)(ae=>{const Xe=new zn(ae.id,this.serializeUrl(ae.extractedUrl),this.serializeUrl(ae.urlAfterRedirects),ae.targetSnapshot);this.triggerEvent(Xe)}),(0,It.U)(ae=>Object.assign(Object.assign({},ae),{guards:dt(ae.targetSnapshot,ae.currentSnapshot,this.rootContexts)})),function Ha(I,E){return(0,Gt.z)(b=>{const{targetSnapshot:T,currentSnapshot:N,guards:{canActivateChecks:U,canDeactivateChecks:W}}=b;return 0===W.length&&0===U.length?(0,it.of)(Object.assign(Object.assign({},b),{guardsResult:!0})):function pl(I,E,b,T){return(0,de.D)(I).pipe((0,Gt.z)(N=>function No(I,E,b,T,N){const U=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!U||0===U.length)return(0,it.of)(!0);const W=U.map(ae=>{const Xe=Oo(ae,E,N);let Ft;if(function $s(I){return I&&ms(I.canDeactivate)}(Xe))Ft=Ze(Xe.canDeactivate(I,E,b,T));else{if(!ms(Xe))throw new Error("Invalid CanDeactivate guard");Ft=Ze(Xe(I,E,b,T))}return Ft.pipe((0,dr.P)())});return(0,it.of)(W).pipe(Dr())}(N.component,N.route,b,E,T)),(0,dr.P)(N=>!0!==N,!0))}(W,T,N,I).pipe((0,Gt.z)(ae=>ae&&function ka(I){return"boolean"==typeof I}(ae)?function Ga(I,E,b,T){return(0,de.D)(E).pipe((0,qt.b)(N=>(0,Mt.z)(function Ss(I,E){return null!==I&&E&&E(new fi(I)),(0,it.of)(!0)}(N.route.parent,T),function Qo(I,E){return null!==I&&E&&E(new Ye(I)),(0,it.of)(!0)}(N.route,T),function rs(I,E,b){const T=E[E.length-1],U=E.slice(0,E.length-1).reverse().map(W=>function qn(I){const E=I.routeConfig?I.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:I,guards:E}:null}(W)).filter(W=>null!==W).map(W=>rt(()=>{const ae=W.guards.map(Xe=>{const Ft=Oo(Xe,W.node,b);let dn;if(function Xs(I){return I&&ms(I.canActivateChild)}(Ft))dn=Ze(Ft.canActivateChild(T,I));else{if(!ms(Ft))throw new Error("Invalid CanActivateChild guard");dn=Ze(Ft(T,I))}return dn.pipe((0,dr.P)())});return(0,it.of)(ae).pipe(Dr())}));return(0,it.of)(U).pipe(Dr())}(I,N.path,b),function Mi(I,E,b){const T=E.routeConfig?E.routeConfig.canActivate:null;if(!T||0===T.length)return(0,it.of)(!0);const N=T.map(U=>rt(()=>{const W=Oo(U,E,b);let ae;if(function wi(I){return I&&ms(I.canActivate)}(W))ae=Ze(W.canActivate(E,I));else{if(!ms(W))throw new Error("Invalid CanActivate guard");ae=Ze(W(E,I))}return ae.pipe((0,dr.P)())}));return(0,it.of)(N).pipe(Dr())}(I,N.route,b))),(0,dr.P)(N=>!0!==N,!0))}(T,U,I,E):(0,it.of)(ae)),(0,It.U)(ae=>Object.assign(Object.assign({},b),{guardsResult:ae})))})}(this.ngModule.injector,ae=>this.triggerEvent(ae)),(0,mr.b)(ae=>{if(Wi(ae.guardsResult)){const Ft=En(`Redirecting to "${this.serializeUrl(ae.guardsResult)}"`);throw Ft.url=ae.guardsResult,Ft}const Xe=new Hn(ae.id,this.serializeUrl(ae.extractedUrl),this.serializeUrl(ae.urlAfterRedirects),ae.targetSnapshot,!!ae.guardsResult);this.triggerEvent(Xe)}),(0,we.h)(ae=>!!ae.guardsResult||(this.restoreHistory(ae),this.cancelNavigationTransition(ae,""),!1)),Fo(ae=>{if(ae.guards.canActivateChecks.length)return(0,it.of)(ae).pipe((0,mr.b)(Xe=>{const Ft=new Ht(Xe.id,this.serializeUrl(Xe.extractedUrl),this.serializeUrl(Xe.urlAfterRedirects),Xe.targetSnapshot);this.triggerEvent(Ft)}),(0,un.w)(Xe=>{let Ft=!1;return(0,it.of)(Xe).pipe(function Ai(I,E){return(0,Gt.z)(b=>{const{targetSnapshot:T,guards:{canActivateChecks:N}}=b;if(!N.length)return(0,it.of)(b);let U=0;return(0,de.D)(N).pipe((0,qt.b)(W=>function ga(I,E,b,T){return function qa(I,E,b,T){const N=ho(I);if(0===N.length)return(0,it.of)({});const U={};return(0,de.D)(N).pipe((0,Gt.z)(W=>function ma(I,E,b,T){const N=Oo(I,E,T);return Ze(N.resolve?N.resolve(E,b):N(E,b))}(I[W],E,b,T).pipe((0,mr.b)(ae=>{U[W]=ae}))),Ee(1),(0,Gt.z)(()=>ho(U).length===N.length?(0,it.of)(U):pt.E))}(I._resolve,I,E,T).pipe((0,It.U)(U=>(I._resolvedData=U,I.data=Object.assign(Object.assign({},I.data),Vi(I,b).resolve),null)))}(W.route,T,I,E)),(0,mr.b)(()=>U++),Ee(1),(0,Gt.z)(W=>U===N.length?(0,it.of)(b):pt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,mr.b)({next:()=>Ft=!0,complete:()=>{Ft||(this.restoreHistory(Xe),this.cancelNavigationTransition(Xe,"At least one route resolver didn't emit any value."))}}))}),(0,mr.b)(Xe=>{const Ft=new Yr(Xe.id,this.serializeUrl(Xe.extractedUrl),this.serializeUrl(Xe.urlAfterRedirects),Xe.targetSnapshot);this.triggerEvent(Ft)}))}),Fo(ae=>{const{targetSnapshot:Xe,id:Ft,extractedUrl:dn,rawUrl:Qt,extras:{skipLocationChange:cr,replaceUrl:gr}}=ae;return this.hooks.afterPreactivation(Xe,{navigationId:Ft,appliedUrlTree:dn,rawUrlTree:Qt,skipLocationChange:!!cr,replaceUrl:!!gr})}),(0,It.U)(ae=>{const Xe=function fs(I,E,b){const T=Is(I,E._root,b?b._root:void 0);return new Si(T,E)}(this.routeReuseStrategy,ae.targetSnapshot,ae.currentRouterState);return Object.assign(Object.assign({},ae),{targetRouterState:Xe})}),(0,mr.b)(ae=>{this.currentUrlTree=ae.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ae.urlAfterRedirects,ae.rawUrl),this.routerState=ae.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ae.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ae),this.browserUrlTree=ae.urlAfterRedirects)}),((I,E,b)=>(0,It.U)(T=>(new xs(E,T.targetRouterState,T.currentRouterState,b).activate(I),T)))(this.rootContexts,this.routeReuseStrategy,ae=>this.triggerEvent(ae)),(0,mr.b)({next(){U=!0},complete(){U=!0}}),function Fe(I){return(0,Pe.e)((E,b)=>{try{E.subscribe(b)}finally{b.add(I)}})}(()=>{var ae;U||W||this.cancelNavigationTransition(N,`Navigation ID ${N.id} is not equal to the current navigation id ${this.navigationId}`),(null===(ae=this.currentNavigation)||void 0===ae?void 0:ae.id)===N.id&&(this.currentNavigation=null)}),(0,mn.K)(ae=>{if(W=!0,function ln(I){return I&&I[St]}(ae)){const Xe=Wi(ae.url);Xe||(this.navigated=!0,this.restoreHistory(N,!0));const Ft=new sr(N.id,this.serializeUrl(N.extractedUrl),ae.message);T.next(Ft),Xe?setTimeout(()=>{const dn=this.urlHandlingStrategy.merge(ae.url,this.rawUrlTree),Qt={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Za(N.source)};this.scheduleNavigation(dn,"imperative",null,Qt,{resolve:N.resolve,reject:N.reject,promise:N.promise})},0):N.resolve(!1)}else{this.restoreHistory(N,!0);const Xe=new qr(N.id,this.serializeUrl(N.extractedUrl),ae);T.next(Xe);try{N.resolve(this.errorHandler(ae))}catch(Ft){N.reject(Ft)}}return pt.E}))}))}resetRootComponentType(b){this.rootComponentType=b,this.routerState.root.component=this.rootComponentType}setTransition(b){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),b))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(b=>{const T="popstate"===b.type?"popstate":"hashchange";"popstate"===T&&setTimeout(()=>{var N;const U={replaceUrl:!0},W=(null===(N=b.state)||void 0===N?void 0:N.navigationId)?b.state:null;if(W){const Xe=Object.assign({},W);delete Xe.navigationId,delete Xe.\u0275routerPageId,0!==Object.keys(Xe).length&&(U.state=Xe)}const ae=this.parseUrl(b.url);this.scheduleNavigation(ae,T,W,U)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(b){this.events.next(b)}resetConfig(b){ys(b),this.config=b.map(Kn),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(b,T={}){const{relativeTo:N,queryParams:U,fragment:W,queryParamsHandling:ae,preserveFragment:Xe}=T,Ft=N||this.routerState.root,dn=Xe?this.currentUrlTree.fragment:W;let Qt=null;switch(ae){case"merge":Qt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),U);break;case"preserve":Qt=this.currentUrlTree.queryParams;break;default:Qt=U||null}return null!==Qt&&(Qt=this.removeEmptyProps(Qt)),function Ro(I,E,b,T,N){if(0===b.length)return Le(E.root,E.root,E.root,T,N);const U=function Zt(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new vt(!0,0,I);let E=0,b=!1;const T=I.reduce((N,U,W)=>{if("object"==typeof U&&null!=U){if(U.outlets){const ae={};return Ct(U.outlets,(Xe,Ft)=>{ae[Ft]="string"==typeof Xe?Xe.split("/"):Xe}),[...N,{outlets:ae}]}if(U.segmentPath)return[...N,U.segmentPath]}return"string"!=typeof U?[...N,U]:0===W?(U.split("/").forEach((ae,Xe)=>{0==Xe&&"."===ae||(0==Xe&&""===ae?b=!0:".."===ae?E++:""!=ae&&N.push(ae))}),N):[...N,U]},[]);return new vt(b,E,T)}(b);if(U.toRoot())return Le(E.root,E.root,new Nt([],{}),T,N);const W=function Jr(I,E,b){if(I.isAbsolute)return new Qn(E.root,!0,0);if(-1===b.snapshot._lastPathIndex){const U=b.snapshot._urlSegment;return new Qn(U,U===E.root,0)}const T=ve(I.commands[0])?0:1;return function Gn(I,E,b){let T=I,N=E,U=b;for(;U>N;){if(U-=N,T=T.parent,!T)throw new Error("Invalid number of '../'");N=T.segments.length}return new Qn(T,!1,N-U)}(b.snapshot._urlSegment,b.snapshot._lastPathIndex+T,I.numberOfDoubleDots)}(U,E,I),ae=W.processChildren?ts(W.segmentGroup,W.index,U.commands):Hi(W.segmentGroup,W.index,U.commands);return Le(E.root,W.segmentGroup,ae,T,N)}(Ft,this.currentUrlTree,b,Qt,null!=dn?dn:null)}navigateByUrl(b,T={skipLocationChange:!1}){const N=Wi(b)?b:this.parseUrl(b),U=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(U,"imperative",null,T)}navigate(b,T={skipLocationChange:!1}){return function ya(I){for(let E=0;E<I.length;E++){const b=I[E];if(null==b)throw new Error(`The requested path contains ${b} segment at index ${E}`)}}(b),this.navigateByUrl(this.createUrlTree(b,T),T)}serializeUrl(b){return this.urlSerializer.serialize(b)}parseUrl(b){let T;try{T=this.urlSerializer.parse(b)}catch(N){T=this.malformedUriErrorHandler(N,this.urlSerializer,b)}return T}isActive(b,T){let N;if(N=!0===T?Object.assign({},po):!1===T?Object.assign({},Lo):T,Wi(b))return wn(this.currentUrlTree,b,N);const U=this.parseUrl(b);return wn(this.currentUrlTree,U,N)}removeEmptyProps(b){return Object.keys(b).reduce((T,N)=>{const U=b[N];return null!=U&&(T[N]=U),T},{})}processNavigations(){this.navigations.subscribe(b=>{this.navigated=!0,this.lastSuccessfulId=b.id,this.currentPageId=b.targetPageId,this.events.next(new Cr(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,b.resolve(!0)},b=>{this.console.warn(`Unhandled Navigation Error: ${b}`)})}scheduleNavigation(b,T,N,U,W){var ae,Xe;if(this.disposed)return Promise.resolve(!1);let Ft,dn,Qt;W?(Ft=W.resolve,dn=W.reject,Qt=W.promise):Qt=new Promise((ii,Ws)=>{Ft=ii,dn=Ws});const cr=++this.navigationId;let gr;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(N=this.location.getState()),gr=N&&N.\u0275routerPageId?N.\u0275routerPageId:U.replaceUrl||U.skipLocationChange?null!==(ae=this.browserPageId)&&void 0!==ae?ae:0:(null!==(Xe=this.browserPageId)&&void 0!==Xe?Xe:0)+1):gr=0,this.setTransition({id:cr,targetPageId:gr,source:T,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:b,extras:U,resolve:Ft,reject:dn,promise:Qt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Qt.catch(ii=>Promise.reject(ii))}setBrowserUrl(b,T){const N=this.urlSerializer.serialize(b),U=Object.assign(Object.assign({},T.extras.state),this.generateNgRouterState(T.id,T.targetPageId));this.location.isCurrentPathEqualTo(N)||T.extras.replaceUrl?this.location.replaceState(N,"",U):this.location.go(N,"",U)}restoreHistory(b,T=!1){var N,U;if("computed"===this.canceledNavigationResolution){const W=this.currentPageId-b.targetPageId;"popstate"!==b.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(N=this.currentNavigation)||void 0===N?void 0:N.finalUrl)||0===W?this.currentUrlTree===(null===(U=this.currentNavigation)||void 0===U?void 0:U.finalUrl)&&0===W&&(this.resetState(b),this.browserUrlTree=b.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(W)}else"replace"===this.canceledNavigationResolution&&(T&&this.resetState(b),this.resetUrlToCurrentUrlTree())}resetState(b){this.routerState=b.currentRouterState,this.currentUrlTree=b.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,b.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(b,T){const N=new sr(b.id,this.serializeUrl(b.extractedUrl),T);this.triggerEvent(N),b.resolve(!1)}generateNgRouterState(b,T){return"computed"===this.canceledNavigationResolution?{navigationId:b,\u0275routerPageId:T}:{navigationId:b}}}return I.\u0275fac=function(b){M.$Z()},I.\u0275prov=M.Yz7({token:I,factory:I.\u0275fac}),I})();function Za(I){return"imperative"!==I}class ra{}class ss{preload(E,b){return(0,it.of)(null)}}let gl=(()=>{class I{constructor(b,T,N,U){this.router=b,this.injector=N,this.preloadingStrategy=U,this.loader=new Ya(N,T,Xe=>b.triggerEvent(new Tr(Xe)),Xe=>b.triggerEvent(new Er(Xe)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,we.h)(b=>b instanceof Cr),(0,qt.b)(()=>this.preload())).subscribe(()=>{})}preload(){const b=this.injector.get(M.h0i);return this.processRoutes(b,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(b,T){const N=[];for(const U of T)if(U.loadChildren&&!U.canLoad&&U._loadedConfig){const W=U._loadedConfig;N.push(this.processRoutes(W.module,W.routes))}else U.loadChildren&&!U.canLoad?N.push(this.preloadConfig(b,U)):U.children&&N.push(this.processRoutes(b,U.children));return(0,de.D)(N).pipe((0,Tn.J)(),(0,It.U)(U=>{}))}preloadConfig(b,T){return this.preloadingStrategy.preload(T,()=>(T._loadedConfig?(0,it.of)(T._loadedConfig):this.loader.load(b.injector,T)).pipe((0,Gt.z)(U=>(T._loadedConfig=U,this.processRoutes(U.module,U.routes)))))}}return I.\u0275fac=function(b){return new(b||I)(M.LFG(lr),M.LFG(M.Sil),M.LFG(M.zs3),M.LFG(ra))},I.\u0275prov=M.Yz7({token:I,factory:I.\u0275fac}),I})(),ri=(()=>{class I{constructor(b,T,N={}){this.router=b,this.viewportScroller=T,this.options=N,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},N.scrollPositionRestoration=N.scrollPositionRestoration||"disabled",N.anchorScrolling=N.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(b=>{b instanceof yr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=b.navigationTrigger,this.restoredId=b.restoredState?b.restoredState.navigationId:0):b instanceof Cr&&(this.lastId=b.id,this.scheduleScrollEvent(b,this.router.parseUrl(b.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(b=>{b instanceof Ce&&(b.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(b.position):b.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(b.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(b,T){this.router.triggerEvent(new Ce(b,"popstate"===this.lastSource?this.store[this.restoredId]:null,T))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(b){M.$Z()},I.\u0275prov=M.Yz7({token:I,factory:I.\u0275fac}),I})();const Qi=new M.OlP("ROUTER_CONFIGURATION"),ia=new M.OlP("ROUTER_FORROOT_GUARD"),ro=[an.Ye,{provide:er,useClass:Un},{provide:lr,useFactory:function io(I,E,b,T,N,U,W={},ae,Xe){const Ft=new lr(null,I,E,b,T,N,Ot(U));return ae&&(Ft.urlHandlingStrategy=ae),Xe&&(Ft.routeReuseStrategy=Xe),function ji(I,E){I.errorHandler&&(E.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(E.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(E.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(E.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(E.urlUpdateStrategy=I.urlUpdateStrategy),I.canceledNavigationResolution&&(E.canceledNavigationResolution=I.canceledNavigationResolution)}(W,Ft),W.enableTracing&&Ft.events.subscribe(dn=>{var Qt,cr;null===(Qt=console.group)||void 0===Qt||Qt.call(console,`Router Event: ${dn.constructor.name}`),console.log(dn.toString()),console.log(dn),null===(cr=console.groupEnd)||void 0===cr||cr.call(console)}),Ft},deps:[er,qi,an.Ye,M.zs3,M.Sil,ta,Qi,[class uc{},new M.FiY],[class Ri{},new M.FiY]]},qi,{provide:Ti,useFactory:function Uo(I){return I.routerState.root},deps:[lr]},gl,ss,class _a{preload(E,b){return b().pipe((0,mn.K)(()=>(0,it.of)(null)))}},{provide:Qi,useValue:{enableTracing:!1}}];function va(){return new M.PXZ("Router",lr)}let ml=(()=>{class I{constructor(b,T){}static forRoot(b,T){return{ngModule:I,providers:[ro,Ua(b),{provide:ia,useFactory:vs,deps:[[lr,new M.FiY,new M.tp0]]},{provide:Qi,useValue:T||{}},{provide:an.S$,useFactory:Fl,deps:[an.lw,[new M.tBr(an.mr),new M.FiY],Qi]},{provide:ri,useFactory:Or,deps:[lr,an.EM,Qi]},{provide:ra,useExisting:T&&T.preloadingStrategy?T.preloadingStrategy:ss},{provide:M.PXZ,multi:!0,useFactory:va},[Cs,{provide:M.ip1,multi:!0,useFactory:sa,deps:[Cs]},{provide:yt,useFactory:Vo,deps:[Cs]},{provide:M.tb,multi:!0,useExisting:yt}]]}}static forChild(b){return{ngModule:I,providers:[Ua(b)]}}}return I.\u0275fac=function(b){return new(b||I)(M.LFG(ia,8),M.LFG(lr,8))},I.\u0275mod=M.oAB({type:I}),I.\u0275inj=M.cJS({}),I})();function Or(I,E,b){return b.scrollOffset&&E.setOffset(b.scrollOffset),new ri(I,E,b)}function Fl(I,E,b={}){return b.useHash?new an.Do(I,E):new an.b0(I,E)}function vs(I){return"guarded"}function Ua(I){return[{provide:M.deG,multi:!0,useValue:I},{provide:ta,multi:!0,useValue:I}]}let Cs=(()=>{class I{constructor(b){this.injector=b,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new se.x}appInitializer(){return this.injector.get(an.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let T=null;const N=new Promise(ae=>T=ae),U=this.injector.get(lr),W=this.injector.get(Qi);return"disabled"===W.initialNavigation?(U.setUpLocationChangeListener(),T(!0)):"enabled"===W.initialNavigation||"enabledBlocking"===W.initialNavigation?(U.hooks.afterPreactivation=()=>this.initNavigation?(0,it.of)(null):(this.initNavigation=!0,T(!0),this.resultOfPreactivationDone),U.initialNavigation()):T(!0),N})}bootstrapListener(b){const T=this.injector.get(Qi),N=this.injector.get(gl),U=this.injector.get(ri),W=this.injector.get(lr),ae=this.injector.get(M.z2F);b===ae.components[0]&&(("enabledNonBlocking"===T.initialNavigation||void 0===T.initialNavigation)&&W.initialNavigation(),N.setUpPreloading(),U.init(),W.resetRootComponentType(ae.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return I.\u0275fac=function(b){return new(b||I)(M.LFG(M.zs3))},I.\u0275prov=M.Yz7({token:I,factory:I.\u0275fac}),I})();function sa(I){return I.appInitializer.bind(I)}function Vo(I){return I.bootstrapListener.bind(I)}const yt=new M.OlP("Router Initializer")},3942:(Dt,Te,L)=>{L.d(Te,{Z:()=>rt});var M=L(2090),A=L(4859),Z=L(9681),de=L(1877);class ce{constructor(Pe,$e){this._delegate=Pe,this.firebase=$e,(0,Z._addComponent)(Pe,new A.wA("app-compat",()=>this,"PUBLIC")),this.container=Pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Pe){this._delegate.automaticDataCollectionEnabled=Pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Pe=>{this._delegate.checkDestroyed(),Pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Z.deleteApp)(this._delegate)))}_getService(Pe,$e=Z._DEFAULT_ENTRY_NAME){var Me;this._delegate.checkDestroyed();const it=this._delegate.container.getProvider(Pe);return!it.isInitialized()&&"EXPLICIT"===(null===(Me=it.getComponent())||void 0===Me?void 0:Me.instantiationMode)&&it.initialize(),it.getImmediate({identifier:$e})}_removeServiceInstance(Pe,$e=Z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Pe).clearInstance($e)}_addComponent(Pe){(0,Z._addComponent)(this._delegate,Pe)}_addOrOverwriteComponent(Pe){(0,Z._addOrOverwriteComponent)(this._delegate,Pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new M.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),X=function ie(){const ft=function he(ft){const Pe={},$e={__esModule:!0,initializeApp:function Qe(pt,se={}){const we=Z.initializeApp(pt,se);if((0,M.r3)(Pe,we.name))return Pe[we.name];const Ee=new ft(we,$e);return Pe[we.name]=Ee,Ee},app:it,registerVersion:Z.registerVersion,setLogLevel:Z.setLogLevel,onLog:Z.onLog,apps:null,SDK_VERSION:Z.SDK_VERSION,INTERNAL:{registerComponent:function Re(pt){const se=pt.name,we=se.replace("-compat","");if(Z._registerComponent(pt)&&"PUBLIC"===pt.type){const Ee=(ke=it())=>{if("function"!=typeof ke[we])throw ue.create("invalid-app-argument",{appName:se});return ke[we]()};void 0!==pt.serviceProps&&(0,M.ZB)(Ee,pt.serviceProps),$e[we]=Ee,ft.prototype[we]=function(...ke){return this._getService.bind(this,se).apply(this,pt.multipleInstances?ke:[])}}return"PUBLIC"===pt.type?$e[we]:null},removeApp:function Me(pt){delete Pe[pt]},useAsService:function Mt(pt,se){return"serverAuth"===se?null:se},modularAPIs:Z}};function it(pt){if(!(0,M.r3)(Pe,pt=pt||Z._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:pt});return Pe[pt]}return $e.default=$e,Object.defineProperty($e,"apps",{get:function je(){return Object.keys(Pe).map(pt=>Pe[pt])}}),it.App=ft,$e}(ce);return ft.INTERNAL=Object.assign(Object.assign({},ft.INTERNAL),{createFirebaseNamespace:ie,extendNamespace:function Pe($e){(0,M.ZB)(ft,$e)},createSubscribe:M.ne,ErrorFactory:M.LL,deepExtend:M.ZB}),ft}(),q=new de.Yd("@firebase/app-compat");if((0,M.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ft=self.firebase.SDK_VERSION;ft&&ft.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const rt=X;!function qe(ft){(0,Z.registerVersion)("@firebase/app-compat","0.1.21",ft)}()},9681:(Dt,Te,L)=>{L.r(Te),L.d(Te,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>sr,_DEFAULT_ENTRY_NAME:()=>ur,_addComponent:()=>qt,_addOrOverwriteComponent:()=>dr,_apps:()=>Pt,_clearComponents:()=>an,_components:()=>mn,_getProvider:()=>mr,_registerComponent:()=>Gt,_removeServiceInstance:()=>Tn,deleteApp:()=>Hn,getApp:()=>$n,getApps:()=>zn,initializeApp:()=>qr,onLog:()=>Tr,registerVersion:()=>Yr,setLogLevel:()=>Er});var M=L(5861),A=L(4859),Z=L(1877),de=L(2090);class ce{constructor(Ze){this.container=Ze}getPlatformInfoString(){return this.container.getProviders().map(Bt=>{if(function _e(Ct){const Ze=Ct.getComponent();return"VERSION"===(null==Ze?void 0:Ze.type)}(Bt)){const Lt=Bt.getImmediate();return`${Lt.library}/${Lt.version}`}return null}).filter(Bt=>Bt).join(" ")}}const ue="@firebase/app",ie=new Z.Yd("@firebase/app"),ur="[DEFAULT]",Vt={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Pt=new Map,mn=new Map;function qt(Ct,Ze){try{Ct.container.addComponent(Ze)}catch(Bt){ie.debug(`Component ${Ze.name} failed to register with FirebaseApp ${Ct.name}`,Bt)}}function dr(Ct,Ze){Ct.container.addOrOverwriteComponent(Ze)}function Gt(Ct){const Ze=Ct.name;if(mn.has(Ze))return ie.debug(`There were multiple attempts to register component ${Ze}.`),!1;mn.set(Ze,Ct);for(const Bt of Pt.values())qt(Bt,Ct);return!0}function mr(Ct,Ze){const Bt=Ct.container.getProvider("heartbeat").getImmediate({optional:!0});return Bt&&Bt.triggerHeartbeat(),Ct.container.getProvider(Ze)}function Tn(Ct,Ze,Bt=ur){mr(Ct,Ze).clearInstance(Bt)}function an(){mn.clear()}const yr=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Cr{constructor(Ze,Bt,Lt){this._isDeleted=!1,this._options=Object.assign({},Ze),this._config=Object.assign({},Bt),this._name=Bt.name,this._automaticDataCollectionEnabled=Bt.automaticDataCollectionEnabled,this._container=Lt,this.container.addComponent(new A.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ze}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ze){this._isDeleted=Ze}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}const sr="9.6.10";function qr(Ct,Ze={}){"object"!=typeof Ze&&(Ze={name:Ze});const Bt=Object.assign({name:ur,automaticDataCollectionEnabled:!1},Ze),Lt=Bt.name;if("string"!=typeof Lt||!Lt)throw yr.create("bad-app-name",{appName:String(Lt)});const fn=Pt.get(Lt);if(fn){if((0,de.vZ)(Ct,fn.options)&&(0,de.vZ)(Bt,fn.config))return fn;throw yr.create("duplicate-app",{appName:Lt})}const wn=new A.H0(Lt);for(const ne of mn.values())wn.addComponent(ne);const fe=new Cr(Ct,Bt,wn);return Pt.set(Lt,fe),fe}function $n(Ct=ur){const Ze=Pt.get(Ct);if(!Ze)throw yr.create("no-app",{appName:Ct});return Ze}function zn(){return Array.from(Pt.values())}function Hn(Ct){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,M.Z)(function*(Ct){const Ze=Ct.name;Pt.has(Ze)&&(Pt.delete(Ze),yield Promise.all(Ct.container.getProviders().map(Bt=>Bt.delete())),Ct.isDeleted=!0)})).apply(this,arguments)}function Yr(Ct,Ze,Bt){var Lt;let fn=null!==(Lt=Vt[Ct])&&void 0!==Lt?Lt:Ct;Bt&&(fn+=`-${Bt}`);const wn=fn.match(/\s|\//),fe=Ze.match(/\s|\//);if(wn||fe){const ne=[`Unable to register library "${fn}" with version "${Ze}":`];return wn&&ne.push(`library name "${fn}" contains illegal characters (whitespace or "/")`),wn&&fe&&ne.push("and"),fe&&ne.push(`version name "${Ze}" contains illegal characters (whitespace or "/")`),void ie.warn(ne.join(" "))}Gt(new A.wA(`${fn}-version`,()=>({library:fn,version:Ze}),"VERSION"))}function Tr(Ct,Ze){if(null!==Ct&&"function"!=typeof Ct)throw yr.create("invalid-log-argument");(0,Z.Am)(Ct,Ze)}function Er(Ct){(0,Z.Ub)(Ct)}const Ye="firebase-heartbeat-store";let ge=null;function Ce(){return ge||(ge=(0,de.X3)("firebase-heartbeat-database",1,(Ct,Ze)=>{0===Ze&&Ct.createObjectStore(Ye)}).catch(Ct=>{throw yr.create("storage-open",{originalErrorMessage:Ct.message})})),ge}function Je(){return(Je=(0,M.Z)(function*(Ct){try{return(yield Ce()).transaction(Ye).objectStore(Ye).get(En(Ct))}catch(Ze){throw yr.create("storage-get",{originalErrorMessage:Ze.message})}})).apply(this,arguments)}function lt(Ct,Ze){return St.apply(this,arguments)}function St(){return(St=(0,M.Z)(function*(Ct,Ze){try{const Lt=(yield Ce()).transaction(Ye,"readwrite");return yield Lt.objectStore(Ye).put(Ze,En(Ct)),Lt.complete}catch(Bt){throw yr.create("storage-set",{originalErrorMessage:Bt.message})}})).apply(this,arguments)}function En(Ct){return`${Ct.name}!${Ct.options.appId}`}class Zr{constructor(Ze){this.container=Ze,this._heartbeatsCache=null;const Bt=this.container.getProvider("app").getImmediate();this._storage=new Ot(Bt),this._heartbeatsCachePromise=this._storage.read().then(Lt=>(this._heartbeatsCache=Lt,Lt))}triggerHeartbeat(){var Ze=this;return(0,M.Z)(function*(){const Lt=Ze.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),fn=Wn();if(null===Ze._heartbeatsCache&&(Ze._heartbeatsCache=yield Ze._heartbeatsCachePromise),Ze._heartbeatsCache.lastSentHeartbeatDate!==fn&&!Ze._heartbeatsCache.heartbeats.some(wn=>wn.date===fn))return Ze._heartbeatsCache.heartbeats.push({date:fn,agent:Lt}),Ze._heartbeatsCache.heartbeats=Ze._heartbeatsCache.heartbeats.filter(wn=>{const fe=new Date(wn.date).valueOf();return Date.now()-fe<=2592e6}),Ze._storage.overwrite(Ze._heartbeatsCache)})()}getHeartbeatsHeader(){var Ze=this;return(0,M.Z)(function*(){if(null===Ze._heartbeatsCache&&(yield Ze._heartbeatsCachePromise),null===Ze._heartbeatsCache||0===Ze._heartbeatsCache.heartbeats.length)return"";const Bt=Wn(),{heartbeatsToSend:Lt,unsentEntries:fn}=function hr(Ct,Ze=1024){const Bt=[];let Lt=Ct.slice();for(const fn of Ct){const wn=Bt.find(fe=>fe.agent===fn.agent);if(wn){if(wn.dates.push(fn.date),An(Bt)>Ze){wn.dates.pop();break}}else if(Bt.push({agent:fn.agent,dates:[fn.date]}),An(Bt)>Ze){Bt.pop();break}Lt=Lt.slice(1)}return{heartbeatsToSend:Bt,unsentEntries:Lt}}(Ze._heartbeatsCache.heartbeats),wn=(0,de.L)(JSON.stringify({version:2,heartbeats:Lt}));return Ze._heartbeatsCache.lastSentHeartbeatDate=Bt,fn.length>0?(Ze._heartbeatsCache.heartbeats=fn,yield Ze._storage.overwrite(Ze._heartbeatsCache)):(Ze._heartbeatsCache.heartbeats=[],Ze._storage.overwrite(Ze._heartbeatsCache)),wn})()}}function Wn(){return(new Date).toISOString().substring(0,10)}class Ot{constructor(Ze){this.app=Ze,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,M.Z)(function*(){return!!(0,de.hl)()&&(0,de.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ze=this;return(0,M.Z)(function*(){return(yield Ze._canUseIndexedDBPromise)&&(yield function Ue(Ct){return Je.apply(this,arguments)}(Ze.app))||{heartbeats:[]}})()}overwrite(Ze){var Bt=this;return(0,M.Z)(function*(){var Lt;if(yield Bt._canUseIndexedDBPromise){const wn=yield Bt.read();return lt(Bt.app,{lastSentHeartbeatDate:null!==(Lt=Ze.lastSentHeartbeatDate)&&void 0!==Lt?Lt:wn.lastSentHeartbeatDate,heartbeats:Ze.heartbeats})}})()}add(Ze){var Bt=this;return(0,M.Z)(function*(){var Lt;if(yield Bt._canUseIndexedDBPromise){const wn=yield Bt.read();return lt(Bt.app,{lastSentHeartbeatDate:null!==(Lt=Ze.lastSentHeartbeatDate)&&void 0!==Lt?Lt:wn.lastSentHeartbeatDate,heartbeats:[...wn.heartbeats,...Ze.heartbeats]})}})()}}function An(Ct){return(0,de.L)(JSON.stringify({version:2,heartbeats:Ct})).length}!function hn(Ct){Gt(new A.wA("platform-logger",Ze=>new ce(Ze),"PRIVATE")),Gt(new A.wA("heartbeat",Ze=>new Zr(Ze),"PRIVATE")),Yr(ue,"0.7.20",Ct),Yr(ue,"0.7.20","esm2017"),Yr("fire-js","")}("")},4859:(Dt,Te,L)=>{L.d(Te,{wA:()=>Z,H0:()=>he});var M=L(5861),A=L(2090);class Z{constructor(X,q,le){this.name=X,this.instanceFactory=q,this.type=le,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(X){return this.instantiationMode=X,this}setMultipleInstances(X){return this.multipleInstances=X,this}setServiceProps(X){return this.serviceProps=X,this}setInstanceCreatedCallback(X){return this.onInstanceCreated=X,this}}const de="[DEFAULT]";class ce{constructor(X,q){this.name=X,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(X){const q=this.normalizeInstanceIdentifier(X);if(!this.instancesDeferred.has(q)){const le=new A.BH;if(this.instancesDeferred.set(q,le),this.isInitialized(q)||this.shouldAutoInitialize())try{const ot=this.getOrInitializeService({instanceIdentifier:q});ot&&le.resolve(ot)}catch(ot){}}return this.instancesDeferred.get(q).promise}getImmediate(X){var q;const le=this.normalizeInstanceIdentifier(null==X?void 0:X.identifier),ot=null!==(q=null==X?void 0:X.optional)&&void 0!==q&&q;if(!this.isInitialized(le)&&!this.shouldAutoInitialize()){if(ot)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:le})}catch(qe){if(ot)return null;throw qe}}getComponent(){return this.component}setComponent(X){if(X.name!==this.name)throw Error(`Mismatching Component ${X.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=X,this.shouldAutoInitialize()){if(function ue(ie){return"EAGER"===ie.instantiationMode}(X))try{this.getOrInitializeService({instanceIdentifier:de})}catch(q){}for(const[q,le]of this.instancesDeferred.entries()){const ot=this.normalizeInstanceIdentifier(q);try{const qe=this.getOrInitializeService({instanceIdentifier:ot});le.resolve(qe)}catch(qe){}}}}clearInstance(X=de){this.instancesDeferred.delete(X),this.instancesOptions.delete(X),this.instances.delete(X)}delete(){var X=this;return(0,M.Z)(function*(){const q=Array.from(X.instances.values());yield Promise.all([...q.filter(le=>"INTERNAL"in le).map(le=>le.INTERNAL.delete()),...q.filter(le=>"_delete"in le).map(le=>le._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(X=de){return this.instances.has(X)}getOptions(X=de){return this.instancesOptions.get(X)||{}}initialize(X={}){const{options:q={}}=X,le=this.normalizeInstanceIdentifier(X.instanceIdentifier);if(this.isInitialized(le))throw Error(`${this.name}(${le}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ot=this.getOrInitializeService({instanceIdentifier:le,options:q});for(const[qe,rt]of this.instancesDeferred.entries())le===this.normalizeInstanceIdentifier(qe)&&rt.resolve(ot);return ot}onInit(X,q){var le;const ot=this.normalizeInstanceIdentifier(q),qe=null!==(le=this.onInitCallbacks.get(ot))&&void 0!==le?le:new Set;qe.add(X),this.onInitCallbacks.set(ot,qe);const rt=this.instances.get(ot);return rt&&X(rt,ot),()=>{qe.delete(X)}}invokeOnInitCallbacks(X,q){const le=this.onInitCallbacks.get(q);if(le)for(const ot of le)try{ot(X,q)}catch(qe){}}getOrInitializeService({instanceIdentifier:X,options:q={}}){let le=this.instances.get(X);if(!le&&this.component&&(le=this.component.instanceFactory(this.container,{instanceIdentifier:(ie=X,ie===de?void 0:ie),options:q}),this.instances.set(X,le),this.instancesOptions.set(X,q),this.invokeOnInitCallbacks(le,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,le)}catch(ot){}var ie;return le||null}normalizeInstanceIdentifier(X=de){return this.component?this.component.multipleInstances?X:de:X}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(X){this.name=X,this.providers=new Map}addComponent(X){const q=this.getProvider(X.name);if(q.isComponentSet())throw new Error(`Component ${X.name} has already been registered with ${this.name}`);q.setComponent(X)}addOrOverwriteComponent(X){this.getProvider(X.name).isComponentSet()&&this.providers.delete(X.name),this.addComponent(X)}getProvider(X){if(this.providers.has(X))return this.providers.get(X);const q=new ce(X,this);return this.providers.set(X,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(Dt,Te,L)=>{L.d(Te,{in:()=>A,Yd:()=>ue,Ub:()=>he,Am:()=>ie});const M=[];var A=(()=>{return(X=A||(A={}))[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",A;var X})();const Z={debug:A.DEBUG,verbose:A.VERBOSE,info:A.INFO,warn:A.WARN,error:A.ERROR,silent:A.SILENT},de=A.INFO,ce={[A.DEBUG]:"log",[A.VERBOSE]:"log",[A.INFO]:"info",[A.WARN]:"warn",[A.ERROR]:"error"},_e=(X,q,...le)=>{if(q<X.logLevel)return;const ot=(new Date).toISOString(),qe=ce[q];if(!qe)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[qe](`[${ot}]  ${X.name}:`,...le)};class ue{constructor(q){this.name=q,this._logLevel=de,this._logHandler=_e,this._userLogHandler=null,M.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in A))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?Z[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,A.DEBUG,...q),this._logHandler(this,A.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,A.VERBOSE,...q),this._logHandler(this,A.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,A.INFO,...q),this._logHandler(this,A.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,A.WARN,...q),this._logHandler(this,A.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,A.ERROR,...q),this._logHandler(this,A.ERROR,...q)}}function he(X){M.forEach(q=>{q.setLogLevel(X)})}function ie(X,q){for(const le of M){let ot=null;q&&q.level&&(ot=Z[q.level]),le.userLogHandler=null===X?null:(qe,rt,...ft)=>{const Pe=ft.map($e=>{if(null==$e)return null;if("string"==typeof $e)return $e;if("number"==typeof $e||"boolean"==typeof $e)return $e.toString();if($e instanceof Error)return $e.message;try{return JSON.stringify($e)}catch(Me){return null}}).filter($e=>$e).join(" ");rt>=(null!=ot?ot:qe.logLevel)&&X({level:A[rt].toLowerCase(),message:Pe,args:ft,type:qe.name})}}}},712:(Dt,Te,L)=>{L.d(Te,{vj:()=>he,nu:()=>ue});var M=L(9808),A=L(5e3),Z=L(7579);const de=["payPalButtonContainer"];let ce=(()=>{class ie{constructor(q){this.zone=q}registerScript(q,le,ot){const qe=window[le];if(qe)return void this.zone.run(()=>{ot(qe)});const rt=document.createElement("script");rt.id=this.getElemId(le),rt.innerHTML="",rt.onload=()=>{this.zone.run(()=>{ot(window[le])})},rt.src=q,rt.async=!0,rt.defer=!0,document.getElementsByTagName("head")[0].appendChild(rt)}cleanup(q){const le=document.getElementById(this.getElemId(q));le&&le.remove()}getElemId(q){return`ngx-paypal-script-elem-${q}`}}return ie.\u0275fac=function(q){return new(q||ie)(A.LFG(A.R0b))},ie.\u0275prov=A.Yz7({token:ie,factory:ie.\u0275fac}),ie})(),_e=(()=>{class ie{constructor(q){this.scriptService=q,this.paypalWindowName="paypal"}registerPayPalScript(q,le){this.scriptService.registerScript(this.getUrlForConfig(q),this.paypalWindowName,le)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(q){const le=[{name:"client-id",value:q.clientId}];return q.currency&&le.push({name:"currency",value:q.currency}),q.commit&&le.push({name:"commit",value:q.commit}),q.vault&&le.push({name:"vault",value:q.vault}),q.intent&&le.push({name:"intent",value:q.intent}),q.extraParams&&le.push(...q.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(le)}`}getQueryString(q){let le="";for(let ot=0;ot<q.length;ot++){const qe=q[ot];le+=0===ot?"?":"&",le+=`${qe.name}=${qe.value}`}return le}}return ie.\u0275fac=function(q){return new(q||ie)(A.LFG(ce))},ie.\u0275prov=A.Yz7({token:ie,factory:ie.\u0275fac}),ie})(),ue=(()=>{class ie{constructor(q,le,ot){this.paypalScriptService=q,this.cdr=le,this.ngZone=ot,this.registerScript=!0,this.scriptLoaded=new A.vpe,this.ngUnsubscribe=new Z.x,this.initializePayPal=!0}set payPalButtonContainer(q){this.payPalButtonContainerElem=q}ngOnChanges(q){this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());const le=this.config;q.config.isFirstChange()&&le&&this.registerScript&&this.initPayPalScript(le,ot=>{this.payPal=ot,this.doPayPalCheck()}),q.config.isFirstChange()||this.reinitialize(le)}ngOnDestroy(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.doPayPalCheck()}customInit(q){this.payPal=q,this.doPayPalCheck()}reinitialize(q){if(this.config=q,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild);this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,le=>{this.payPal=le,this.doPayPalCheck()}))}doPayPalCheck(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}initPayPalScript(q,le){this.paypalScriptService.registerPayPalScript({clientId:q.clientId,commit:q.advanced&&q.advanced.commit?q.advanced.commit:void 0,currency:q.currency,vault:q.vault,intent:q.intent,extraParams:q.advanced&&q.advanced.extraQueryParams?q.advanced.extraQueryParams:[]},ot=>{this.scriptLoaded.next(ot),le(ot)})}generateElementId(){return`ngx-captcha-id-${(new Date).valueOf()}`}initPayPal(q,le){this.ngZone.runOutsideAngular(()=>{const ft=Object.assign(Object.assign(Object.assign({style:q.style,onApprove:(Pe,$e)=>this.ngZone.run(()=>{if(q.onApprove&&q.onApprove(Pe,$e),q.authorizeOnServer)return q.authorizeOnServer(Pe,$e);const Me=q.onClientAuthorization;Me&&$e.order.capture().then(it=>{this.ngZone.run(()=>{Me(it)})})}),onError:Pe=>{this.ngZone.run(()=>{q.onError&&q.onError(Pe)})},onCancel:(Pe,$e)=>{this.ngZone.run(()=>{q.onCancel&&q.onCancel(Pe,$e)})},onClick:(Pe,$e)=>{this.ngZone.run(()=>{q.onClick&&q.onClick(Pe,$e)})},onInit:(Pe,$e)=>{this.ngZone.run(()=>{q.onInit&&q.onInit(Pe,$e)})}},(q.createOrderOnClient||q.createOrderOnServer)&&{createOrder:(Pe,$e)=>this.ngZone.run(()=>{if(q.createOrderOnClient&&q.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                    Please choose one or the other.");if(!q.createOrderOnClient&&!q.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                    Please define one of these to create order.");if(q.createOrderOnClient)return $e.order.create(q.createOrderOnClient(Pe));if(q.createOrderOnServer)return q.createOrderOnServer(Pe);throw Error("Invalid state for 'createOrder'.")})}),q.createSubscriptionOnClient&&{createSubscription:(Pe,$e)=>this.ngZone.run(()=>{if(q.createSubscriptionOnClient)return $e.subscription.create(q.createSubscriptionOnClient(Pe))})}),q.onShippingChange&&{onShippingChange:(Pe,$e)=>this.ngZone.run(()=>{if(q.onShippingChange)return q.onShippingChange(Pe,$e)})});le.Buttons(ft).render(`#${this.payPalButtonContainerId}`)})}}return ie.\u0275fac=function(q){return new(q||ie)(A.Y36(_e),A.Y36(A.sBO),A.Y36(A.R0b))},ie.\u0275cmp=A.Xpm({type:ie,selectors:[["ngx-paypal"]],viewQuery:function(q,le){if(1&q&&A.Gf(de,5),2&q){let ot;A.iGM(ot=A.CRH())&&(le.payPalButtonContainer=ot.first)}},inputs:{config:"config",registerScript:"registerScript"},outputs:{scriptLoaded:"scriptLoaded"},features:[A.TTD],decls:2,vars:1,consts:[[3,"id"],["payPalButtonContainer",""]],template:function(q,le){1&q&&A._UZ(0,"div",0,1),2&q&&A.Q6J("id",le.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),ie})(),he=(()=>{class ie{}return ie.\u0275fac=function(q){return new(q||ie)},ie.\u0275mod=A.oAB({type:ie}),ie.\u0275inj=A.cJS({providers:[ce,_e],imports:[[M.ez]]}),ie})()},5861:(Dt,Te,L)=>{function M(Z,de,ce,_e,ue,he,ie){try{var X=Z[he](ie),q=X.value}catch(le){return void ce(le)}X.done?de(q):Promise.resolve(q).then(_e,ue)}function A(Z){return function(){var de=this,ce=arguments;return new Promise(function(_e,ue){var he=Z.apply(de,ce);function ie(q){M(he,_e,ue,ie,X,"next",q)}function X(q){M(he,_e,ue,ie,X,"throw",q)}ie(void 0)})}}L.d(Te,{Z:()=>A})}},Dt=>{Dt(Dt.s=5181)}]);