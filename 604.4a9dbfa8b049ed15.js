"use strict";(self.webpackChunkprueba=self.webpackChunkprueba||[]).push([[604],{2436:(y,f,o)=>{o.d(f,{t:()=>_});var d=o(5861),h=o(5e3),v=o(7407);let _=(()=>{class i{constructor(e){this.firestore=e}getAll(){return this.firestore.collection("merchandising").valueChanges({idField:"id"})}getAllMatches(e){return this.firestore.collection("merchandising",s=>s.startAt(e).endAt(e+"\uf8ff")).valueChanges({idField:"id"})}getAllOrdered(){return this.firestore.collection("merchandising",e=>e.orderBy("product.name")).valueChanges({idField:"id"})}getOne(e){return this.firestore.collection("merchandising").doc(e).valueChanges({idField:"id"})}getByCode(e){return this.firestore.collection("merchandising",s=>s.where("code","==",e)).valueChanges({idField:"id"})}getByArtist(e){return this.firestore.collection("merchandising",s=>s.where("product.artist.username","==",e)).valueChanges({idField:"id"})}getStock(){return this.firestore.collection("merchandising",e=>e.where("stock",">","0")).valueChanges({idField:"id"})}getOutStock(){return this.firestore.collection("merchandising",e=>e.where("stock","==","0")).valueChanges({idField:"id"})}setMerchandising(e){this.merchandising=e}getMerchandising(){return this.merchandising}create(e){var s=this;return(0,d.Z)(function*(){try{return yield s.firestore.collection("merchandising").doc(e.id).set(e)}catch(r){return r}})()}update(e){var s=this;return(0,d.Z)(function*(){try{return yield s.firestore.collection("merchandising").doc(e.id).update(Object.assign({},e))}catch(r){return r}})()}delete(e){var s=this;return(0,d.Z)(function*(){try{return yield s.firestore.collection("merchandising").doc(e).delete()}catch(r){return r}})()}}return i.\u0275fac=function(e){return new(e||i)(h.LFG(v.ST))},i.\u0275prov=h.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},887:(y,f,o)=>{o.d(f,{S:()=>_});var d=o(5861),h=o(5e3),v=o(7407);let _=(()=>{class e{constructor(r){this.firestore=r}getAll(){return this.firestore.collection("product_photos").valueChanges({idField:"id"})}getAllMatches(r){return this.firestore.collection("product_photos",a=>a.startAt(r).endAt(r+"\uf8ff")).valueChanges({idField:"id"})}getOne(r){return this.firestore.collection("product_photos").doc(r).valueChanges({idField:"id"})}getOrderedTypeName(){return this.firestore.collection("product_photos",r=>r.orderBy("photo_type.name")).valueChanges({idField:"id"})}getByProduct(r){return this.firestore.collection("product_photos",a=>a.where("product.id","==",r).orderBy("photo_type.name")).valueChanges({idField:"id"})}setProductPhotos(r){this.product_photos=r}getProductPhotos(){return this.product_photos}create(r){var a=this;return(0,d.Z)(function*(){try{return yield a.firestore.collection("product_photos").doc(r.id).set(r)}catch(u){return u}})()}update(r){var a=this;return(0,d.Z)(function*(){try{return yield a.firestore.collection("product_photos").doc(r.id).update(Object.assign({},r))}catch(u){return u}})()}delete(r){var a=this;return(0,d.Z)(function*(){try{return yield a.firestore.collection("product_photos").doc(r).delete()}catch(u){return u}})()}}return e.\u0275fac=function(r){return new(r||e)(h.LFG(v.ST))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3604:(y,f,o)=>{o.r(f),o.d(f,{ShopModule:()=>Z});var d=o(9808),h=o(6115),v=o(7407),_=o(3385),i=o(2382),C=o(520),e=o(5e3),s=o(3632),r=o(2436),a=o(887),u=o(364),b=o(2368);function S(n,l){if(1&n&&e._UZ(0,"button",24),2&n){const t=l.index;e.Tol(0==t?"active":""),e.Q2q("aria-label","Slide ",t,""),e.uIk("data-bs-slide-to",t)}}function O(n,l){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"img",25),e.TgZ(2,"div",26)(3,"h5"),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.TgZ(7,"a",27),e._uU(8,"Comprar ahora"),e.qZA()()()),2&n){const t=l.$implicit;e.Gre("carousel-item ",0==l.index?"active":"",""),e.xp6(1),e.s9C("src",t.photo,e.LSH),e.xp6(3),e.Oqu(t.artist.username),e.xp6(2),e.Oqu(t.description),e.xp6(1),e.s9C("href",t.url,e.LSH)}}function P(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",28),e.NdJ("click",function(){const m=e.CHM(t).$implicit;return e.oxw().goTo("/shop/"+m.code)}),e.TgZ(1,"div",29)(2,"div",30)(3,"div",31),e._UZ(4,"img",32),e.qZA(),e.TgZ(5,"div",33)(6,"h5",34),e._uU(7),e.qZA()()()()()}if(2&n){const t=l.$implicit,c=e.oxw();e.xp6(4),e.s9C("src",c.photos[t.code].photo,e.LSH),e.s9C("alt",t.product.name),e.xp6(3),e.Oqu(t.product.name)}}const M=[{path:"",component:(()=>{class n{constructor(t,c,p,m,g,A,x){this.formBuilder=t,this.router=c,this.usuarioSrv=p,this.merchandisingSrv=m,this.productPhotoSrv=g,this.bannerSrv=A,this.genreSrv=x,this.artistas=[],this.allArtistas=[],this.photos=[],this.merchan=[],this.allMerchan=[],this.genres=[],this.merchanPhotos=[]}ngOnInit(){this.bannerSrv.getByType("BANNER_SHOP").subscribe(t=>{this.banner=t}),this.form=this.formBuilder.group({search:[""]}),this.usuario=this.usuarioSrv.getUsuario(),this.merchandisingSrv.getAllOrdered().subscribe(t=>{console.log("m",t);const c=t.filter((p,m)=>t.findIndex(g=>g.code===p.code)===m);this.merchan=c,this.merchan.forEach(p=>{this.productPhotoSrv.getByProduct(p.product.id).subscribe(m=>{m.forEach(g=>{("DISK"==g.photo_type.name||"FRONT"==g.photo_type.name)&&(this.photos[p.code]=g)})})}),console.log("unique",c),console.log("merchan",this.merchan),this.allMerchan=this.merchan}),this.genreSrv.getAll().subscribe(t=>{this.genres=t})}ngOnDestroy(){}search(){this.form.value.search.length>0?(this.busqueda=!0,this.usuarioSrv.getAllMatchesArtista(this.form.value.search).subscribe(t=>{this.artistas=t})):(this.artistas=this.allArtistas,this.busqueda=!1)}filter(t){t.length>0?this.usuarioSrv.getAllMatchesGenre(t).subscribe(c=>{this.artistas=c}):this.artistas=this.allArtistas}goTo(t){this.router.navigate([t])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(i.qu),e.Y36(h.F0),e.Y36(s.L),e.Y36(r.t),e.Y36(a.S),e.Y36(u.n),e.Y36(b.S))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-shop"]],decls:29,vars:4,consts:[[1,"bg-dark"],["id","carouselExampleCaptions",1,"carousel","slide"],[1,"carousel-indicators"],["type","button","data-bs-target","#carouselExampleCaptions","aria-current","true",3,"class",4,"ngFor","ngForOf"],[1,"carousel-inner"],[3,"class",4,"ngFor","ngForOf"],["type","button","data-bs-target","#carouselExampleCaptions","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleCaptions","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"col-lg-9","mx-auto","py-md-4"],[1,"display-flex","row","py-4"],[1,"col-4"],[1,"navbar"],[1,"w-100"],["role","search",1,"col-lg-11",3,"formGroup"],[1,"text-light"],[1,"is-divider","small"],["formControlName","search","type","search","placeholder","Search","aria-label","Search",1,"form-control","mt-4","me-2","bg-dark","text-light","rounded-pill",3,"keyup"],[1,"col-lg-1"],[1,"col-8"],[1,"py-2","row","row-cols-1","row-cols-sm-2","row-cols-md-4","g-3"],["class","col",3,"click",4,"ngFor","ngForOf"],["type","button","data-bs-target","#carouselExampleCaptions","aria-current","true"],["alt","",1,"d-block","w-100",2,"height","60vh","object-fit","cover","opacity","0.5",3,"src"],[1,"carousel-caption","d-none","d-md-block"],[1,"btn","btn-light","mb-3",3,"href"],[1,"col",3,"click"],[1,"shadow-sm","song-selector"],[1,"card-body"],[1,"d-flex","justify-content-center","align-items-center"],["width","130px","height","130px",1,"mt-2","music-cover","rounded-circle",3,"src","alt"],[1,"mt-3","d-flex","justify-content-center","align-items-center"],[1,"text-light","no-salir"]],template:function(t,c){1&t&&(e.TgZ(0,"main",0)(1,"div",1)(2,"div",2),e.YNc(3,S,1,5,"button",3),e.qZA(),e.TgZ(4,"div",4),e.YNc(5,O,9,7,"div",5),e.qZA(),e.TgZ(6,"button",6),e._UZ(7,"span",7),e.TgZ(8,"span",8),e._uU(9,"Previous"),e.qZA()(),e.TgZ(10,"button",9),e._UZ(11,"span",10),e.TgZ(12,"span",8),e._uU(13,"Next"),e.qZA()()(),e.TgZ(14,"div",11)(15,"div",12)(16,"div",13)(17,"div")(18,"nav",14)(19,"div",15)(20,"form",16)(21,"strong",17),e._uU(22,"B\xdaSQUEDA"),e.qZA(),e._UZ(23,"div",18),e.TgZ(24,"input",19),e.NdJ("keyup",function(){return c.search()}),e.qZA()(),e._UZ(25,"div",20),e.qZA()()()(),e.TgZ(26,"div",21)(27,"div",22),e.YNc(28,P,8,3,"div",23),e.qZA()()()()()),2&t&&(e.xp6(3),e.Q6J("ngForOf",c.banner),e.xp6(2),e.Q6J("ngForOf",c.banner),e.xp6(15),e.Q6J("formGroup",c.form),e.xp6(8),e.Q6J("ngForOf",c.merchan))},directives:[d.sg,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u],styles:[".color-link[_ngcontent-%COMP%]{color:#f2ebdc}.lista-inline[_ngcontent-%COMP%]{display:inline;margin-left:10px}.song-selector[_ngcontent-%COMP%]{cursor:pointer}.no-salir[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.div-pointer[_ngcontent-%COMP%]{cursor:pointer}.is-divider[_ngcontent-%COMP%]{background-color:#f2ebdc;height:3px;display:block;margin:.3em 0 1em;width:100%;max-width:30px}.genre-list[_ngcontent-%COMP%]{padding-left:0}.genre-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{cursor:pointer;padding:3px;list-style:none;margin:0 0 .3em;text-align:left}.genre-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{border-top:1px solid rgba(13,13,13,.1)}[_ngcontent-%COMP%]::placeholder{color:#f2ebdc;opacity:1}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#f2ebdc}[_ngcontent-%COMP%]::-ms-input-placeholder{color:#f2ebdc}"]}),n})()}];let Z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,h.Bz.forChild(M),i.u5,i.UX,v.yb,_.ww,C.JF],h.Bz]}),n})()}}]);