"use strict";(self.webpackChunkprueba=self.webpackChunkprueba||[]).push([[611],{8611:(E,x,i)=>{i.r(x),i.d(x,{NuevoMerchanModule:()=>j});var v=i(9808),l=i(5861),h=i(1042),e=i(5e3),s=i(2382),T=i(629),C=i(3632),M=i(1411),b=i(9958),f=i(7407);let Z=(()=>{class r{constructor(t){this.firestore=t}getAll(){return this.firestore.collection("products",t=>t.orderBy("name")).valueChanges({idField:"id"})}getAllMatches(t){return this.firestore.collection("products",o=>o.orderBy("name").startAt(t).endAt(t+"\uf8ff")).valueChanges({idField:"id"})}getOne(t){return this.firestore.collection("products").doc(t).valueChanges({idField:"id"})}getByName(t){return this.firestore.collection("products",o=>o.where("name","==",t)).valueChanges({idField:"id"})}setProduct(t){this.product=t}getProduct(){return this.product}create(t){var o=this;return(0,l.Z)(function*(){try{return yield o.firestore.collection("products").doc(t.id).set(t)}catch(n){return n}})()}update(t){var o=this;return(0,l.Z)(function*(){try{return yield o.firestore.collection("products").doc(t.id).update(Object.assign({},t))}catch(n){return n}})()}delete(t){var o=this;return(0,l.Z)(function*(){try{return yield o.firestore.collection("products").doc(t).delete()}catch(n){return n}})()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(f.ST))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),A=(()=>{class r{constructor(t){this.firestore=t}getAll(){return this.firestore.collection("product_types",t=>t.orderBy("code")).valueChanges({idField:"id"})}getAllMatches(t){return this.firestore.collection("product_types",o=>o.orderBy("code").startAt(t).endAt(t+"\uf8ff")).valueChanges({idField:"id"})}getOne(t){return this.firestore.collection("product_types").doc(t).valueChanges({idField:"id"})}getByCode(t){return this.firestore.collection("product_types",o=>o.where("code","==",t)).valueChanges({idField:"id"})}setProductType(t){this.product_type=t}getProductType(){return this.product_type}create(t){var o=this;return(0,l.Z)(function*(){try{return yield o.firestore.collection("product_types").doc(t.doc_id).set(t)}catch(n){return n}})()}update(t){var o=this;return(0,l.Z)(function*(){try{return yield o.firestore.collection("product_types").doc(t.doc_id).update(Object.assign({},t))}catch(n){return n}})()}delete(t){var o=this;return(0,l.Z)(function*(){try{return yield o.firestore.collection("product_types").doc(t).delete()}catch(n){return n}})()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(f.ST))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var S=i(887);let w=(()=>{class r{constructor(t){this.firestore=t}getAll(){return this.firestore.collection("photo_types",t=>t.orderBy("name")).valueChanges({idField:"id"})}getAllMatches(t){return this.firestore.collection("photo_types",o=>o.orderBy("name").startAt(t).endAt(t+"\uf8ff")).valueChanges({idField:"id"})}getOne(t){return this.firestore.collection("photo_types").doc(t).valueChanges({idField:"id"})}getByName(t){return this.firestore.collection("photo_types",o=>o.where("name","==",t)).valueChanges({idField:"id"})}setPhotoType(t){this.photo_type=t}getPhotoType(){return this.photo_type}create(t){var o=this;return(0,l.Z)(function*(){try{return yield o.firestore.collection("photo_types").doc(t.doc_id).set(t)}catch(n){return n}})()}update(t){var o=this;return(0,l.Z)(function*(){try{return yield o.firestore.collection("photo_types").doc(t.doc_id).update(Object.assign({},t))}catch(n){return n}})()}delete(t){var o=this;return(0,l.Z)(function*(){try{return yield o.firestore.collection("photo_types").doc(t).delete()}catch(n){return n}})()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(f.ST))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var F=i(2436),N=i(7488),P=i(2019),O=i(1962),m=i(6115);function U(r,c){if(1&r&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&r){const t=c.$implicit;e.xp6(1),e.Oqu(t.code)}}function k(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",31)(1,"input",32),e.NdJ("change",function(n){return e.CHM(t),e.oxw(2).onUploadImg(n)}),e.qZA(),e.TgZ(2,"label",33),e._UZ(3,"img",34),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.s9C("src",t.foto,e.LSH)}}function I(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",35)(1,"input",32),e.NdJ("change",function(n){return e.CHM(t),e.oxw(2).onUploadImg(n)}),e.qZA(),e.TgZ(2,"label",33),e._UZ(3,"img",34),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.s9C("src",t.foto,e.LSH)}}function Y(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"label",7),e._uU(5,"Seleccione el tipo del producto"),e.qZA(),e.TgZ(6,"select",8),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().productType=n}),e.YNc(7,U,2,1,"option",9),e.qZA()(),e._UZ(8,"hr",10),e.qZA()(),e.TgZ(9,"div",11),e.YNc(10,k,4,1,"div",12),e.YNc(11,I,4,1,"div",13),e.TgZ(12,"div",14)(13,"div",15)(14,"label",16)(15,"b"),e._uU(16,"Nombre"),e.qZA()(),e._UZ(17,"input",17),e.qZA(),e.TgZ(18,"div",18)(19,"label",19)(20,"b"),e._uU(21,"Cantidad"),e.qZA()(),e._UZ(22,"input",20),e.qZA(),e.TgZ(23,"div",18)(24,"label",21)(25,"b"),e._uU(26,"Precio"),e.qZA()(),e.TgZ(27,"div",22),e._UZ(28,"input",23),e.TgZ(29,"span",24),e._uU(30,"\u20ac"),e.qZA()()(),e.TgZ(31,"div",25)(32,"label",26)(33,"b"),e._uU(34,"Descripci\xf3n"),e.qZA()(),e._UZ(35,"textarea",27),e.qZA()()(),e.TgZ(36,"div",28)(37,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().goTo("")}),e._uU(38,"Cancelar"),e.qZA(),e.TgZ(39,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw().submit()}),e._uU(40,"Subir el producto"),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.productType),e.xp6(1),e.Q6J("ngForOf",t.productTypes),e.xp6(3),e.Q6J("ngIf","CLOTHING"==t.productType),e.xp6(1),e.Q6J("ngIf","MUSIC"==t.productType)}}function J(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",36)(2,"main")(3,"div")(4,"div",37)(5,"div",38)(6,"div",39)(7,"div",15)(8,"label",40)(9,"b"),e._uU(10,"T\xedtulo"),e.qZA()(),e.TgZ(11,"input",41),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().songTitle=n}),e.qZA()(),e.TgZ(12,"div",15)(13,"label",42)(14,"b"),e._uU(15,"Archivo"),e.qZA()(),e.TgZ(16,"input",43),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().songAudio=n})("change",function(n){return e.CHM(t),e.oxw().onUploadMusic(n)}),e.qZA()()(),e.TgZ(17,"div",44)(18,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancel()}),e._uU(19,"Cancelar"),e.qZA(),e.TgZ(20,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw().addSong()}),e._uU(21,"Subir canci\xf3n"),e.qZA()()()()()()()()}if(2&r){const t=e.oxw();e.xp6(11),e.Q6J("ngModel",t.songTitle),e.xp6(5),e.Q6J("ngModel",t.songAudio)}}const H=[{path:"",component:(()=>{class r{constructor(t,o,n,a,d,_,y,u,p,g,q,D,L,Q){this.formBuilder=t,this.authSrv=o,this.usuarioSrv=n,this.cancionSrv=a,this.sizesSrv=d,this.productSrv=_,this.productTypeSrv=y,this.productPhotoSrv=u,this.photoTypeSrv=p,this.merchandisingSrv=g,this.releaseSrv=q,this.releaseTypeSrv=D,this.storageSrv=L,this.router=Q,this.view="release",this.canciones=[],this.prueba=[]}ngOnInit(){this.foto="https://firebasestorage.googleapis.com/v0/b/boomclub-tfg.appspot.com/o/portadas%2Fdefault-cover-art.png?alt=media&token=39a74894-86e2-4413-81f0-b8584a500b36",this.sizesSrv.getAll().subscribe(t=>this.sizes=t),this.releaseTypeSrv.getAll().subscribe(t=>this.releaseTypes=t),this.productTypeSrv.getAll().subscribe(t=>{this.productTypes=t,this.productType=t[1].code}),this.photoTypeSrv.getAll().subscribe(t=>this.photoType=t)}ngOnDestroy(){}goTo(t){this.router.navigate([t])}logout(){var t=this;return(0,l.Z)(function*(){yield t.authSrv.logout().then(()=>{console.log(t.authSrv.getUsuario())}),t.router.navigate(["/login"])})()}follow(){}onUploadImg(t){let o=t.target.files[0],n=new FileReader;n.readAsDataURL(o),n.onloadend=()=>{this.foto=n.result}}onUploadMusic(t){this.music=t.target.files[0];let o=new FileReader;o.readAsDataURL(this.music),o.onloadend=()=>{this.foto=o.result}}submit(){var t=this;return(0,l.Z)(function*(){try{let o=t.usuarioSrv.getUsuario();t.storageSrv.uploadImg("merchan/"+o.email,t.releaseTitle,t.foto).then(function(){var n=(0,l.Z)(function*(a){t.myuuid=(0,h.Z)();let d={id:t.myuuid,name:"name",description:"description",product_type:t.productTypes.filter(u=>t.productType==u.code)[0]};yield t.productSrv.create(d),t.myuuid=(0,h.Z)();let _={id:t.myuuid,photo:a,photo_type:t.photoType.filter(u=>"DISK"==u.name)[0],product:d};yield t.productPhotoSrv.create(_);let y=(0,h.Z)();t.sizes.forEach(function(){var u=(0,l.Z)(function*(p){let g;console.log("element",p),t.myuuid=(0,h.Z)(),console.log("myuuid",t.myuuid),g={id:t.myuuid,code:y,product:d,prize:9.99,stock:100,size:p,created_at:(new Date).getTime()},console.log("merchandising",g),yield t.merchandisingSrv.create(g)});return function(p){return u.apply(this,arguments)}}()),t.router.navigate(["/shop"])});return function(a){return n.apply(this,arguments)}}())}catch(o){}})()}newSong(){this.view="song"}addSong(){this.nSong={title:this.songTitle,audio:this.music},this.canciones.push(this.nSong),this.songTitle="",this.songAudio="",this.view="release"}cancel(){this.songTitle="",this.songAudio="",this.view="release"}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(s.qu),e.Y36(T.e),e.Y36(C.L),e.Y36(M.e),e.Y36(b.d),e.Y36(Z),e.Y36(A),e.Y36(S.S),e.Y36(w),e.Y36(F.t),e.Y36(N.R),e.Y36(P.g),e.Y36(O.V),e.Y36(m.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-nuevo-merchan"]],decls:3,vars:2,consts:[[1,"form-signin","needs-validation"],["class","form-back bg-size",4,"ngIf"],[4,"ngIf"],[1,"form-back","bg-size"],[1,"row","mx-auto"],[1,"col-lg-10","mx-auto","py-md-5"],[1,"col-md-4","mx-auto"],["for","merchanType",1,"form-label","text-pink"],["name","merchanType","id","merchanType","required","",1,"form-select",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"text-pink"],[1,"d-flex","align-items-center","row","col-lg-10","mx-auto","text-pink"],["class","col-lg-4 mx-auto",4,"ngIf"],["class","row col-lg-4 mx-auto",4,"ngIf"],[1,"row","col-lg-8"],[1,"col-6"],["for","name",1,"form-label","text-pink","title-new-song"],["type","text","id","name","placeholder","","value","",1,"form-control"],[1,"col-3"],["for","stock",1,"form-label","text-pink","title-new-song"],["type","number","id","stock","placeholder","","value","",1,"form-control"],["for","prize",1,"form-label","text-pink","title-new-song"],[1,"input-group"],["type","number","step",".01","id","prize","placeholder","","value","",1,"form-control"],[1,"input-group-text"],[1,"col-lg-12","mt-3"],["for","description",1,"form-label","text-pink","title-new-song"],["formControlName","description","placeholder","","rows","3","id","description",1,"form-control"],[1,"col-10","mx-auto","d-flex","justify-content-end","mt-5"],[1,"btn","btn-outline-light","me-3",3,"click"],[1,"btn","btn-light","me-4",3,"click"],[1,"col-lg-4","mx-auto"],["name","foto","type","file","accept",".png, .jpg,.jpeg","multiple","","id","inputFile",3,"change"],["for","inputFile",1,"labelInputFileDisk"],["alt","upload file",3,"src"],[1,"row","col-lg-4","mx-auto"],[1,"form-back","bg-dark"],[1,"col-lg-10","mx-auto","p-3","py-md-5"],[1,"test","mt-3","d-flex","align-items-center","justify-content-center","row","g-1"],[1,"row","row-cols-2","col-lg-12"],["for","songTitle",1,"form-label","text-pink","title-new-song"],["name","songTitle","type","text","id","songTitle","placeholder","","value","",1,"form-control",3,"ngModel","ngModelChange"],["for","inputSong",1,"form-label","text-pink","title-new-song"],["name","cancion","type","file","accept",".mp3, .wav","id","inputSong",1,"form-control",3,"ngModel","ngModelChange","change"],[1,"col-12","d-flex","justify-content-end","mt-5"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.YNc(1,Y,41,4,"div",1),e.YNc(2,J,22,2,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf","release"==o.view),e.xp6(1),e.Q6J("ngIf","song"==o.view))},directives:[s._Y,s.JL,s.F,v.O5,s.EJ,s.Q7,s.JJ,s.On,v.sg,s.YN,s.Kr,s.Fj,s.u],styles:[".name[_ngcontent-%COMP%]{font-size:450%;color:#ab6c6c;margin-left:5%}.title-new-song[_ngcontent-%COMP%]{font-size:125%}.test[_ngcontent-%COMP%]{max-width:100%}.arreglo[_ngcontent-%COMP%]{margin-top:25px;width:100%}.btn-back[_ngcontent-%COMP%]{background-color:#ab6c6c;border-radius:20px}.info[_ngcontent-%COMP%]{padding:30px}.color-link[_ngcontent-%COMP%]{color:#ab6c6c}.div-pointer[_ngcontent-%COMP%]{text-align:center;width:50%;cursor:pointer}.bg-profile[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/boomclub-tfg.appspot.com/o/backOG3.png?alt=media&token=07ca8e3a-0ce0-49a8-95d6-4a8c2add230d);background-size:cover}#inputFile[_ngcontent-%COMP%]{display:none}.labelInputFile[_ngcontent-%COMP%]{width:200px;height:200px;padding:1rem;box-shadow:0 0 10px -1px gray;display:flex;justify-content:center;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none}.labelInputFile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px}.labelInputFileDisk[_ngcontent-%COMP%]{width:350px;height:350px;padding:1rem;display:flex;justify-content:center;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none}.labelInputFileDisk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:350px;height:350px}.labelInputFile[_ngcontent-%COMP%]:active{transform:scale(.9)}@media screen and (max-width: 767px){.ocultar[_ngcontent-%COMP%]{display:none}}"]}),r})(),canActivate:[i(3870).a],pathMatch:"full"}];let j=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[v.ez,s.u5,s.UX,m.Bz.forChild(H)],m.Bz]}),r})()}}]);