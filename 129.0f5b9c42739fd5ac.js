"use strict";(self.webpackChunkprueba=self.webpackChunkprueba||[]).push([[129],{3870:(b,_,n)=>{n.d(_,{a:()=>u});var d=n(5e3),f=n(6115),t=n(629);let u=(()=>{class h{constructor(s,v){this.router=s,this.authService=v}canActivate(){return this.authService.authenticated().subscribe(s=>(s||this.router.navigate(["/login"]),this.authService.authenticated())),this.authService.authenticated()}}return h.\u0275fac=function(s){return new(s||h)(d.LFG(f.F0),d.LFG(t.e))},h.\u0275prov=d.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},887:(b,_,n)=>{n.d(_,{S:()=>u});var d=n(5861),f=n(5e3),t=n(7407);let u=(()=>{class s{constructor(o){this.firestore=o}getAll(){return this.firestore.collection("product_photos").valueChanges({idField:"id"})}getAllMatches(o){return this.firestore.collection("product_photos",a=>a.startAt(o).endAt(o+"\uf8ff")).valueChanges({idField:"id"})}getOne(o){return this.firestore.collection("product_photos").doc(o).valueChanges({idField:"id"})}getOrderedTypeName(){return this.firestore.collection("product_photos",o=>o.orderBy("photo_type.name")).valueChanges({idField:"id"})}getByProduct(o){return this.firestore.collection("product_photos",a=>a.where("product.id","==",o).orderBy("photo_type.name")).valueChanges({idField:"id"})}setProductPhotos(o){this.product_photos=o}getProductPhotos(){return this.product_photos}create(o){var a=this;return(0,d.Z)(function*(){try{return yield a.firestore.collection("product_photos").doc(o.id).set(o)}catch(l){return l}})()}update(o){var a=this;return(0,d.Z)(function*(){try{return yield a.firestore.collection("product_photos").doc(o.id).update(Object.assign({},o))}catch(l){return l}})()}delete(o){var a=this;return(0,d.Z)(function*(){try{return yield a.firestore.collection("product_photos").doc(o).delete()}catch(l){return l}})()}}return s.\u0275fac=function(o){return new(o||s)(f.LFG(t.ST))},s.\u0275prov=f.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},129:(b,_,n)=>{n.r(_),n.d(_,{CartModule:()=>A});var d=n(9808),f=n(5861),t=n(5e3),u=n(2382),h=n(629),C=n(3632),s=n(5237),v=n(887),o=n(1962),a=n(6115);function l(i,g){1&i&&(t.TgZ(0,"div",4)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23)(5,"div",24),t._UZ(6,"img",25),t.qZA(),t.TgZ(7,"div",26)(8,"p",27),t._uU(9,"No has a\xf1adido ning\xfan art\xedculo al carrito"),t.qZA()()()()()()())}function P(i,g){if(1&i){const e=t.EpF();t.TgZ(0,"div",21)(1,"div",22)(2,"div",29),t._UZ(3,"img",30),t.qZA(),t.TgZ(4,"div",31)(5,"div",10)(6,"h5",11),t._uU(7),t.qZA(),t.TgZ(8,"p",32),t._uU(9),t.qZA(),t.TgZ(10,"div",15)(11,"p",33),t._uU(12),t.qZA(),t.TgZ(13,"div",34)(14,"button",35),t.NdJ("click",function(){const m=t.CHM(e).index;return t.oxw(2).subtractAmount(m)}),t._uU(15,"-"),t.qZA(),t.TgZ(16,"input",36),t.NdJ("change",function(c){const p=t.CHM(e).index;return t.oxw(2).setAmount(c,p)}),t.qZA(),t.TgZ(17,"button",35),t.NdJ("click",function(){const m=t.CHM(e).index;return t.oxw(2).addAmount(m)}),t._uU(18,"+"),t.qZA()()()()()()()}if(2&i){const e=g.$implicit,r=t.oxw(2);t.xp6(3),t.s9C("src",r.photos[e.merchandising.code].photo,t.LSH),t.xp6(4),t.Oqu(e.merchandising.product.name),t.xp6(2),t.hij("",e.merchandising.prize,"\u20ac"),t.xp6(3),t.hij(" ",e.merchandising.product.description," "),t.xp6(4),t.Q6J("value",e.amount)}}function y(i,g){if(1&i&&(t.TgZ(0,"div",4)(1,"div",20),t.YNc(2,P,19,5,"div",28),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.cart)}}const w=[{path:"",component:(()=>{class i{constructor(e,r,c,m,p,x,Z,T){this.formBuilder=e,this.authSrv=r,this.usuarioSrv=c,this.cartSrv=m,this.productPhotoSrv=p,this.storageSrv=x,this.router=Z,this.activatedRoute=T,this.prueba=[],this.photos=[],this.resume=0,this.disabled=!0,this.suscriptions=[],this.type="clothing",this.photo1="front",this.photo2="back",this.photo3="model_front",this.photo4="model_back",this.photo5="model_side"}ngOnInit(){const e=this.activatedRoute.params.subscribe(r=>{this.id=r.id,console.log(this.id,"hola")});this.suscriptions.push(e),this.user=this.usuarioSrv.getUsuario(),this.cartSrv.getByUser(this.user.username).subscribe(r=>{this.cart=r.filter(c=>!c.purchase.paid),this.resume=0,console.log("cart",this.cart),this.cart.forEach(c=>{this.resume+=c.merchandising.prize*c.amount,this.productPhotoSrv.getByProduct(c.merchandising.product.id).subscribe(m=>{m.forEach(p=>{("DISK"==p.photo_type.name||"FRONT"==p.photo_type.name)&&(this.photos[c.merchandising.code]=p)})})})}),console.log(this.suscriptions),this.form=this.formBuilder.group({})}ngOnDestroy(){}setAmount(e,r){e.target.value<1?this.cartSrv.delete(this.cart[r].id):(this.cart[r].amount=e.target.value,this.cartSrv.update(this.cart[r]))}addAmount(e){this.cart[e].amount++,this.cartSrv.update(this.cart[e])}subtractAmount(e){this.cart[e].amount--,this.cart[e].amount<1?this.cartSrv.delete(this.cart[e].id):this.cartSrv.update(this.cart[e])}goTo(e){this.router.navigate([e])}logout(){var e=this;return(0,f.Z)(function*(){yield e.authSrv.logout().then(()=>{console.log(e.authSrv.getUsuario())}),e.router.navigate(["/login"])})()}follow(){}onUploadImg(e){let r=e.target.files[0],c=new FileReader;c.readAsDataURL(r),c.onloadend=()=>{this.foto=c.result}}back(){history.back()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(u.qu),t.Y36(h.e),t.Y36(C.L),t.Y36(s.N),t.Y36(v.S),t.Y36(o.V),t.Y36(a.F0),t.Y36(a.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-cart"]],decls:33,vars:5,consts:[[1,"bg-light",2,"height","67vh"],[1,"col-lg-6","mx-auto","py-md-4"],[1,"display-flex","row","py-4"],["class","col-6",4,"ngIf"],[1,"col-6"],[1,"form-back"],[1,"form-signin","needs-validation"],[1,"col-lg-11","mx-auto","p-2"],[1,"test","d-flex","align-items-center"],[1,"card","w-100","p-2"],[1,"card-body"],[1,"card-title"],[1,"mt-4","d-flex","justify-content-between"],[1,"card-text","fs-6"],[1,"text-end"],[1,"d-flex","justify-content-between"],[1,"card-text","fs-4"],[1,"d-flex","align-items-center","row","row-cols-1","row-cols-sm-1","row-cols-md-4","g-3"],[1,"col-sm-12","col-md-12","col-lg-12"],[1,"btn","btn-back","text-white","arreglo",3,"disabled","click"],[1,"display-flex","row","row-cols-1","p-2",2,"max-height","58vh","overflow-y","scroll"],[1,"card","mb-3",2,"padding","0"],[1,"row","g-0"],[1,"card-body","d-flex","align-items-center","justify-content-center","row","my-5"],[1,"col-12","d-flex","align-items-center","justify-content-center"],["src","../../../../assets/img/png-transparent-computer-icons-shopping-cart-encapsulated-postscript-shopping-cart-angle-black-shopping-removebg-preview.png","alt","product",1,"img-fluid","rounded-start",2,"object-fit","cover","height","5rem"],[1,"col-12","mt-4","mb-4"],[1,"card-text","text-center","mb-2"],["class","card mb-3","style","padding: 0;",4,"ngFor","ngForOf"],[1,"col-md-4"],["alt","product",1,"img-fluid","rounded-start",2,"height","9rem","width","100%",3,"src"],[1,"col-md-8"],[1,"card-text"],[1,"card-text",2,"overflow","hidden","white-space","nowrap","text-overflow","ellipsis","width","45%"],[1,"input-group"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","text",1,"form-control",3,"value","change"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,l,10,0,"div",3),t.YNc(4,y,3,1,"div",3),t.TgZ(5,"div",4)(6,"div",5)(7,"form",6)(8,"div")(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"h5",11)(14,"strong"),t._uU(15,"Resumen"),t.qZA()(),t.TgZ(16,"div",12)(17,"p",13),t._uU(18,"Subtotal art\xedculos"),t.qZA(),t.TgZ(19,"p",13)(20,"strong",14),t._uU(21),t.qZA()()(),t._UZ(22,"hr"),t.TgZ(23,"div",15)(24,"p",16),t._uU(25,"Total art\xedculos"),t.qZA(),t.TgZ(26,"p",16)(27,"strong",14),t._uU(28),t.qZA()()(),t.TgZ(29,"div",17)(30,"div",18)(31,"button",19),t.NdJ("click",function(){return r.goTo("/checkout")}),t._uU(32,"Realizar pedido"),t.qZA()()()()()()()()()()()()()()),2&e&&(t.xp6(3),t.Q6J("ngIf",!r.cart||r.cart.length<1),t.xp6(1),t.Q6J("ngIf",r.cart.length>0),t.xp6(17),t.hij("",r.resume.toFixed(2),"\u20ac"),t.xp6(7),t.hij("",r.resume.toFixed(2),"\u20ac"),t.xp6(3),t.Q6J("disabled",r.cart.length<1))},directives:[d.O5,d.sg,u._Y,u.JL,u.F],styles:[".name[_ngcontent-%COMP%]{font-size:450%;color:#f2ebdc;margin-left:5%}.title-new-song[_ngcontent-%COMP%]{font-size:125%}.test[_ngcontent-%COMP%]{max-width:100%}.arreglo[_ngcontent-%COMP%]{margin-top:30px;width:100%}.btn-back[_ngcontent-%COMP%]{background-color:#0d0d0d;border-radius:6px}.info[_ngcontent-%COMP%]{padding:30px}.color-link[_ngcontent-%COMP%]{color:#f2ebdc}.div-pointer[_ngcontent-%COMP%]{text-align:center;width:50%;cursor:pointer}.bg-profile[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/samesouls-tfg.appspot.com/o/backOG3.png?alt=media&token=07ca8e3a-0ce0-49a8-95d6-4a8c2add230d);background-size:cover}#inputFile[_ngcontent-%COMP%]{display:none}.labelInputFile[_ngcontent-%COMP%]{width:200px;height:200px;padding:1rem;box-shadow:0 0 10px -1px gray;display:flex;justify-content:center;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none}.labelInputFile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px}.labelInputFile[_ngcontent-%COMP%]:active{transform:scale(.9)}@media screen and (max-width: 767px){.ocultar[_ngcontent-%COMP%]{display:none}}.merchan-photo[_ngcontent-%COMP%]{height:78vh}.return-btn[_ngcontent-%COMP%]{position:fixed;top:12vh;left:.4vw}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-button:increment, [_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0d0d0d;border-radius:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:10px}.input-group[_ngcontent-%COMP%]{width:6rem}.input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:2rem}"]}),i})(),canActivate:[n(3870).a],children:[]}];let A=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.ez,u.u5,u.UX,a.Bz.forChild(w)],a.Bz]}),i})()}}]);