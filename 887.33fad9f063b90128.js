"use strict";(self.webpackChunkprueba=self.webpackChunkprueba||[]).push([[887],{2887:(O,p,s)=>{s.r(p),s.d(p,{EditArtistaModule:()=>k});var f=s(9808),c=s(5861),o=s(2382),g=s(5226),h=s.n(g),e=s(5e3),b=s(629),v=s(3632),Z=s(2368),C=s(1962),m=s(6115);function A(i,l){if(1&i&&(e.TgZ(0,"option",30),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.Oqu(t.code)}}const U=[{path:"",component:(()=>{class i{constructor(t,n,r,a,u,d){this.formBuilder=t,this.authSrv=n,this.usuarioSrv=r,this.genreSrv=a,this.storageSrv=u,this.router=d,this.prueba=[],this.disabled=!0}ngOnInit(){this.user=this.usuarioSrv.getUsuario(),console.log("user",this.user),this.genreSrv.getAll().subscribe(t=>{this.genre=t}),null==this.user?this.authSrv.authenticated().subscribe(t=>{t&&this.authSrv.getUsuario().subscribe(n=>{this.usuarioSrv.getOne(n.uid).subscribe(r=>{console.log("user",r),this.usuarioSrv.setUsuario(r),this.user=r,this.form=this.formBuilder.group({foto:"",username:[this.user.username,[o.kI.required]],nombre:[this.user.nombre,[o.kI.required]],apellidos:[this.user.apellidos],email:[{value:this.user.email,disabled:!0},[o.kI.required]],description:[this.user.description],genre:[this.user.genre.id,[o.kI.required]]}),this.foto=this.user.foto,this.foto||(this.foto="https://firebasestorage.googleapis.com/v0/b/samesouls-a0c25.appspot.com/o/user-photo.png?alt=media&token=04f07362-f1be-4501-a038-fdd7cec3bb2a")})})}):(this.form=this.formBuilder.group({foto:"",username:[this.user.username,[o.kI.required]],nombre:[this.user.nombre,[o.kI.required]],apellidos:[this.user.apellidos],email:[{value:this.user.email,disabled:!0},[o.kI.required]],description:[this.user.description],genre:[this.user.genre.id,[o.kI.required]]}),this.foto=this.user.foto,this.foto||(this.foto="https://firebasestorage.googleapis.com/v0/b/samesouls-a0c25.appspot.com/o/user-photo.png?alt=media&token=04f07362-f1be-4501-a038-fdd7cec3bb2a"))}ngOnDestroy(){}goTo(t){this.router.navigate([t])}logout(){var t=this;return(0,c.Z)(function*(){yield t.authSrv.logout().then(()=>{console.log(t.authSrv.getUsuario())}),t.router.navigate(["/login"])})()}follow(){}onUploadImg(t){let n=t.target.files[0],r=new FileReader;r.readAsDataURL(n),r.onloadend=()=>{this.foto=r.result}}submit(){var t=this;return(0,c.Z)(function*(){try{t.storageSrv.uploadImg("avatar/",t.user.email,t.foto).then(function(){var n=(0,c.Z)(function*(r){t.genreSrv.getOne(t.form.value.genre).subscribe(function(){var a=(0,c.Z)(function*(u){let d;d=r?{id:t.user.id,nombre:t.form.value.nombre,apellidos:t.form.value.apellidos,email:t.user.email,description:t.form.value.description,genre:u,foto:r,username:t.form.value.username}:{id:t.user.id,nombre:t.form.value.nombre,apellidos:t.form.value.apellidos,email:t.user.email,description:t.form.value.description,genre:u,foto:t.foto,username:t.form.value.username},yield t.usuarioSrv.update(d),h().fire({icon:"success",title:"Se ha actualizado el perfil"}),t.router.navigate(["/artist-profile"])});return function(u){return a.apply(this,arguments)}}())});return function(r){return n.apply(this,arguments)}}())}catch(n){}})()}reset(){this.form=this.formBuilder.group({foto:[this.user.foto],username:[this.user.username,[o.kI.required]],nombre:[this.user.nombre,[o.kI.required]],apellidos:[this.user.apellidos],email:[{value:this.user.email,disabled:!0},[o.kI.required]],description:[this.user.description],genre:[this.user.genre.id,[o.kI.required]]})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(o.qu),e.Y36(b.e),e.Y36(v.L),e.Y36(Z.S),e.Y36(C.V),e.Y36(m.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-artista"]],decls:49,vars:3,consts:[[1,"form-back","bg-dark"],[1,"row","col-10","mx-auto","form-signin","needs-validation","text-pink","mt-3",3,"formGroup"],[1,"mx-auto"],[1,"fs-4","text-pink"],[1,"text-pink"],[1,"test","mt-3","d-flex","justify-content-center","row","row-cols-1","row-cols-sm-2","row-cols-md-3","g-1"],[1,"col-lg-2","d-flex","align-items-center","justify-content-start","pe-4"],["formControlName","foto","type","file","accept",".png, .jpg,.jpeg","multiple","","id","inputFile",3,"change"],["for","inputFile",1,"labelInputFile"],["alt","upload file",2,"object-fit","cover",3,"src"],[1,"mt-2","row","col-lg-10","text-pink"],[1,"col-lg-6"],["for","nombre",1,"form-label","title-new-song"],["formControlName","nombre","type","text","id","nombre","placeholder","Nombre","value","",1,"form-control"],["for","apellidos",1,"form-label","title-new-song"],["formControlName","apellidos","type","text","id","apellidos","placeholder","Apellidos","value","",1,"form-control"],[1,"mt-2","col-lg-4"],["for","username",1,"form-label","title-new-song"],["formControlName","username","type","text","id","username","placeholder","Nombre de usuario","value","",1,"form-control"],["for","genre",1,"form-label","title-new-song"],["formControlName","genre","aria-label","Default select example","id","genre",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],["for","email",1,"form-label","title-new-song"],["formControlName","email","type","text","id","email","placeholder","Correo electr\xf3nico","value","",1,"form-control","text-muted"],[1,"mt-4","row","col-lg-12","text-pink"],["for","description",1,"form-label","title-new-song"],["formControlName","description","placeholder","Indica una peque\xf1a descripci\xf3n sobre ti","rows","3","id","description",1,"form-control"],[1,"col-12","d-flex","justify-content-end","mt-5","pe-4"],[1,"btn","btn-outline-light","me-3",3,"click"],[1,"btn","btn-light",3,"click"],[3,"ngValue"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"main")(2,"form",1)(3,"div")(4,"div",2)(5,"h3",3),e._uU(6,"Perfil"),e.qZA(),e._UZ(7,"hr",4),e.TgZ(8,"div",5)(9,"div",6)(10,"input",7),e.NdJ("change",function(a){return n.onUploadImg(a)}),e.qZA(),e.TgZ(11,"label",8),e._UZ(12,"img",9),e.qZA()(),e.TgZ(13,"div",10)(14,"div",11)(15,"label",12)(16,"b"),e._uU(17,"Nombre"),e.qZA()(),e._UZ(18,"input",13),e.qZA(),e.TgZ(19,"div",11)(20,"label",14)(21,"b"),e._uU(22,"Apellidos"),e.qZA()(),e._UZ(23,"input",15),e.qZA(),e.TgZ(24,"div",16)(25,"label",17)(26,"b"),e._uU(27,"Nombre de usuario"),e.qZA()(),e._UZ(28,"input",18),e.qZA(),e.TgZ(29,"div",16)(30,"label",19),e._uU(31,"G\xe9nero musical"),e.qZA(),e.TgZ(32,"select",20),e.YNc(33,A,2,2,"option",21),e.qZA()(),e.TgZ(34,"div",16)(35,"label",22)(36,"b"),e._uU(37,"Email"),e.qZA()(),e._UZ(38,"input",23),e.qZA()(),e.TgZ(39,"div",24)(40,"label",25)(41,"b"),e._uU(42,"Descripci\xf3n"),e.qZA()(),e._UZ(43,"textarea",26),e.qZA()(),e.TgZ(44,"div",27)(45,"button",28),e.NdJ("click",function(){return n.reset()}),e._uU(46,"Cancelar"),e.qZA(),e.TgZ(47,"button",29),e.NdJ("click",function(){return n.submit()}),e._uU(48,"Editar"),e.qZA()()()()()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(10),e.s9C("src",n.foto,e.LSH),e.xp6(21),e.Q6J("ngForOf",n.genre))},directives:[o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,o.EJ,f.sg,o.YN,o.Kr],styles:[".name[_ngcontent-%COMP%]{font-size:450%;color:#f2ebdc;margin-left:5%}.title-new-song[_ngcontent-%COMP%]{font-size:125%}.test[_ngcontent-%COMP%]{max-width:100%}.arreglo[_ngcontent-%COMP%]{margin-top:30px;width:100%}.btn-back[_ngcontent-%COMP%], .btn-outline-back[_ngcontent-%COMP%]{background-color:#f2ebdc;border-radius:20px}.info[_ngcontent-%COMP%]{padding:30px}.color-link[_ngcontent-%COMP%]{color:#f2ebdc}.div-pointer[_ngcontent-%COMP%]{text-align:center;width:50%;cursor:pointer}.bg-profile[_ngcontent-%COMP%]{background-color:#0d0d0d}#inputFile[_ngcontent-%COMP%]{display:none}.labelInputFile[_ngcontent-%COMP%]{width:200px;height:200px;padding:1rem;box-shadow:0 0 10px -1px gray;display:flex;justify-content:center;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none}.labelInputFile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px}.labelInputFile[_ngcontent-%COMP%]:active{transform:scale(.9)}@media screen and (max-width: 767px){.ocultar[_ngcontent-%COMP%]{display:none}}"]}),i})(),canActivate:[s(3870).a],children:[]}];let k=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[f.ez,o.u5,o.UX,m.Bz.forChild(U)],m.Bz]}),i})()}}]);