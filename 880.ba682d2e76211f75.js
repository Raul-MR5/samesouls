"use strict";(self.webpackChunkprueba=self.webpackChunkprueba||[]).push([[880],{3870:(_,s,i)=>{i.d(s,{a:()=>g});var u=i(5e3),d=i(6115),a=i(629);let g=(()=>{class e{constructor(c,m){this.router=c,this.authService=m}canActivate(){return this.authService.authenticated().subscribe(c=>(c||this.router.navigate(["/login"]),this.authService.authenticated())),this.authService.authenticated()}}return e.\u0275fac=function(c){return new(c||e)(u.LFG(d.F0),u.LFG(a.e))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7880:(_,s,i)=>{i.r(s),i.d(s,{CheckoutModule:()=>q});var u=i(9808),d=i(5861),a=i(2382),g=i(2340),e=i(5e3),v=i(629),c=i(3632),m=i(1962),f=i(7407);let C=(()=>{class o{constructor(t){this.firestore=t}getAllCountries(){return[{value:"spain",viewValue:"Espa\xf1a"}]}getAllStates(){return[{value:"andalucia",viewValue:"Andaluc\xeda"},{value:"aragon",viewValue:"Arag\xf3n"},{value:"asturias",viewValue:"Principado de Asturias"},{value:"balears",viewValue:"Illes Balears"},{value:"canarias",viewValue:"Canarias"},{value:"cantabria",viewValue:"Cantabria"},{value:"castillayle\xf3n",viewValue:"Castilla y Le\xf3n"},{value:"castillalamancha",viewValue:"Castilla - La Mancha"},{value:"catalunya",viewValue:"Catalunya"},{value:"comunitatvalenciana",viewValue:"Comunitat Valenciana"},{value:"extremadura",viewValue:"Extremadura"},{value:"galicia",viewValue:"Galicia"},{value:"madrid",viewValue:"Comunidad de Madrid"},{value:"murcia",viewValue:"Regi\xf3n de Murcia"},{value:"navarra",viewValue:"Comunidad Foral de Navarra"},{value:"paisvasco",viewValue:"Pa\xeds Vasco"},{value:"rioja",viewValue:"La Rioja"},{value:"ceuta",viewValue:"Ceuta"},{value:"melilla",viewValue:"Melilla"}]}getAllCities(){return[{value:"andalucia",viewValue:"Andaluc\xeda"},{value:"aragon",viewValue:"Arag\xf3n"},{value:"asturias",viewValue:"Principado de Asturias"},{value:"balears",viewValue:"Illes Balears"},{value:"canarias",viewValue:"Canarias"},{value:"cantabria",viewValue:"Cantabria"},{value:"castillayle\xf3n",viewValue:"Castilla y Le\xf3n"},{value:"castillalamancha",viewValue:"Castilla - La Mancha"},{value:"catalunya",viewValue:"Catalunya"},{value:"comunitatvalenciana",viewValue:"Comunitat Valenciana"},{value:"extremadura",viewValue:"Extremadura"},{value:"galicia",viewValue:"Galicia"},{value:"madrid",viewValue:"Comunidad de Madrid"},{value:"murcia",viewValue:"Regi\xf3n de Murcia"},{value:"navarra",viewValue:"Comunidad Foral de Navarra"},{value:"paisvasco",viewValue:"Pa\xeds Vasco"},{value:"rioja",viewValue:"La Rioja"},{value:"ceuta",viewValue:"Ceuta"},{value:"melilla",viewValue:"Melilla"}]}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(f.ST))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var b=i(5237),Z=i(246),p=i(6115),h=i(712);function x(o,l){if(1&o&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.Oqu(t.viewValue)}}function A(o,l){if(1&o&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.Oqu(t.viewValue)}}function O(o,l){if(1&o&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.Oqu(t.viewValue)}}function y(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"ul")(4,"li",3)(5,"div")(6,"p"),e._uU(7,"1"),e.qZA()()(),e.TgZ(8,"li")(9,"div")(10,"p"),e._uU(11,"2"),e.qZA()()(),e.TgZ(12,"li")(13,"div")(14,"p"),e._uU(15,"3"),e.qZA()()()()()(),e.TgZ(16,"form",4),e.NdJ("submit",function(){return e.CHM(t),e.oxw().submit()}),e.TgZ(17,"div",5)(18,"label",6),e._uU(19,"Nombre"),e.qZA(),e._UZ(20,"input",7),e.qZA(),e.TgZ(21,"div",5)(22,"label",8),e._uU(23,"Apellidos"),e.qZA(),e._UZ(24,"input",9),e.qZA(),e.TgZ(25,"div",5)(26,"label",10),e._uU(27,"DNI/CIF/NIF"),e.qZA(),e._UZ(28,"input",11),e.qZA(),e.TgZ(29,"div",12)(30,"label",8),e._uU(31,"Correo electr\xf3nico"),e.qZA(),e._UZ(32,"input",13),e.qZA(),e.TgZ(33,"div",5)(34,"label",10),e._uU(35,"Tel\xe9fono"),e.qZA(),e._UZ(36,"input",14),e.qZA(),e.TgZ(37,"div",5)(38,"label",15),e._uU(39,"Pa\xeds"),e.qZA(),e.TgZ(40,"select",16),e.NdJ("change",function(){return e.CHM(t),e.oxw().selectState()}),e._UZ(41,"option",17),e.YNc(42,x,2,1,"option",18),e.qZA()(),e.TgZ(43,"div",5)(44,"label",15),e._uU(45,"Provincia"),e.qZA(),e.TgZ(46,"select",19),e.NdJ("change",function(){return e.CHM(t),e.oxw().selectCity()}),e._UZ(47,"option",17),e.YNc(48,A,2,1,"option",18),e.qZA()(),e.TgZ(49,"div",5)(50,"label",15),e._uU(51,"Ciudad"),e.qZA(),e.TgZ(52,"select",20),e._UZ(53,"option",17),e.YNc(54,O,2,1,"option",18),e.qZA()(),e.TgZ(55,"div",12)(56,"label",21),e._uU(57,"Direcci\xf3n y n\xfamero"),e.qZA(),e._UZ(58,"input",22),e.qZA(),e.TgZ(59,"div",5)(60,"label",21),e._uU(61,"C\xf3digo Postal"),e.qZA(),e._UZ(62,"input",23),e.qZA(),e.TgZ(63,"div",24)(64,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().goTo("cart")}),e._uU(65,"Cancelar"),e.qZA(),e.TgZ(66,"button",26),e._uU(67,"Continuar"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(16),e.Q6J("formGroup",t.form),e.xp6(26),e.Q6J("ngForOf",t.countries),e.xp6(6),e.Q6J("ngForOf",t.states),e.xp6(6),e.Q6J("ngForOf",t.cities)}}function M(o,l){if(1&o&&(e.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"ul")(4,"li",3)(5,"div")(6,"p"),e._uU(7,"1"),e.qZA()()(),e.TgZ(8,"li",3)(9,"div")(10,"p"),e._uU(11,"2"),e.qZA()()(),e.TgZ(12,"li")(13,"div")(14,"p"),e._uU(15,"3"),e.qZA()()()()()(),e.TgZ(16,"div",27),e._UZ(17,"ngx-paypal",28),e.qZA()()),2&o){const t=e.oxw();e.xp6(17),e.Q6J("config",t.payPalConfig)}}function w(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"ul")(4,"li",3)(5,"div")(6,"p",29),e._uU(7,"1"),e.qZA()()(),e.TgZ(8,"li",3)(9,"div")(10,"p"),e._uU(11,"2"),e.qZA()()(),e.TgZ(12,"li",3)(13,"div")(14,"p"),e._uU(15,"3"),e.qZA()()()()()(),e.TgZ(16,"div",30),e._UZ(17,"div",31),e.TgZ(18,"div",32),e._UZ(19,"div",33),e.TgZ(20,"div",34)(21,"h3")(22,"strong"),e._uU(23,"Direcci\xf3n de env\xedo"),e.qZA()(),e.TgZ(24,"p"),e._uU(25),e.qZA(),e.TgZ(26,"p"),e._uU(27),e.qZA(),e.TgZ(28,"p"),e._uU(29),e.qZA(),e.TgZ(30,"p"),e._uU(31),e.qZA()(),e.TgZ(32,"div",35)(33,"h3")(34,"strong"),e._uU(35,"Resumen del pedido"),e.qZA()(),e.TgZ(36,"div",36)(37,"p",37),e._uU(38,"Productos:"),e.qZA(),e.TgZ(39,"p",38),e._uU(40),e.qZA()(),e.TgZ(41,"div",36)(42,"p",37),e._uU(43,"Env\xedo:"),e.qZA(),e.TgZ(44,"p",38),e._uU(45,"0.00\u20ac"),e.qZA()(),e.TgZ(46,"div",36)(47,"p",37),e._uU(48,"Subtotal:"),e.qZA(),e.TgZ(49,"p",38),e._uU(50),e.qZA()(),e.TgZ(51,"div",36)(52,"p",37)(53,"strong"),e._uU(54,"Total (IVA incluido):"),e.qZA()(),e.TgZ(55,"p",38)(56,"strong"),e._uU(57),e.qZA()()()()()(),e.TgZ(58,"div",30),e._UZ(59,"div",31),e.TgZ(60,"div",39)(61,"div",40)(62,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().goTo("/shop")}),e._uU(63,"Volver"),e.qZA(),e.TgZ(64,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().download()}),e.TgZ(65,"span",42),e._uU(66,"print"),e.qZA(),e._UZ(67,"link",43),e.TgZ(68,"span",44),e._uU(69,"Imprimir"),e.qZA()()()()()()}if(2&o){const t=e.oxw();e.xp6(25),e.Oqu(t.form.value.address),e.xp6(2),e.Oqu(t.form.value.city+", "+t.form.value.state+" "+t.form.value.cp),e.xp6(2),e.Oqu(t.form.value.country),e.xp6(2),e.hij("Tel\xe9fono: ",t.form.value.phone,""),e.xp6(9),e.hij("",t.total.toFixed(2),"\u20ac"),e.xp6(10),e.hij("",t.total.toFixed(2),"\u20ac"),e.xp6(7),e.hij("",t.total.toFixed(2),"\u20ac")}}const U=[{path:"",component:(()=>{class o{constructor(t,n,r,k,V,I,F,S,D){this.formBuilder=t,this.authSrv=n,this.usuarioSrv=r,this.storageSrv=k,this.countrySrv=V,this.cartSrv=I,this.purchaseSrv=F,this.router=S,this.activatedRoute=D,this.step="address",this.prueba=[],this.disabled=!0,this.suscriptions=[],this.type="clothing",this.photo1="front",this.photo2="back",this.photo3="model_front",this.photo4="model_back",this.photo5="model_side",this.countries=[],this.states=[],this.cities=[],this.total=0}ngOnInit(){this.countries=this.countrySrv.getAllCountries(),this.usuario=this.usuarioSrv.getUsuario(),this.cartSrv.getByUser(this.usuario.username).subscribe(t=>{t=t.filter(n=>!n.purchase.paid),this.cart=t,console.log("cart",this.cart),t.forEach(n=>{this.total+=n.merchandising.prize*n.amount})}),this.form=this.formBuilder.group({name:["",[a.kI.required]],lastname:["",[a.kI.required]],dni:["",[a.kI.required]],email:["",[a.kI.required,a.kI.pattern("^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5})$")]],phone:["",[a.kI.required]],country:["",[a.kI.required]],state:["",[a.kI.required]],city:["",[a.kI.required]],address:["",[a.kI.required]],cp:["",[a.kI.required]]}),this.initConfig(),console.log(this.suscriptions)}ngOnDestroy(){}initConfig(){this.payPalConfig={currency:"EUR",clientId:g.N.clientId,createOrderOnClient:t=>({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"EUR",value:this.total.toFixed(2),breakdown:{item_total:{currency_code:"EUR",value:this.total.toFixed(2)}}},items:[{name:"Enterprise Subscription",quantity:"1",category:"DIGITAL_GOODS",unit_amount:{currency_code:"EUR",value:this.total.toFixed(2)}}]}]}),advanced:{commit:"true"},style:{label:"paypal",layout:"vertical"},onApprove:(t,n)=>{console.log("onApprove - transaction was approved, but not authorized",t,n),n.order.get().then(r=>{console.log("onApprove - you can get full order details inside onApprove: ",r)})},onClientAuthorization:t=>{console.log("onClientAuthorization - you should probably inform your server about completed transaction at this point",t),this.cart.forEach(n=>{this.purchaseSrv.getOne(n.purchase.id).subscribe(r=>{r.paid=!0,this.purchaseSrv.update(r),n.purchase=r,this.cartSrv.update(n)})}),this.step="resume"},onCancel:(t,n)=>{console.log("OnCancel",t,n)},onError:t=>{console.log("OnError",t)},onClick:(t,n)=>{console.log("onClick",t,n)}}}goTo(t){this.router.navigate([t])}logout(){var t=this;return(0,d.Z)(function*(){yield t.authSrv.logout().then(()=>{console.log(t.authSrv.getUsuario())}),t.router.navigate(["/login"])})()}follow(){}download(){const t=document.createElement("a");let n="../../../../assets/img/recibo01.png";t.href=n,t.download=n.split("/").pop(),document.body.appendChild(t),t.click(),document.body.removeChild(t)}onUploadImg(t){let n=t.target.files[0],r=new FileReader;r.readAsDataURL(n),r.onloadend=()=>{this.foto=r.result}}submit(){var t=this;return(0,d.Z)(function*(){t.step="purchase"})()}reset(){this.form=this.formBuilder.group({foto:[this.user.foto],username:[this.user.username,[a.kI.required]],nombre:[this.user.nombre,[a.kI.required]],apellidos:[this.user.apellidos],email:[{value:this.user.email,disabled:!0},[a.kI.required]]})}volver(){this.step="resume"}selectState(){this.states=this.countrySrv.getAllStates()}selectCity(){this.cities=this.countrySrv.getAllCities()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(v.e),e.Y36(c.L),e.Y36(m.V),e.Y36(C),e.Y36(b.N),e.Y36(Z.F),e.Y36(p.F0),e.Y36(p.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-checkout"]],decls:3,vars:3,consts:[[4,"ngIf"],[1,"progressbar-wrapper"],[1,"progessbar"],[1,"active"],[1,"row","col-lg-10","mx-auto","g-3","text-white",3,"formGroup","submit"],[1,"col-md-4"],["for","validationDefault01",1,"form-label"],["formControlName","name","type","text","id","validationDefault01","value","","required","",1,"form-control"],["for","validationDefault02",1,"form-label"],["formControlName","lastname","type","text","id","validationDefault02","value","","required","",1,"form-control"],["for","validationDefaultUsername",1,"form-label"],["formControlName","dni","type","text","id","validationDefaultUsername","aria-describedby","inputGroupPrepend2","required","",1,"form-control"],[1,"col-md-8"],["formControlName","email","type","text","id","validationDefault02","value","","required","",1,"form-control"],["formControlName","phone","type","text","id","validationDefaultUsername","aria-describedby","inputGroupPrepend2","required","",1,"form-control"],["for","validationDefault04",1,"form-label"],["formControlName","country","id","validationDefault04","required","",1,"form-select",3,"change"],["selected","","value",""],[4,"ngFor","ngForOf"],["formControlName","state","id","validationDefault04","required","",1,"form-select",3,"change"],["formControlName","city","id","validationDefault04","required","",1,"form-select"],["for","validationDefault05",1,"form-label"],["formControlName","address","type","text","id","validationDefault05","required","",1,"form-control"],["formControlName","cp","type","text","id","validationDefault05","required","",1,"form-control"],[1,"col-12","d-flex","justify-content-end","mt-5"],[1,"btn","btn-outline-light","me-3",3,"click"],["type","submit",1,"btn","btn-light"],[1,"col-lg-4","mx-auto","py-md-4"],["id","paypal-div",3,"config"],[2,"cursor","pointer"],[1,"row","col-sm-12","col-md-12","col-lg-12"],[1,"row","col-sm-4","col-md-4","col-lg-4"],[1,"row","col-sm-4","col-md-4","col-lg-4","d-flex","align-content-center","justify-content-center","ms-5","g-3","text-white",2,"border","1px solid white","border-radius","20px"],[1,"col-sm-1","col-md-1","col-lg-1"],[1,"col-sm-6","col-md-6","col-lg-6"],[1,"col-sm-5","col-md-5","col-lg-5"],[1,"d-flex","justify-content-between"],[1,"card-text"],[1,"card-text","text-end"],[1,"row","col-sm-4","col-md-4","col-lg-4","ms-5","g-3"],[1,"col-12","d-flex","justify-content-end","ms-2"],["type","submit",1,"btn","btn-light","d-flex","align-content-center",3,"click"],[1,"material-symbols-outlined"],["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0"],[1,"ms-1"]],template:function(t,n){1&t&&(e.YNc(0,y,68,4,"div",0),e.YNc(1,M,18,1,"div",0),e.YNc(2,w,70,7,"div",0)),2&t&&(e.Q6J("ngIf","address"==n.step),e.xp6(1),e.Q6J("ngIf","purchase"==n.step),e.xp6(1),e.Q6J("ngIf","resume"==n.step))},directives:[u.O5,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.Q7,a.EJ,a.YN,a.Kr,u.sg,h.nu],styles:['.name[_ngcontent-%COMP%]{font-size:450%;color:#f2ebdc;margin-left:5%}.title-new-song[_ngcontent-%COMP%]{font-size:125%}.test[_ngcontent-%COMP%]{max-width:100%}.arreglo[_ngcontent-%COMP%]{margin-top:30px;width:100%}.btn-back[_ngcontent-%COMP%], .btn-outline-back[_ngcontent-%COMP%]{background-color:#f2ebdc;border-radius:20px}.info[_ngcontent-%COMP%]{padding:30px}.color-link[_ngcontent-%COMP%]{color:#f2ebdc}.div-pointer[_ngcontent-%COMP%]{text-align:center;width:50%;cursor:pointer}.bg-profile[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/samesouls-tfg.appspot.com/o/backOG3.png?alt=media&token=07ca8e3a-0ce0-49a8-95d6-4a8c2add230d);background-size:cover}#inputFile[_ngcontent-%COMP%]{display:none}.labelInputFile[_ngcontent-%COMP%]{width:200px;height:200px;padding:1rem;box-shadow:0 0 10px -1px gray;display:flex;justify-content:center;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none}.labelInputFile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px}.labelInputFile[_ngcontent-%COMP%]:active{transform:scale(.9)}@media screen and (max-width: 767px){.ocultar[_ngcontent-%COMP%]{display:none}}.merchan-photo[_ngcontent-%COMP%]{height:78vh}.return-btn[_ngcontent-%COMP%]{position:fixed;top:12vh;left:.4vw}#paypal-div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex!important;justify-content:center!important}.progressbar-wrapper[_ngcontent-%COMP%]{max-width:100%;margin:100px auto 0;padding:50px;border-radius:5px}.progressbar-wrapper[_ngcontent-%COMP%]   .progessbar[_ngcontent-%COMP%]{margin-bottom:35px;display:flex;justify-content:center}.progressbar-wrapper[_ngcontent-%COMP%]   .progessbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:flex}.progressbar-wrapper[_ngcontent-%COMP%]   .progessbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:20vh;position:relative}.progressbar-wrapper[_ngcontent-%COMP%]   .progessbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-right:0}.progressbar-wrapper[_ngcontent-%COMP%]   .progessbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"";position:absolute;top:40%;transform:translateY(-50%);left:55px;width:27vh;height:2px;background:#f2ebdc}.progressbar-wrapper[_ngcontent-%COMP%]   .progessbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child:before{content:"";position:absolute;top:40%;transform:translateY(-50%);left:55px;width:27vh;height:2px;background:#0d0d0d}.progressbar-wrapper[_ngcontent-%COMP%]   .progessbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:5px;border-radius:50%}.progressbar-wrapper[_ngcontent-%COMP%]   .progessbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:50px;height:50px;background:#f2ebdc;color:#0d0d0d;text-align:center;line-height:50px;border-radius:50%}.progressbar-wrapper[_ngcontent-%COMP%]   .progessbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:before{background:#cda434}.progressbar-wrapper[_ngcontent-%COMP%]   .progessbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:last-child:before{background:#0d0d0d}.progressbar-wrapper[_ngcontent-%COMP%]   .progessbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#cda434;color:#f2ebdc}']}),o})(),canActivate:[i(3870).a],children:[]}];let q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.ez,a.u5,a.UX,h.vj,p.Bz.forChild(U)],p.Bz]}),o})()}}]);