"use strict";(self.webpackChunkprueba=self.webpackChunkprueba||[]).push([[440],{6440:(I,h,s)=>{s.r(h),s.d(h,{MerchandisingModule:()=>P});var u=s(9808),c=s(5861),g=s(1042),t=s(5e3),a=s(2382),f=s(629),v=s(3632),m=s(9958),C=s(2436),y=s(887),p=s(7407);let x=(()=>{class i{constructor(e){this.firestore=e}getAll(){return this.firestore.collection("purchases").valueChanges({idField:"id"})}getAllMatches(e){return this.firestore.collection("purchases",r=>r.startAt(e).endAt(e+"\uf8ff")).valueChanges({idField:"id"})}getOne(e){return this.firestore.collection("purchases").doc(e).valueChanges({idField:"id"})}getPaid(){return this.firestore.collection("purchases",e=>e.where("paid","==","true")).valueChanges({idField:"id"})}getNotPaid(){return this.firestore.collection("purchases",e=>e.where("paid","==","false")).valueChanges({idField:"id"})}setPurchase(e){this.purchase=e}getPurchase(){return this.purchase}create(e){var r=this;return(0,c.Z)(function*(){try{return yield r.firestore.collection("purchases").doc(e.id).set(e)}catch(n){return n}})()}update(e){var r=this;return(0,c.Z)(function*(){try{return yield r.firestore.collection("purchases").doc(e.id).update(Object.assign({},e))}catch(n){return n}})()}delete(e){var r=this;return(0,c.Z)(function*(){try{return yield r.firestore.collection("purchases").doc(e).delete()}catch(n){return n}})()}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(p.ST))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),b=(()=>{class i{constructor(e){this.firestore=e}getAll(){return this.firestore.collection("cart").valueChanges({idField:"id"})}getAllMatches(e){return this.firestore.collection("cart",r=>r.startAt(e).endAt(e+"\uf8ff")).valueChanges({idField:"id"})}getOne(e){return this.firestore.collection("cart").doc(e).valueChanges({idField:"id"})}setCart(e){this.cart=e}getCart(){return this.cart}create(e){var r=this;return(0,c.Z)(function*(){try{return yield r.firestore.collection("cart").doc(e.id).set(e)}catch(n){return n}})()}update(e){var r=this;return(0,c.Z)(function*(){try{return yield r.firestore.collection("cart").doc(e.id).update(Object.assign({},e))}catch(n){return n}})()}delete(e){var r=this;return(0,c.Z)(function*(){try{return yield r.firestore.collection("cart").doc(e).delete()}catch(n){return n}})()}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(p.ST))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Z=s(1962),d=s(6115);function M(i,o){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"img",27),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.s9C("src",e.photo,t.LSH)}}function w(i,o){if(1&i&&(t.TgZ(0,"div",25),t.YNc(1,M,2,1,"div",26),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.productPhotos)}}function O(i,o){if(1&i&&(t.TgZ(0,"div",30),t._UZ(1,"img",27),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.s9C("src",e.photo,t.LSH)}}function F(i,o){if(1&i&&(t.TgZ(0,"div",28),t.YNc(1,O,2,1,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.productPhotos)}}function S(i,o){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.s9C("value",e.code),t.xp6(1),t.hij("",e.code," - Out of stock")}}const A=[{path:"",component:(()=>{class i{constructor(e,r,n,l,T,_,Y,z,U,j,k){this.formBuilder=e,this.authSrv=r,this.usuarioSrv=n,this.sizesSrv=l,this.merchandisingSrv=T,this.productPhotosSrv=_,this.purchaseSrv=Y,this.cartSrv=z,this.storageSrv=U,this.router=j,this.activatedRoute=k,this.prueba=[],this.disabled=!0,this.suscriptions=[],this.type="clothing",this.photo1="front",this.photo2="back",this.photo3="model_front",this.photo4="model_back",this.photo5="model_side"}ngOnInit(){const e=this.activatedRoute.params.subscribe(r=>{this.id=r.id,console.log(this.id,"hola")});this.suscriptions.push(e),this.user=this.usuarioSrv.getUsuario(),this.sizesSrv.getAll().subscribe(r=>this.sizes=r),this.merchandisingSrv.getByCode(this.id).subscribe(r=>{this.merchandising=r[0],this.type=this.merchandising.product.product_type.code,this.productPhotosSrv.getByProduct(this.merchandising.product.id).subscribe(n=>this.productPhotos=n)}),console.log(this.suscriptions),this.form=this.formBuilder.group({})}ngOnDestroy(){}goTo(e){this.router.navigate([e])}logout(){var e=this;return(0,c.Z)(function*(){yield e.authSrv.logout().then(()=>{console.log(e.authSrv.getUsuario())}),e.router.navigate(["/login"])})()}follow(){}onUploadImg(e){let r=e.target.files[0],n=new FileReader;n.readAsDataURL(r),n.onloadend=()=>{this.foto=n.result}}submit(){var e=this;return(0,c.Z)(function*(){console.log("entra");try{let n,l,r=(0,g.Z)();n={id:r,usuario:e.user,paid:!1,created_at:Date.now()},yield e.purchaseSrv.create(n),r=(0,g.Z)(),l={id:r,purchase:n,merchandising:e.merchandising,amount:1},yield e.cartSrv.create(l),e.router.navigate(["/profile"])}catch(r){}})()}back(){history.back()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(a.qu),t.Y36(f.e),t.Y36(v.L),t.Y36(m.d),t.Y36(C.t),t.Y36(y.S),t.Y36(x),t.Y36(b),t.Y36(Z.V),t.Y36(d.F0),t.Y36(d.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-merchandising"]],decls:35,vars:6,consts:[[1,"bg-light"],[1,"return-btn"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","fill","#0d0d0d","viewBox","0 0 16 16",1,"bi","bi-arrow-left-circle-fill","song-selector",3,"click"],["d","M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"],[1,"col-lg-9","mx-auto","py-md-4"],[1,"d-flex","row","py-4"],[1,"col-8"],["class","d-flex row row-cols-2",4,"ngIf"],["class","d-flex align-items-center justify-content-center row",4,"ngIf"],[1,"col-4"],[1,"form-back"],[1,"form-signin","needs-validation",3,"submit"],[1,"col-lg-11","mx-auto","p-2","ps-5"],[1,"test","d-flex","align-items-center","row","row-cols-1","row-cols-sm-2","row-cols-md-3","g-1"],[1,"w-100"],[1,"w-100","pt-3"],["aria-label","Default select example",1,"form-select","col-12"],["hidden","","selected",""],["disabled","",3,"value",4,"ngFor","ngForOf"],[1,"pt-4",2,"text-align","justify","text-justify","inter-word"],[1,"d-flex","justify-content-center"],[1,"fs-5","text-danger",2,"text-align","justify","text-justify","inter-word"],[1,"d-flex","align-items-center","row","row-cols-1","row-cols-sm-1","row-cols-md-4","g-3"],[1,"col-lg-12"],["type","submit",1,"btn","btn-back","text-white","arreglo"],[1,"d-flex","row","row-cols-2"],[4,"ngFor","ngForOf"],["alt","",1,"merchan-photo","mt-3",3,"src"],[1,"d-flex","align-items-center","justify-content-center","row"],["class","d-flex align-items-center justify-content-center",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","justify-content-center"],["disabled","",3,"value"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.O4$(),t.TgZ(2,"svg",2),t.NdJ("click",function(){return r.back()}),t._UZ(3,"path",3),t.qZA()(),t.kcU(),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6),t.YNc(7,w,2,1,"div",7),t.YNc(8,F,2,1,"div",8),t.qZA(),t.TgZ(9,"div",9)(10,"div",10)(11,"form",11),t.NdJ("submit",function(){return r.submit()}),t.TgZ(12,"div")(13,"div",12)(14,"div",13)(15,"h3",14)(16,"strong"),t._uU(17),t.qZA()(),t.TgZ(18,"h3",14)(19,"strong"),t._uU(20),t.qZA()(),t.TgZ(21,"div",15)(22,"select",16)(23,"option",17),t._uU(24,"TALLAS"),t.qZA(),t.YNc(25,S,2,2,"option",18),t.qZA(),t.TgZ(26,"p",19),t._uU(27),t.qZA(),t.TgZ(28,"div",20)(29,"span",21),t._uU(30,"Out of stock. "),t.qZA()()()(),t.TgZ(31,"div",22)(32,"div",23)(33,"button",24),t._uU(34,"A\xf1adir a mi cesta"),t.qZA()()()()()()()()()()()),2&e&&(t.xp6(7),t.Q6J("ngIf","CLOTHING"==r.type),t.xp6(1),t.Q6J("ngIf","MUSIC"==r.type),t.xp6(9),t.Oqu(r.merchandising.product.name),t.xp6(3),t.hij("",r.merchandising.prize,"\u20ac"),t.xp6(5),t.Q6J("ngForOf",r.sizes),t.xp6(2),t.Oqu(r.merchandising.product.description))},directives:[u.O5,u.sg,a._Y,a.JL,a.F,a.YN,a.Kr],styles:[".name[_ngcontent-%COMP%]{font-size:450%;color:#f2ebdc;margin-left:5%}.title-new-song[_ngcontent-%COMP%]{font-size:125%}.test[_ngcontent-%COMP%]{max-width:100%}.arreglo[_ngcontent-%COMP%]{margin-top:30px;width:100%}.btn-back[_ngcontent-%COMP%]{background-color:#0d0d0d;border-radius:6px}.info[_ngcontent-%COMP%]{padding:30px}.color-link[_ngcontent-%COMP%]{color:#f2ebdc}.div-pointer[_ngcontent-%COMP%]{text-align:center;width:50%;cursor:pointer}.bg-profile[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/samesouls-tfg.appspot.com/o/backOG3.png?alt=media&token=07ca8e3a-0ce0-49a8-95d6-4a8c2add230d);background-size:cover}#inputFile[_ngcontent-%COMP%]{display:none}.labelInputFile[_ngcontent-%COMP%]{width:200px;height:200px;padding:1rem;box-shadow:0 0 10px -1px gray;display:flex;justify-content:center;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none}.labelInputFile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px}.labelInputFile[_ngcontent-%COMP%]:active{transform:scale(.9)}@media screen and (max-width: 767px){.ocultar[_ngcontent-%COMP%]{display:none}}.merchan-photo[_ngcontent-%COMP%]{width:38.25rem}.return-btn[_ngcontent-%COMP%]{position:fixed;top:12vh;left:1vw}"]}),i})(),children:[]}];let P=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[u.ez,a.u5,a.UX,d.Bz.forChild(A)],d.Bz]}),i})()}}]);