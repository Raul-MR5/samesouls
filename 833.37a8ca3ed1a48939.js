"use strict";(self.webpackChunkprueba=self.webpackChunkprueba||[]).push([[833],{2436:(P,m,i)=>{i.d(m,{t:()=>v});var d=i(5861),g=i(5e3),t=i(7407);let v=(()=>{class l{constructor(e){this.firestore=e}getAll(){return this.firestore.collection("merchandising").valueChanges({idField:"id"})}getAllMatches(e){return this.firestore.collection("merchandising",n=>n.orderBy("product.name").startAt(e).endAt(e+"\uf8ff")).valueChanges({idField:"id"})}getAllOrdered(){return this.firestore.collection("merchandising",e=>e.orderBy("product.name")).valueChanges({idField:"id"})}getOne(e){return this.firestore.collection("merchandising").doc(e).valueChanges({idField:"id"})}getByCode(e){return this.firestore.collection("merchandising",n=>n.where("code","==",e)).valueChanges({idField:"id"})}getByArtist(e){return this.firestore.collection("merchandising",n=>n.where("product.artist.username","==",e)).valueChanges({idField:"id"})}getStock(){return this.firestore.collection("merchandising",e=>e.where("stock",">","0")).valueChanges({idField:"id"})}getOutStock(){return this.firestore.collection("merchandising",e=>e.where("stock","==","0")).valueChanges({idField:"id"})}setMerchandising(e){this.merchandising=e}getMerchandising(){return this.merchandising}create(e){var n=this;return(0,d.Z)(function*(){try{return yield n.firestore.collection("merchandising").doc(e.id).set(e)}catch(r){return r}})()}update(e){var n=this;return(0,d.Z)(function*(){try{return yield n.firestore.collection("merchandising").doc(e.id).update(Object.assign({},e))}catch(r){return r}})()}delete(e){var n=this;return(0,d.Z)(function*(){try{return yield n.firestore.collection("merchandising").doc(e).delete()}catch(r){return r}})()}}return l.\u0275fac=function(e){return new(e||l)(g.LFG(t.ST))},l.\u0275prov=g.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},887:(P,m,i)=>{i.d(m,{S:()=>v});var d=i(5861),g=i(5e3),t=i(7407);let v=(()=>{class e{constructor(r){this.firestore=r}getAll(){return this.firestore.collection("product_photos").valueChanges({idField:"id"})}getAllMatches(r){return this.firestore.collection("product_photos",u=>u.startAt(r).endAt(r+"\uf8ff")).valueChanges({idField:"id"})}getOne(r){return this.firestore.collection("product_photos").doc(r).valueChanges({idField:"id"})}getOrderedTypeName(){return this.firestore.collection("product_photos",r=>r.orderBy("photo_type.name")).valueChanges({idField:"id"})}getByProduct(r){return this.firestore.collection("product_photos",u=>u.where("product.id","==",r).orderBy("photo_type.name")).valueChanges({idField:"id"})}setProductPhotos(r){this.product_photos=r}getProductPhotos(){return this.product_photos}create(r){var u=this;return(0,d.Z)(function*(){try{return yield u.firestore.collection("product_photos").doc(r.id).set(r)}catch(p){return p}})()}update(r){var u=this;return(0,d.Z)(function*(){try{return yield u.firestore.collection("product_photos").doc(r.id).update(Object.assign({},r))}catch(p){return p}})()}delete(r){var u=this;return(0,d.Z)(function*(){try{return yield u.firestore.collection("product_photos").doc(r).delete()}catch(p){return p}})()}}return e.\u0275fac=function(r){return new(r||e)(g.LFG(t.ST))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},1411:(P,m,i)=>{i.d(m,{e:()=>v});var d=i(5861),g=i(5e3),t=i(7407);let v=(()=>{class l{constructor(e){this.firestore=e}getAll(){return this.firestore.collection("songs",e=>e.orderBy("title")).valueChanges({idField:"id"})}getAllMatches(e){return this.firestore.collection("songs",n=>n.orderBy("title").startAt(e).endAt(e+"\uf8ff")).valueChanges({idField:"id"})}getOne(e){return this.firestore.collection("songs").doc(e).valueChanges({idField:"id"})}getByArtist(e){return this.firestore.collection("songs",n=>n.where("release.artist.username","==",e).limit(5)).valueChanges({idField:"id"})}setSong(e){this.song=e}getSong(){return this.song}playSong(e){this.audio&&this.audio.pause(),this.audio=e,this.audio.currentTime=0,this.audio.play()}pauseSong(){this.audio&&this.audio.pause()}create(e){var n=this;return(0,d.Z)(function*(){try{console.log("payload",e);const r=yield n.firestore.collection("songs").doc(e.id).set(e);return console.log("res",r),r}catch(r){return console.log("err",r),r}})()}update(e){var n=this;return(0,d.Z)(function*(){try{return yield n.firestore.collection("songs").doc(e.id).update(Object.assign({},e))}catch(r){return r}})()}delete(e){var n=this;return(0,d.Z)(function*(){try{return yield n.firestore.collection("songs").doc(e).delete()}catch(r){return r}})()}}return l.\u0275fac=function(e){return new(e||l)(g.LFG(t.ST))},l.\u0275prov=g.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},4833:(P,m,i)=>{i.r(m),i.d(m,{ArtistaProfileModule:()=>F});var d=i(9808),g=i(5861),t=i(5e3),v=i(629),l=i(3632),O=i(1411),e=i(2436),n=i(887),r=i(1962),u=i(6115);function p(c,h){if(1&c){const o=t.EpF();t.TgZ(0,"td")(1,"span",19),t.NdJ("click",function(){t.CHM(o);const a=t.oxw().$implicit;return t.oxw().play(a)}),t._uU(2,"play_arrow"),t.qZA(),t._UZ(3,"link",20),t.qZA()}}function M(c,h){if(1&c){const o=t.EpF();t.TgZ(0,"td")(1,"span",19),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).pause()}),t._uU(2,"pause"),t.qZA(),t._UZ(3,"link",20),t.qZA()}}function x(c,h){if(1&c&&(t.TgZ(0,"tr")(1,"th",17),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.YNc(9,p,4,0,"td",18),t.YNc(10,M,4,0,"td",18),t.qZA()),2&c){const o=h.$implicit,s=h.index,a=t.oxw();t.xp6(2),t.Oqu(s+1),t.xp6(2),t.Oqu(o.title),t.xp6(2),t.Oqu(o.release.title),t.xp6(2),t.Oqu(o.time),t.xp6(1),t.Q6J("ngIf",a.playB!=o.title),t.xp6(1),t.Q6J("ngIf",a.playB==o.title)}}function Z(c,h){if(1&c){const o=t.EpF();t.TgZ(0,"div",21)(1,"div",22),t.NdJ("click",function(){const _=t.CHM(o).$implicit;return t.oxw().goTo("/shop/"+_.code)}),t._UZ(2,"img",23),t.TgZ(3,"div",24)(4,"p",5),t._uU(5),t.qZA()()()()}if(2&c){const o=h.$implicit,s=t.oxw();t.xp6(2),t.s9C("src",s.photos[o.code].photo,t.LSH),t.xp6(3),t.Oqu(o.product.name)}}let T=(()=>{class c{constructor(o,s,a,_,f,C,y,S,U){this.authSrv=o,this.usuarioSrv=s,this.songSrv=a,this.merchanSrv=_,this.productPhotosSrv=f,this.storageSrv=C,this.router=y,this.ngZone=S,this.activatedRoute=U,this.canciones=[],this.merchandising=[],this.photos={},this.playB="",this.disabled=!0,this.suscriptions=[]}ngOnInit(){const o=this.activatedRoute.params.subscribe(s=>{this.id=s.id});this.suscriptions.push(o),console.log(this.suscriptions),this.usuarioSrv.getOne(this.id).subscribe(s=>{this.user=s,this.foto=this.user.foto,this.songSrv.getByArtist(this.user.username).subscribe(a=>{this.canciones=[],a.forEach(_=>{let f=new Audio(_.audio),C=this.parseTime(120*Math.random()+120);this.canciones.push(Object.assign(Object.assign({},_),{raw:f,time:C}))})}),this.merchanSrv.getByArtist(this.user.username).subscribe(a=>{const _=a.filter((f,C)=>a.findIndex(y=>y.code===f.code)===C);this.merchandising=_.slice(0,5),this.merchandising.forEach(f=>{this.productPhotosSrv.getByProduct(f.product.id).subscribe(C=>{C.forEach(y=>{("DISK"==y.photo_type.name||"FRONT"==y.photo_type.name)&&(this.photos[f.code]=y)})})})})}),console.log(this.user)}ngOnDestroy(){this.playB="",this.pause()}goTo(o){this.router.navigate([o])}logout(){var o=this;return(0,g.Z)(function*(){yield o.authSrv.logout().then(()=>{console.log(o.authSrv.getUsuario())}),o.router.navigate(["/login"])})()}follow(){}parseTime(o){if(o){var s=Math.floor(o/60%60),a=Math.floor(o%60);return a<10?s+":0"+a:s+":"+a}return"0:00"}play(o){this.playB=o.title,this.songSrv.playSong(o.raw)}pause(){this.playB="",this.songSrv.pauseSong()}onUploadImg(o){let s=o.target.files[0],a=new FileReader;a.readAsDataURL(s),a.onloadend=()=>{this.foto=a.result}}}return c.\u0275fac=function(o){return new(o||c)(t.Y36(v.e),t.Y36(l.L),t.Y36(O.e),t.Y36(e.t),t.Y36(n.S),t.Y36(r.V),t.Y36(u.F0),t.Y36(t.R0b),t.Y36(u.gz))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-artista-profile"]],decls:39,vars:5,consts:[[1,"form-back","bg-profile"],[1,"card","text-bg-dark","w-100"],["alt","...",1,"card-img",2,"height","45vh","object-fit","cover",3,"src"],[1,"card-img-overlay","d-flex","align-content-end","flex-wrap","row","card-artista"],[1,"card-title","mb-3",2,"font-size","100px"],[1,"card-text"],[1,"col-lg-10","mx-auto","p-3","py-md-5"],[1,"test","mt-3","d-flex","align-items-center","row","row-cols-1","g-1"],[1,"mt-3","row","col-lg-12"],[1,"p-3"],[1,"fs-4","text-pink"],[1,"text-pink"],[1,"text-pink","table","table-dark","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"row","row-cols-md-6"],["class","col",4,"ngFor","ngForOf"],["scope","row"],[4,"ngIf"],[1,"material-symbols-outlined","ms-4",3,"click"],["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0"],[1,"col"],[1,"card","card-artista","text-pink","pointer",3,"click"],["alt","Merchan",1,"card-img-top","merchan-img",2,"margin-left","25%",3,"src"],[1,"card-body","bg-dark"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"main")(2,"div",1),t._UZ(3,"img",2),t.TgZ(4,"div",3)(5,"h1",4),t._uU(6),t.qZA(),t.TgZ(7,"p",5),t._uU(8),t.qZA()()(),t.TgZ(9,"div")(10,"div",6)(11,"div",7)(12,"div",8)(13,"div",9)(14,"h3",10),t._uU(15,"M\xfasica"),t.qZA(),t._UZ(16,"hr",11),t.TgZ(17,"table",12)(18,"thead")(19,"tr")(20,"th",13),t._uU(21,"#"),t.qZA(),t.TgZ(22,"th",13),t._uU(23,"Nombre"),t.qZA(),t.TgZ(24,"th",13),t._uU(25,"\xc1lbum"),t.qZA(),t.TgZ(26,"th",13),t._uU(27,"Tiempo"),t.qZA(),t.TgZ(28,"th",13),t._uU(29,"Reproducir"),t.qZA()()(),t.TgZ(30,"tbody"),t.YNc(31,x,11,6,"tr",14),t.qZA()()()(),t.TgZ(32,"div",8)(33,"div",9)(34,"h3",10),t._uU(35,"Tienda"),t.qZA(),t._UZ(36,"hr",11),t.TgZ(37,"div",15),t.YNc(38,Z,6,2,"div",16),t.qZA()()()()()()()()),2&o&&(t.xp6(3),t.s9C("src",s.user.foto,t.LSH),t.xp6(3),t.Oqu(s.user.username),t.xp6(2),t.Oqu(s.user.description),t.xp6(23),t.Q6J("ngForOf",s.canciones),t.xp6(7),t.Q6J("ngForOf",s.merchandising))},directives:[d.sg,d.O5],styles:['.name[_ngcontent-%COMP%]{font-size:450%;color:#f2ebdc;margin-left:5%}.title-new-song[_ngcontent-%COMP%]{font-size:125%}.test[_ngcontent-%COMP%]{max-width:100%}.arreglo[_ngcontent-%COMP%]{margin-top:30px;width:100%}.btn-back[_ngcontent-%COMP%]{background-color:#0d0d0d;border-radius:20px}.info[_ngcontent-%COMP%]{padding:30px}.color-link[_ngcontent-%COMP%]{color:#f2ebdc}.div-pointer[_ngcontent-%COMP%]{text-align:center;width:50%;cursor:pointer}.bg-profile[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/samesouls-tfg.appspot.com/o/backOG3.png?alt=media&token=07ca8e3a-0ce0-49a8-95d6-4a8c2add230d);background-size:cover}#inputFile[_ngcontent-%COMP%]{display:none}.labelInputFile[_ngcontent-%COMP%]{width:200px;height:200px;padding:1rem;box-shadow:0 0 10px -1px gray;display:flex;justify-content:center;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none}.labelInputFile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px}.labelInputFile[_ngcontent-%COMP%]:active{transform:scale(.9)}@media screen and (max-width: 767px){.ocultar[_ngcontent-%COMP%]{display:none}}.card[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:0!important}.card-artista[_ngcontent-%COMP%]{background-color:#0d0d0d80;width:100%}.is-divider[_ngcontent-%COMP%]{background-color:#f2ebdc;height:3px;display:block;margin:.3em 0 1em;width:100%;max-width:30px}.genre-list[_ngcontent-%COMP%]{padding-left:0}.genre-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{cursor:pointer;padding:3px;list-style:none;margin:0 0 .3em;text-align:left}.genre-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.08)}.material-symbols-outlined[_ngcontent-%COMP%]{cursor:pointer;font-variation-settings:"FILL" 1,"wght" 400,"GRAD" 0,"opsz" 48}.merchan-img[_ngcontent-%COMP%]{width:9.938rem;height:9.938rem}']}),c})();var A=i(2382);const b=[{path:"",component:T,children:[]}];let F=(()=>{class c{}return c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[[d.ez,A.u5,A.UX,u.Bz.forChild(b)],u.Bz]}),c})()}}]);