"use strict";(self.webpackChunkprueba=self.webpackChunkprueba||[]).push([[611],{8611:(Q,N,c)=>{c.r(N),c.d(N,{NuevoMerchanModule:()=>R});var b=c(9808),a=c(5861),u=c(1042),t=c(5e3),l=c(2382),A=c(629),k=c(3632),S=c(1411),P=c(9958),T=c(7407);let O=(()=>{class n{constructor(e){this.firestore=e}getAll(){return this.firestore.collection("products",e=>e.orderBy("name")).valueChanges({idField:"id"})}getAllMatches(e){return this.firestore.collection("products",o=>o.orderBy("name").startAt(e).endAt(e+"\uf8ff")).valueChanges({idField:"id"})}getOne(e){return this.firestore.collection("products").doc(e).valueChanges({idField:"id"})}getByName(e){return this.firestore.collection("products",o=>o.where("name","==",e)).valueChanges({idField:"id"})}setProduct(e){this.product=e}getProduct(){return this.product}create(e){var o=this;return(0,a.Z)(function*(){try{return yield o.firestore.collection("products").doc(e.id).set(e)}catch(r){return r}})()}update(e){var o=this;return(0,a.Z)(function*(){try{return yield o.firestore.collection("products").doc(e.id).update(Object.assign({},e))}catch(r){return r}})()}delete(e){var o=this;return(0,a.Z)(function*(){try{return yield o.firestore.collection("products").doc(e).delete()}catch(r){return r}})()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(T.ST))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),U=(()=>{class n{constructor(e){this.firestore=e}getAll(){return this.firestore.collection("product_types",e=>e.orderBy("code")).valueChanges({idField:"id"})}getAllMatches(e){return this.firestore.collection("product_types",o=>o.orderBy("code").startAt(e).endAt(e+"\uf8ff")).valueChanges({idField:"id"})}getOne(e){return this.firestore.collection("product_types").doc(e).valueChanges({idField:"id"})}getByCode(e){return this.firestore.collection("product_types",o=>o.where("code","==",e)).valueChanges({idField:"id"})}setProductType(e){this.product_type=e}getProductType(){return this.product_type}create(e){var o=this;return(0,a.Z)(function*(){try{return yield o.firestore.collection("product_types").doc(e.doc_id).set(e)}catch(r){return r}})()}update(e){var o=this;return(0,a.Z)(function*(){try{return yield o.firestore.collection("product_types").doc(e.doc_id).update(Object.assign({},e))}catch(r){return r}})()}delete(e){var o=this;return(0,a.Z)(function*(){try{return yield o.firestore.collection("product_types").doc(e).delete()}catch(r){return r}})()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(T.ST))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Y=c(887);let w=(()=>{class n{constructor(e){this.firestore=e}getAll(){return this.firestore.collection("photo_types",e=>e.orderBy("name")).valueChanges({idField:"id"})}getAllMatches(e){return this.firestore.collection("photo_types",o=>o.orderBy("name").startAt(e).endAt(e+"\uf8ff")).valueChanges({idField:"id"})}getOne(e){return this.firestore.collection("photo_types").doc(e).valueChanges({idField:"id"})}getByName(e){return this.firestore.collection("photo_types",o=>o.where("name","==",e)).valueChanges({idField:"id"})}setPhotoType(e){this.photo_type=e}getPhotoType(){return this.photo_type}create(e){var o=this;return(0,a.Z)(function*(){try{return yield o.firestore.collection("photo_types").doc(e.doc_id).set(e)}catch(r){return r}})()}update(e){var o=this;return(0,a.Z)(function*(){try{return yield o.firestore.collection("photo_types").doc(e.doc_id).update(Object.assign({},e))}catch(r){return r}})()}delete(e){var o=this;return(0,a.Z)(function*(){try{return yield o.firestore.collection("photo_types").doc(e).delete()}catch(r){return r}})()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(T.ST))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var I=c(2436),z=c(7488),j=c(2019),D=c(1962),M=c(6115);function L(n,s){if(1&n&&(t.TgZ(0,"option"),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Oqu(e.code)}}function B(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",29)(1,"div",30)(2,"button",31),t._UZ(3,"img",32),t.qZA()(),t.TgZ(4,"div",33)(5,"div",34)(6,"div",35)(7,"div",36)(8,"h1",37),t._uU(9,"Modal title"),t.qZA(),t._UZ(10,"button",38),t.qZA(),t.TgZ(11,"div",39)(12,"div",40)(13,"div",1)(14,"div",41)(15,"div",30)(16,"input",42),t.NdJ("change",function(r){return t.CHM(e),t.oxw().onUploadImgCloth(r,"front")}),t.qZA(),t.TgZ(17,"label",43),t._UZ(18,"img",32),t.qZA()(),t.TgZ(19,"div",44)(20,"p")(21,"strong"),t._uU(22,"FRONT"),t.qZA()()()(),t.TgZ(23,"div",41)(24,"div",30)(25,"input",45),t.NdJ("change",function(r){return t.CHM(e),t.oxw().onUploadImgCloth(r,"back")}),t.qZA(),t.TgZ(26,"label",46),t._UZ(27,"img",32),t.qZA()(),t.TgZ(28,"div",44)(29,"p")(30,"strong"),t._uU(31,"BACK"),t.qZA()()()(),t.TgZ(32,"div",41)(33,"div",30)(34,"input",47),t.NdJ("change",function(r){return t.CHM(e),t.oxw().onUploadImgCloth(r,"model_front")}),t.qZA(),t.TgZ(35,"label",48),t._UZ(36,"img",32),t.qZA()(),t.TgZ(37,"div",44)(38,"p")(39,"strong"),t._uU(40,"MODEL_FRONT"),t.qZA()()()(),t.TgZ(41,"div",41)(42,"div",30)(43,"input",49),t.NdJ("change",function(r){return t.CHM(e),t.oxw().onUploadImgCloth(r,"model_back")}),t.qZA(),t.TgZ(44,"label",50),t._UZ(45,"img",32),t.qZA()(),t.TgZ(46,"div",44)(47,"p")(48,"strong"),t._uU(49,"MODEL_BACK"),t.qZA()()()()()()(),t.TgZ(50,"div",51)(51,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().changePhoto()}),t._uU(52,"Close"),t.qZA(),t.TgZ(53,"button",53),t._uU(54,"Save changes"),t.qZA()()()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.s9C("src",e.foto,t.LSH),t.xp6(15),t.s9C("src",e.front,t.LSH),t.xp6(9),t.s9C("src",e.back,t.LSH),t.xp6(9),t.s9C("src",e.model_front,t.LSH),t.xp6(9),t.s9C("src",e.model_back,t.LSH)}}function J(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",54)(1,"div",30)(2,"input",55),t.NdJ("change",function(r){return t.CHM(e),t.oxw().onUploadImg(r)}),t.qZA(),t.TgZ(3,"label",56),t._UZ(4,"img",32),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.s9C("src",e.foto,t.LSH)}}const H=[{path:"",component:(()=>{class n{constructor(e,o,r,i,h,f,g,p,m,d,y,C,v,_){this.formBuilder=e,this.authSrv=o,this.usuarioSrv=r,this.cancionSrv=i,this.sizesSrv=h,this.productSrv=f,this.productTypeSrv=g,this.productPhotoSrv=p,this.photoTypeSrv=m,this.merchandisingSrv=d,this.releaseSrv=y,this.releaseTypeSrv=C,this.storageSrv=v,this.router=_,this.canciones=[],this.prueba=[]}ngOnInit(){this.foto="https://firebasestorage.googleapis.com/v0/b/samesouls-a0c25.appspot.com/o/merchan%2Fshirt-default.png?alt=media&token=7a0a9551-4c22-435f-8c26-5c1db4d3356a&_gl=1*wyidpd*_ga*MjEyNDUxODY3Ny4xNjY2MzY4MTYz*_ga_CW55HF8NVT*MTY4NTg3MDY4NC40Mi4xLjE2ODU4NzEwMzYuMC4wLjA.",this.front=this.foto,this.back=this.foto,this.model_front=this.foto,this.model_back=this.foto,this.usuario=this.usuarioSrv.getUsuario(),this.form=this.formBuilder.group({name:"",stock:"",prize:"",description:""}),this.sizesSrv.getAll().subscribe(e=>this.sizes=e),this.releaseTypeSrv.getAll().subscribe(e=>this.releaseTypes=e),this.productTypeSrv.getAll().subscribe(e=>{this.productTypes=e,this.productType=e[0].code}),this.photoTypeSrv.getAll().subscribe(e=>this.photoType=e)}ngOnDestroy(){}goTo(e){this.router.navigate([e])}logout(){var e=this;return(0,a.Z)(function*(){yield e.authSrv.logout().then(()=>{console.log(e.authSrv.getUsuario())}),e.router.navigate(["/login"])})()}follow(){}onUploadImg(e){let o=e.target.files[0],r=new FileReader;r.readAsDataURL(o),r.onloadend=()=>{this.foto=r.result}}onUploadImgCloth(e,o){let r=e.target.files[0],i=new FileReader;i.readAsDataURL(r),i.onloadend=()=>{switch(console.log("type",o),o){case"front":this.front=i.result;break;case"back":this.back=i.result;break;case"model_front":this.model_front=i.result;break;case"model_back":this.model_back=i.result}this.foto=this.front}}onUploadMusic(e){this.music=e.target.files[0];let o=new FileReader;o.readAsDataURL(this.music),o.onloadend=()=>{this.foto=o.result}}changePhoto(){switch(console.log("entar"),this.productType){case"CLOTHING":this.foto="https://firebasestorage.googleapis.com/v0/b/samesouls-a0c25.appspot.com/o/merchan%2Fshirt-default.png?alt=media&token=7a0a9551-4c22-435f-8c26-5c1db4d3356a&_gl=1*wyidpd*_ga*MjEyNDUxODY3Ny4xNjY2MzY4MTYz*_ga_CW55HF8NVT*MTY4NTg3MDY4NC40Mi4xLjE2ODU4NzEwMzYuMC4wLjA.",this.front=this.foto,this.back=this.foto,this.model_front=this.foto,this.model_back=this.foto;break;case"MUSIC":this.foto="https://firebasestorage.googleapis.com/v0/b/samesouls-a0c25.appspot.com/o/merchan%2Fdisk-default.png?alt=media&token=2df902ef-f2a8-4968-87f8-edefc65e706b&_gl=1*y3wz8w*_ga*MjEyNDUxODY3Ny4xNjY2MzY4MTYz*_ga_CW55HF8NVT*MTY4NTg3MDY4NC40Mi4xLjE2ODU4NzEwMDguMC4wLjA."}}submit(){var e=this;return(0,a.Z)(function*(){try{let o=e.usuario;e.myuuid=(0,u.Z)();let r={id:e.myuuid,name:e.form.value.name,description:e.form.value.description,artist:o,product_type:e.productTypes.filter(i=>e.productType==i.code)[0]};yield e.productSrv.create(r),"CLOTHING"==e.productType?e.storageSrv.uploadImg("merchan/"+o.email+"/"+e.productType+"/"+e.form.value.name,"front",e.front).then(function(){var i=(0,a.Z)(function*(h){e.myuuid=(0,u.Z)();let f={id:e.myuuid,photo:h,photo_type:e.photoType.filter(g=>"FRONT"==g.name)[0],product:r};yield e.productPhotoSrv.create(f),e.storageSrv.uploadImg("merchan/"+o.email+"/"+e.productType+"/"+e.form.value.name,"back",e.back).then(function(){var g=(0,a.Z)(function*(p){e.myuuid=(0,u.Z)();let m={id:e.myuuid,photo:p,photo_type:e.photoType.filter(d=>"BACK"==d.name)[0],product:r};yield e.productPhotoSrv.create(m),e.storageSrv.uploadImg("merchan/"+o.email+"/"+e.productType+"/"+e.form.value.name,"model_front",e.model_front).then(function(){var d=(0,a.Z)(function*(y){e.myuuid=(0,u.Z)();let C={id:e.myuuid,photo:y,photo_type:e.photoType.filter(v=>"MODEL_FRONT"==v.name)[0],product:r};yield e.productPhotoSrv.create(C),e.storageSrv.uploadImg("merchan/"+o.email+"/"+e.productType+"/"+e.form.value.name,"model_back",e.model_back).then(function(){var v=(0,a.Z)(function*(_){e.myuuid=(0,u.Z)();let G={id:e.myuuid,photo:_,photo_type:e.photoType.filter(Z=>"MODEL_BACK"==Z.name)[0],product:r};yield e.productPhotoSrv.create(G);let K=(0,u.Z)();e.sizes.forEach(function(){var Z=(0,a.Z)(function*(x){let F;console.log("element",x),e.myuuid=(0,u.Z)(),console.log("myuuid",e.myuuid),F={id:e.myuuid,code:K,product:r,prize:9.99,stock:100,size:x,created_at:(new Date).getTime()},console.log("merchandising",F),yield e.merchandisingSrv.create(F)});return function(x){return Z.apply(this,arguments)}}()),e.router.navigate(["/shop"])});return function(_){return v.apply(this,arguments)}}())});return function(y){return d.apply(this,arguments)}}())});return function(p){return g.apply(this,arguments)}}())});return function(h){return i.apply(this,arguments)}}()):"MUSIC"==e.productType&&e.storageSrv.uploadImg("merchan/"+o.email+"/"+e.productType,e.form.value.name,e.foto).then(function(){var i=(0,a.Z)(function*(h){e.myuuid=(0,u.Z)();let f={id:e.myuuid,photo:h,photo_type:e.photoType.filter(p=>"DISK"==p.name)[0],product:r};yield e.productPhotoSrv.create(f);let g=(0,u.Z)();e.sizes.forEach(function(){var p=(0,a.Z)(function*(m){let d;console.log("element",m),e.myuuid=(0,u.Z)(),console.log("myuuid",e.myuuid),d={id:e.myuuid,code:g,product:r,prize:9.99,stock:100,size:m,created_at:(new Date).getTime()},console.log("merchandising",d),yield e.merchandisingSrv.create(d)});return function(m){return p.apply(this,arguments)}}()),e.router.navigate(["/shop"])});return function(h){return i.apply(this,arguments)}}())}catch(o){}})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(A.e),t.Y36(k.L),t.Y36(S.e),t.Y36(P.d),t.Y36(O),t.Y36(U),t.Y36(Y.S),t.Y36(w),t.Y36(I.t),t.Y36(z.R),t.Y36(j.g),t.Y36(D.V),t.Y36(M.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-nuevo-merchan"]],decls:42,vars:5,consts:[[1,"form-back","bg-size"],[1,"row","mx-auto"],[1,"col-lg-10","mx-auto","py-md-5"],[1,"col-md-4","mx-auto"],["for","merchanType",1,"form-label","text-pink"],["name","merchanType","id","merchanType","required","",1,"form-select",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[1,"text-pink"],[1,"form-signin","needs-validation",3,"formGroup"],[1,"d-flex","align-items-center","row","col-lg-10","mx-auto","text-pink"],["class","col-lg-4 mx-auto",4,"ngIf"],["class","row col-lg-4 mx-auto",4,"ngIf"],[1,"row","col-lg-8"],[1,"col-6"],["for","name",1,"form-label","text-pink","title-new-song"],["formControlName","name","type","text","id","name","placeholder","","value","",1,"form-control"],[1,"col-3"],["for","stock",1,"form-label","text-pink","title-new-song"],["formControlName","stock","type","number","id","stock","placeholder","","value","",1,"form-control"],["for","prize",1,"form-label","text-pink","title-new-song"],[1,"input-group"],["formControlName","prize","type","number","step",".01","id","prize","placeholder","","value","",1,"form-control"],[1,"input-group-text"],[1,"col-lg-12","mt-3"],["for","description",1,"form-label","text-pink","title-new-song"],["formControlName","description","placeholder","","rows","3","id","description",1,"form-control"],[1,"col-10","mx-auto","d-flex","justify-content-end","mt-5"],[1,"btn","btn-outline-light","me-3",3,"click"],[1,"btn","btn-light","me-4",3,"click"],[1,"col-lg-4","mx-auto"],[1,"d-flex","justify-content-center"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"labelInputFileDisk"],["alt","upload file",3,"src"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-xl"],[1,"modal-content","text-dark"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"container-fluid","mx-auto"],[1,"col-md-3"],["name","foto","type","file","accept",".png, .jpg,.jpeg","id","inputFileFront",3,"change"],["for","inputFileFront",1,"labelInputFile"],[1,"d-flex","justify-content-center","mt-2"],["name","foto","type","file","accept",".png, .jpg,.jpeg","id","inputFileBack",3,"change"],["for","inputFileBack",1,"labelInputFile"],["name","foto","type","file","accept",".png, .jpg,.jpeg","id","inputFileModelFront",3,"change"],["for","inputFileModelFront",1,"labelInputFile"],["name","foto","type","file","accept",".png, .jpg,.jpeg","id","inputFileModelBack",3,"change"],["for","inputFileModelBack",1,"labelInputFile"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-outline-dark",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-dark"],[1,"row","col-lg-4","mx-auto"],["name","foto","type","file","accept",".png, .jpg,.jpeg","id","inputFile",3,"change"],["for","inputFile",1,"labelInputFileDisk"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5,"Seleccione el tipo del producto"),t.qZA(),t.TgZ(6,"select",5),t.NdJ("ngModelChange",function(i){return o.productType=i})("change",function(){return o.changePhoto()}),t.YNc(7,L,2,1,"option",6),t.qZA()(),t._UZ(8,"hr",7),t.qZA()(),t.TgZ(9,"form",8)(10,"div",9),t.YNc(11,B,55,5,"div",10),t.YNc(12,J,5,1,"div",11),t.TgZ(13,"div",12)(14,"div",13)(15,"label",14)(16,"b"),t._uU(17,"Nombre"),t.qZA()(),t._UZ(18,"input",15),t.qZA(),t.TgZ(19,"div",16)(20,"label",17)(21,"b"),t._uU(22,"Cantidad"),t.qZA()(),t._UZ(23,"input",18),t.qZA(),t.TgZ(24,"div",16)(25,"label",19)(26,"b"),t._uU(27,"Precio"),t.qZA()(),t.TgZ(28,"div",20),t._UZ(29,"input",21),t.TgZ(30,"span",22),t._uU(31,"\u20ac"),t.qZA()()(),t.TgZ(32,"div",23)(33,"label",24)(34,"b"),t._uU(35,"Descripci\xf3n"),t.qZA()(),t._UZ(36,"textarea",25),t.qZA()()(),t.TgZ(37,"div",26)(38,"button",27),t.NdJ("click",function(){return o.goTo("")}),t._uU(39,"Cancelar"),t.qZA(),t.TgZ(40,"button",28),t.NdJ("click",function(){return o.submit()}),t._uU(41,"Subir el producto"),t.qZA()()()()),2&e&&(t.xp6(6),t.Q6J("ngModel",o.productType),t.xp6(1),t.Q6J("ngForOf",o.productTypes),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(2),t.Q6J("ngIf","CLOTHING"==o.productType),t.xp6(1),t.Q6J("ngIf","MUSIC"==o.productType))},directives:[l.EJ,l.Q7,l.JJ,l.On,b.sg,l.YN,l.Kr,l._Y,l.JL,l.sg,b.O5,l.Fj,l.u,l.wV],styles:[".name[_ngcontent-%COMP%]{font-size:450%;color:#ab6c6c;margin-left:5%}.title-new-song[_ngcontent-%COMP%]{font-size:125%}.test[_ngcontent-%COMP%]{max-width:100%}.arreglo[_ngcontent-%COMP%]{margin-top:25px;width:100%}.btn-back[_ngcontent-%COMP%]{background-color:#ab6c6c;border-radius:20px}.info[_ngcontent-%COMP%]{padding:30px}.color-link[_ngcontent-%COMP%]{color:#ab6c6c}.div-pointer[_ngcontent-%COMP%]{text-align:center;width:50%;cursor:pointer}.bg-profile[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/boomclub-tfg.appspot.com/o/backOG3.png?alt=media&token=07ca8e3a-0ce0-49a8-95d6-4a8c2add230d);background-size:cover}#inputFile[_ngcontent-%COMP%], #inputFileFront[_ngcontent-%COMP%], #inputFileBack[_ngcontent-%COMP%], #inputFileModelFront[_ngcontent-%COMP%], #inputFileModelBack[_ngcontent-%COMP%]{display:none}.labelInputFile[_ngcontent-%COMP%]{width:200px;height:200px;padding:1rem;box-shadow:0 0 10px -1px gray;display:flex;justify-content:center;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none}.labelInputFile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px}.labelInputFileDisk[_ngcontent-%COMP%]{width:350px;height:350px;padding:1rem;display:flex;justify-content:center;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none}.labelInputFileDisk[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:350px;height:350px}.labelInputFile[_ngcontent-%COMP%]:active{transform:scale(.9)}@media screen and (max-width: 767px){.ocultar[_ngcontent-%COMP%]{display:none}}"]}),n})(),canActivate:[c(3870).a],pathMatch:"full"}];let R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[b.ez,l.u5,l.UX,M.Bz.forChild(H)],M.Bz]}),n})()}}]);