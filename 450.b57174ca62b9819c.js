"use strict";(self.webpackChunkprueba=self.webpackChunkprueba||[]).push([[450],{2436:(x,v,i)=>{i.d(v,{t:()=>e});var u=i(5861),g=i(5e3),_=i(7407);let e=(()=>{class d{constructor(t){this.firestore=t}getAll(){return this.firestore.collection("merchandising").valueChanges({idField:"id"})}getAllMatches(t){return this.firestore.collection("merchandising",s=>s.startAt(t).endAt(t+"\uf8ff")).valueChanges({idField:"id"})}getAllOrdered(){return this.firestore.collection("merchandising",t=>t.orderBy("product.name")).valueChanges({idField:"id"})}getOne(t){return this.firestore.collection("merchandising").doc(t).valueChanges({idField:"id"})}getByCode(t){return this.firestore.collection("merchandising",s=>s.where("code","==",t)).valueChanges({idField:"id"})}getByArtist(t){return this.firestore.collection("merchandising",s=>s.where("product.artist.username","==",t)).valueChanges({idField:"id"})}getStock(){return this.firestore.collection("merchandising",t=>t.where("stock",">","0")).valueChanges({idField:"id"})}getOutStock(){return this.firestore.collection("merchandising",t=>t.where("stock","==","0")).valueChanges({idField:"id"})}setMerchandising(t){this.merchandising=t}getMerchandising(){return this.merchandising}create(t){var s=this;return(0,u.Z)(function*(){try{return yield s.firestore.collection("merchandising").doc(t.id).set(t)}catch(r){return r}})()}update(t){var s=this;return(0,u.Z)(function*(){try{return yield s.firestore.collection("merchandising").doc(t.id).update(Object.assign({},t))}catch(r){return r}})()}delete(t){var s=this;return(0,u.Z)(function*(){try{return yield s.firestore.collection("merchandising").doc(t).delete()}catch(r){return r}})()}}return d.\u0275fac=function(t){return new(t||d)(g.LFG(_.ST))},d.\u0275prov=g.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},887:(x,v,i)=>{i.d(v,{S:()=>e});var u=i(5861),g=i(5e3),_=i(7407);let e=(()=>{class t{constructor(r){this.firestore=r}getAll(){return this.firestore.collection("product_photos").valueChanges({idField:"id"})}getAllMatches(r){return this.firestore.collection("product_photos",p=>p.startAt(r).endAt(r+"\uf8ff")).valueChanges({idField:"id"})}getOne(r){return this.firestore.collection("product_photos").doc(r).valueChanges({idField:"id"})}getOrderedTypeName(){return this.firestore.collection("product_photos",r=>r.orderBy("photo_type.name")).valueChanges({idField:"id"})}getByProduct(r){return this.firestore.collection("product_photos",p=>p.where("product.id","==",r).orderBy("photo_type.name")).valueChanges({idField:"id"})}setProductPhotos(r){this.product_photos=r}getProductPhotos(){return this.product_photos}create(r){var p=this;return(0,u.Z)(function*(){try{return yield p.firestore.collection("product_photos").doc(r.id).set(r)}catch(m){return m}})()}update(r){var p=this;return(0,u.Z)(function*(){try{return yield p.firestore.collection("product_photos").doc(r.id).update(Object.assign({},r))}catch(m){return m}})()}delete(r){var p=this;return(0,u.Z)(function*(){try{return yield p.firestore.collection("product_photos").doc(r).delete()}catch(m){return m}})()}}return t.\u0275fac=function(r){return new(r||t)(g.LFG(_.ST))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},9958:(x,v,i)=>{i.d(v,{d:()=>e});var u=i(5861),g=i(5e3),_=i(7407);let e=(()=>{class d{constructor(t){this.firestore=t}getAll(){return this.firestore.collection("sizes").valueChanges({idField:"id"})}getAllMatches(t){return this.firestore.collection("sizes",s=>s.startAt(t).endAt(t+"\uf8ff")).valueChanges({idField:"id"})}getOne(t){return this.firestore.collection("sizes").doc(t).valueChanges({idField:"id"})}getBySize(t){return this.firestore.collection("sizes",s=>s.where("size","==",t)).valueChanges({idField:"id"})}setSize(t){this.size=t}getSize(){return this.size}create(t){var s=this;return(0,u.Z)(function*(){try{return yield s.firestore.collection("sizes").doc(t.doc_id).set(t)}catch(r){return r}})()}update(t){var s=this;return(0,u.Z)(function*(){try{return yield s.firestore.collection("sizes").doc(t.doc_id).update(Object.assign({},t))}catch(r){return r}})()}delete(t){var s=this;return(0,u.Z)(function*(){try{return yield s.firestore.collection("sizes").doc(t).delete()}catch(r){return r}})()}}return d.\u0275fac=function(t){return new(t||d)(g.LFG(_.ST))},d.\u0275prov=g.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},8450:(x,v,i)=>{i.r(v),i.d(v,{MerchandisingModule:()=>F});var u=i(9808),g=i(5861),_=i(1042),e=i(5e3),d=i(2382),y=i(629),t=i(3632),s=i(9958),r=i(2436),p=i(887),m=i(246),b=i(5237),c=i(1962),a=i(6115);function C(o,h){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"img",23),e.qZA()),2&o){const n=h.$implicit;e.xp6(1),e.s9C("src",n.photo,e.LSH)}}function M(o,h){if(1&o&&(e.TgZ(0,"div",21),e.YNc(1,C,2,1,"div",22),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.productPhotos)}}function O(o,h){if(1&o&&(e.TgZ(0,"div",26),e._UZ(1,"img",23),e.qZA()),2&o){const n=h.$implicit;e.xp6(1),e.s9C("src",n.photo,e.LSH)}}function w(o,h){if(1&o&&(e.TgZ(0,"div",24),e.YNc(1,O,2,1,"div",25),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.productPhotos)}}function T(o,h){if(1&o&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&o){const n=h.$implicit;e.s9C("value",n.code),e.xp6(1),e.Oqu(n.code)}}function Z(o,h){if(1&o&&(e.TgZ(0,"div",27)(1,"select",28)(2,"option",29),e._uU(3,"TALLAS"),e.qZA(),e.YNc(4,T,2,2,"option",30),e.qZA()()),2&o){const n=e.oxw();e.xp6(4),e.Q6J("ngForOf",n.sizes)}}function A(o,h){1&o&&(e.TgZ(0,"div",32)(1,"span",33),e._uU(2,"Out of stock. "),e.qZA()())}const S=[{path:"",component:(()=>{class o{constructor(n,l,f,P,z,U,E,I,D,B,L){this.formBuilder=n,this.authSrv=l,this.usuarioSrv=f,this.sizesSrv=P,this.merchandisingSrv=z,this.productPhotosSrv=U,this.purchaseSrv=E,this.cartSrv=I,this.storageSrv=D,this.router=B,this.activatedRoute=L,this.prueba=[],this.disabled=!0,this.suscriptions=[],this.type="clothing",this.photo1="front",this.photo2="back",this.photo3="model_front",this.photo4="model_back",this.photo5="model_side"}ngOnInit(){const n=this.activatedRoute.params.subscribe(l=>{this.id=l.id,console.log(this.id,"hola")});this.suscriptions.push(n),this.user=this.usuarioSrv.getUsuario(),this.sizesSrv.getAll().subscribe(l=>this.sizes=l),this.merchandisingSrv.getByCode(this.id).subscribe(l=>{this.merchandising=l[0],this.type=this.merchandising.product.product_type.code,this.productPhotosSrv.getByProduct(this.merchandising.product.id).subscribe(f=>this.productPhotos=f)}),console.log(this.suscriptions),this.form=this.formBuilder.group({})}ngOnDestroy(){}goTo(n){this.router.navigate([n])}logout(){var n=this;return(0,g.Z)(function*(){yield n.authSrv.logout().then(()=>{console.log(n.authSrv.getUsuario())}),n.router.navigate(["/login"])})()}follow(){}onUploadImg(n){let l=n.target.files[0],f=new FileReader;f.readAsDataURL(l),f.onloadend=()=>{this.foto=f.result}}submit(){var n=this;return(0,g.Z)(function*(){console.log("entra");try{let f,P,l=(0,_.Z)();f={id:l,usuario:n.user,paid:!1,created_at:Date.now()},yield n.purchaseSrv.create(f),l=(0,_.Z)(),P={id:l,purchase:f,merchandising:n.merchandising,amount:1},yield n.cartSrv.create(P),n.router.navigate(["/shop"])}catch(l){}})()}back(){history.back()}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(d.qu),e.Y36(y.e),e.Y36(t.L),e.Y36(s.d),e.Y36(r.t),e.Y36(p.S),e.Y36(m.F),e.Y36(b.N),e.Y36(c.V),e.Y36(a.F0),e.Y36(a.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-merchandising"]],decls:30,vars:7,consts:[[1,"bg-light"],[1,"return-btn"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","fill","#0d0d0d","viewBox","0 0 16 16",1,"bi","bi-arrow-left-circle-fill","song-selector",3,"click"],["d","M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"],[1,"col-lg-9","mx-auto","py-md-4"],[1,"d-flex","row","py-4"],[1,"col-8"],["class","d-flex row row-cols-2",4,"ngIf"],["class","d-flex align-items-center justify-content-center row",4,"ngIf"],[1,"col-4"],[1,"form-back"],[1,"form-signin","needs-validation",3,"submit"],[1,"col-lg-11","mx-auto","p-2","ps-5"],[1,"test","d-flex","align-items-center","row","row-cols-1","row-cols-sm-2","row-cols-md-3","g-1"],[1,"w-100"],["class","pt-3",4,"ngIf"],[1,"pt-4",2,"text-align","justify","text-justify","inter-word"],["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","align-items-center","row","row-cols-1","row-cols-sm-1","row-cols-md-4","g-3"],[1,"col-sm-12","col-md-12","col-lg-12"],["type","submit",1,"btn","btn-back","text-white","arreglo"],[1,"d-flex","row","row-cols-2"],[4,"ngFor","ngForOf"],["alt","",1,"merchan-photo","mt-3",3,"src"],[1,"d-flex","align-items-center","justify-content-center","row"],["class","d-flex align-items-center justify-content-center",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","justify-content-center"],[1,"pt-3"],["aria-label","Default select example",1,"form-select","col-12"],["hidden","","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"d-flex","justify-content-center"],[1,"fs-5","text-danger",2,"text-align","justify","text-justify","inter-word"]],template:function(n,l){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e.O4$(),e.TgZ(2,"svg",2),e.NdJ("click",function(){return l.back()}),e._UZ(3,"path",3),e.qZA()(),e.kcU(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6),e.YNc(7,M,2,1,"div",7),e.YNc(8,w,2,1,"div",8),e.qZA(),e.TgZ(9,"div",9)(10,"div",10)(11,"form",11),e.NdJ("submit",function(){return l.submit()}),e.TgZ(12,"div")(13,"div",12)(14,"div",13)(15,"h3",14)(16,"strong"),e._uU(17),e.qZA()(),e.TgZ(18,"h3",14)(19,"strong"),e._uU(20),e.qZA()(),e.TgZ(21,"div",14),e.YNc(22,Z,5,1,"div",15),e.TgZ(23,"p",16),e._uU(24),e.qZA(),e.YNc(25,A,3,0,"div",17),e.qZA()(),e.TgZ(26,"div",18)(27,"div",19)(28,"button",20),e._uU(29,"A\xf1adir a mi cesta"),e.qZA()()()()()()()()()()()),2&n&&(e.xp6(7),e.Q6J("ngIf","CLOTHING"==l.type),e.xp6(1),e.Q6J("ngIf","MUSIC"==l.type),e.xp6(9),e.Oqu(l.merchandising.product.name),e.xp6(3),e.hij("",l.merchandising.prize,"\u20ac"),e.xp6(2),e.Q6J("ngIf","CLOTHING"==l.type),e.xp6(2),e.Oqu(l.merchandising.product.description),e.xp6(1),e.Q6J("ngIf",l.merchandising.stock<1))},directives:[u.O5,u.sg,d._Y,d.JL,d.F,d.YN,d.Kr],styles:[".name[_ngcontent-%COMP%]{font-size:450%;color:#f2ebdc;margin-left:5%}.title-new-song[_ngcontent-%COMP%]{font-size:125%}.test[_ngcontent-%COMP%]{max-width:100%}.arreglo[_ngcontent-%COMP%]{margin-top:30px;width:100%}.btn-back[_ngcontent-%COMP%]{background-color:#0d0d0d;border-radius:6px}.info[_ngcontent-%COMP%]{padding:30px}.color-link[_ngcontent-%COMP%]{color:#f2ebdc}.div-pointer[_ngcontent-%COMP%]{text-align:center;width:50%;cursor:pointer}.bg-profile[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/samesouls-tfg.appspot.com/o/backOG3.png?alt=media&token=07ca8e3a-0ce0-49a8-95d6-4a8c2add230d);background-size:cover}#inputFile[_ngcontent-%COMP%]{display:none}.labelInputFile[_ngcontent-%COMP%]{width:200px;height:200px;padding:1rem;box-shadow:0 0 10px -1px gray;display:flex;justify-content:center;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none}.labelInputFile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px}.labelInputFile[_ngcontent-%COMP%]:active{transform:scale(.9)}@media screen and (max-width: 767px){.ocultar[_ngcontent-%COMP%]{display:none}}.merchan-photo[_ngcontent-%COMP%]{width:25vw}.return-btn[_ngcontent-%COMP%]{position:fixed;top:12vh;left:1vw}"]}),o})(),children:[]}];let F=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.ez,d.u5,d.UX,a.Bz.forChild(S)],a.Bz]}),o})()},1042:(x,v,i)=>{i.d(v,{Z:()=>b});var u,g=new Uint8Array(16);function _(){if(!u&&!(u="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return u(g)}const e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,y=function d(c){return"string"==typeof c&&e.test(c)};for(var t=[],s=0;s<256;++s)t.push((s+256).toString(16).substr(1));const b=function m(c,a,C){var M=(c=c||{}).random||(c.rng||_)();if(M[6]=15&M[6]|64,M[8]=63&M[8]|128,a){C=C||0;for(var O=0;O<16;++O)a[C+O]=M[O];return a}return function r(c){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,C=(t[c[a+0]]+t[c[a+1]]+t[c[a+2]]+t[c[a+3]]+"-"+t[c[a+4]]+t[c[a+5]]+"-"+t[c[a+6]]+t[c[a+7]]+"-"+t[c[a+8]]+t[c[a+9]]+"-"+t[c[a+10]]+t[c[a+11]]+t[c[a+12]]+t[c[a+13]]+t[c[a+14]]+t[c[a+15]]).toLowerCase();if(!y(C))throw TypeError("Stringified UUID is invalid");return C}(M)}}}]);